var td=Object.defineProperty;var ed=(s,t,e)=>t in s?td(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var C=(s,t,e)=>(ed(s,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();function N(){}const sd=s=>s;function id(s){return!!s&&(typeof s=="object"||typeof s=="function")&&typeof s.then=="function"}function $c(s){return s()}function ea(){return Object.create(null)}function he(s){s.forEach($c)}function Un(s){return typeof s=="function"}function ue(s,t){return s!=s?t==t:s!==t||s&&typeof s=="object"||typeof s=="function"}function nd(s){return Object.keys(s).length===0}function Fc(s,...t){if(s==null){for(const i of t)i(void 0);return N}const e=s.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function jc(s){let t;return Fc(s,e=>t=e)(),t}function cs(s,t,e){s.$$.on_destroy.push(Fc(t,e))}function Gt(s){return s??""}const zc=typeof window<"u";let rd=zc?()=>window.performance.now():()=>Date.now(),vo=zc?s=>requestAnimationFrame(s):N;const Ds=new Set;function Vc(s){Ds.forEach(t=>{t.c(s)||(Ds.delete(t),t.f())}),Ds.size!==0&&vo(Vc)}function od(s){let t;return Ds.size===0&&vo(Vc),{promise:new Promise(e=>{Ds.add(t={c:s,f:e})}),abort(){Ds.delete(t)}}}function y(s,t){s.appendChild(t)}function Wc(s){if(!s)return document;const t=s.getRootNode?s.getRootNode():s.ownerDocument;return t&&t.host?t:s.ownerDocument}function ad(s){const t=S("style");return t.textContent="/* empty */",ld(Wc(s),t),t.sheet}function ld(s,t){return y(s.head||s,t),t.sheet}function et(s,t,e){s.insertBefore(t,e||null)}function Q(s){s.parentNode&&s.parentNode.removeChild(s)}function wo(s,t){for(let e=0;e<s.length;e+=1)s[e]&&s[e].d(t)}function S(s){return document.createElement(s)}function ct(s){return document.createTextNode(s)}function I(){return ct(" ")}function qn(){return ct("")}function ht(s,t,e,i){return s.addEventListener(t,e,i),()=>s.removeEventListener(t,e,i)}function k(s,t,e){e==null?s.removeAttribute(t):s.getAttribute(t)!==e&&s.setAttribute(t,e)}function As(s){return s===""?null:+s}function cd(s){return Array.from(s.childNodes)}function Zt(s,t){t=""+t,s.data!==t&&(s.data=t)}function dt(s,t){s.value=t??""}function sa(s,t,e){for(let i=0;i<s.options.length;i+=1){const n=s.options[i];if(n.__value===t){n.selected=!0;return}}(!e||t!==void 0)&&(s.selectedIndex=-1)}function hd(s){const t=s.querySelector(":checked");return t&&t.__value}function Bc(s,t,{bubbles:e=!1,cancelable:i=!1}={}){return new CustomEvent(s,{detail:t,bubbles:e,cancelable:i})}const Dn=new Map;let An=0;function ud(s){let t=5381,e=s.length;for(;e--;)t=(t<<5)-t^s.charCodeAt(e);return t>>>0}function dd(s,t){const e={stylesheet:ad(t),rules:{}};return Dn.set(s,e),e}function ia(s,t,e,i,n,r,o,a=0){const l=16.666/i;let c=`{
`;for(let m=0;m<=1;m+=l){const _=t+(e-t)*r(m);c+=m*100+`%{${o(_,1-_)}}
`}const h=c+`100% {${o(e,1-e)}}
}`,u=`__svelte_${ud(h)}_${a}`,d=Wc(s),{stylesheet:f,rules:g}=Dn.get(d)||dd(d,s);g[u]||(g[u]=!0,f.insertRule(`@keyframes ${u} ${h}`,f.cssRules.length));const p=s.style.animation||"";return s.style.animation=`${p?`${p}, `:""}${u} ${i}ms linear ${n}ms 1 both`,An+=1,u}function fd(s,t){const e=(s.style.animation||"").split(", "),i=e.filter(t?r=>r.indexOf(t)<0:r=>r.indexOf("__svelte")===-1),n=e.length-i.length;n&&(s.style.animation=i.join(", "),An-=n,An||gd())}function gd(){vo(()=>{An||(Dn.forEach(s=>{const{ownerNode:t}=s.stylesheet;t&&Q(t)}),Dn.clear())})}let Oi;function ye(s){Oi=s}function Yn(){if(!Oi)throw new Error("Function called outside component initialization");return Oi}function xo(s){Yn().$$.on_mount.push(s)}function Hc(s){Yn().$$.on_destroy.push(s)}function md(){const s=Yn();return(t,e,{cancelable:i=!1}={})=>{const n=s.$$.callbacks[t];if(n){const r=Bc(t,e,{cancelable:i});return n.slice().forEach(o=>{o.call(s,r)}),!r.defaultPrevented}return!0}}const Ms=[],hs=[];let Ps=[];const na=[],pd=Promise.resolve();let Vr=!1;function _d(){Vr||(Vr=!0,pd.then(ko))}function us(s){Ps.push(s)}const cr=new Set;let _s=0;function ko(){if(_s!==0)return;const s=Oi;do{try{for(;_s<Ms.length;){const t=Ms[_s];_s++,ye(t),bd(t.$$)}}catch(t){throw Ms.length=0,_s=0,t}for(ye(null),Ms.length=0,_s=0;hs.length;)hs.pop()();for(let t=0;t<Ps.length;t+=1){const e=Ps[t];cr.has(e)||(cr.add(e),e())}Ps.length=0}while(Ms.length);for(;na.length;)na.pop()();Vr=!1,cr.clear(),ye(s)}function bd(s){if(s.fragment!==null){s.update(),he(s.before_update);const t=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,t),s.after_update.forEach(us)}}function yd(s){const t=[],e=[];Ps.forEach(i=>s.indexOf(i)===-1?t.push(i):e.push(i)),e.forEach(i=>i()),Ps=t}let Qs;function vd(){return Qs||(Qs=Promise.resolve(),Qs.then(()=>{Qs=null})),Qs}function hr(s,t,e){s.dispatchEvent(Bc(`${t?"intro":"outro"}${e}`))}const bn=new Set;let ve;function Gn(){ve={r:0,c:[],p:ve}}function Zn(){ve.r||he(ve.c),ve=ve.p}function kt(s,t){s&&s.i&&(bn.delete(s),s.i(t))}function Et(s,t,e,i){if(s&&s.o){if(bn.has(s))return;bn.add(s),ve.c.push(()=>{bn.delete(s),i&&(e&&s.d(1),i())}),s.o(t)}else i&&i()}const wd={duration:0};function Pn(s,t,e,i){let r=t(s,e,{direction:"both"}),o=i?0:1,a=null,l=null,c=null,h;function u(){c&&fd(s,c)}function d(g,p){const m=g.b-o;return p*=Math.abs(m),{a:o,b:g.b,d:m,duration:p,start:g.start,end:g.start+p,group:g.group}}function f(g){const{delay:p=0,duration:m=300,easing:_=sd,tick:b=N,css:w}=r||wd,v={start:rd()+p,b:g};g||(v.group=ve,ve.r+=1),"inert"in s&&(g?h!==void 0&&(s.inert=h):(h=s.inert,s.inert=!0)),a||l?l=v:(w&&(u(),c=ia(s,o,g,m,p,_,w)),g&&b(0,1),a=d(v,m),us(()=>hr(s,g,"start")),od(x=>{if(l&&x>l.start&&(a=d(l,m),l=null,hr(s,a.b,"start"),w&&(u(),c=ia(s,o,a.b,a.duration,0,_,r.css))),a){if(x>=a.end)b(o=a.b,1-o),hr(s,a.b,"end"),l||(a.b?u():--a.group.r||he(a.group.c)),a=null;else if(x>=a.start){const O=x-a.start;o=a.a+a.d*_(O/a.duration),b(o,1-o)}}return!!(a||l)}))}return{run(g){Un(r)?vd().then(()=>{r=r({direction:g?"in":"out"}),f(g)}):f(g)},end(){u(),a=l=null}}}function Wr(s,t){const e=t.token={};function i(n,r,o,a){if(t.token!==e)return;t.resolved=a;let l=t.ctx;o!==void 0&&(l=l.slice(),l[o]=a);const c=n&&(t.current=n)(l);let h=!1;t.block&&(t.blocks?t.blocks.forEach((u,d)=>{d!==r&&u&&(Gn(),Et(u,1,1,()=>{t.blocks[d]===u&&(t.blocks[d]=null)}),Zn())}):t.block.d(1),c.c(),kt(c,1),c.m(t.mount(),t.anchor),h=!0),t.block=c,t.blocks&&(t.blocks[r]=c),h&&ko()}if(id(s)){const n=Yn();if(s.then(r=>{ye(n),i(t.then,1,t.value,r),ye(null)},r=>{if(ye(n),i(t.catch,2,t.error,r),ye(null),!t.hasCatch)throw r}),t.current!==t.pending)return i(t.pending,0),!0}else{if(t.current!==t.then)return i(t.then,1,t.value,s),!0;t.resolved=s}}function Br(s,t,e){const i=t.slice(),{resolved:n}=s;s.current===s.then&&(i[s.value]=n),s.current===s.catch&&(i[s.error]=n),s.block.p(i,e)}function $s(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function Ve(s){s&&s.c()}function Se(s,t,e){const{fragment:i,after_update:n}=s.$$;i&&i.m(t,e),us(()=>{const r=s.$$.on_mount.map($c).filter(Un);s.$$.on_destroy?s.$$.on_destroy.push(...r):he(r),s.$$.on_mount=[]}),n.forEach(us)}function Oe(s,t){const e=s.$$;e.fragment!==null&&(yd(e.after_update),he(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function xd(s,t){s.$$.dirty[0]===-1&&(Ms.push(s),_d(),s.$$.dirty.fill(0)),s.$$.dirty[t/31|0]|=1<<t%31}function Me(s,t,e,i,n,r,o=null,a=[-1]){const l=Oi;ye(s);const c=s.$$={fragment:null,ctx:[],props:r,update:N,not_equal:n,bound:ea(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:ea(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};o&&o(c.root);let h=!1;if(c.ctx=e?e(s,t.props||{},(u,d,...f)=>{const g=f.length?f[0]:d;return c.ctx&&n(c.ctx[u],c.ctx[u]=g)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](g),h&&xd(s,u)),d}):[],c.update(),h=!0,he(c.before_update),c.fragment=i?i(c.ctx):!1,t.target){if(t.hydrate){const u=cd(t.target);c.fragment&&c.fragment.l(u),u.forEach(Q)}else c.fragment&&c.fragment.c();t.intro&&kt(s.$$.fragment),Se(s,t.target,t.anchor),ko()}ye(l)}class Ee{constructor(){C(this,"$$");C(this,"$$set")}$destroy(){Oe(this,1),this.$destroy=N}$on(t,e){if(!Un(e))return N;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(e),()=>{const n=i.indexOf(e);n!==-1&&i.splice(n,1)}}$set(t){this.$$set&&!nd(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const kd="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(kd);function Uc(s){const t=s-1;return t*t*t+1}function ra(s,{delay:t=0,duration:e=400,easing:i=Uc,axis:n="y"}={}){const r=getComputedStyle(s),o=+r.opacity,a=n==="y"?"height":"width",l=parseFloat(r[a]),c=n==="y"?["top","bottom"]:["left","right"],h=c.map(_=>`${_[0].toUpperCase()}${_.slice(1)}`),u=parseFloat(r[`padding${h[0]}`]),d=parseFloat(r[`padding${h[1]}`]),f=parseFloat(r[`margin${h[0]}`]),g=parseFloat(r[`margin${h[1]}`]),p=parseFloat(r[`border${h[0]}Width`]),m=parseFloat(r[`border${h[1]}Width`]);return{delay:t,duration:e,easing:i,css:_=>`overflow: hidden;opacity: ${Math.min(_*20,1)*o};${a}: ${_*l}px;padding-${c[0]}: ${_*u}px;padding-${c[1]}: ${_*d}px;margin-${c[0]}: ${_*f}px;margin-${c[1]}: ${_*g}px;border-${c[0]}-width: ${_*p}px;border-${c[1]}-width: ${_*m}px;`}}function oa(s,{delay:t=0,duration:e=400,easing:i=Uc,start:n=0,opacity:r=0}={}){const o=getComputedStyle(s),a=+o.opacity,l=o.transform==="none"?"":o.transform,c=1-n,h=a*(1-r);return{delay:t,duration:e,easing:i,css:(u,d)=>`
			transform: ${l} scale(${1-c*d});
			opacity: ${a-h*d}
		`}}/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function $i(s){return s+.5|0}const Ne=(s,t,e)=>Math.max(Math.min(s,e),t);function li(s){return Ne($i(s*2.55),0,255)}function ze(s){return Ne($i(s*255),0,255)}function be(s){return Ne($i(s/2.55)/100,0,1)}function aa(s){return Ne($i(s*100),0,100)}const Ut={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Hr=[..."0123456789ABCDEF"],Sd=s=>Hr[s&15],Od=s=>Hr[(s&240)>>4]+Hr[s&15],Yi=s=>(s&240)>>4===(s&15),Td=s=>Yi(s.r)&&Yi(s.g)&&Yi(s.b)&&Yi(s.a);function Md(s){var t=s.length,e;return s[0]==="#"&&(t===4||t===5?e={r:255&Ut[s[1]]*17,g:255&Ut[s[2]]*17,b:255&Ut[s[3]]*17,a:t===5?Ut[s[4]]*17:255}:(t===7||t===9)&&(e={r:Ut[s[1]]<<4|Ut[s[2]],g:Ut[s[3]]<<4|Ut[s[4]],b:Ut[s[5]]<<4|Ut[s[6]],a:t===9?Ut[s[7]]<<4|Ut[s[8]]:255})),e}const Ed=(s,t)=>s<255?t(s):"";function Cd(s){var t=Td(s)?Sd:Od;return s?"#"+t(s.r)+t(s.g)+t(s.b)+Ed(s.a,t):void 0}const Dd=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function qc(s,t,e){const i=t*Math.min(e,1-e),n=(r,o=(r+s/30)%12)=>e-i*Math.max(Math.min(o-3,9-o,1),-1);return[n(0),n(8),n(4)]}function Ad(s,t,e){const i=(n,r=(n+s/60)%6)=>e-e*t*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function Pd(s,t,e){const i=qc(s,1,.5);let n;for(t+e>1&&(n=1/(t+e),t*=n,e*=n),n=0;n<3;n++)i[n]*=1-t-e,i[n]+=t;return i}function Id(s,t,e,i,n){return s===n?(t-e)/i+(t<e?6:0):t===n?(e-s)/i+2:(s-t)/i+4}function So(s){const e=s.r/255,i=s.g/255,n=s.b/255,r=Math.max(e,i,n),o=Math.min(e,i,n),a=(r+o)/2;let l,c,h;return r!==o&&(h=r-o,c=a>.5?h/(2-r-o):h/(r+o),l=Id(e,i,n,h,r),l=l*60+.5),[l|0,c||0,a]}function Oo(s,t,e,i){return(Array.isArray(t)?s(t[0],t[1],t[2]):s(t,e,i)).map(ze)}function To(s,t,e){return Oo(qc,s,t,e)}function Ld(s,t,e){return Oo(Pd,s,t,e)}function Rd(s,t,e){return Oo(Ad,s,t,e)}function Yc(s){return(s%360+360)%360}function Nd(s){const t=Dd.exec(s);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?li(+t[5]):ze(+t[5]));const n=Yc(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?i=Ld(n,r,o):t[1]==="hsv"?i=Rd(n,r,o):i=To(n,r,o),{r:i[0],g:i[1],b:i[2],a:e}}function $d(s,t){var e=So(s);e[0]=Yc(e[0]+t),e=To(e),s.r=e[0],s.g=e[1],s.b=e[2]}function Fd(s){if(!s)return;const t=So(s),e=t[0],i=aa(t[1]),n=aa(t[2]);return s.a<255?`hsla(${e}, ${i}%, ${n}%, ${be(s.a)})`:`hsl(${e}, ${i}%, ${n}%)`}const la={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ca={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function jd(){const s={},t=Object.keys(ca),e=Object.keys(la);let i,n,r,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],n=0;n<e.length;n++)r=e[n],a=a.replace(r,la[r]);r=parseInt(ca[o],16),s[a]=[r>>16&255,r>>8&255,r&255]}return s}let Gi;function zd(s){Gi||(Gi=jd(),Gi.transparent=[0,0,0,0]);const t=Gi[s.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const Vd=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Wd(s){const t=Vd.exec(s);let e=255,i,n,r;if(t){if(t[7]!==i){const o=+t[7];e=t[8]?li(o):Ne(o*255,0,255)}return i=+t[1],n=+t[3],r=+t[5],i=255&(t[2]?li(i):Ne(i,0,255)),n=255&(t[4]?li(n):Ne(n,0,255)),r=255&(t[6]?li(r):Ne(r,0,255)),{r:i,g:n,b:r,a:e}}}function Bd(s){return s&&(s.a<255?`rgba(${s.r}, ${s.g}, ${s.b}, ${be(s.a)})`:`rgb(${s.r}, ${s.g}, ${s.b})`)}const ur=s=>s<=.0031308?s*12.92:Math.pow(s,1/2.4)*1.055-.055,bs=s=>s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4);function Hd(s,t,e){const i=bs(be(s.r)),n=bs(be(s.g)),r=bs(be(s.b));return{r:ze(ur(i+e*(bs(be(t.r))-i))),g:ze(ur(n+e*(bs(be(t.g))-n))),b:ze(ur(r+e*(bs(be(t.b))-r))),a:s.a+e*(t.a-s.a)}}function Zi(s,t,e){if(s){let i=So(s);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=To(i),s.r=i[0],s.g=i[1],s.b=i[2]}}function Gc(s,t){return s&&Object.assign(t||{},s)}function ha(s){var t={r:0,g:0,b:0,a:255};return Array.isArray(s)?s.length>=3&&(t={r:s[0],g:s[1],b:s[2],a:255},s.length>3&&(t.a=ze(s[3]))):(t=Gc(s,{r:0,g:0,b:0,a:1}),t.a=ze(t.a)),t}function Ud(s){return s.charAt(0)==="r"?Wd(s):Nd(s)}class Ti{constructor(t){if(t instanceof Ti)return t;const e=typeof t;let i;e==="object"?i=ha(t):e==="string"&&(i=Md(t)||zd(t)||Ud(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=Gc(this._rgb);return t&&(t.a=be(t.a)),t}set rgb(t){this._rgb=ha(t)}rgbString(){return this._valid?Bd(this._rgb):void 0}hexString(){return this._valid?Cd(this._rgb):void 0}hslString(){return this._valid?Fd(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,n=t.rgb;let r;const o=e===r?.5:e,a=2*o-1,l=i.a-n.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,i.r=255&c*i.r+r*n.r+.5,i.g=255&c*i.g+r*n.g+.5,i.b=255&c*i.b+r*n.b+.5,i.a=o*i.a+(1-o)*n.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=Hd(this._rgb,t._rgb,e)),this}clone(){return new Ti(this.rgb)}alpha(t){return this._rgb.a=ze(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=$i(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Zi(this._rgb,2,t),this}darken(t){return Zi(this._rgb,2,-t),this}saturate(t){return Zi(this._rgb,1,t),this}desaturate(t){return Zi(this._rgb,1,-t),this}rotate(t){return $d(this._rgb,t),this}}/*!
 * Chart.js v4.4.3
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function me(){}const qd=(()=>{let s=0;return()=>s++})();function Y(s){return s===null||typeof s>"u"}function ut(s){if(Array.isArray&&Array.isArray(s))return!0;const t=Object.prototype.toString.call(s);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function B(s){return s!==null&&Object.prototype.toString.call(s)==="[object Object]"}function mt(s){return(typeof s=="number"||s instanceof Number)&&isFinite(+s)}function Wt(s,t){return mt(s)?s:t}function j(s,t){return typeof s>"u"?t:s}const Yd=(s,t)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100:+s/t,Zc=(s,t)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100*t:+s;function it(s,t,e){if(s&&typeof s.call=="function")return s.apply(e,t)}function X(s,t,e,i){let n,r,o;if(ut(s))for(r=s.length,n=0;n<r;n++)t.call(e,s[n],n);else if(B(s))for(o=Object.keys(s),r=o.length,n=0;n<r;n++)t.call(e,s[o[n]],o[n])}function In(s,t){let e,i,n,r;if(!s||!t||s.length!==t.length)return!1;for(e=0,i=s.length;e<i;++e)if(n=s[e],r=t[e],n.datasetIndex!==r.datasetIndex||n.index!==r.index)return!1;return!0}function Ln(s){if(ut(s))return s.map(Ln);if(B(s)){const t=Object.create(null),e=Object.keys(s),i=e.length;let n=0;for(;n<i;++n)t[e[n]]=Ln(s[e[n]]);return t}return s}function Jc(s){return["__proto__","prototype","constructor"].indexOf(s)===-1}function Gd(s,t,e,i){if(!Jc(s))return;const n=t[s],r=e[s];B(n)&&B(r)?Mi(n,r,i):t[s]=Ln(r)}function Mi(s,t,e){const i=ut(t)?t:[t],n=i.length;if(!B(s))return s;e=e||{};const r=e.merger||Gd;let o;for(let a=0;a<n;++a){if(o=i[a],!B(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)r(l[c],s,o,e)}return s}function pi(s,t){return Mi(s,t,{merger:Zd})}function Zd(s,t,e){if(!Jc(s))return;const i=t[s],n=e[s];B(i)&&B(n)?pi(i,n):Object.prototype.hasOwnProperty.call(t,s)||(t[s]=Ln(n))}const ua={"":s=>s,x:s=>s.x,y:s=>s.y};function Jd(s){const t=s.split("."),e=[];let i="";for(const n of t)i+=n,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function Kd(s){const t=Jd(s);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function We(s,t){return(ua[t]||(ua[t]=Kd(t)))(s)}function Mo(s){return s.charAt(0).toUpperCase()+s.slice(1)}const Ei=s=>typeof s<"u",Be=s=>typeof s=="function",da=(s,t)=>{if(s.size!==t.size)return!1;for(const e of s)if(!t.has(e))return!1;return!0};function Xd(s){return s.type==="mouseup"||s.type==="click"||s.type==="contextmenu"}const ot=Math.PI,rt=2*ot,Qd=rt+ot,Rn=Number.POSITIVE_INFINITY,tf=ot/180,yt=ot/2,qe=ot/4,fa=ot*2/3,$e=Math.log10,ge=Math.sign;function _i(s,t,e){return Math.abs(s-t)<e}function ga(s){const t=Math.round(s);s=_i(s,t,s/1e3)?t:s;const e=Math.pow(10,Math.floor($e(s))),i=s/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function ef(s){const t=[],e=Math.sqrt(s);let i;for(i=1;i<e;i++)s%i===0&&(t.push(i),t.push(s/i));return e===(e|0)&&t.push(e),t.sort((n,r)=>n-r).pop(),t}function Fs(s){return!isNaN(parseFloat(s))&&isFinite(s)}function sf(s,t){const e=Math.round(s);return e-t<=s&&e+t>=s}function Kc(s,t,e){let i,n,r;for(i=0,n=s.length;i<n;i++)r=s[i][e],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function re(s){return s*(ot/180)}function Eo(s){return s*(180/ot)}function ma(s){if(!mt(s))return;let t=1,e=0;for(;Math.round(s*t)/t!==s;)t*=10,e++;return e}function Xc(s,t){const e=t.x-s.x,i=t.y-s.y,n=Math.sqrt(e*e+i*i);let r=Math.atan2(i,e);return r<-.5*ot&&(r+=rt),{angle:r,distance:n}}function Ur(s,t){return Math.sqrt(Math.pow(t.x-s.x,2)+Math.pow(t.y-s.y,2))}function nf(s,t){return(s-t+Qd)%rt-ot}function Bt(s){return(s%rt+rt)%rt}function Ci(s,t,e,i){const n=Bt(s),r=Bt(t),o=Bt(e),a=Bt(r-n),l=Bt(o-n),c=Bt(n-r),h=Bt(n-o);return n===r||n===o||i&&r===o||a>l&&c<h}function Tt(s,t,e){return Math.max(t,Math.min(e,s))}function rf(s){return Tt(s,-32768,32767)}function we(s,t,e,i=1e-6){return s>=Math.min(t,e)-i&&s<=Math.max(t,e)+i}function Co(s,t,e){e=e||(o=>s[o]<t);let i=s.length-1,n=0,r;for(;i-n>1;)r=n+i>>1,e(r)?n=r:i=r;return{lo:n,hi:i}}const xe=(s,t,e,i)=>Co(s,e,i?n=>{const r=s[n][t];return r<e||r===e&&s[n+1][t]===e}:n=>s[n][t]<e),of=(s,t,e)=>Co(s,e,i=>s[i][t]>=e);function af(s,t,e){let i=0,n=s.length;for(;i<n&&s[i]<t;)i++;for(;n>i&&s[n-1]>e;)n--;return i>0||n<s.length?s.slice(i,n):s}const Qc=["push","pop","shift","splice","unshift"];function lf(s,t){if(s._chartjs){s._chartjs.listeners.push(t);return}Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Qc.forEach(e=>{const i="_onData"+Mo(e),n=s[e];Object.defineProperty(s,e,{configurable:!0,enumerable:!1,value(...r){const o=n.apply(this,r);return s._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function pa(s,t){const e=s._chartjs;if(!e)return;const i=e.listeners,n=i.indexOf(t);n!==-1&&i.splice(n,1),!(i.length>0)&&(Qc.forEach(r=>{delete s[r]}),delete s._chartjs)}function th(s){const t=new Set(s);return t.size===s.length?s:Array.from(t)}const eh=function(){return typeof window>"u"?function(s){return s()}:window.requestAnimationFrame}();function sh(s,t){let e=[],i=!1;return function(...n){e=n,i||(i=!0,eh.call(window,()=>{i=!1,s.apply(t,e)}))}}function cf(s,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(s,t,i)):s.apply(this,i),t}}const Do=s=>s==="start"?"left":s==="end"?"right":"center",Ct=(s,t,e)=>s==="start"?t:s==="end"?e:(t+e)/2,hf=(s,t,e,i)=>s===(i?"left":"right")?e:s==="center"?(t+e)/2:t;function ih(s,t,e){const i=t.length;let n=0,r=i;if(s._sorted){const{iScale:o,_parsed:a}=s,l=o.axis,{min:c,max:h,minDefined:u,maxDefined:d}=o.getUserBounds();u&&(n=Tt(Math.min(xe(a,l,c).lo,e?i:xe(t,l,o.getPixelForValue(c)).lo),0,i-1)),d?r=Tt(Math.max(xe(a,o.axis,h,!0).hi+1,e?0:xe(t,l,o.getPixelForValue(h),!0).hi+1),n,i)-n:r=i-n}return{start:n,count:r}}function nh(s){const{xScale:t,yScale:e,_scaleRanges:i}=s,n={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return s._scaleRanges=n,!0;const r=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,n),r}const Ji=s=>s===0||s===1,_a=(s,t,e)=>-(Math.pow(2,10*(s-=1))*Math.sin((s-t)*rt/e)),ba=(s,t,e)=>Math.pow(2,-10*s)*Math.sin((s-t)*rt/e)+1,bi={linear:s=>s,easeInQuad:s=>s*s,easeOutQuad:s=>-s*(s-2),easeInOutQuad:s=>(s/=.5)<1?.5*s*s:-.5*(--s*(s-2)-1),easeInCubic:s=>s*s*s,easeOutCubic:s=>(s-=1)*s*s+1,easeInOutCubic:s=>(s/=.5)<1?.5*s*s*s:.5*((s-=2)*s*s+2),easeInQuart:s=>s*s*s*s,easeOutQuart:s=>-((s-=1)*s*s*s-1),easeInOutQuart:s=>(s/=.5)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2),easeInQuint:s=>s*s*s*s*s,easeOutQuint:s=>(s-=1)*s*s*s*s+1,easeInOutQuint:s=>(s/=.5)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2),easeInSine:s=>-Math.cos(s*yt)+1,easeOutSine:s=>Math.sin(s*yt),easeInOutSine:s=>-.5*(Math.cos(ot*s)-1),easeInExpo:s=>s===0?0:Math.pow(2,10*(s-1)),easeOutExpo:s=>s===1?1:-Math.pow(2,-10*s)+1,easeInOutExpo:s=>Ji(s)?s:s<.5?.5*Math.pow(2,10*(s*2-1)):.5*(-Math.pow(2,-10*(s*2-1))+2),easeInCirc:s=>s>=1?s:-(Math.sqrt(1-s*s)-1),easeOutCirc:s=>Math.sqrt(1-(s-=1)*s),easeInOutCirc:s=>(s/=.5)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1),easeInElastic:s=>Ji(s)?s:_a(s,.075,.3),easeOutElastic:s=>Ji(s)?s:ba(s,.075,.3),easeInOutElastic(s){return Ji(s)?s:s<.5?.5*_a(s*2,.1125,.45):.5+.5*ba(s*2-1,.1125,.45)},easeInBack(s){return s*s*((1.70158+1)*s-1.70158)},easeOutBack(s){return(s-=1)*s*((1.70158+1)*s+1.70158)+1},easeInOutBack(s){let t=1.70158;return(s/=.5)<1?.5*(s*s*(((t*=1.525)+1)*s-t)):.5*((s-=2)*s*(((t*=1.525)+1)*s+t)+2)},easeInBounce:s=>1-bi.easeOutBounce(1-s),easeOutBounce(s){return s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375},easeInOutBounce:s=>s<.5?bi.easeInBounce(s*2)*.5:bi.easeOutBounce(s*2-1)*.5+.5};function Ao(s){if(s&&typeof s=="object"){const t=s.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function ya(s){return Ao(s)?s:new Ti(s)}function dr(s){return Ao(s)?s:new Ti(s).saturate(.5).darken(.1).hexString()}const uf=["x","y","borderWidth","radius","tension"],df=["color","borderColor","backgroundColor"];function ff(s){s.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),s.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),s.set("animations",{colors:{type:"color",properties:df},numbers:{type:"number",properties:uf}}),s.describe("animations",{_fallback:"animation"}),s.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function gf(s){s.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const va=new Map;function mf(s,t){t=t||{};const e=s+JSON.stringify(t);let i=va.get(e);return i||(i=new Intl.NumberFormat(s,t),va.set(e,i)),i}function Fi(s,t,e){return mf(t,e).format(s)}const rh={values(s){return ut(s)?s:""+s},numeric(s,t,e){if(s===0)return"0";const i=this.chart.options.locale;let n,r=s;if(e.length>1){const c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(n="scientific"),r=pf(s,e)}const o=$e(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:n,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Fi(s,i,l)},logarithmic(s,t,e){if(s===0)return"0";const i=e[t].significand||s/Math.pow(10,Math.floor($e(s)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?rh.numeric.call(this,s,t,e):""}};function pf(s,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&s!==Math.floor(s)&&(e=s-Math.floor(s)),e}var Jn={formatters:rh};function _f(s){s.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Jn.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),s.route("scale.ticks","color","","color"),s.route("scale.grid","color","","borderColor"),s.route("scale.border","color","","borderColor"),s.route("scale.title","color","","color"),s.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),s.describe("scales",{_fallback:"scale"}),s.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const ds=Object.create(null),qr=Object.create(null);function yi(s,t){if(!t)return s;const e=t.split(".");for(let i=0,n=e.length;i<n;++i){const r=e[i];s=s[r]||(s[r]=Object.create(null))}return s}function fr(s,t,e){return typeof t=="string"?Mi(yi(s,t),e):Mi(yi(s,""),t)}class bf{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,n)=>dr(n.backgroundColor),this.hoverBorderColor=(i,n)=>dr(n.borderColor),this.hoverColor=(i,n)=>dr(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return fr(this,t,e)}get(t){return yi(this,t)}describe(t,e){return fr(qr,t,e)}override(t,e){return fr(ds,t,e)}route(t,e,i,n){const r=yi(this,t),o=yi(this,i),a="_"+e;Object.defineProperties(r,{[a]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[a],c=o[n];return B(l)?Object.assign({},c,l):j(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}}var pt=new bf({_scriptable:s=>!s.startsWith("on"),_indexable:s=>s!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[ff,gf,_f]);function yf(s){return!s||Y(s.size)||Y(s.family)?null:(s.style?s.style+" ":"")+(s.weight?s.weight+" ":"")+s.size+"px "+s.family}function Nn(s,t,e,i,n){let r=t[n];return r||(r=t[n]=s.measureText(n).width,e.push(n)),r>i&&(i=r),i}function vf(s,t,e,i){i=i||{};let n=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(n=i.data={},r=i.garbageCollect=[],i.font=t),s.save(),s.font=t;let o=0;const a=e.length;let l,c,h,u,d;for(l=0;l<a;l++)if(u=e[l],u!=null&&!ut(u))o=Nn(s,n,r,o,u);else if(ut(u))for(c=0,h=u.length;c<h;c++)d=u[c],d!=null&&!ut(d)&&(o=Nn(s,n,r,o,d));s.restore();const f=r.length/2;if(f>e.length){for(l=0;l<f;l++)delete n[r[l]];r.splice(0,f)}return o}function Ye(s,t,e){const i=s.currentDevicePixelRatio,n=e!==0?Math.max(e/2,.5):0;return Math.round((t-n)*i)/i+n}function wa(s,t){!t&&!s||(t=t||s.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,s.width,s.height),t.restore())}function Yr(s,t,e,i){oh(s,t,e,i,null)}function oh(s,t,e,i,n){let r,o,a,l,c,h,u,d;const f=t.pointStyle,g=t.rotation,p=t.radius;let m=(g||0)*tf;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){s.save(),s.translate(e,i),s.rotate(m),s.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),s.restore();return}if(!(isNaN(p)||p<=0)){switch(s.beginPath(),f){default:n?s.ellipse(e,i,n/2,p,0,0,rt):s.arc(e,i,p,0,rt),s.closePath();break;case"triangle":h=n?n/2:p,s.moveTo(e+Math.sin(m)*h,i-Math.cos(m)*p),m+=fa,s.lineTo(e+Math.sin(m)*h,i-Math.cos(m)*p),m+=fa,s.lineTo(e+Math.sin(m)*h,i-Math.cos(m)*p),s.closePath();break;case"rectRounded":c=p*.516,l=p-c,o=Math.cos(m+qe)*l,u=Math.cos(m+qe)*(n?n/2-c:l),a=Math.sin(m+qe)*l,d=Math.sin(m+qe)*(n?n/2-c:l),s.arc(e-u,i-a,c,m-ot,m-yt),s.arc(e+d,i-o,c,m-yt,m),s.arc(e+u,i+a,c,m,m+yt),s.arc(e-d,i+o,c,m+yt,m+ot),s.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*p,h=n?n/2:l,s.rect(e-h,i-l,2*h,2*l);break}m+=qe;case"rectRot":u=Math.cos(m)*(n?n/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(n?n/2:p),s.moveTo(e-u,i-a),s.lineTo(e+d,i-o),s.lineTo(e+u,i+a),s.lineTo(e-d,i+o),s.closePath();break;case"crossRot":m+=qe;case"cross":u=Math.cos(m)*(n?n/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(n?n/2:p),s.moveTo(e-u,i-a),s.lineTo(e+u,i+a),s.moveTo(e+d,i-o),s.lineTo(e-d,i+o);break;case"star":u=Math.cos(m)*(n?n/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(n?n/2:p),s.moveTo(e-u,i-a),s.lineTo(e+u,i+a),s.moveTo(e+d,i-o),s.lineTo(e-d,i+o),m+=qe,u=Math.cos(m)*(n?n/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(n?n/2:p),s.moveTo(e-u,i-a),s.lineTo(e+u,i+a),s.moveTo(e+d,i-o),s.lineTo(e-d,i+o);break;case"line":o=n?n/2:Math.cos(m)*p,a=Math.sin(m)*p,s.moveTo(e-o,i-a),s.lineTo(e+o,i+a);break;case"dash":s.moveTo(e,i),s.lineTo(e+Math.cos(m)*(n?n/2:p),i+Math.sin(m)*p);break;case!1:s.closePath();break}s.fill(),t.borderWidth>0&&s.stroke()}}function ke(s,t,e){return e=e||.5,!t||s&&s.x>t.left-e&&s.x<t.right+e&&s.y>t.top-e&&s.y<t.bottom+e}function Kn(s,t){s.save(),s.beginPath(),s.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),s.clip()}function Xn(s){s.restore()}function wf(s,t,e,i,n){if(!t)return s.lineTo(e.x,e.y);if(n==="middle"){const r=(t.x+e.x)/2;s.lineTo(r,t.y),s.lineTo(r,e.y)}else n==="after"!=!!i?s.lineTo(t.x,e.y):s.lineTo(e.x,t.y);s.lineTo(e.x,e.y)}function xf(s,t,e,i){if(!t)return s.lineTo(e.x,e.y);s.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function kf(s,t){t.translation&&s.translate(t.translation[0],t.translation[1]),Y(t.rotation)||s.rotate(t.rotation),t.color&&(s.fillStyle=t.color),t.textAlign&&(s.textAlign=t.textAlign),t.textBaseline&&(s.textBaseline=t.textBaseline)}function Sf(s,t,e,i,n){if(n.strikethrough||n.underline){const r=s.measureText(i),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=e-r.actualBoundingBoxAscent,c=e+r.actualBoundingBoxDescent,h=n.strikethrough?(l+c)/2:c;s.strokeStyle=s.fillStyle,s.beginPath(),s.lineWidth=n.decorationWidth||2,s.moveTo(o,h),s.lineTo(a,h),s.stroke()}}function Of(s,t){const e=s.fillStyle;s.fillStyle=t.color,s.fillRect(t.left,t.top,t.width,t.height),s.fillStyle=e}function fs(s,t,e,i,n,r={}){const o=ut(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(s.save(),s.font=n.string,kf(s,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&Of(s,r.backdrop),a&&(r.strokeColor&&(s.strokeStyle=r.strokeColor),Y(r.strokeWidth)||(s.lineWidth=r.strokeWidth),s.strokeText(c,e,i,r.maxWidth)),s.fillText(c,e,i,r.maxWidth),Sf(s,e,i,c,r),i+=Number(n.lineHeight);s.restore()}function Di(s,t){const{x:e,y:i,w:n,h:r,radius:o}=t;s.arc(e+o.topLeft,i+o.topLeft,o.topLeft,1.5*ot,ot,!0),s.lineTo(e,i+r-o.bottomLeft),s.arc(e+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,ot,yt,!0),s.lineTo(e+n-o.bottomRight,i+r),s.arc(e+n-o.bottomRight,i+r-o.bottomRight,o.bottomRight,yt,0,!0),s.lineTo(e+n,i+o.topRight),s.arc(e+n-o.topRight,i+o.topRight,o.topRight,0,-yt,!0),s.lineTo(e+o.topLeft,i)}const Tf=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Mf=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Ef(s,t){const e=(""+s).match(Tf);if(!e||e[1]==="normal")return t*1.2;switch(s=+e[2],e[3]){case"px":return s;case"%":s/=100;break}return t*s}const Cf=s=>+s||0;function Po(s,t){const e={},i=B(t),n=i?Object.keys(t):t,r=B(s)?i?o=>j(s[o],s[t[o]]):o=>s[o]:()=>s;for(const o of n)e[o]=Cf(r(o));return e}function ah(s){return Po(s,{top:"y",right:"x",bottom:"y",left:"x"})}function os(s){return Po(s,["topLeft","topRight","bottomLeft","bottomRight"])}function It(s){const t=ah(s);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function St(s,t){s=s||{},t=t||pt.font;let e=j(s.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=j(s.style,t.style);i&&!(""+i).match(Mf)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const n={family:j(s.family,t.family),lineHeight:Ef(j(s.lineHeight,t.lineHeight),e),size:e,style:i,weight:j(s.weight,t.weight),string:""};return n.string=yf(n),n}function ci(s,t,e,i){let n,r,o;for(n=0,r=s.length;n<r;++n)if(o=s[n],o!==void 0&&o!==void 0)return o}function Df(s,t,e){const{min:i,max:n}=s,r=Zc(t,(n-i)/2),o=(a,l)=>e&&a===0?0:a+l;return{min:o(i,-Math.abs(r)),max:o(n,r)}}function Ue(s,t){return Object.assign(Object.create(s),t)}function Io(s,t=[""],e,i,n=()=>s[0]){const r=e||s;typeof i>"u"&&(i=uh("_fallback",s));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:s,_rootScopes:r,_fallback:i,_getTarget:n,override:a=>Io([a,...s],t,r,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete s[0][l],!0},get(a,l){return ch(a,l,()=>Ff(l,t,s,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(s[0])},has(a,l){return ka(a).includes(l)},ownKeys(a){return ka(a)},set(a,l,c){const h=a._storage||(a._storage=n());return a[l]=h[l]=c,delete a._keys,!0}})}function js(s,t,e,i){const n={_cacheable:!1,_proxy:s,_context:t,_subProxy:e,_stack:new Set,_descriptors:lh(s,i),setContext:r=>js(s,r,e,i),override:r=>js(s.override(r),t,e,i)};return new Proxy(n,{deleteProperty(r,o){return delete r[o],delete s[o],!0},get(r,o,a){return ch(r,o,()=>Pf(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(s,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(s,o)},getPrototypeOf(){return Reflect.getPrototypeOf(s)},has(r,o){return Reflect.has(s,o)},ownKeys(){return Reflect.ownKeys(s)},set(r,o,a){return s[o]=a,delete r[o],!0}})}function lh(s,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:n=t.allKeys}=s;return{allKeys:n,scriptable:e,indexable:i,isScriptable:Be(e)?e:()=>e,isIndexable:Be(i)?i:()=>i}}const Af=(s,t)=>s?s+Mo(t):t,Lo=(s,t)=>B(t)&&s!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function ch(s,t,e){if(Object.prototype.hasOwnProperty.call(s,t)||t==="constructor")return s[t];const i=e();return s[t]=i,i}function Pf(s,t,e){const{_proxy:i,_context:n,_subProxy:r,_descriptors:o}=s;let a=i[t];return Be(a)&&o.isScriptable(t)&&(a=If(t,a,s,e)),ut(a)&&a.length&&(a=Lf(t,a,s,o.isIndexable)),Lo(t,a)&&(a=js(a,n,r&&r[t],o)),a}function If(s,t,e,i){const{_proxy:n,_context:r,_subProxy:o,_stack:a}=e;if(a.has(s))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+s);a.add(s);let l=t(r,o||i);return a.delete(s),Lo(s,l)&&(l=Ro(n._scopes,n,s,l)),l}function Lf(s,t,e,i){const{_proxy:n,_context:r,_subProxy:o,_descriptors:a}=e;if(typeof r.index<"u"&&i(s))return t[r.index%t.length];if(B(t[0])){const l=t,c=n._scopes.filter(h=>h!==l);t=[];for(const h of l){const u=Ro(c,n,s,h);t.push(js(u,r,o&&o[s],a))}}return t}function hh(s,t,e){return Be(s)?s(t,e):s}const Rf=(s,t)=>s===!0?t:typeof s=="string"?We(t,s):void 0;function Nf(s,t,e,i,n){for(const r of t){const o=Rf(e,r);if(o){s.add(o);const a=hh(o._fallback,e,n);if(typeof a<"u"&&a!==e&&a!==i)return a}else if(o===!1&&typeof i<"u"&&e!==i)return null}return!1}function Ro(s,t,e,i){const n=t._rootScopes,r=hh(t._fallback,e,i),o=[...s,...n],a=new Set;a.add(i);let l=xa(a,o,e,r||e,i);return l===null||typeof r<"u"&&r!==e&&(l=xa(a,o,r,l,i),l===null)?!1:Io(Array.from(a),[""],n,r,()=>$f(t,e,i))}function xa(s,t,e,i,n){for(;e;)e=Nf(s,t,e,i,n);return e}function $f(s,t,e){const i=s._getTarget();t in i||(i[t]={});const n=i[t];return ut(n)&&B(e)?e:n||{}}function Ff(s,t,e,i){let n;for(const r of t)if(n=uh(Af(r,s),e),typeof n<"u")return Lo(s,n)?Ro(e,i,s,n):n}function uh(s,t){for(const e of t){if(!e)continue;const i=e[s];if(typeof i<"u")return i}}function ka(s){let t=s._keys;return t||(t=s._keys=jf(s._scopes)),t}function jf(s){const t=new Set;for(const e of s)for(const i of Object.keys(e).filter(n=>!n.startsWith("_")))t.add(i);return Array.from(t)}function dh(s,t,e,i){const{iScale:n}=s,{key:r="r"}=this._parsing,o=new Array(i);let a,l,c,h;for(a=0,l=i;a<l;++a)c=a+e,h=t[c],o[a]={r:n.parse(We(h,r),c)};return o}const zf=Number.EPSILON||1e-14,zs=(s,t)=>t<s.length&&!s[t].skip&&s[t],fh=s=>s==="x"?"y":"x";function Vf(s,t,e,i){const n=s.skip?t:s,r=t,o=e.skip?t:e,a=Ur(r,n),l=Ur(o,r);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const u=i*c,d=i*h;return{previous:{x:r.x-u*(o.x-n.x),y:r.y-u*(o.y-n.y)},next:{x:r.x+d*(o.x-n.x),y:r.y+d*(o.y-n.y)}}}function Wf(s,t,e){const i=s.length;let n,r,o,a,l,c=zs(s,0);for(let h=0;h<i-1;++h)if(l=c,c=zs(s,h+1),!(!l||!c)){if(_i(t[h],0,zf)){e[h]=e[h+1]=0;continue}n=e[h]/t[h],r=e[h+1]/t[h],a=Math.pow(n,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),e[h]=n*o*t[h],e[h+1]=r*o*t[h])}}function Bf(s,t,e="x"){const i=fh(e),n=s.length;let r,o,a,l=zs(s,0);for(let c=0;c<n;++c){if(o=a,a=l,l=zs(s,c+1),!a)continue;const h=a[e],u=a[i];o&&(r=(h-o[e])/3,a[`cp1${e}`]=h-r,a[`cp1${i}`]=u-r*t[c]),l&&(r=(l[e]-h)/3,a[`cp2${e}`]=h+r,a[`cp2${i}`]=u+r*t[c])}}function Hf(s,t="x"){const e=fh(t),i=s.length,n=Array(i).fill(0),r=Array(i);let o,a,l,c=zs(s,0);for(o=0;o<i;++o)if(a=l,l=c,c=zs(s,o+1),!!l){if(c){const h=c[t]-l[t];n[o]=h!==0?(c[e]-l[e])/h:0}r[o]=a?c?ge(n[o-1])!==ge(n[o])?0:(n[o-1]+n[o])/2:n[o-1]:n[o]}Wf(s,n,r),Bf(s,r,t)}function Ki(s,t,e){return Math.max(Math.min(s,e),t)}function Uf(s,t){let e,i,n,r,o,a=ke(s[0],t);for(e=0,i=s.length;e<i;++e)o=r,r=a,a=e<i-1&&ke(s[e+1],t),r&&(n=s[e],o&&(n.cp1x=Ki(n.cp1x,t.left,t.right),n.cp1y=Ki(n.cp1y,t.top,t.bottom)),a&&(n.cp2x=Ki(n.cp2x,t.left,t.right),n.cp2y=Ki(n.cp2y,t.top,t.bottom)))}function qf(s,t,e,i,n){let r,o,a,l;if(t.spanGaps&&(s=s.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")Hf(s,n);else{let c=i?s[s.length-1]:s[0];for(r=0,o=s.length;r<o;++r)a=s[r],l=Vf(c,a,s[Math.min(r+1,o-(i?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&Uf(s,e)}function No(){return typeof window<"u"&&typeof document<"u"}function $o(s){let t=s.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function $n(s,t,e){let i;return typeof s=="string"?(i=parseInt(s,10),s.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=s,i}const Qn=s=>s.ownerDocument.defaultView.getComputedStyle(s,null);function Yf(s,t){return Qn(s).getPropertyValue(t)}const Gf=["top","right","bottom","left"];function as(s,t,e){const i={};e=e?"-"+e:"";for(let n=0;n<4;n++){const r=Gf[n];i[r]=parseFloat(s[t+"-"+r+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Zf=(s,t,e)=>(s>0||t>0)&&(!e||!e.shadowRoot);function Jf(s,t){const e=s.touches,i=e&&e.length?e[0]:s,{offsetX:n,offsetY:r}=i;let o=!1,a,l;if(Zf(n,r,s.target))a=n,l=r;else{const c=t.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function ts(s,t){if("native"in s)return s;const{canvas:e,currentDevicePixelRatio:i}=t,n=Qn(e),r=n.boxSizing==="border-box",o=as(n,"padding"),a=as(n,"border","width"),{x:l,y:c,box:h}=Jf(s,e),u=o.left+(h&&a.left),d=o.top+(h&&a.top);let{width:f,height:g}=t;return r&&(f-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-u)/f*e.width/i),y:Math.round((c-d)/g*e.height/i)}}function Kf(s,t,e){let i,n;if(t===void 0||e===void 0){const r=s&&$o(s);if(!r)t=s.clientWidth,e=s.clientHeight;else{const o=r.getBoundingClientRect(),a=Qn(r),l=as(a,"border","width"),c=as(a,"padding");t=o.width-c.width-l.width,e=o.height-c.height-l.height,i=$n(a.maxWidth,r,"clientWidth"),n=$n(a.maxHeight,r,"clientHeight")}}return{width:t,height:e,maxWidth:i||Rn,maxHeight:n||Rn}}const Xi=s=>Math.round(s*10)/10;function Xf(s,t,e,i){const n=Qn(s),r=as(n,"margin"),o=$n(n.maxWidth,s,"clientWidth")||Rn,a=$n(n.maxHeight,s,"clientHeight")||Rn,l=Kf(s,t,e);let{width:c,height:h}=l;if(n.boxSizing==="content-box"){const d=as(n,"border","width"),f=as(n,"padding");c-=f.width+d.width,h-=f.height+d.height}return c=Math.max(0,c-r.width),h=Math.max(0,i?c/i:h-r.height),c=Xi(Math.min(c,o,l.maxWidth)),h=Xi(Math.min(h,a,l.maxHeight)),c&&!h&&(h=Xi(c/2)),(t!==void 0||e!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,c=Xi(Math.floor(h*i))),{width:c,height:h}}function Sa(s,t,e){const i=t||1,n=Math.floor(s.height*i),r=Math.floor(s.width*i);s.height=Math.floor(s.height),s.width=Math.floor(s.width);const o=s.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${s.height}px`,o.style.width=`${s.width}px`),s.currentDevicePixelRatio!==i||o.height!==n||o.width!==r?(s.currentDevicePixelRatio=i,o.height=n,o.width=r,s.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Qf=function(){let s=!1;try{const t={get passive(){return s=!0,!1}};No()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return s}();function Oa(s,t){const e=Yf(s,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function es(s,t,e,i){return{x:s.x+e*(t.x-s.x),y:s.y+e*(t.y-s.y)}}function tg(s,t,e,i){return{x:s.x+e*(t.x-s.x),y:i==="middle"?e<.5?s.y:t.y:i==="after"?e<1?s.y:t.y:e>0?t.y:s.y}}function eg(s,t,e,i){const n={x:s.cp2x,y:s.cp2y},r={x:t.cp1x,y:t.cp1y},o=es(s,n,e),a=es(n,r,e),l=es(r,t,e),c=es(o,a,e),h=es(a,l,e);return es(c,h,e)}const sg=function(s,t){return{x(e){return s+s+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},ig=function(){return{x(s){return s},setWidth(s){},textAlign(s){return s},xPlus(s,t){return s+t},leftForLtr(s,t){return s}}};function Is(s,t,e){return s?sg(t,e):ig()}function gh(s,t){let e,i;(t==="ltr"||t==="rtl")&&(e=s.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),s.prevTextDirection=i)}function mh(s,t){t!==void 0&&(delete s.prevTextDirection,s.canvas.style.setProperty("direction",t[0],t[1]))}function ph(s){return s==="angle"?{between:Ci,compare:nf,normalize:Bt}:{between:we,compare:(t,e)=>t-e,normalize:t=>t}}function Ta({start:s,end:t,count:e,loop:i,style:n}){return{start:s%e,end:t%e,loop:i&&(t-s+1)%e===0,style:n}}function ng(s,t,e){const{property:i,start:n,end:r}=e,{between:o,normalize:a}=ph(i),l=t.length;let{start:c,end:h,loop:u}=s,d,f;if(u){for(c+=l,h+=l,d=0,f=l;d<f&&o(a(t[c%l][i]),n,r);++d)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:u,style:s.style}}function _h(s,t,e){if(!e)return[s];const{property:i,start:n,end:r}=e,o=t.length,{compare:a,between:l,normalize:c}=ph(i),{start:h,end:u,loop:d,style:f}=ng(s,t,e),g=[];let p=!1,m=null,_,b,w;const v=()=>l(n,w,_)&&a(n,w)!==0,x=()=>a(r,_)===0||l(r,w,_),O=()=>p||v(),M=()=>!p||x();for(let T=h,E=h;T<=u;++T)b=t[T%o],!b.skip&&(_=c(b[i]),_!==w&&(p=l(_,n,r),m===null&&O()&&(m=a(_,n)===0?T:E),m!==null&&M()&&(g.push(Ta({start:m,end:T,loop:d,count:o,style:f})),m=null),E=T,w=_));return m!==null&&g.push(Ta({start:m,end:u,loop:d,count:o,style:f})),g}function bh(s,t){const e=[],i=s.segments;for(let n=0;n<i.length;n++){const r=_h(i[n],s.points,t);r.length&&e.push(...r)}return e}function rg(s,t,e,i){let n=0,r=t-1;if(e&&!i)for(;n<t&&!s[n].skip;)n++;for(;n<t&&s[n].skip;)n++;for(n%=t,e&&(r+=n);r>n&&s[r%t].skip;)r--;return r%=t,{start:n,end:r}}function og(s,t,e,i){const n=s.length,r=[];let o=t,a=s[t],l;for(l=t+1;l<=e;++l){const c=s[l%n];c.skip||c.stop?a.skip||(i=!1,r.push({start:t%n,end:(l-1)%n,loop:i}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&r.push({start:t%n,end:o%n,loop:i}),r}function ag(s,t){const e=s.points,i=s.options.spanGaps,n=e.length;if(!n)return[];const r=!!s._loop,{start:o,end:a}=rg(e,n,r,i);if(i===!0)return Ma(s,[{start:o,end:a,loop:r}],e,t);const l=a<o?a+n:a,c=!!s._fullLoop&&o===0&&a===n-1;return Ma(s,og(e,o,l,c),e,t)}function Ma(s,t,e,i){return!i||!i.setContext||!e?t:lg(s,t,e,i)}function lg(s,t,e,i){const n=s._chart.getContext(),r=Ea(s.options),{_datasetIndex:o,options:{spanGaps:a}}=s,l=e.length,c=[];let h=r,u=t[0].start,d=u;function f(g,p,m,_){const b=a?-1:1;if(g!==p){for(g+=l;e[g%l].skip;)g-=b;for(;e[p%l].skip;)p+=b;g%l!==p%l&&(c.push({start:g%l,end:p%l,loop:m,style:_}),h=_,u=p%l)}}for(const g of t){u=a?u:g.start;let p=e[u%l],m;for(d=u+1;d<=g.end;d++){const _=e[d%l];m=Ea(i.setContext(Ue(n,{type:"segment",p0:p,p1:_,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),cg(m,h)&&f(u,d-1,g.loop,h),p=_,h=m}u<d-1&&f(u,d-1,g.loop,h)}return c}function Ea(s){return{backgroundColor:s.backgroundColor,borderCapStyle:s.borderCapStyle,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderJoinStyle:s.borderJoinStyle,borderWidth:s.borderWidth,borderColor:s.borderColor}}function cg(s,t){if(!t)return!1;const e=[],i=function(n,r){return Ao(r)?(e.includes(r)||e.push(r),e.indexOf(r)):r};return JSON.stringify(s,i)!==JSON.stringify(t,i)}/*!
 * Chart.js v4.4.3
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class hg{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,n){const r=e.listeners[n],o=e.duration;r.forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=eh.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,n)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(n.draw(),this._notify(n,i,t,"progress")),r.length||(i.running=!1,this._notify(n,i,t,"complete"),i.initial=!1),e+=r.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,n)=>Math.max(i,n._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let n=i.length-1;for(;n>=0;--n)i[n].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var pe=new hg;const Ca="transparent",ug={boolean(s,t,e){return e>.5?t:s},color(s,t,e){const i=ya(s||Ca),n=i.valid&&ya(t||Ca);return n&&n.valid?n.mix(i,e).hexString():t},number(s,t,e){return s+(t-s)*e}};class dg{constructor(t,e,i,n){const r=e[i];n=ci([t.to,n,r,t.from]);const o=ci([t.from,r,n]);this._active=!0,this._fn=t.fn||ug[t.type||typeof o],this._easing=bi[t.easing]||bi.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const n=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=ci([t.to,e,n,t.from]),this._from=ci([t.from,n,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,n=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||e<i),!this._active){this._target[n]=a,this._notify(!0);return}if(e<0){this._target[n]=r;return}l=e/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[n]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let n=0;n<i.length;n++)i[n][e]()}}class yh{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!B(t))return;const e=Object.keys(pt.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const r=t[n];if(!B(r))return;const o={};for(const a of e)o[a]=r[a];(ut(r.properties)&&r.properties||[n]).forEach(a=>{(a===n||!i.has(a))&&i.set(a,o)})})}_animateOptions(t,e){const i=e.options,n=gg(t,i);if(!n)return[];const r=this._createAnimations(n,i);return i.$shared&&fg(t.options.$animations,i).then(()=>{t.options=i},()=>{}),r}_createAnimations(t,e){const i=this._properties,n=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){n.push(...this._animateOptions(t,e));continue}const h=e[c];let u=r[c];const d=i.get(c);if(u)if(d&&u.active()){u.update(d,h,a);continue}else u.cancel();if(!d||!d.duration){t[c]=h;continue}r[c]=u=new dg(d,t,c,h),n.push(u)}return n}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return pe.add(this._chart,i),!0}}function fg(s,t){const e=[],i=Object.keys(t);for(let n=0;n<i.length;n++){const r=s[i[n]];r&&r.active()&&e.push(r.wait())}return Promise.all(e)}function gg(s,t){if(!t)return;let e=s.options;if(!e){s.options=t;return}return e.$shared&&(s.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function Da(s,t){const e=s&&s.options||{},i=e.reverse,n=e.min===void 0?t:0,r=e.max===void 0?t:0;return{start:i?r:n,end:i?n:r}}function mg(s,t,e){if(e===!1)return!1;const i=Da(s,e),n=Da(t,e);return{top:n.end,right:i.end,bottom:n.start,left:i.start}}function pg(s){let t,e,i,n;return B(s)?(t=s.top,e=s.right,i=s.bottom,n=s.left):t=e=i=n=s,{top:t,right:e,bottom:i,left:n,disabled:s===!1}}function vh(s,t){const e=[],i=s._getSortedDatasetMetas(t);let n,r;for(n=0,r=i.length;n<r;++n)e.push(i[n].index);return e}function Aa(s,t,e,i={}){const n=s.keys,r=i.mode==="single";let o,a,l,c;if(t!==null){for(o=0,a=n.length;o<a;++o){if(l=+n[o],l===e){if(i.all)continue;break}c=s.values[l],mt(c)&&(r||t===0||ge(t)===ge(c))&&(t+=c)}return t}}function _g(s,t){const{iScale:e,vScale:i}=t,n=e.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",o=Object.keys(s),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[n]:h,[r]:s[h]};return a}function Pa(s,t){const e=s&&s.options.stacked;return e||e===void 0&&t.stack!==void 0}function bg(s,t,e){return`${s.id}.${t.id}.${e.stack||e.type}`}function yg(s){const{min:t,max:e,minDefined:i,maxDefined:n}=s.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:n?e:Number.POSITIVE_INFINITY}}function vg(s,t,e){const i=s[t]||(s[t]={});return i[e]||(i[e]={})}function Ia(s,t,e,i){for(const n of t.getMatchingVisibleMetas(i).reverse()){const r=s[n.index];if(e&&r>0||!e&&r<0)return n.index}return null}function La(s,t){const{chart:e,_cachedMeta:i}=s,n=e._stacks||(e._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,c=o.axis,h=bg(r,o,i),u=t.length;let d;for(let f=0;f<u;++f){const g=t[f],{[l]:p,[c]:m}=g,_=g._stacks||(g._stacks={});d=_[c]=vg(n,h,p),d[a]=m,d._top=Ia(d,o,!0,i.type),d._bottom=Ia(d,o,!1,i.type);const b=d._visualValues||(d._visualValues={});b[a]=m}}function gr(s,t){const e=s.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function wg(s,t){return Ue(s,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function xg(s,t,e){return Ue(s,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function ti(s,t){const e=s.controller.index,i=s.vScale&&s.vScale.axis;if(i){t=t||s._parsed;for(const n of t){const r=n._stacks;if(!r||r[i]===void 0||r[i][e]===void 0)return;delete r[i][e],r[i]._visualValues!==void 0&&r[i]._visualValues[e]!==void 0&&delete r[i]._visualValues[e]}}}const mr=s=>s==="reset"||s==="none",Ra=(s,t)=>t?s:Object.assign({},s),kg=(s,t,e)=>s&&!t.hidden&&t._stacked&&{keys:vh(e,!0),values:null};class ae{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Pa(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&ti(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),n=(u,d,f,g)=>u==="x"?d:u==="r"?g:f,r=e.xAxisID=j(i.xAxisID,gr(t,"x")),o=e.yAxisID=j(i.yAxisID,gr(t,"y")),a=e.rAxisID=j(i.rAxisID,gr(t,"r")),l=e.indexAxis,c=e.iAxisID=n(l,r,o,a),h=e.vAxisID=n(l,o,r,a);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(c),e.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&pa(this._data,this),t._stacked&&ti(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(B(e)){const n=this._cachedMeta;this._data=_g(e,n)}else if(i!==e){if(i){pa(i,this);const n=this._cachedMeta;ti(n),n._parsed=[]}e&&Object.isExtensible(e)&&lf(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let n=!1;this._dataCheck();const r=e._stacked;e._stacked=Pa(e.vScale,e),e.stack!==i.stack&&(n=!0,ti(e),e.stack=i.stack),this._resyncElements(t),(n||r!==e._stacked)&&La(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:n}=this,{iScale:r,_stacked:o}=i,a=r.axis;let l=t===0&&e===n.length?!0:i._sorted,c=t>0&&i._parsed[t-1],h,u,d;if(this._parsing===!1)i._parsed=n,i._sorted=!0,d=n;else{ut(n[t])?d=this.parseArrayData(i,n,t,e):B(n[t])?d=this.parseObjectData(i,n,t,e):d=this.parsePrimitiveData(i,n,t,e);const f=()=>u[a]===null||c&&u[a]<c[a];for(h=0;h<e;++h)i._parsed[h+t]=u=d[h],l&&(f()&&(l=!1),c=u);i._sorted=l}o&&La(this,d)}parsePrimitiveData(t,e,i,n){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,c=r.getLabels(),h=r===o,u=new Array(n);let d,f,g;for(d=0,f=n;d<f;++d)g=d+i,u[d]={[a]:h||r.parse(c[g],g),[l]:o.parse(e[g],g)};return u}parseArrayData(t,e,i,n){const{xScale:r,yScale:o}=t,a=new Array(n);let l,c,h,u;for(l=0,c=n;l<c;++l)h=l+i,u=e[h],a[l]={x:r.parse(u[0],h),y:o.parse(u[1],h)};return a}parseObjectData(t,e,i,n){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(n);let h,u,d,f;for(h=0,u=n;h<u;++h)d=h+i,f=e[d],c[h]={x:r.parse(We(f,a),d),y:o.parse(We(f,l),d)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const n=this.chart,r=this._cachedMeta,o=e[t.axis],a={keys:vh(n,!0),values:e._stacks[t.axis]._visualValues};return Aa(a,o,r.index,{mode:i})}updateRangeFromParsed(t,e,i,n){const r=i[e.axis];let o=r===null?NaN:r;const a=n&&i._stacks[e.axis];n&&a&&(n.values=a,o=Aa(n,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const i=this._cachedMeta,n=i._parsed,r=i._sorted&&t===i.iScale,o=n.length,a=this._getOtherScale(t),l=kg(e,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:u}=yg(a);let d,f;function g(){f=n[d];const p=f[a.axis];return!mt(f[t.axis])||h>p||u<p}for(d=0;d<o&&!(!g()&&(this.updateRangeFromParsed(c,t,f,l),r));++d);if(r){for(d=o-1;d>=0;--d)if(!g()){this.updateRangeFromParsed(c,t,f,l);break}}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let n,r,o;for(n=0,r=e.length;n<r;++n)o=e[n][t.axis],mt(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,n=e.vScale,r=this.getParsed(t);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:n?""+n.getLabelForValue(r[n.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=pg(j(this.options.clip,mg(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,n=i.data||[],r=e.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||n.length-a,c=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(t,r,a,l),h=a;h<a+l;++h){const u=n[h];u.hidden||(u.active&&c?o.push(u):u.draw(t,r))}for(h=0;h<o.length;++h)o[h].draw(t,r)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const n=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=xg(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=n.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=wg(this.chart.getContext(),this.index)),r.dataset=n,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=i,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const n=e==="active",r=this._cachedDataOpts,o=t+"-"+e,a=r[o],l=this.enableOptionSharing&&Ei(i);if(a)return Ra(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,t),u=n?[`${t}Hover`,"hover",t,""]:[t,""],d=c.getOptionScopes(this.getDataset(),h),f=Object.keys(pt.elements[t]),g=()=>this.getContext(i,n,e),p=c.resolveNamedOptions(d,f,g,u);return p.$shared&&(p.$shared=l,r[o]=Object.freeze(Ra(p,l))),p}_resolveAnimations(t,e,i){const n=this.chart,r=this._cachedDataOpts,o=`animation-${e}`,a=r[o];if(a)return a;let l;if(n.options.animation!==!1){const h=this.chart.config,u=h.datasetAnimationScopeKeys(this._type,e),d=h.getOptionScopes(this.getDataset(),u);l=h.createResolver(d,this.getContext(t,i,e))}const c=new yh(n,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||mr(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),n=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(e,r)||r!==n;return this.updateSharedOptions(r,e,i),{sharedOptions:r,includeOptions:o}}updateElement(t,e,i,n){mr(n)?Object.assign(t,i):this._resolveAnimations(e,n).update(t,i)}updateSharedOptions(t,e,i){t&&!mr(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,n){t.active=n;const r=this.getStyle(e,n);this._resolveAnimations(e,i,n).update(t,{options:!n&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const n=i.length,r=e.length,o=Math.min(r,n);o&&this.parse(0,o),r>n?this._insertElements(n,r-n,t):r<n&&this._removeElements(r,n-r)}_insertElements(t,e,i=!0){const n=this._cachedMeta,r=n.data,o=t+e;let a;const l=c=>{for(c.length+=e,a=c.length-1;a>=o;a--)c[a]=c[a-e]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(n._parsed),this.parse(t,e),i&&this.updateElements(r,t,e,"reset")}updateElements(t,e,i,n){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const n=i._parsed.splice(t,e);i._stacked&&ti(i,n)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,n]=t;this[e](i,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}C(ae,"defaults",{}),C(ae,"datasetElementType",null),C(ae,"dataElementType",null);function Sg(s,t){if(!s._cache.$bar){const e=s.getMatchingVisibleMetas(t);let i=[];for(let n=0,r=e.length;n<r;n++)i=i.concat(e[n].controller.getAllParsedValues(s));s._cache.$bar=th(i.sort((n,r)=>n-r))}return s._cache.$bar}function Og(s){const t=s.iScale,e=Sg(t,s.type);let i=t._length,n,r,o,a;const l=()=>{o===32767||o===-32768||(Ei(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(n=0,r=e.length;n<r;++n)o=t.getPixelForValue(e[n]),l();for(a=void 0,n=0,r=t.ticks.length;n<r;++n)o=t.getPixelForTick(n),l();return i}function Tg(s,t,e,i){const n=e.barThickness;let r,o;return Y(n)?(r=t.min*e.categoryPercentage,o=e.barPercentage):(r=n*i,o=1),{chunk:r/i,ratio:o,start:t.pixels[s]-r/2}}function Mg(s,t,e,i){const n=t.pixels,r=n[s];let o=s>0?n[s-1]:null,a=s<n.length-1?n[s+1]:null;const l=e.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:e.barPercentage,start:c}}function Eg(s,t,e,i){const n=e.parse(s[0],i),r=e.parse(s[1],i),o=Math.min(n,r),a=Math.max(n,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:n,end:r,min:o,max:a}}function wh(s,t,e,i){return ut(s)?Eg(s,t,e,i):t[e.axis]=e.parse(s,i),t}function Na(s,t,e,i){const n=s.iScale,r=s.vScale,o=n.getLabels(),a=n===r,l=[];let c,h,u,d;for(c=e,h=e+i;c<h;++c)d=t[c],u={},u[n.axis]=a||n.parse(o[c],c),l.push(wh(d,u,r,c));return l}function pr(s){return s&&s.barStart!==void 0&&s.barEnd!==void 0}function Cg(s,t,e){return s!==0?ge(s):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function Dg(s){let t,e,i,n,r;return s.horizontal?(t=s.base>s.x,e="left",i="right"):(t=s.base<s.y,e="bottom",i="top"),t?(n="end",r="start"):(n="start",r="end"),{start:e,end:i,reverse:t,top:n,bottom:r}}function Ag(s,t,e,i){let n=t.borderSkipped;const r={};if(!n){s.borderSkipped=r;return}if(n===!0){s.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:h}=Dg(s);n==="middle"&&e&&(s.enableBorderRadius=!0,(e._top||0)===i?n=c:(e._bottom||0)===i?n=h:(r[$a(h,o,a,l)]=!0,n=c)),r[$a(n,o,a,l)]=!0,s.borderSkipped=r}function $a(s,t,e,i){return i?(s=Pg(s,t,e),s=Fa(s,e,t)):s=Fa(s,t,e),s}function Pg(s,t,e){return s===t?e:s===e?t:s}function Fa(s,t,e){return s==="start"?t:s==="end"?e:s}function Ig(s,{inflateAmount:t},e){s.inflateAmount=t==="auto"?e===1?.33:0:t}class yn extends ae{parsePrimitiveData(t,e,i,n){return Na(t,e,i,n)}parseArrayData(t,e,i,n){return Na(t,e,i,n)}parseObjectData(t,e,i,n){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,h=o.axis==="x"?a:l,u=[];let d,f,g,p;for(d=i,f=i+n;d<f;++d)p=e[d],g={},g[r.axis]=r.parse(We(p,c),d),u.push(wh(We(p,h),g,o,d));return u}updateRangeFromParsed(t,e,i,n){super.updateRangeFromParsed(t,e,i,n);const r=i._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:n}=e,r=this.getParsed(t),o=r._custom,a=pr(o)?"["+o.start+", "+o.end+"]":""+n.getLabelForValue(r[n.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,n){const r=n==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(e,n);for(let f=e;f<e+i;f++){const g=this.getParsed(f),p=r||Y(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),m=this._calculateBarIndexPixels(f,h),_=(g._stacks||{})[a.axis],b={horizontal:c,base:p.base,enableBorderRadius:!_||pr(g._custom)||o===_._top||o===_._bottom,x:c?p.head:m.center,y:c?m.center:p.head,height:c?m.size:Math.abs(p.size),width:c?Math.abs(p.size):m.size};d&&(b.options=u||this.resolveDataElementOptions(f,t[f].active?"active":n));const w=b.options||t[f].options;Ag(b,w,_,o),Ig(b,w,h.ratio),this.updateElement(t[f],f,b,n)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,n=i.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),r=i.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(e),h=c&&c[l.vScale.axis];if(Y(h)||isNaN(h))return!0};for(const l of n)if(!(e!==void 0&&a(l))&&((r===!1||o.indexOf(l.stack)===-1||r===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,i){const n=this._getStacks(t,i),r=e!==void 0?n.indexOf(e):-1;return r===-1?n.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,n=[];let r,o;for(r=0,o=e.data.length;r<o;++r)n.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const a=t.barThickness;return{min:a||Og(e),pixels:n,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:n},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(t),c=l._custom,h=pr(c);let u=l[e.axis],d=0,f=i?this.applyStack(e,l,i):u,g,p;f!==u&&(d=f-u,f=u),h&&(u=c.barStart,f=c.barEnd-c.barStart,u!==0&&ge(u)!==ge(c.barEnd)&&(d=0),d+=u);const m=!Y(r)&&!h?r:d;let _=e.getPixelForValue(m);if(this.chart.getDataVisibility(t)?g=e.getPixelForValue(d+f):g=_,p=g-_,Math.abs(p)<o){p=Cg(p,e,a)*o,u===a&&(_-=p/2);const b=e.getPixelForDecimal(0),w=e.getPixelForDecimal(1),v=Math.min(b,w),x=Math.max(b,w);_=Math.max(Math.min(_,x),v),g=_+p,i&&!h&&(l._stacks[e.axis]._visualValues[n]=e.getValueForPixel(g)-e.getValueForPixel(_))}if(_===e.getPixelForValue(a)){const b=ge(p)*e.getLineWidthForValue(a)/2;_+=b,p-=b}return{size:p,base:_,head:g,center:g+p/2}}_calculateBarIndexPixels(t,e){const i=e.scale,n=this.options,r=n.skipNull,o=j(n.maxBarThickness,1/0);let a,l;if(e.grouped){const c=r?this._getStackCount(t):e.stackCount,h=n.barThickness==="flex"?Mg(t,e,n,c):Tg(t,e,n,c),u=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);a=h.start+h.chunk*u+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=i.getPixelForValue(this.getParsed(t)[i.axis],t),l=Math.min(o,e.min*e.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,n=i.length;let r=0;for(;r<n;++r)this.getParsed(r)[e.axis]!==null&&!i[r].hidden&&i[r].draw(this._ctx)}}C(yn,"id","bar"),C(yn,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),C(yn,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class vn extends ae{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,n){const r=super.parsePrimitiveData(t,e,i,n);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+i).radius;return r}parseArrayData(t,e,i,n){const r=super.parseArrayData(t,e,i,n);for(let o=0;o<r.length;o++){const a=e[i+o];r[o]._custom=j(a[2],this.resolveDataElementOptions(o+i).radius)}return r}parseObjectData(t,e,i,n){const r=super.parseObjectData(t,e,i,n);for(let o=0;o<r.length;o++){const a=e[i+o];r[o]._custom=j(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:n,yScale:r}=e,o=this.getParsed(t),a=n.getLabelForValue(o.x),l=r.getLabelForValue(o.y),c=o._custom;return{label:i[t]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,n){const r=n==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(e,n),h=o.axis,u=a.axis;for(let d=e;d<e+i;d++){const f=t[d],g=!r&&this.getParsed(d),p={},m=p[h]=r?o.getPixelForDecimal(.5):o.getPixelForValue(g[h]),_=p[u]=r?a.getBasePixel():a.getPixelForValue(g[u]);p.skip=isNaN(m)||isNaN(_),c&&(p.options=l||this.resolveDataElementOptions(d,f.active?"active":n),r&&(p.options.radius=0)),this.updateElement(f,d,p,n)}}resolveDataElementOptions(t,e){const i=this.getParsed(t);let n=super.resolveDataElementOptions(t,e);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const r=n.radius;return e!=="active"&&(n.radius=0),n.radius+=j(i&&i._custom,r),n}}C(vn,"id","bubble"),C(vn,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),C(vn,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function Lg(s,t,e){let i=1,n=1,r=0,o=0;if(t<rt){const a=s,l=a+t,c=Math.cos(a),h=Math.sin(a),u=Math.cos(l),d=Math.sin(l),f=(w,v,x)=>Ci(w,a,l,!0)?1:Math.max(v,v*e,x,x*e),g=(w,v,x)=>Ci(w,a,l,!0)?-1:Math.min(v,v*e,x,x*e),p=f(0,c,u),m=f(yt,h,d),_=g(ot,c,u),b=g(ot+yt,h,d);i=(p-_)/2,n=(m-b)/2,r=-(p+_)/2,o=-(m+b)/2}return{ratioX:i,ratioY:n,offsetX:r,offsetY:o}}class ns extends ae{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=i;else{let r=l=>+i[l];if(B(i[t])){const{key:l="value"}=this._parsing;r=c=>+We(i[c],l)}let o,a;for(o=t,a=t+e;o<a;++o)n._parsed[o]=r(o)}}_getRotation(){return re(this.options.rotation-90)}_getCircumference(){return re(this.options.circumference)}_getRotationExtents(){let t=rt,e=-rt;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const n=this.chart.getDatasetMeta(i).controller,r=n._getRotation(),o=n._getCircumference();t=Math.min(t,r),e=Math.max(e,r+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,n=this._cachedMeta,r=n.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(Yd(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:u}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:g,offsetY:p}=Lg(u,h,l),m=(i.width-o)/d,_=(i.height-o)/f,b=Math.max(Math.min(m,_)/2,0),w=Zc(this.options.radius,b),v=Math.max(w*l,0),x=(w-v)/this._getVisibleDatasetWeightTotal();this.offsetX=g*w,this.offsetY=p*w,n.total=this.calculateTotal(),this.outerRadius=w-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*c,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const i=this.options,n=this._cachedMeta,r=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||n._parsed[t]===null||n.data[t].hidden?0:this.calculateCircumference(n._parsed[t]*r/rt)}updateElements(t,e,i,n){const r=n==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,h=(a.left+a.right)/2,u=(a.top+a.bottom)/2,d=r&&c.animateScale,f=d?0:this.innerRadius,g=d?0:this.outerRadius,{sharedOptions:p,includeOptions:m}=this._getSharedOptions(e,n);let _=this._getRotation(),b;for(b=0;b<e;++b)_+=this._circumference(b,r);for(b=e;b<e+i;++b){const w=this._circumference(b,r),v=t[b],x={x:h+this.offsetX,y:u+this.offsetY,startAngle:_,endAngle:_+w,circumference:w,outerRadius:g,innerRadius:f};m&&(x.options=p||this.resolveDataElementOptions(b,v.active?"active":n)),_+=w,this.updateElement(v,b,x,n)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i=0,n;for(n=0;n<e.length;n++){const r=t._parsed[n];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(n)&&!e[n].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?rt*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,n=i.data.labels||[],r=Fi(e._parsed[t],i.options.locale);return{label:n[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const i=this.chart;let n,r,o,a,l;if(!t){for(n=0,r=i.data.datasets.length;n<r;++n)if(i.isDatasetVisible(n)){o=i.getDatasetMeta(n),t=o.data,a=o.controller;break}}if(!t)return 0;for(n=0,r=t.length;n<r;++n)l=a.resolveDataElementOptions(n),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,n=t.length;i<n;++i){const r=this.resolveDataElementOptions(i);e=Math.max(e,r.offset||0,r.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(j(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}C(ns,"id","doughnut"),C(ns,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),C(ns,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),C(ns,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:n}}=t.legend.options;return e.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:n,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}});class wn extends ae{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:n=[],_dataset:r}=e,o=this.chart._animationsDisabled;let{start:a,count:l}=ih(e,n,o);this._drawStart=a,this._drawCount=l,nh(e)&&(a=0,l=n.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=n;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},t),this.updateElements(n,a,l,t)}updateElements(t,e,i,n){const r=n==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:u}=this._getSharedOptions(e,n),d=o.axis,f=a.axis,{spanGaps:g,segment:p}=this.options,m=Fs(g)?g:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||r||n==="none",b=e+i,w=t.length;let v=e>0&&this.getParsed(e-1);for(let x=0;x<w;++x){const O=t[x],M=_?O:{};if(x<e||x>=b){M.skip=!0;continue}const T=this.getParsed(x),E=Y(T[f]),D=M[d]=o.getPixelForValue(T[d],x),P=M[f]=r||E?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,T,l):T[f],x);M.skip=isNaN(D)||isNaN(P)||E,M.stop=x>0&&Math.abs(T[d]-v[d])>m,p&&(M.parsed=T,M.raw=c.data[x]),u&&(M.options=h||this.resolveDataElementOptions(x,O.active?"active":n)),_||this.updateElement(O,x,M,n),v=T}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,n=t.data||[];if(!n.length)return i;const r=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}C(wn,"id","line"),C(wn,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),C(wn,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class vi extends ae{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,n=i.data.labels||[],r=Fi(e._parsed[t].r,i.options.locale);return{label:n[t]||"",value:r}}parseObjectData(t,e,i,n){return dh.bind(this)(t,e,i,n)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<e.min&&(e.min=r),r>e.max&&(e.max=r))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,i=t.options,n=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(n/2,0),o=Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0),a=(r-o)/t.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,e,i,n){const r=n==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,h=c.xCenter,u=c.yCenter,d=c.getIndexAngle(0)-.5*ot;let f=d,g;const p=360/this.countVisibleElements();for(g=0;g<e;++g)f+=this._computeAngle(g,n,p);for(g=e;g<e+i;g++){const m=t[g];let _=f,b=f+this._computeAngle(g,n,p),w=o.getDataVisibility(g)?c.getDistanceFromCenterForValue(this.getParsed(g).r):0;f=b,r&&(l.animateScale&&(w=0),l.animateRotate&&(_=b=d));const v={x:h,y:u,innerRadius:0,outerRadius:w,startAngle:_,endAngle:b,options:this.resolveDataElementOptions(g,m.active?"active":n)};this.updateElement(m,g,v,n)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((i,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++}),e}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?re(this.resolveDataElementOptions(t,e).angle||i):0}}C(vi,"id","polarArea"),C(vi,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),C(vi,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:n}}=t.legend.options;return e.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:n,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Gr extends ns{}C(Gr,"id","pie"),C(Gr,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class xn extends ae{getLabelAndValue(t){const e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,n){return dh.bind(this)(t,e,i,n)}update(t){const e=this._cachedMeta,i=e.dataset,n=e.data||[],r=e.iScale.getLabels();if(i.points=n,t!=="resize"){const o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===n.length,options:o};this.updateElement(i,void 0,a,t)}this.updateElements(n,0,n.length,t)}updateElements(t,e,i,n){const r=this._cachedMeta.rScale,o=n==="reset";for(let a=e;a<e+i;a++){const l=t[a],c=this.resolveDataElementOptions(a,l.active?"active":n),h=r.getPointPositionForValue(a,this.getParsed(a).r),u=o?r.xCenter:h.x,d=o?r.yCenter:h.y,f={x:u,y:d,angle:h.angle,skip:isNaN(u)||isNaN(d),options:c};this.updateElement(l,a,f,n)}}}C(xn,"id","radar"),C(xn,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),C(xn,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class kn extends ae{getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:n,yScale:r}=e,o=this.getParsed(t),a=n.getLabelForValue(o.x),l=r.getLabelForValue(o.y);return{label:i[t]||"",value:"("+a+", "+l+")"}}update(t){const e=this._cachedMeta,{data:i=[]}=e,n=this.chart._animationsDisabled;let{start:r,count:o}=ih(e,i,n);if(this._drawStart=r,this._drawCount=o,nh(e)&&(r=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=e;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!n,options:c},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(i,r,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,i,n){const r=n==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,h=this.resolveDataElementOptions(e,n),u=this.getSharedOptions(h),d=this.includeOptions(n,u),f=o.axis,g=a.axis,{spanGaps:p,segment:m}=this.options,_=Fs(p)?p:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||r||n==="none";let w=e>0&&this.getParsed(e-1);for(let v=e;v<e+i;++v){const x=t[v],O=this.getParsed(v),M=b?x:{},T=Y(O[g]),E=M[f]=o.getPixelForValue(O[f],v),D=M[g]=r||T?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,O,l):O[g],v);M.skip=isNaN(E)||isNaN(D)||T,M.stop=v>0&&Math.abs(O[f]-w[f])>_,m&&(M.parsed=O,M.raw=c.data[v]),d&&(M.options=u||this.resolveDataElementOptions(v,x.active?"active":n)),b||this.updateElement(x,v,M,n),w=O}this.updateSharedOptions(u,n,h)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let a=0;for(let l=e.length-1;l>=0;--l)a=Math.max(a,e[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=t.dataset,n=i.options&&i.options.borderWidth||0;if(!e.length)return n;const r=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(n,r,o)/2}}C(kn,"id","scatter"),C(kn,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),C(kn,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var Rg=Object.freeze({__proto__:null,BarController:yn,BubbleController:vn,DoughnutController:ns,LineController:wn,PieController:Gr,PolarAreaController:vi,RadarController:xn,ScatterController:kn});function Ge(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Fo{constructor(t){C(this,"options");this.options=t||{}}static override(t){Object.assign(Fo.prototype,t)}init(){}formats(){return Ge()}parse(){return Ge()}format(){return Ge()}add(){return Ge()}diff(){return Ge()}startOf(){return Ge()}endOf(){return Ge()}}var Ng={_date:Fo};function $g(s,t,e,i){const{controller:n,data:r,_sorted:o}=s,a=n._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const l=a._reversePixels?of:xe;if(i){if(n._sharedOptions){const c=r[0],h=typeof c.getRange=="function"&&c.getRange(t);if(h){const u=l(r,t,e-h),d=l(r,t,e+h);return{lo:u.lo,hi:d.hi}}}}else return l(r,t,e)}return{lo:0,hi:r.length-1}}function ji(s,t,e,i,n){const r=s.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,l=r.length;a<l;++a){const{index:c,data:h}=r[a],{lo:u,hi:d}=$g(r[a],t,o,n);for(let f=u;f<=d;++f){const g=h[f];g.skip||i(g,c,f)}}}function Fg(s){const t=s.indexOf("x")!==-1,e=s.indexOf("y")!==-1;return function(i,n){const r=t?Math.abs(i.x-n.x):0,o=e?Math.abs(i.y-n.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function _r(s,t,e,i,n){const r=[];return!n&&!s.isPointInArea(t)||ji(s,e,t,function(a,l,c){!n&&!ke(a,s.chartArea,0)||a.inRange(t.x,t.y,i)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function jg(s,t,e,i){let n=[];function r(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:u}=Xc(o,{x:t.x,y:t.y});Ci(u,c,h)&&n.push({element:o,datasetIndex:a,index:l})}return ji(s,e,t,r),n}function zg(s,t,e,i,n,r){let o=[];const a=Fg(e);let l=Number.POSITIVE_INFINITY;function c(h,u,d){const f=h.inRange(t.x,t.y,n);if(i&&!f)return;const g=h.getCenterPoint(n);if(!(!!r||s.isPointInArea(g))&&!f)return;const m=a(t,g);m<l?(o=[{element:h,datasetIndex:u,index:d}],l=m):m===l&&o.push({element:h,datasetIndex:u,index:d})}return ji(s,e,t,c),o}function br(s,t,e,i,n,r){return!r&&!s.isPointInArea(t)?[]:e==="r"&&!i?jg(s,t,e,n):zg(s,t,e,i,n,r)}function ja(s,t,e,i,n){const r=[],o=e==="x"?"inXRange":"inYRange";let a=!1;return ji(s,e,t,(l,c,h)=>{l[o](t[e],n)&&(r.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(t.x,t.y,n))}),i&&!a?[]:r}var Vg={evaluateInteractionItems:ji,modes:{index(s,t,e,i){const n=ts(t,s),r=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?_r(s,n,r,i,o):br(s,n,r,!1,i,o),l=[];return a.length?(s.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,u=c.data[h];u&&!u.skip&&l.push({element:u,datasetIndex:c.index,index:h})}),l):[]},dataset(s,t,e,i){const n=ts(t,s),r=e.axis||"xy",o=e.includeInvisible||!1;let a=e.intersect?_r(s,n,r,i,o):br(s,n,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=s.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(s,t,e,i){const n=ts(t,s),r=e.axis||"xy",o=e.includeInvisible||!1;return _r(s,n,r,i,o)},nearest(s,t,e,i){const n=ts(t,s),r=e.axis||"xy",o=e.includeInvisible||!1;return br(s,n,r,e.intersect,i,o)},x(s,t,e,i){const n=ts(t,s);return ja(s,n,"x",e.intersect,i)},y(s,t,e,i){const n=ts(t,s);return ja(s,n,"y",e.intersect,i)}}};const xh=["left","top","right","bottom"];function ei(s,t){return s.filter(e=>e.pos===t)}function za(s,t){return s.filter(e=>xh.indexOf(e.pos)===-1&&e.box.axis===t)}function si(s,t){return s.sort((e,i)=>{const n=t?i:e,r=t?e:i;return n.weight===r.weight?n.index-r.index:n.weight-r.weight})}function Wg(s){const t=[];let e,i,n,r,o,a;for(e=0,i=(s||[]).length;e<i;++e)n=s[e],{position:r,options:{stack:o,stackWeight:a=1}}=n,t.push({index:e,box:n,pos:r,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&r+o,stackWeight:a});return t}function Bg(s){const t={};for(const e of s){const{stack:i,pos:n,stackWeight:r}=e;if(!i||!xh.includes(n))continue;const o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function Hg(s,t){const e=Bg(s),{vBoxMaxWidth:i,hBoxMaxHeight:n}=t;let r,o,a;for(r=0,o=s.length;r<o;++r){a=s[r];const{fullSize:l}=a.box,c=e[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*i:l&&t.availableWidth,a.height=n):(a.width=i,a.height=h?h*n:l&&t.availableHeight)}return e}function Ug(s){const t=Wg(s),e=si(t.filter(c=>c.box.fullSize),!0),i=si(ei(t,"left"),!0),n=si(ei(t,"right")),r=si(ei(t,"top"),!0),o=si(ei(t,"bottom")),a=za(t,"x"),l=za(t,"y");return{fullSize:e,leftAndTop:i.concat(r),rightAndBottom:n.concat(l).concat(o).concat(a),chartArea:ei(t,"chartArea"),vertical:i.concat(n).concat(l),horizontal:r.concat(o).concat(a)}}function Va(s,t,e,i){return Math.max(s[e],t[e])+Math.max(s[i],t[i])}function kh(s,t){s.top=Math.max(s.top,t.top),s.left=Math.max(s.left,t.left),s.bottom=Math.max(s.bottom,t.bottom),s.right=Math.max(s.right,t.right)}function qg(s,t,e,i){const{pos:n,box:r}=e,o=s.maxPadding;if(!B(n)){e.size&&(s[n]-=e.size);const u=i[e.stack]||{size:0,count:1};u.size=Math.max(u.size,e.horizontal?r.height:r.width),e.size=u.size/u.count,s[n]+=e.size}r.getPadding&&kh(o,r.getPadding());const a=Math.max(0,t.outerWidth-Va(o,s,"left","right")),l=Math.max(0,t.outerHeight-Va(o,s,"top","bottom")),c=a!==s.w,h=l!==s.h;return s.w=a,s.h=l,e.horizontal?{same:c,other:h}:{same:h,other:c}}function Yg(s){const t=s.maxPadding;function e(i){const n=Math.max(t[i]-s[i],0);return s[i]+=n,n}s.y+=e("top"),s.x+=e("left"),e("right"),e("bottom")}function Gg(s,t){const e=t.maxPadding;function i(n){const r={left:0,top:0,right:0,bottom:0};return n.forEach(o=>{r[o]=Math.max(t[o],e[o])}),r}return i(s?["left","right"]:["top","bottom"])}function hi(s,t,e,i){const n=[];let r,o,a,l,c,h;for(r=0,o=s.length,c=0;r<o;++r){a=s[r],l=a.box,l.update(a.width||t.w,a.height||t.h,Gg(a.horizontal,t));const{same:u,other:d}=qg(t,e,a,i);c|=u&&n.length,h=h||d,l.fullSize||n.push(a)}return c&&hi(n,t,e,i)||h}function Qi(s,t,e,i,n){s.top=e,s.left=t,s.right=t+i,s.bottom=e+n,s.width=i,s.height=n}function Wa(s,t,e,i){const n=e.padding;let{x:r,y:o}=t;for(const a of s){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const u=t.w*h,d=c.size||l.height;Ei(c.start)&&(o=c.start),l.fullSize?Qi(l,n.left,o,e.outerWidth-n.right-n.left,d):Qi(l,t.left+c.placed,o,u,d),c.start=o,c.placed+=u,o=l.bottom}else{const u=t.h*h,d=c.size||l.width;Ei(c.start)&&(r=c.start),l.fullSize?Qi(l,r,n.top,d,e.outerHeight-n.bottom-n.top):Qi(l,r,t.top+c.placed,d,u),c.start=r,c.placed+=u,r=l.right}}t.x=r,t.y=o}var Pt={addBox(s,t){s.boxes||(s.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},s.boxes.push(t)},removeBox(s,t){const e=s.boxes?s.boxes.indexOf(t):-1;e!==-1&&s.boxes.splice(e,1)},configure(s,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(s,t,e,i){if(!s)return;const n=It(s.options.layout.padding),r=Math.max(t-n.width,0),o=Math.max(e-n.height,0),a=Ug(s.boxes),l=a.vertical,c=a.horizontal;X(s.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const h=l.reduce((p,m)=>m.box.options&&m.box.options.display===!1?p:p+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:e,padding:n,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/h,hBoxMaxHeight:o/2}),d=Object.assign({},n);kh(d,It(i));const f=Object.assign({maxPadding:d,w:r,h:o,x:n.left,y:n.top},n),g=Hg(l.concat(c),u);hi(a.fullSize,f,u,g),hi(l,f,u,g),hi(c,f,u,g)&&hi(l,f,u,g),Yg(f),Wa(a.leftAndTop,f,u,g),f.x+=f.w,f.y+=f.h,Wa(a.rightAndBottom,f,u,g),s.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},X(a.chartArea,p=>{const m=p.box;Object.assign(m,s.chartArea),m.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class Sh{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,n){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,n?Math.floor(e/n):i)}}isAttached(t){return!0}updateConfig(t){}}class Zg extends Sh{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Sn="$chartjs",Jg={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Ba=s=>s===null||s==="";function Kg(s,t){const e=s.style,i=s.getAttribute("height"),n=s.getAttribute("width");if(s[Sn]={initial:{height:i,width:n,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",Ba(n)){const r=Oa(s,"width");r!==void 0&&(s.width=r)}if(Ba(i))if(s.style.height==="")s.height=s.width/(t||2);else{const r=Oa(s,"height");r!==void 0&&(s.height=r)}return s}const Oh=Qf?{passive:!0}:!1;function Xg(s,t,e){s&&s.addEventListener(t,e,Oh)}function Qg(s,t,e){s&&s.canvas&&s.canvas.removeEventListener(t,e,Oh)}function tm(s,t){const e=Jg[s.type]||s.type,{x:i,y:n}=ts(s,t);return{type:e,chart:t,native:s,x:i!==void 0?i:null,y:n!==void 0?n:null}}function Fn(s,t){for(const e of s)if(e===t||e.contains(t))return!0}function em(s,t,e){const i=s.canvas,n=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Fn(a.addedNodes,i),o=o&&!Fn(a.removedNodes,i);o&&e()});return n.observe(document,{childList:!0,subtree:!0}),n}function sm(s,t,e){const i=s.canvas,n=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Fn(a.removedNodes,i),o=o&&!Fn(a.addedNodes,i);o&&e()});return n.observe(document,{childList:!0,subtree:!0}),n}const Ai=new Map;let Ha=0;function Th(){const s=window.devicePixelRatio;s!==Ha&&(Ha=s,Ai.forEach((t,e)=>{e.currentDevicePixelRatio!==s&&t()}))}function im(s,t){Ai.size||window.addEventListener("resize",Th),Ai.set(s,t)}function nm(s){Ai.delete(s),Ai.size||window.removeEventListener("resize",Th)}function rm(s,t,e){const i=s.canvas,n=i&&$o(i);if(!n)return;const r=sh((a,l)=>{const c=n.clientWidth;e(a,l),c<n.clientWidth&&e()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||r(c,h)});return o.observe(n),im(s,r),o}function yr(s,t,e){e&&e.disconnect(),t==="resize"&&nm(s)}function om(s,t,e){const i=s.canvas,n=sh(r=>{s.ctx!==null&&e(tm(r,s))},s);return Xg(i,t,n),n}class am extends Sh{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(Kg(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[Sn])return!1;const i=e[Sn].initial;["height","width"].forEach(r=>{const o=i[r];Y(o)?e.removeAttribute(r):e.setAttribute(r,o)});const n=i.style||{};return Object.keys(n).forEach(r=>{e.style[r]=n[r]}),e.width=e.width,delete e[Sn],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const n=t.$proxies||(t.$proxies={}),o={attach:em,detach:sm,resize:rm}[e]||om;n[e]=o(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),n=i[e];if(!n)return;({attach:yr,detach:yr,resize:yr}[e]||Qg)(t,e,n),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,n){return Xf(t,e,i,n)}isAttached(t){const e=t&&$o(t);return!!(e&&e.isConnected)}}function lm(s){return!No()||typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas?Zg:am}class le{constructor(){C(this,"x");C(this,"y");C(this,"active",!1);C(this,"options");C(this,"$animations")}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Fs(this.x)&&Fs(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const n={};return t.forEach(r=>{n[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),n}}C(le,"defaults",{}),C(le,"defaultRoutes");function cm(s,t){const e=s.options.ticks,i=hm(s),n=Math.min(e.maxTicksLimit||i,i),r=e.major.enabled?dm(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>n)return fm(t,c,r,o/n),c;const h=um(r,t,n);if(o>0){let u,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(tn(t,c,h,Y(f)?0:a-f,a),u=0,d=o-1;u<d;u++)tn(t,c,h,r[u],r[u+1]);return tn(t,c,h,l,Y(f)?t.length:l+f),c}return tn(t,c,h),c}function hm(s){const t=s.options.offset,e=s._tickSize(),i=s._length/e+(t?0:1),n=s._maxLength/e;return Math.floor(Math.min(i,n))}function um(s,t,e){const i=gm(s),n=t.length/e;if(!i)return Math.max(n,1);const r=ef(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>n)return l}return Math.max(n,1)}function dm(s){const t=[];let e,i;for(e=0,i=s.length;e<i;e++)s[e].major&&t.push(e);return t}function fm(s,t,e,i){let n=0,r=e[0],o;for(i=Math.ceil(i),o=0;o<s.length;o++)o===r&&(t.push(s[o]),n++,r=e[n*i])}function tn(s,t,e,i,n){const r=j(i,0),o=Math.min(j(n,s.length),s.length);let a=0,l,c,h;for(e=Math.ceil(e),n&&(l=n-i,e=l/Math.floor(l/e)),h=r;h<0;)a++,h=Math.round(r+a*e);for(c=Math.max(r,0);c<o;c++)c===h&&(t.push(s[c]),a++,h=Math.round(r+a*e))}function gm(s){const t=s.length;let e,i;if(t<2)return!1;for(i=s[0],e=1;e<t;++e)if(s[e]-s[e-1]!==i)return!1;return i}const mm=s=>s==="left"?"right":s==="right"?"left":s,Ua=(s,t,e)=>t==="top"||t==="left"?s[t]+e:s[t]-e,qa=(s,t)=>Math.min(t||s,s);function Ya(s,t){const e=[],i=s.length/t,n=s.length;let r=0;for(;r<n;r+=i)e.push(s[Math.floor(r)]);return e}function pm(s,t,e){const i=s.ticks.length,n=Math.min(t,i-1),r=s._startPixel,o=s._endPixel,a=1e-6;let l=s.getPixelForTick(n),c;if(!(e&&(i===1?c=Math.max(l-r,o-l):t===0?c=(s.getPixelForTick(1)-l)/2:c=(l-s.getPixelForTick(n-1))/2,l+=n<t?c:-c,l<r-a||l>o+a)))return l}function _m(s,t){X(s,e=>{const i=e.gc,n=i.length/2;let r;if(n>t){for(r=0;r<n;++r)delete e.data[i[r]];i.splice(0,n)}})}function ii(s){return s.drawTicks?s.tickLength:0}function Ga(s,t){if(!s.display)return 0;const e=St(s.font,t),i=It(s.padding);return(ut(s.text)?s.text.length:1)*e.lineHeight+i.height}function bm(s,t){return Ue(s,{scale:t,type:"scale"})}function ym(s,t,e){return Ue(s,{tick:e,index:t,type:"tick"})}function vm(s,t,e){let i=Do(s);return(e&&t!=="right"||!e&&t==="right")&&(i=mm(i)),i}function wm(s,t,e,i){const{top:n,left:r,bottom:o,right:a,chart:l}=s,{chartArea:c,scales:h}=l;let u=0,d,f,g;const p=o-n,m=a-r;if(s.isHorizontal()){if(f=Ct(i,r,a),B(e)){const _=Object.keys(e)[0],b=e[_];g=h[_].getPixelForValue(b)+p-t}else e==="center"?g=(c.bottom+c.top)/2+p-t:g=Ua(s,e,t);d=a-r}else{if(B(e)){const _=Object.keys(e)[0],b=e[_];f=h[_].getPixelForValue(b)-m+t}else e==="center"?f=(c.left+c.right)/2-m+t:f=Ua(s,e,t);g=Ct(i,o,n),u=e==="left"?-yt:yt}return{titleX:f,titleY:g,maxWidth:d,rotation:u}}class gs extends le{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:n}=this;return t=Wt(t,Number.POSITIVE_INFINITY),e=Wt(e,Number.NEGATIVE_INFINITY),i=Wt(i,Number.POSITIVE_INFINITY),n=Wt(n,Number.NEGATIVE_INFINITY),{min:Wt(t,i),max:Wt(e,n),minDefined:mt(t),maxDefined:mt(e)}}getMinMax(t){let{min:e,max:i,minDefined:n,maxDefined:r}=this.getUserBounds(),o;if(n&&r)return{min:e,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),n||(e=Math.min(e,o.min)),r||(i=Math.max(i,o.max));return e=r&&e>i?i:e,i=n&&e>i?e:i,{min:Wt(e,Wt(i,e)),max:Wt(i,Wt(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){it(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:n,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Df(this,r,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Ya(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=cm(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){it(this.options.afterUpdate,[this])}beforeSetDimensions(){it(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){it(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),it(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){it(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,n,r;for(i=0,n=t.length;i<n;i++)r=t[i],r.label=it(e.callback,[r.value,i,t],this)}afterTickToLabelConversion(){it(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){it(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=qa(this.ticks.length,t.ticks.maxTicksLimit),n=e.minRotation||0,r=e.maxRotation;let o=n,a,l,c;if(!this._isVisible()||!e.display||n>=r||i<=1||!this.isHorizontal()){this.labelRotation=n;return}const h=this._getLabelSizes(),u=h.widest.width,d=h.highest.height,f=Tt(this.chart.width-u,0,this.maxWidth);a=t.offset?this.maxWidth/i:f/(i-1),u+6>a&&(a=f/(i-(t.offset?.5:1)),l=this.maxHeight-ii(t.grid)-e.padding-Ga(t.title,this.chart.options.font),c=Math.sqrt(u*u+d*d),o=Eo(Math.min(Math.asin(Tt((h.highest.height+6)/a,-1,1)),Math.asin(Tt(l/c,-1,1))-Math.asin(Tt(d/c,-1,1)))),o=Math.max(n,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){it(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){it(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:n,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Ga(n,e.options.font);if(a?(t.width=this.maxWidth,t.height=ii(r)+l):(t.height=this.maxHeight,t.width=ii(r)+l),i.display&&this.ticks.length){const{first:c,last:h,widest:u,highest:d}=this._getLabelSizes(),f=i.padding*2,g=re(this.labelRotation),p=Math.cos(g),m=Math.sin(g);if(a){const _=i.mirror?0:m*u.width+p*d.height;t.height=Math.min(this.maxHeight,t.height+_+f)}else{const _=i.mirror?0:p*u.width+m*d.height;t.width=Math.min(this.maxWidth,t.width+_+f)}this._calculatePadding(c,h,m,p)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,n){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=n*t.width,f=i*e.height):(d=i*t.height,f=n*e.width):r==="start"?f=e.width:r==="end"?d=t.width:r!=="inner"&&(d=t.width/2,f=e.width/2),this.paddingLeft=Math.max((d-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((f-u+o)*this.width/(this.width-u),0)}else{let h=e.height/2,u=t.height/2;r==="start"?(h=0,u=t.height):r==="end"&&(h=e.height,u=0),this.paddingTop=h+o,this.paddingBottom=u+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){it(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)Y(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=Ya(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:n,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(e/qa(e,i));let c=0,h=0,u,d,f,g,p,m,_,b,w,v,x;for(u=0;u<e;u+=l){if(g=t[u].label,p=this._resolveTickFontOptions(u),n.font=m=p.string,_=r[m]=r[m]||{data:{},gc:[]},b=p.lineHeight,w=v=0,!Y(g)&&!ut(g))w=Nn(n,_.data,_.gc,w,g),v=b;else if(ut(g))for(d=0,f=g.length;d<f;++d)x=g[d],!Y(x)&&!ut(x)&&(w=Nn(n,_.data,_.gc,w,x),v+=b);o.push(w),a.push(v),c=Math.max(w,c),h=Math.max(v,h)}_m(r,e);const O=o.indexOf(c),M=a.indexOf(h),T=E=>({width:o[E]||0,height:a[E]||0});return{first:T(0),last:T(e-1),widest:T(O),highest:T(M),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return rf(this._alignToPixels?Ye(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=ym(this.getContext(),t,i))}return this.$context||(this.$context=bm(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=re(this.labelRotation),i=Math.abs(Math.cos(e)),n=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*n?a/i:l/n:l*n<a*i?l/i:a/n}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,n=this.options,{grid:r,position:o,border:a}=n,l=r.offset,c=this.isHorizontal(),u=this.ticks.length+(l?1:0),d=ii(r),f=[],g=a.setContext(this.getContext()),p=g.display?g.width:0,m=p/2,_=function(F){return Ye(i,F,p)};let b,w,v,x,O,M,T,E,D,P,L,q;if(o==="top")b=_(this.bottom),M=this.bottom-d,E=b-m,P=_(t.top)+m,q=t.bottom;else if(o==="bottom")b=_(this.top),P=t.top,q=_(t.bottom)-m,M=b+m,E=this.top+d;else if(o==="left")b=_(this.right),O=this.right-d,T=b-m,D=_(t.left)+m,L=t.right;else if(o==="right")b=_(this.left),D=t.left,L=_(t.right)-m,O=b+m,T=this.left+d;else if(e==="x"){if(o==="center")b=_((t.top+t.bottom)/2+.5);else if(B(o)){const F=Object.keys(o)[0],H=o[F];b=_(this.chart.scales[F].getPixelForValue(H))}P=t.top,q=t.bottom,M=b+m,E=M+d}else if(e==="y"){if(o==="center")b=_((t.left+t.right)/2);else if(B(o)){const F=Object.keys(o)[0],H=o[F];b=_(this.chart.scales[F].getPixelForValue(H))}O=b-m,T=O-d,D=t.left,L=t.right}const G=j(n.ticks.maxTicksLimit,u),z=Math.max(1,Math.ceil(u/G));for(w=0;w<u;w+=z){const F=this.getContext(w),H=r.setContext(F),at=a.setContext(F),Z=H.lineWidth,Mt=H.color,J=at.dash||[],nt=at.dashOffset,Ot=H.tickWidth,lt=H.tickColor,Nt=H.tickBorderDash||[],Lt=H.tickBorderDashOffset;v=pm(this,w,l),v!==void 0&&(x=Ye(i,v,Z),c?O=T=D=L=x:M=E=P=q=x,f.push({tx1:O,ty1:M,tx2:T,ty2:E,x1:D,y1:P,x2:L,y2:q,width:Z,color:Mt,borderDash:J,borderDashOffset:nt,tickWidth:Ot,tickColor:lt,tickBorderDash:Nt,tickBorderDashOffset:Lt}))}return this._ticksLength=u,this._borderValue=b,f}_computeLabelItems(t){const e=this.axis,i=this.options,{position:n,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:u}=r,d=ii(i.grid),f=d+h,g=u?-h:f,p=-re(this.labelRotation),m=[];let _,b,w,v,x,O,M,T,E,D,P,L,q="middle";if(n==="top")O=this.bottom-g,M=this._getXAxisLabelAlignment();else if(n==="bottom")O=this.top+g,M=this._getXAxisLabelAlignment();else if(n==="left"){const z=this._getYAxisLabelAlignment(d);M=z.textAlign,x=z.x}else if(n==="right"){const z=this._getYAxisLabelAlignment(d);M=z.textAlign,x=z.x}else if(e==="x"){if(n==="center")O=(t.top+t.bottom)/2+f;else if(B(n)){const z=Object.keys(n)[0],F=n[z];O=this.chart.scales[z].getPixelForValue(F)+f}M=this._getXAxisLabelAlignment()}else if(e==="y"){if(n==="center")x=(t.left+t.right)/2-f;else if(B(n)){const z=Object.keys(n)[0],F=n[z];x=this.chart.scales[z].getPixelForValue(F)}M=this._getYAxisLabelAlignment(d).textAlign}e==="y"&&(l==="start"?q="top":l==="end"&&(q="bottom"));const G=this._getLabelSizes();for(_=0,b=a.length;_<b;++_){w=a[_],v=w.label;const z=r.setContext(this.getContext(_));T=this.getPixelForTick(_)+r.labelOffset,E=this._resolveTickFontOptions(_),D=E.lineHeight,P=ut(v)?v.length:1;const F=P/2,H=z.color,at=z.textStrokeColor,Z=z.textStrokeWidth;let Mt=M;o?(x=T,M==="inner"&&(_===b-1?Mt=this.options.reverse?"left":"right":_===0?Mt=this.options.reverse?"right":"left":Mt="center"),n==="top"?c==="near"||p!==0?L=-P*D+D/2:c==="center"?L=-G.highest.height/2-F*D+D:L=-G.highest.height+D/2:c==="near"||p!==0?L=D/2:c==="center"?L=G.highest.height/2-F*D:L=G.highest.height-P*D,u&&(L*=-1),p!==0&&!z.showLabelBackdrop&&(x+=D/2*Math.sin(p))):(O=T,L=(1-P)*D/2);let J;if(z.showLabelBackdrop){const nt=It(z.backdropPadding),Ot=G.heights[_],lt=G.widths[_];let Nt=L-nt.top,Lt=0-nt.left;switch(q){case"middle":Nt-=Ot/2;break;case"bottom":Nt-=Ot;break}switch(M){case"center":Lt-=lt/2;break;case"right":Lt-=lt;break;case"inner":_===b-1?Lt-=lt:_>0&&(Lt-=lt/2);break}J={left:Lt,top:Nt,width:lt+nt.width,height:Ot+nt.height,color:z.backdropColor}}m.push({label:v,font:E,textOffset:L,options:{rotation:p,color:H,strokeColor:at,strokeWidth:Z,textAlign:Mt,textBaseline:q,translation:[x,O],backdrop:J}})}return m}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-re(this.labelRotation))return t==="top"?"left":"right";let n="center";return e.align==="start"?n="left":e.align==="end"?n="right":e.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:n,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let c,h;return e==="left"?n?(h=this.right+r,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h=this.left)):e==="right"?n?(h=this.left+r,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:n,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,n,r,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex(r=>r.value===t);return n>=0?e.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,c,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(e.display)for(r=0,o=n.length;r<o;++r){const l=n[r];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:n}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const a=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,u,d;this.isHorizontal()?(c=Ye(t,this.left,o)-o/2,h=Ye(t,this.right,a)+a/2,u=d=l):(u=Ye(t,this.top,o)-o/2,d=Ye(t,this.bottom,a)+a/2,c=h=l),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(c,u),e.lineTo(h,d),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,n=this._computeLabelArea();n&&Kn(i,n);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,c=o.label,h=o.textOffset;fs(i,c,0,h,l,a)}n&&Xn(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:n}}=this;if(!i.display)return;const r=St(i.font),o=It(i.padding),a=i.align;let l=r.lineHeight/2;e==="bottom"||e==="center"||B(e)?(l+=o.bottom,ut(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:u,rotation:d}=wm(this,l,e,a);fs(t,i.text,0,0,r,{color:i.color,maxWidth:u,rotation:d,textAlign:vm(a,e,n),textBaseline:"middle",translation:[c,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=j(t.grid&&t.grid.z,-1),n=j(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==gs.prototype.draw?[{z:e,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",n=[];let r,o;for(r=0,o=e.length;r<o;++r){const a=e[r];a[i]===this.id&&(!t||a.type===t)&&n.push(a)}return n}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return St(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class en{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;Sm(e)&&(i=this.register(e));const n=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in n||(n[r]=t,xm(t,o,i),this.override&&pt.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,n=this.scope;i in e&&delete e[i],n&&i in pt[n]&&(delete pt[n][i],this.override&&delete ds[i])}}function xm(s,t,e){const i=Mi(Object.create(null),[e?pt.get(e):{},pt.get(t),s.defaults]);pt.set(t,i),s.defaultRoutes&&km(t,s.defaultRoutes),s.descriptors&&pt.describe(t,s.descriptors)}function km(s,t){Object.keys(t).forEach(e=>{const i=e.split("."),n=i.pop(),r=[s].concat(i).join("."),o=t[e].split("."),a=o.pop(),l=o.join(".");pt.route(r,n,l,a)})}function Sm(s){return"id"in s&&"defaults"in s}class Om{constructor(){this.controllers=new en(ae,"datasets",!0),this.elements=new en(le,"elements"),this.plugins=new en(Object,"plugins"),this.scales=new en(gs,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(n=>{const r=i||this._getRegistryForType(n);i||r.isForType(n)||r===this.plugins&&n.id?this._exec(t,r,n):X(n,o=>{const a=i||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,i){const n=Mo(t);it(i["before"+n],[],i),e[t](i),it(i["after"+n],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const n=e.get(t);if(n===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return n}}var fe=new Om;class Tm{constructor(){this._init=[]}notify(t,e,i,n){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=n?this._descriptors(t).filter(n):this._descriptors(t),o=this._notify(r,t,e,i);return e==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,n){n=n||{};for(const r of t){const o=r.plugin,a=o[i],l=[e,n,r.options];if(it(a,l,o)===!1&&n.cancelable)return!1}return!0}invalidate(){Y(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,n=j(i.options&&i.options.plugins,{}),r=Mm(i);return n===!1&&!e?[]:Cm(t,r,n,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,n=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(n(e,i),t,"stop"),this._notify(n(i,e),t,"start")}}function Mm(s){const t={},e=[],i=Object.keys(fe.plugins.items);for(let r=0;r<i.length;r++)e.push(fe.getPlugin(i[r]));const n=s.plugins||[];for(let r=0;r<n.length;r++){const o=n[r];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function Em(s,t){return!t&&s===!1?null:s===!0?{}:s}function Cm(s,{plugins:t,localIds:e},i,n){const r=[],o=s.getContext();for(const a of t){const l=a.id,c=Em(i[l],n);c!==null&&r.push({plugin:a,options:Dm(s.config,{plugin:a,local:e[l]},c,o)})}return r}function Dm(s,{plugin:t,local:e},i,n){const r=s.pluginScopeKeys(t),o=s.getOptionScopes(i,r);return e&&t.defaults&&o.push(t.defaults),s.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Zr(s,t){const e=pt.datasets[s]||{};return((t.datasets||{})[s]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function Am(s,t){let e=s;return s==="_index_"?e=t:s==="_value_"&&(e=t==="x"?"y":"x"),e}function Pm(s,t){return s===t?"_index_":"_value_"}function Za(s){if(s==="x"||s==="y"||s==="r")return s}function Im(s){if(s==="top"||s==="bottom")return"x";if(s==="left"||s==="right")return"y"}function Jr(s,...t){if(Za(s))return s;for(const e of t){const i=e.axis||Im(e.position)||s.length>1&&Za(s[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${s}' axis. Please provide 'axis' or 'position' option.`)}function Ja(s,t,e){if(e[t+"AxisID"]===s)return{axis:t}}function Lm(s,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===s||i.yAxisID===s);if(e.length)return Ja(s,"x",e[0])||Ja(s,"y",e[0])}return{}}function Rm(s,t){const e=ds[s.type]||{scales:{}},i=t.scales||{},n=Zr(s.type,t),r=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!B(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Jr(o,a,Lm(o,s),pt.scales[a.type]),c=Pm(l,n),h=e.scales||{};r[o]=pi(Object.create(null),[{axis:l},a,h[l],h[c]])}),s.data.datasets.forEach(o=>{const a=o.type||s.type,l=o.indexAxis||Zr(a,t),h=(ds[a]||{}).scales||{};Object.keys(h).forEach(u=>{const d=Am(u,l),f=o[d+"AxisID"]||d;r[f]=r[f]||Object.create(null),pi(r[f],[{axis:d},i[f],h[u]])})}),Object.keys(r).forEach(o=>{const a=r[o];pi(a,[pt.scales[a.type],pt.scale])}),r}function Mh(s){const t=s.options||(s.options={});t.plugins=j(t.plugins,{}),t.scales=Rm(s,t)}function Eh(s){return s=s||{},s.datasets=s.datasets||[],s.labels=s.labels||[],s}function Nm(s){return s=s||{},s.data=Eh(s.data),Mh(s),s}const Ka=new Map,Ch=new Set;function sn(s,t){let e=Ka.get(s);return e||(e=t(),Ka.set(s,e),Ch.add(e)),e}const ni=(s,t,e)=>{const i=We(t,e);i!==void 0&&s.add(i)};class $m{constructor(t){this._config=Nm(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Eh(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Mh(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return sn(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return sn(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return sn(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return sn(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let n=i.get(t);return(!n||e)&&(n=new Map,i.set(t,n)),n}getOptionScopes(t,e,i){const{options:n,type:r}=this,o=this._cachedScopes(t,i),a=o.get(e);if(a)return a;const l=new Set;e.forEach(h=>{t&&(l.add(t),h.forEach(u=>ni(l,t,u))),h.forEach(u=>ni(l,n,u)),h.forEach(u=>ni(l,ds[r]||{},u)),h.forEach(u=>ni(l,pt,u)),h.forEach(u=>ni(l,qr,u))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Ch.has(e)&&o.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,ds[e]||{},pt.datasets[e]||{},{type:e},pt,qr]}resolveNamedOptions(t,e,i,n=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=Xa(this._resolverCache,t,n);let l=o;if(jm(o,e)){r.$shared=!1,i=Be(i)?i():i;const c=this.createResolver(t,i,a);l=js(o,i,c)}for(const c of e)r[c]=l[c];return r}createResolver(t,e,i=[""],n){const{resolver:r}=Xa(this._resolverCache,t,i);return B(e)?js(r,e,void 0,n):r}}function Xa(s,t,e){let i=s.get(t);i||(i=new Map,s.set(t,i));const n=e.join();let r=i.get(n);return r||(r={resolver:Io(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},i.set(n,r)),r}const Fm=s=>B(s)&&Object.getOwnPropertyNames(s).some(t=>Be(s[t]));function jm(s,t){const{isScriptable:e,isIndexable:i}=lh(s);for(const n of t){const r=e(n),o=i(n),a=(o||r)&&s[n];if(r&&(Be(a)||Fm(a))||o&&ut(a))return!0}return!1}var zm="4.4.3";const Vm=["top","bottom","left","right","chartArea"];function Qa(s,t){return s==="top"||s==="bottom"||Vm.indexOf(s)===-1&&t==="x"}function tl(s,t){return function(e,i){return e[s]===i[s]?e[t]-i[t]:e[s]-i[s]}}function el(s){const t=s.chart,e=t.options.animation;t.notifyPlugins("afterRender"),it(e&&e.onComplete,[s],t)}function Wm(s){const t=s.chart,e=t.options.animation;it(e&&e.onProgress,[s],t)}function Dh(s){return No()&&typeof s=="string"?s=document.getElementById(s):s&&s.length&&(s=s[0]),s&&s.canvas&&(s=s.canvas),s}const On={},sl=s=>{const t=Dh(s);return Object.values(On).filter(e=>e.canvas===t).pop()};function Bm(s,t,e){const i=Object.keys(s);for(const n of i){const r=+n;if(r>=t){const o=s[n];delete s[n],(e>0||r>t)&&(s[r+e]=o)}}}function Hm(s,t,e,i){return!e||s.type==="mouseout"?null:i?t:s}function nn(s,t,e){return s.options.clip?s[e]:t[e]}function Um(s,t){const{xScale:e,yScale:i}=s;return e&&i?{left:nn(e,t,"left"),right:nn(e,t,"right"),top:nn(i,t,"top"),bottom:nn(i,t,"bottom")}:t}class ne{static register(...t){fe.add(...t),il()}static unregister(...t){fe.remove(...t),il()}constructor(t,e){const i=this.config=new $m(e),n=Dh(t),r=sl(n);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||lm(n)),this.platform.updateConfig(i);const a=this.platform.acquireContext(n,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=qd(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Tm,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=cf(u=>this.update(u),o.resizeDelay||0),this._dataChanges=[],On[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}pe.listen(this,"complete",el),pe.listen(this,"progress",Wm),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:n,_aspectRatio:r}=this;return Y(t)?e&&r?r:n?i/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return fe}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Sa(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return wa(this.canvas,this.ctx),this}stop(){return pe.stop(this),this}resize(t,e){pe.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,n=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(n,t,e,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Sa(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),it(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};X(e,(i,n)=>{i.id=n})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,n=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];e&&(r=r.concat(Object.keys(e).map(o=>{const a=e[o],l=Jr(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),X(r,o=>{const a=o.options,l=a.id,c=Jr(l,a),h=j(a.type,o.dtype);(a.position===void 0||Qa(a.position,c)!==Qa(o.dposition))&&(a.position=o.dposition),n[l]=!0;let u=null;if(l in i&&i[l].type===h)u=i[l];else{const d=fe.getScale(h);u=new d({id:l,type:h,ctx:this.ctx,chart:this}),i[u.id]=u}u.init(a,t)}),X(n,(o,a)=>{o||delete i[a]}),X(i,o=>{Pt.configure(this,o,o.options),Pt.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((n,r)=>n.index-r.index),i>e){for(let n=e;n<i;++n)this._destroyDatasetMeta(n);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(tl("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,n)=>{e.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,n;for(this._removeUnreferencedMetasets(),i=0,n=e.length;i<n;i++){const r=e[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||Zr(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=fe.getController(a),{datasetElementType:c,dataElementType:h}=pt.datasets[a];Object.assign(l,{dataElementType:fe.getElement(h),datasetElementType:c&&fe.getElement(c)}),o.controller=new l(this,i),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){X(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:u}=this.getDatasetMeta(c),d=!n&&r.indexOf(u)===-1;u.buildOrUpdateElements(d),o=Math.max(+u.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),n||X(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(tl("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){X(this.scales,t=>{Pt.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!da(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:n,count:r}of e){const o=i==="_removeElements"?-r:r;Bm(t,n,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),n=i(0);for(let r=1;r<e;r++)if(!da(n,i(r)))return;return Array.from(n).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Pt.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],X(this.boxes,n=>{i&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,r)=>{n._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,Be(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),n={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(i.controller._update(e),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(pe.has(this)?this.attached&&!pe.running(this)&&pe.start(this):(this.draw(),el({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:n}=this._resizeBeforeDraw;this._resize(i,n),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let n,r;for(n=0,r=e.length;n<r;++n){const o=e[n];(!t||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i=t._clip,n=!i.disabled,r=Um(t,this.chartArea),o={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(n&&Kn(e,{left:i.left===!1?0:r.left-i.left,right:i.right===!1?this.width:r.right+i.right,top:i.top===!1?0:r.top-i.top,bottom:i.bottom===!1?this.height:r.bottom+i.bottom}),t.controller.draw(),n&&Xn(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return ke(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,n){const r=Vg.modes[e];return typeof r=="function"?r(this,t,i,n):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let n=i.filter(r=>r&&r._dataset===e).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(n)),n}getContext(){return this.$context||(this.$context=Ue(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const n=i?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,n);Ei(e)?(r.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===t?n:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),pe.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),wa(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete On[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(r,o)=>{e.addEventListener(this,r,o),t[r]=o},n=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};X(this.options.events,r=>i(r,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(l,c)=>{e.addEventListener(this,l,c),t[l]=c},n=(l,c)=>{t[l]&&(e.removeEventListener(this,l,c),delete t[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{n("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,n("resize",r),this._stop(),this._resize(0,0),i("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){X(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},X(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const n=i?"set":"remove";let r,o,a,l;for(e==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+n+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[n+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!In(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const n=this.options.hover,r=(l,c)=>l.filter(h=>!c.some(u=>h.datasetIndex===u.datasetIndex&&h.index===u.index)),o=r(e,t),a=i?t:r(t,e);o.length&&this.updateHoverStyle(o,n.mode,!1),a.length&&n.mode&&this.updateHoverStyle(a,n.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},n=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,n)===!1)return;const r=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,n),(r||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:n=[],options:r}=this,o=e,a=this._getActiveElements(t,n,i,o),l=Xd(t),c=Hm(t,this._lastEvent,i,l);i&&(this._lastEvent=null,it(r.onHover,[t,a,this],this),l&&it(r.onClick,[t,a,this],this));const h=!In(a,n);return(h||e)&&(this._active=a,this._updateHoverStyles(a,n,e)),this._lastEvent=c,h}_getActiveElements(t,e,i,n){if(t.type==="mouseout")return[];if(!i)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,n)}}C(ne,"defaults",pt),C(ne,"instances",On),C(ne,"overrides",ds),C(ne,"registry",fe),C(ne,"version",zm),C(ne,"getChart",sl);function il(){return X(ne.instances,s=>s._plugins.invalidate())}function qm(s,t,e){const{startAngle:i,pixelMargin:n,x:r,y:o,outerRadius:a,innerRadius:l}=t;let c=n/a;s.beginPath(),s.arc(r,o,a,i-c,e+c),l>n?(c=n/l,s.arc(r,o,l,e+c,i-c,!0)):s.arc(r,o,n,e+yt,i-yt),s.closePath(),s.clip()}function Ym(s){return Po(s,["outerStart","outerEnd","innerStart","innerEnd"])}function Gm(s,t,e,i){const n=Ym(s.options.borderRadius),r=(e-t)/2,o=Math.min(r,i*t/2),a=l=>{const c=(e-Math.min(r,l))*i/2;return Tt(l,0,Math.min(r,c))};return{outerStart:a(n.outerStart),outerEnd:a(n.outerEnd),innerStart:Tt(n.innerStart,0,o),innerEnd:Tt(n.innerEnd,0,o)}}function ys(s,t,e,i){return{x:e+s*Math.cos(t),y:i+s*Math.sin(t)}}function jn(s,t,e,i,n,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=t,u=Math.max(t.outerRadius+i+e-c,0),d=h>0?h+i+e+c:0;let f=0;const g=n-l;if(i){const z=h>0?h-i:0,F=u>0?u-i:0,H=(z+F)/2,at=H!==0?g*H/(H+i):g;f=(g-at)/2}const p=Math.max(.001,g*u-e/ot)/u,m=(g-p)/2,_=l+m+f,b=n-m-f,{outerStart:w,outerEnd:v,innerStart:x,innerEnd:O}=Gm(t,d,u,b-_),M=u-w,T=u-v,E=_+w/M,D=b-v/T,P=d+x,L=d+O,q=_+x/P,G=b-O/L;if(s.beginPath(),r){const z=(E+D)/2;if(s.arc(o,a,u,E,z),s.arc(o,a,u,z,D),v>0){const Z=ys(T,D,o,a);s.arc(Z.x,Z.y,v,D,b+yt)}const F=ys(L,b,o,a);if(s.lineTo(F.x,F.y),O>0){const Z=ys(L,G,o,a);s.arc(Z.x,Z.y,O,b+yt,G+Math.PI)}const H=(b-O/d+(_+x/d))/2;if(s.arc(o,a,d,b-O/d,H,!0),s.arc(o,a,d,H,_+x/d,!0),x>0){const Z=ys(P,q,o,a);s.arc(Z.x,Z.y,x,q+Math.PI,_-yt)}const at=ys(M,_,o,a);if(s.lineTo(at.x,at.y),w>0){const Z=ys(M,E,o,a);s.arc(Z.x,Z.y,w,_-yt,E)}}else{s.moveTo(o,a);const z=Math.cos(E)*u+o,F=Math.sin(E)*u+a;s.lineTo(z,F);const H=Math.cos(D)*u+o,at=Math.sin(D)*u+a;s.lineTo(H,at)}s.closePath()}function Zm(s,t,e,i,n){const{fullCircles:r,startAngle:o,circumference:a}=t;let l=t.endAngle;if(r){jn(s,t,e,i,l,n);for(let c=0;c<r;++c)s.fill();isNaN(a)||(l=o+(a%rt||rt))}return jn(s,t,e,i,l,n),s.fill(),l}function Jm(s,t,e,i,n){const{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:h,borderDash:u,borderDashOffset:d}=l,f=l.borderAlign==="inner";if(!c)return;s.setLineDash(u||[]),s.lineDashOffset=d,f?(s.lineWidth=c*2,s.lineJoin=h||"round"):(s.lineWidth=c,s.lineJoin=h||"bevel");let g=t.endAngle;if(r){jn(s,t,e,i,g,n);for(let p=0;p<r;++p)s.stroke();isNaN(a)||(g=o+(a%rt||rt))}f&&qm(s,t,g),r||(jn(s,t,e,i,g,n),s.stroke())}class ui extends le{constructor(e){super();C(this,"circumference");C(this,"endAngle");C(this,"fullCircles");C(this,"innerRadius");C(this,"outerRadius");C(this,"pixelMargin");C(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,n){const r=this.getProps(["x","y"],n),{angle:o,distance:a}=Xc(r,{x:e,y:i}),{startAngle:l,endAngle:c,innerRadius:h,outerRadius:u,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),f=(this.options.spacing+this.options.borderWidth)/2,p=j(d,c-l)>=rt||Ci(o,l,c),m=we(a,h+f,u+f);return p&&m}getCenterPoint(e){const{x:i,y:n,startAngle:r,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:h}=this.options,u=(r+o)/2,d=(a+l+h+c)/2;return{x:i+Math.cos(u)*d,y:n+Math.sin(u)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:i,circumference:n}=this,r=(i.offset||0)/4,o=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=n>rt?Math.floor(n/rt):0,n===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*r,Math.sin(l)*r);const c=1-Math.sin(Math.min(ot,n||0)),h=r*c;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,Zm(e,this,h,o,a),Jm(e,this,h,o,a),e.restore()}}C(ui,"id","arc"),C(ui,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),C(ui,"defaultRoutes",{backgroundColor:"backgroundColor"}),C(ui,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function Ah(s,t,e=t){s.lineCap=j(e.borderCapStyle,t.borderCapStyle),s.setLineDash(j(e.borderDash,t.borderDash)),s.lineDashOffset=j(e.borderDashOffset,t.borderDashOffset),s.lineJoin=j(e.borderJoinStyle,t.borderJoinStyle),s.lineWidth=j(e.borderWidth,t.borderWidth),s.strokeStyle=j(e.borderColor,t.borderColor)}function Km(s,t,e){s.lineTo(e.x,e.y)}function Xm(s){return s.stepped?wf:s.tension||s.cubicInterpolationMode==="monotone"?xf:Km}function Ph(s,t,e={}){const i=s.length,{start:n=0,end:r=i-1}=e,{start:o,end:a}=t,l=Math.max(n,o),c=Math.min(r,a),h=n<o&&r<o||n>a&&r>a;return{count:i,start:l,loop:t.loop,ilen:c<l&&!h?i+c-l:c-l}}function Qm(s,t,e,i){const{points:n,options:r}=t,{count:o,start:a,loop:l,ilen:c}=Ph(n,e,i),h=Xm(r);let{move:u=!0,reverse:d}=i||{},f,g,p;for(f=0;f<=c;++f)g=n[(a+(d?c-f:f))%o],!g.skip&&(u?(s.moveTo(g.x,g.y),u=!1):h(s,p,g,d,r.stepped),p=g);return l&&(g=n[(a+(d?c:0))%o],h(s,p,g,d,r.stepped)),!!l}function tp(s,t,e,i){const n=t.points,{count:r,start:o,ilen:a}=Ph(n,e,i),{move:l=!0,reverse:c}=i||{};let h=0,u=0,d,f,g,p,m,_;const b=v=>(o+(c?a-v:v))%r,w=()=>{p!==m&&(s.lineTo(h,m),s.lineTo(h,p),s.lineTo(h,_))};for(l&&(f=n[b(0)],s.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=n[b(d)],f.skip)continue;const v=f.x,x=f.y,O=v|0;O===g?(x<p?p=x:x>m&&(m=x),h=(u*h+v)/++u):(w(),s.lineTo(v,x),g=O,u=0,p=m=x),_=x}w()}function Kr(s){const t=s.options,e=t.borderDash&&t.borderDash.length;return!s._decimated&&!s._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?tp:Qm}function ep(s){return s.stepped?tg:s.tension||s.cubicInterpolationMode==="monotone"?eg:es}function sp(s,t,e,i){let n=t._path;n||(n=t._path=new Path2D,t.path(n,e,i)&&n.closePath()),Ah(s,t.options),s.stroke(n)}function ip(s,t,e,i){const{segments:n,options:r}=t,o=Kr(t);for(const a of n)Ah(s,r,a.style),s.beginPath(),o(s,t,a,{start:e,end:e+i-1})&&s.closePath(),s.stroke()}const np=typeof Path2D=="function";function rp(s,t,e,i){np&&!t.options.segment?sp(s,t,e,i):ip(s,t,e,i)}class Fe extends le{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const n=i.spanGaps?this._loop:this._fullLoop;qf(this._points,i,t,n,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=ag(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,n=t[e],r=this.points,o=bh(this,{property:e,start:n,end:n});if(!o.length)return;const a=[],l=ep(i);let c,h;for(c=0,h=o.length;c<h;++c){const{start:u,end:d}=o[c],f=r[u],g=r[d];if(f===g){a.push(f);continue}const p=Math.abs((n-f[e])/(g[e]-f[e])),m=l(f,g,p,i.stepped);m[e]=t[e],a.push(m)}return a.length===1?a[0]:a}pathSegment(t,e,i){return Kr(this)(t,this,e,i)}path(t,e,i){const n=this.segments,r=Kr(this);let o=this._loop;e=e||0,i=i||this.points.length-e;for(const a of n)o&=r(t,this,a,{start:e,end:e+i-1});return!!o}draw(t,e,i,n){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),rp(t,this,i,n),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}C(Fe,"id","line"),C(Fe,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),C(Fe,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),C(Fe,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function nl(s,t,e,i){const n=s.options,{[e]:r}=s.getProps([e],i);return Math.abs(t-r)<n.radius+n.hitRadius}class Tn extends le{constructor(e){super();C(this,"parsed");C(this,"skip");C(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,n){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],n);return Math.pow(e-o,2)+Math.pow(i-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,i){return nl(this,e,"x",i)}inYRange(e,i){return nl(this,e,"y",i)}getCenterPoint(e){const{x:i,y:n}=this.getProps(["x","y"],e);return{x:i,y:n}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);const n=i&&e.borderWidth||0;return(i+n)*2}draw(e,i){const n=this.options;this.skip||n.radius<.1||!ke(this,i,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Yr(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}C(Tn,"id","point"),C(Tn,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),C(Tn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Ih(s,t){const{x:e,y:i,base:n,width:r,height:o}=s.getProps(["x","y","base","width","height"],t);let a,l,c,h,u;return s.horizontal?(u=o/2,a=Math.min(e,n),l=Math.max(e,n),c=i-u,h=i+u):(u=r/2,a=e-u,l=e+u,c=Math.min(i,n),h=Math.max(i,n)),{left:a,top:c,right:l,bottom:h}}function je(s,t,e,i){return s?0:Tt(t,e,i)}function op(s,t,e){const i=s.options.borderWidth,n=s.borderSkipped,r=ah(i);return{t:je(n.top,r.top,0,e),r:je(n.right,r.right,0,t),b:je(n.bottom,r.bottom,0,e),l:je(n.left,r.left,0,t)}}function ap(s,t,e){const{enableBorderRadius:i}=s.getProps(["enableBorderRadius"]),n=s.options.borderRadius,r=os(n),o=Math.min(t,e),a=s.borderSkipped,l=i||B(n);return{topLeft:je(!l||a.top||a.left,r.topLeft,0,o),topRight:je(!l||a.top||a.right,r.topRight,0,o),bottomLeft:je(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:je(!l||a.bottom||a.right,r.bottomRight,0,o)}}function lp(s){const t=Ih(s),e=t.right-t.left,i=t.bottom-t.top,n=op(s,e/2,i/2),r=ap(s,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:r},inner:{x:t.left+n.l,y:t.top+n.t,w:e-n.l-n.r,h:i-n.t-n.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,r.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(n.b,n.r))}}}}function vr(s,t,e,i){const n=t===null,r=e===null,a=s&&!(n&&r)&&Ih(s,i);return a&&(n||we(t,a.left,a.right))&&(r||we(e,a.top,a.bottom))}function cp(s){return s.topLeft||s.topRight||s.bottomLeft||s.bottomRight}function hp(s,t){s.rect(t.x,t.y,t.w,t.h)}function wr(s,t,e={}){const i=s.x!==e.x?-t:0,n=s.y!==e.y?-t:0,r=(s.x+s.w!==e.x+e.w?t:0)-i,o=(s.y+s.h!==e.y+e.h?t:0)-n;return{x:s.x+i,y:s.y+n,w:s.w+r,h:s.h+o,radius:s.radius}}class Mn extends le{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:n}}=this,{inner:r,outer:o}=lp(this),a=cp(o.radius)?Di:hp;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,wr(o,e,r)),t.clip(),a(t,wr(r,-e,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,wr(r,e)),t.fillStyle=n,t.fill(),t.restore()}inRange(t,e,i){return vr(this,t,e,i)}inXRange(t,e){return vr(this,t,null,e)}inYRange(t,e){return vr(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:n,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+n)/2:e,y:r?i:(i+n)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}C(Mn,"id","bar"),C(Mn,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),C(Mn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var up=Object.freeze({__proto__:null,ArcElement:ui,BarElement:Mn,LineElement:Fe,PointElement:Tn});const Xr=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],rl=Xr.map(s=>s.replace("rgb(","rgba(").replace(")",", 0.5)"));function Lh(s){return Xr[s%Xr.length]}function Rh(s){return rl[s%rl.length]}function dp(s,t){return s.borderColor=Lh(t),s.backgroundColor=Rh(t),++t}function fp(s,t){return s.backgroundColor=s.data.map(()=>Lh(t++)),t}function gp(s,t){return s.backgroundColor=s.data.map(()=>Rh(t++)),t}function mp(s){let t=0;return(e,i)=>{const n=s.getDatasetMeta(i).controller;n instanceof ns?t=fp(e,t):n instanceof vi?t=gp(e,t):n&&(t=dp(e,t))}}function ol(s){let t;for(t in s)if(s[t].borderColor||s[t].backgroundColor)return!0;return!1}function pp(s){return s&&(s.borderColor||s.backgroundColor)}var _p={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(s,t,e){if(!e.enabled)return;const{data:{datasets:i},options:n}=s.config,{elements:r}=n;if(!e.forceOverride&&(ol(i)||pp(n)||r&&ol(r)))return;const o=mp(s);i.forEach(o)}};function bp(s,t,e,i,n){const r=n.samples||i;if(r>=e)return s.slice(t,t+e);const o=[],a=(e-2)/(r-2);let l=0;const c=t+e-1;let h=t,u,d,f,g,p;for(o[l++]=s[h],u=0;u<r-2;u++){let m=0,_=0,b;const w=Math.floor((u+1)*a)+1+t,v=Math.min(Math.floor((u+2)*a)+1,e)+t,x=v-w;for(b=w;b<v;b++)m+=s[b].x,_+=s[b].y;m/=x,_/=x;const O=Math.floor(u*a)+1+t,M=Math.min(Math.floor((u+1)*a)+1,e)+t,{x:T,y:E}=s[h];for(f=g=-1,b=O;b<M;b++)g=.5*Math.abs((T-m)*(s[b].y-E)-(T-s[b].x)*(_-E)),g>f&&(f=g,d=s[b],p=b);o[l++]=d,h=p}return o[l++]=s[c],o}function yp(s,t,e,i){let n=0,r=0,o,a,l,c,h,u,d,f,g,p;const m=[],_=t+e-1,b=s[t].x,v=s[_].x-b;for(o=t;o<t+e;++o){a=s[o],l=(a.x-b)/v*i,c=a.y;const x=l|0;if(x===h)c<g?(g=c,u=o):c>p&&(p=c,d=o),n=(r*n+a.x)/++r;else{const O=o-1;if(!Y(u)&&!Y(d)){const M=Math.min(u,d),T=Math.max(u,d);M!==f&&M!==O&&m.push({...s[M],x:n}),T!==f&&T!==O&&m.push({...s[T],x:n})}o>0&&O!==f&&m.push(s[O]),m.push(a),h=x,r=0,g=p=c,u=d=f=o}}return m}function Nh(s){if(s._decimated){const t=s._data;delete s._decimated,delete s._data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function al(s){s.data.datasets.forEach(t=>{Nh(t)})}function vp(s,t){const e=t.length;let i=0,n;const{iScale:r}=s,{min:o,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(i=Tt(xe(t,r.axis,o).lo,0,e-1)),c?n=Tt(xe(t,r.axis,a).hi+1,i,e)-i:n=e-i,{start:i,count:n}}var wp={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(s,t,e)=>{if(!e.enabled){al(s);return}const i=s.width;s.data.datasets.forEach((n,r)=>{const{_data:o,indexAxis:a}=n,l=s.getDatasetMeta(r),c=o||n.data;if(ci([a,s.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const h=s.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||s.options.parsing)return;let{start:u,count:d}=vp(l,c);const f=e.threshold||4*i;if(d<=f){Nh(n);return}Y(o)&&(n._data=c,delete n.data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(p){this._data=p}}));let g;switch(e.algorithm){case"lttb":g=bp(c,u,d,i,e);break;case"min-max":g=yp(c,u,d,i);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}n._decimated=g})},destroy(s){al(s)}};function xp(s,t,e){const i=s.segments,n=s.points,r=t.points,o=[];for(const a of i){let{start:l,end:c}=a;c=jo(l,c,n);const h=Qr(e,n[l],n[c],a.loop);if(!t.segments){o.push({source:a,target:h,start:n[l],end:n[c]});continue}const u=bh(t,h);for(const d of u){const f=Qr(e,r[d.start],r[d.end],d.loop),g=_h(a,n,f);for(const p of g)o.push({source:p,target:d,start:{[e]:ll(h,f,"start",Math.max)},end:{[e]:ll(h,f,"end",Math.min)}})}}return o}function Qr(s,t,e,i){if(i)return;let n=t[s],r=e[s];return s==="angle"&&(n=Bt(n),r=Bt(r)),{property:s,start:n,end:r}}function kp(s,t){const{x:e=null,y:i=null}=s||{},n=t.points,r=[];return t.segments.forEach(({start:o,end:a})=>{a=jo(o,a,n);const l=n[o],c=n[a];i!==null?(r.push({x:l.x,y:i}),r.push({x:c.x,y:i})):e!==null&&(r.push({x:e,y:l.y}),r.push({x:e,y:c.y}))}),r}function jo(s,t,e){for(;t>s;t--){const i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function ll(s,t,e,i){return s&&t?i(s[e],t[e]):s?s[e]:t?t[e]:0}function $h(s,t){let e=[],i=!1;return ut(s)?(i=!0,e=s):e=kp(s,t),e.length?new Fe({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function cl(s){return s&&s.fill!==!1}function Sp(s,t,e){let n=s[t].fill;const r=[t];let o;if(!e)return n;for(;n!==!1&&r.indexOf(n)===-1;){if(!mt(n))return n;if(o=s[n],!o)return!1;if(o.visible)return n;r.push(n),n=o.fill}return!1}function Op(s,t,e){const i=Cp(s);if(B(i))return isNaN(i.value)?!1:i;let n=parseFloat(i);return mt(n)&&Math.floor(n)===n?Tp(i[0],t,n,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function Tp(s,t,e,i){return(s==="-"||s==="+")&&(e=t+e),e===t||e<0||e>=i?!1:e}function Mp(s,t){let e=null;return s==="start"?e=t.bottom:s==="end"?e=t.top:B(s)?e=t.getPixelForValue(s.value):t.getBasePixel&&(e=t.getBasePixel()),e}function Ep(s,t,e){let i;return s==="start"?i=e:s==="end"?i=t.options.reverse?t.min:t.max:B(s)?i=s.value:i=t.getBaseValue(),i}function Cp(s){const t=s.options,e=t.fill;let i=j(e&&e.target,e);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function Dp(s){const{scale:t,index:e,line:i}=s,n=[],r=i.segments,o=i.points,a=Ap(t,e);a.push($h({x:null,y:t.bottom},i));for(let l=0;l<r.length;l++){const c=r[l];for(let h=c.start;h<=c.end;h++)Pp(n,o[h],a)}return new Fe({points:n,options:{}})}function Ap(s,t){const e=[],i=s.getMatchingVisibleMetas("line");for(let n=0;n<i.length;n++){const r=i[n];if(r.index===t)break;r.hidden||e.unshift(r.dataset)}return e}function Pp(s,t,e){const i=[];for(let n=0;n<e.length;n++){const r=e[n],{first:o,last:a,point:l}=Ip(r,t,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(s.push(l),!a)break}}s.push(...i)}function Ip(s,t,e){const i=s.interpolate(t,e);if(!i)return{};const n=i[e],r=s.segments,o=s.points;let a=!1,l=!1;for(let c=0;c<r.length;c++){const h=r[c],u=o[h.start][e],d=o[h.end][e];if(we(n,u,d)){a=n===u,l=n===d;break}}return{first:a,last:l,point:i}}class Fh{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:n,y:r,radius:o}=this;return e=e||{start:0,end:rt},t.arc(n,r,o,e.end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:n}=this,r=t.angle;return{x:e+Math.cos(r)*n,y:i+Math.sin(r)*n,angle:r}}}function Lp(s){const{chart:t,fill:e,line:i}=s;if(mt(e))return Rp(t,e);if(e==="stack")return Dp(s);if(e==="shape")return!0;const n=Np(s);return n instanceof Fh?n:$h(n,i)}function Rp(s,t){const e=s.getDatasetMeta(t);return e&&s.isDatasetVisible(t)?e.dataset:null}function Np(s){return(s.scale||{}).getPointPositionForValue?Fp(s):$p(s)}function $p(s){const{scale:t={},fill:e}=s,i=Mp(e,t);if(mt(i)){const n=t.isHorizontal();return{x:n?i:null,y:n?null:i}}return null}function Fp(s){const{scale:t,fill:e}=s,i=t.options,n=t.getLabels().length,r=i.reverse?t.max:t.min,o=Ep(e,t,r),a=[];if(i.grid.circular){const l=t.getPointPositionForValue(0,r);return new Fh({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<n;++l)a.push(t.getPointPositionForValue(l,o));return a}function xr(s,t,e){const i=Lp(t),{line:n,scale:r,axis:o}=t,a=n.options,l=a.fill,c=a.backgroundColor,{above:h=c,below:u=c}=l||{};i&&n.points.length&&(Kn(s,e),jp(s,{line:n,target:i,above:h,below:u,area:e,scale:r,axis:o}),Xn(s))}function jp(s,t){const{line:e,target:i,above:n,below:r,area:o,scale:a}=t,l=e._loop?"angle":t.axis;s.save(),l==="x"&&r!==n&&(hl(s,i,o.top),ul(s,{line:e,target:i,color:n,scale:a,property:l}),s.restore(),s.save(),hl(s,i,o.bottom)),ul(s,{line:e,target:i,color:r,scale:a,property:l}),s.restore()}function hl(s,t,e){const{segments:i,points:n}=t;let r=!0,o=!1;s.beginPath();for(const a of i){const{start:l,end:c}=a,h=n[l],u=n[jo(l,c,n)];r?(s.moveTo(h.x,h.y),r=!1):(s.lineTo(h.x,e),s.lineTo(h.x,h.y)),o=!!t.pathSegment(s,a,{move:o}),o?s.closePath():s.lineTo(u.x,e)}s.lineTo(t.first().x,e),s.closePath(),s.clip()}function ul(s,t){const{line:e,target:i,property:n,color:r,scale:o}=t,a=xp(e,i,n);for(const{source:l,target:c,start:h,end:u}of a){const{style:{backgroundColor:d=r}={}}=l,f=i!==!0;s.save(),s.fillStyle=d,zp(s,o,f&&Qr(n,h,u)),s.beginPath();const g=!!e.pathSegment(s,l);let p;if(f){g?s.closePath():dl(s,i,u,n);const m=!!i.pathSegment(s,c,{move:g,reverse:!0});p=g&&m,p||dl(s,i,h,n)}s.closePath(),s.fill(p?"evenodd":"nonzero"),s.restore()}}function zp(s,t,e){const{top:i,bottom:n}=t.chart.chartArea,{property:r,start:o,end:a}=e||{};r==="x"&&(s.beginPath(),s.rect(o,i,a-o,n-i),s.clip())}function dl(s,t,e,i){const n=t.interpolate(e,i);n&&s.lineTo(n.x,n.y)}var Vp={id:"filler",afterDatasetsUpdate(s,t,e){const i=(s.data.datasets||[]).length,n=[];let r,o,a,l;for(o=0;o<i;++o)r=s.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof Fe&&(l={visible:s.isDatasetVisible(o),index:o,fill:Op(a,o,i),chart:s,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,n.push(l);for(o=0;o<i;++o)l=n[o],!(!l||l.fill===!1)&&(l.fill=Sp(n,o,e.propagate))},beforeDraw(s,t,e){const i=e.drawTime==="beforeDraw",n=s.getSortedVisibleDatasetMetas(),r=s.chartArea;for(let o=n.length-1;o>=0;--o){const a=n[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),i&&a.fill&&xr(s.ctx,a,r))}},beforeDatasetsDraw(s,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const i=s.getSortedVisibleDatasetMetas();for(let n=i.length-1;n>=0;--n){const r=i[n].$filler;cl(r)&&xr(s.ctx,r,s.chartArea)}},beforeDatasetDraw(s,t,e){const i=t.meta.$filler;!cl(i)||e.drawTime!=="beforeDatasetDraw"||xr(s.ctx,i,s.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const fl=(s,t)=>{let{boxHeight:e=t,boxWidth:i=t}=s;return s.usePointStyle&&(e=Math.min(e,t),i=s.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},Wp=(s,t)=>s!==null&&t!==null&&s.datasetIndex===t.datasetIndex&&s.index===t.index;class gl extends le{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=it(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,n)=>t.sort(i,n,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,n=St(i.font),r=n.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=fl(i,r);let c,h;e.font=n.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,r,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,n,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,n){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=n+a;let u=t;r.textAlign="left",r.textBaseline="middle";let d=-1,f=-h;return this.legendItems.forEach((g,p)=>{const m=i+e/2+r.measureText(g.text).width;(p===0||c[c.length-1]+m+2*a>o)&&(u+=h,c[c.length-(p>0?0:1)]=0,f+=h,d++),l[p]={left:0,top:f,row:d,width:m,height:n},c[c.length-1]+=m+a}),u}_fitCols(t,e,i,n){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-t;let u=a,d=0,f=0,g=0,p=0;return this.legendItems.forEach((m,_)=>{const{itemWidth:b,itemHeight:w}=Bp(i,e,r,m,n);_>0&&f+w+2*a>h&&(u+=d+a,c.push({width:d,height:f}),g+=d+a,p++,d=f=0),l[_]={left:g,top:f,col:p,width:b,height:w},d=Math.max(d,b),f+=w+a}),u+=d,c.push({width:d,height:f}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:n},rtl:r}}=this,o=Is(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ct(i,this.left+n,this.right-this.lineWidths[a]);for(const c of e)a!==c.row&&(a=c.row,l=Ct(i,this.left+n,this.right-this.lineWidths[a])),c.top+=this.top+t+n,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+n}else{let a=0,l=Ct(i,this.top+t+n,this.bottom-this.columnSizes[a].height);for(const c of e)c.col!==a&&(a=c.col,l=Ct(i,this.top+t+n,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+n,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Kn(t,this),this._draw(),Xn(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:n}=this,{align:r,labels:o}=t,a=pt.color,l=Is(t.rtl,this.left,this.width),c=St(o.font),{padding:h}=o,u=c.size,d=u/2;let f;this.drawTitle(),n.textAlign=l.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=c.string;const{boxWidth:g,boxHeight:p,itemHeight:m}=fl(o,u),_=function(O,M,T){if(isNaN(g)||g<=0||isNaN(p)||p<0)return;n.save();const E=j(T.lineWidth,1);if(n.fillStyle=j(T.fillStyle,a),n.lineCap=j(T.lineCap,"butt"),n.lineDashOffset=j(T.lineDashOffset,0),n.lineJoin=j(T.lineJoin,"miter"),n.lineWidth=E,n.strokeStyle=j(T.strokeStyle,a),n.setLineDash(j(T.lineDash,[])),o.usePointStyle){const D={radius:p*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:E},P=l.xPlus(O,g/2),L=M+d;oh(n,D,P,L,o.pointStyleWidth&&g)}else{const D=M+Math.max((u-p)/2,0),P=l.leftForLtr(O,g),L=os(T.borderRadius);n.beginPath(),Object.values(L).some(q=>q!==0)?Di(n,{x:P,y:D,w:g,h:p,radius:L}):n.rect(P,D,g,p),n.fill(),E!==0&&n.stroke()}n.restore()},b=function(O,M,T){fs(n,T.text,O,M+m/2,c,{strikethrough:T.hidden,textAlign:l.textAlign(T.textAlign)})},w=this.isHorizontal(),v=this._computeTitleHeight();w?f={x:Ct(r,this.left+h,this.right-i[0]),y:this.top+h+v,line:0}:f={x:this.left+h,y:Ct(r,this.top+v+h,this.bottom-e[0].height),line:0},gh(this.ctx,t.textDirection);const x=m+h;this.legendItems.forEach((O,M)=>{n.strokeStyle=O.fontColor,n.fillStyle=O.fontColor;const T=n.measureText(O.text).width,E=l.textAlign(O.textAlign||(O.textAlign=o.textAlign)),D=g+d+T;let P=f.x,L=f.y;l.setWidth(this.width),w?M>0&&P+D+h>this.right&&(L=f.y+=x,f.line++,P=f.x=Ct(r,this.left+h,this.right-i[f.line])):M>0&&L+x>this.bottom&&(P=f.x=P+e[f.line].width+h,f.line++,L=f.y=Ct(r,this.top+v+h,this.bottom-e[f.line].height));const q=l.x(P);if(_(q,L,O),P=hf(E,P+g+d,w?P+D:this.right,t.rtl),b(l.x(P),L,O),w)f.x+=D+h;else if(typeof O.text!="string"){const G=c.lineHeight;f.y+=jh(O,G)+h}else f.y+=x}),mh(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=St(e.font),n=It(e.padding);if(!e.display)return;const r=Is(t.rtl,this.left,this.width),o=this.ctx,a=e.position,l=i.size/2,c=n.top+l;let h,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),h=this.top+c,u=Ct(t.align,u,this.right-d);else{const g=this.columnSizes.reduce((p,m)=>Math.max(p,m.height),0);h=c+Ct(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}const f=Ct(a,u,u+d);o.textAlign=r.textAlign(Do(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,fs(o,e.text,f,h,i)}_computeTitleHeight(){const t=this.options.title,e=St(t.font),i=It(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,n,r;if(we(t,this.left,this.right)&&we(e,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(n=r[i],we(t,n.left,n.left+n.width)&&we(e,n.top,n.top+n.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!qp(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const n=this._hoveredItem,r=Wp(n,i);n&&!r&&it(e.onLeave,[t,n,this],this),this._hoveredItem=i,i&&!r&&it(e.onHover,[t,i,this],this)}else i&&it(e.onClick,[t,i,this],this)}}function Bp(s,t,e,i,n){const r=Hp(i,s,t,e),o=Up(n,i,t.lineHeight);return{itemWidth:r,itemHeight:o}}function Hp(s,t,e,i){let n=s.text;return n&&typeof n!="string"&&(n=n.reduce((r,o)=>r.length>o.length?r:o)),t+e.size/2+i.measureText(n).width}function Up(s,t,e){let i=s;return typeof t.text!="string"&&(i=jh(t,e)),i}function jh(s,t){const e=s.text?s.text.length:0;return t*e}function qp(s,t){return!!((s==="mousemove"||s==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(s==="click"||s==="mouseup"))}var Yp={id:"legend",_element:gl,start(s,t,e){const i=s.legend=new gl({ctx:s.ctx,options:e,chart:s});Pt.configure(s,i,e),Pt.addBox(s,i)},stop(s){Pt.removeBox(s,s.legend),delete s.legend},beforeUpdate(s,t,e){const i=s.legend;Pt.configure(s,i,e),i.options=e},afterUpdate(s){const t=s.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(s,t){t.replay||s.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(s,t,e){const i=t.datasetIndex,n=e.chart;n.isDatasetVisible(i)?(n.hide(i),t.hidden=!0):(n.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:s=>s.chart.options.color,boxWidth:40,padding:10,generateLabels(s){const t=s.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:n,color:r,useBorderRadius:o,borderRadius:a}}=s.legend.options;return s._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(e?0:void 0),h=It(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:n||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:s=>s.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:s=>!s.startsWith("on"),labels:{_scriptable:s=>!["generateLabels","filter","sort"].includes(s)}}};class zo extends le{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const n=ut(i.text)?i.text.length:1;this._padding=It(i.padding);const r=n*St(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:n,right:r,options:o}=this,a=o.align;let l=0,c,h,u;return this.isHorizontal()?(h=Ct(a,i,r),u=e+t,c=r-i):(o.position==="left"?(h=i+t,u=Ct(a,n,e),l=ot*-.5):(h=r-t,u=Ct(a,e,n),l=ot*.5),c=n-e),{titleX:h,titleY:u,maxWidth:c,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=St(e.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);fs(t,e.text,0,0,i,{color:e.color,maxWidth:l,rotation:c,textAlign:Do(e.align),textBaseline:"middle",translation:[o,a]})}}function Gp(s,t){const e=new zo({ctx:s.ctx,options:t,chart:s});Pt.configure(s,e,t),Pt.addBox(s,e),s.titleBlock=e}var Zp={id:"title",_element:zo,start(s,t,e){Gp(s,e)},stop(s){const t=s.titleBlock;Pt.removeBox(s,t),delete s.titleBlock},beforeUpdate(s,t,e){const i=s.titleBlock;Pt.configure(s,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const rn=new WeakMap;var Jp={id:"subtitle",start(s,t,e){const i=new zo({ctx:s.ctx,options:e,chart:s});Pt.configure(s,i,e),Pt.addBox(s,i),rn.set(s,i)},stop(s){Pt.removeBox(s,rn.get(s)),rn.delete(s)},beforeUpdate(s,t,e){const i=rn.get(s);Pt.configure(s,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const di={average(s){if(!s.length)return!1;let t,e,i=new Set,n=0,r=0;for(t=0,e=s.length;t<e;++t){const a=s[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),n+=l.y,++r}}return{x:[...i].reduce((a,l)=>a+l)/i.size,y:n/r}},nearest(s,t){if(!s.length)return!1;let e=t.x,i=t.y,n=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=s.length;r<o;++r){const l=s[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=Ur(t,c);h<n&&(n=h,a=l)}}if(a){const l=a.tooltipPosition();e=l.x,i=l.y}return{x:e,y:i}}};function de(s,t){return t&&(ut(t)?Array.prototype.push.apply(s,t):s.push(t)),s}function _e(s){return(typeof s=="string"||s instanceof String)&&s.indexOf(`
`)>-1?s.split(`
`):s}function Kp(s,t){const{element:e,datasetIndex:i,index:n}=t,r=s.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(n);return{chart:s,label:o,parsed:r.getParsed(n),raw:s.data.datasets[i].data[n],formattedValue:a,dataset:r.getDataset(),dataIndex:n,datasetIndex:i,element:e}}function ml(s,t){const e=s.chart.ctx,{body:i,footer:n,title:r}=s,{boxWidth:o,boxHeight:a}=t,l=St(t.bodyFont),c=St(t.titleFont),h=St(t.footerFont),u=r.length,d=n.length,f=i.length,g=It(t.padding);let p=g.height,m=0,_=i.reduce((v,x)=>v+x.before.length+x.lines.length+x.after.length,0);if(_+=s.beforeBody.length+s.afterBody.length,u&&(p+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),_){const v=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;p+=f*v+(_-f)*l.lineHeight+(_-1)*t.bodySpacing}d&&(p+=t.footerMarginTop+d*h.lineHeight+(d-1)*t.footerSpacing);let b=0;const w=function(v){m=Math.max(m,e.measureText(v).width+b)};return e.save(),e.font=c.string,X(s.title,w),e.font=l.string,X(s.beforeBody.concat(s.afterBody),w),b=t.displayColors?o+2+t.boxPadding:0,X(i,v=>{X(v.before,w),X(v.lines,w),X(v.after,w)}),b=0,e.font=h.string,X(s.footer,w),e.restore(),m+=g.width,{width:m,height:p}}function Xp(s,t){const{y:e,height:i}=t;return e<i/2?"top":e>s.height-i/2?"bottom":"center"}function Qp(s,t,e,i){const{x:n,width:r}=i,o=e.caretSize+e.caretPadding;if(s==="left"&&n+r+o>t.width||s==="right"&&n-r-o<0)return!0}function t_(s,t,e,i){const{x:n,width:r}=e,{width:o,chartArea:{left:a,right:l}}=s;let c="center";return i==="center"?c=n<=(a+l)/2?"left":"right":n<=r/2?c="left":n>=o-r/2&&(c="right"),Qp(c,s,t,e)&&(c="center"),c}function pl(s,t,e){const i=e.yAlign||t.yAlign||Xp(s,e);return{xAlign:e.xAlign||t.xAlign||t_(s,t,e,i),yAlign:i}}function e_(s,t){let{x:e,width:i}=s;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function s_(s,t,e){let{y:i,height:n}=s;return t==="top"?i+=e:t==="bottom"?i-=n+e:i-=n/2,i}function _l(s,t,e,i){const{caretSize:n,caretPadding:r,cornerRadius:o}=s,{xAlign:a,yAlign:l}=e,c=n+r,{topLeft:h,topRight:u,bottomLeft:d,bottomRight:f}=os(o);let g=e_(t,a);const p=s_(t,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(h,d)+n:a==="right"&&(g+=Math.max(u,f)+n),{x:Tt(g,0,i.width-t.width),y:Tt(p,0,i.height-t.height)}}function on(s,t,e){const i=It(e.padding);return t==="center"?s.x+s.width/2:t==="right"?s.x+s.width-i.right:s.x+i.left}function bl(s){return de([],_e(s))}function i_(s,t,e){return Ue(s,{tooltip:t,tooltipItems:e,type:"tooltip"})}function yl(s,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?s.override(e):s}const zh={beforeTitle:me,title(s){if(s.length>0){const t=s[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:me,beforeBody:me,beforeLabel:me,label(s){if(this&&this.options&&this.options.mode==="dataset")return s.label+": "+s.formattedValue||s.formattedValue;let t=s.dataset.label||"";t&&(t+=": ");const e=s.formattedValue;return Y(e)||(t+=e),t},labelColor(s){const e=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(s){const e=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:me,afterBody:me,beforeFooter:me,footer:me,afterFooter:me};function $t(s,t,e,i){const n=s[t].call(e,i);return typeof n>"u"?zh[t].call(e,i):n}class to extends le{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),n=i.enabled&&e.options.animation&&i.animations,r=new yh(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=i_(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,n=$t(i,"beforeTitle",this,t),r=$t(i,"title",this,t),o=$t(i,"afterTitle",this,t);let a=[];return a=de(a,_e(n)),a=de(a,_e(r)),a=de(a,_e(o)),a}getBeforeBody(t,e){return bl($t(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,n=[];return X(t,r=>{const o={before:[],lines:[],after:[]},a=yl(i,r);de(o.before,_e($t(a,"beforeLabel",this,r))),de(o.lines,$t(a,"label",this,r)),de(o.after,_e($t(a,"afterLabel",this,r))),n.push(o)}),n}getAfterBody(t,e){return bl($t(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,n=$t(i,"beforeFooter",this,t),r=$t(i,"footer",this,t),o=$t(i,"afterFooter",this,t);let a=[];return a=de(a,_e(n)),a=de(a,_e(r)),a=de(a,_e(o)),a}_createItems(t){const e=this._active,i=this.chart.data,n=[],r=[],o=[];let a=[],l,c;for(l=0,c=e.length;l<c;++l)a.push(Kp(this.chart,e[l]));return t.filter&&(a=a.filter((h,u,d)=>t.filter(h,u,d,i))),t.itemSort&&(a=a.sort((h,u)=>t.itemSort(h,u,i))),X(a,h=>{const u=yl(t.callbacks,h);n.push($t(u,"labelColor",this,h)),r.push($t(u,"labelPointStyle",this,h)),o.push($t(u,"labelTextColor",this,h))}),this.labelColors=n,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,e){const i=this.options.setContext(this.getContext()),n=this._active;let r,o=[];if(!n.length)this.opacity!==0&&(r={opacity:0});else{const a=di[i.position].call(this,n,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=ml(this,i),c=Object.assign({},a,l),h=pl(this.chart,i,c),u=_l(i,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,r={opacity:1,x:u.x,y:u.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,n){const r=this.getCaretPosition(t,i,n);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,i){const{xAlign:n,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:u}=os(a),{x:d,y:f}=t,{width:g,height:p}=e;let m,_,b,w,v,x;return r==="center"?(v=f+p/2,n==="left"?(m=d,_=m-o,w=v+o,x=v-o):(m=d+g,_=m+o,w=v-o,x=v+o),b=m):(n==="left"?_=d+Math.max(l,h)+o:n==="right"?_=d+g-Math.max(c,u)-o:_=this.caretX,r==="top"?(w=f,v=w-o,m=_-o,b=_+o):(w=f+p,v=w+o,m=_+o,b=_-o),x=w),{x1:m,x2:_,x3:b,y1:w,y2:v,y3:x}}drawTitle(t,e,i){const n=this.title,r=n.length;let o,a,l;if(r){const c=Is(i.rtl,this.x,this.width);for(t.x=on(this,i.titleAlign,i),e.textAlign=c.textAlign(i.titleAlign),e.textBaseline="middle",o=St(i.titleFont),a=i.titleSpacing,e.fillStyle=i.titleColor,e.font=o.string,l=0;l<r;++l)e.fillText(n[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=i.titleMarginBottom-a)}}_drawColorBox(t,e,i,n,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=r,h=St(r.bodyFont),u=on(this,"left",r),d=n.x(u),f=l<h.lineHeight?(h.lineHeight-l)/2:0,g=e.y+f;if(r.usePointStyle){const p={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},m=n.leftForLtr(d,c)+c/2,_=g+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Yr(t,p,m,_),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Yr(t,p,m,_)}else{t.lineWidth=B(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const p=n.leftForLtr(d,c),m=n.leftForLtr(n.xPlus(d,1),c-2),_=os(o.borderRadius);Object.values(_).some(b=>b!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Di(t,{x:p,y:g,w:c,h:l,radius:_}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Di(t,{x:m,y:g+1,w:c-2,h:l-2,radius:_}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(p,g,c,l),t.strokeRect(p,g,c,l),t.fillStyle=o.backgroundColor,t.fillRect(m,g+1,c-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:n}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=i,u=St(i.bodyFont);let d=u.lineHeight,f=0;const g=Is(i.rtl,this.x,this.width),p=function(T){e.fillText(T,g.x(t.x+f),t.y+d/2),t.y+=d+r},m=g.textAlign(o);let _,b,w,v,x,O,M;for(e.textAlign=o,e.textBaseline="middle",e.font=u.string,t.x=on(this,m,i),e.fillStyle=i.bodyColor,X(this.beforeBody,p),f=a&&m!=="right"?o==="center"?c/2+h:c+2+h:0,v=0,O=n.length;v<O;++v){for(_=n[v],b=this.labelTextColors[v],e.fillStyle=b,X(_.before,p),w=_.lines,a&&w.length&&(this._drawColorBox(e,t,v,g,i),d=Math.max(u.lineHeight,l)),x=0,M=w.length;x<M;++x)p(w[x]),d=u.lineHeight;X(_.after,p)}f=0,d=u.lineHeight,X(this.afterBody,p),t.y-=r}drawFooter(t,e,i){const n=this.footer,r=n.length;let o,a;if(r){const l=Is(i.rtl,this.x,this.width);for(t.x=on(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=l.textAlign(i.footerAlign),e.textBaseline="middle",o=St(i.footerFont),e.fillStyle=i.footerColor,e.font=o.string,a=0;a<r;++a)e.fillText(n[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+i.footerSpacing}}drawBackground(t,e,i,n){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:h}=i,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:g}=os(n.cornerRadius);e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.beginPath(),e.moveTo(a+u,l),o==="top"&&this.drawCaret(t,e,i,n),e.lineTo(a+c-d,l),e.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&r==="right"&&this.drawCaret(t,e,i,n),e.lineTo(a+c,l+h-g),e.quadraticCurveTo(a+c,l+h,a+c-g,l+h),o==="bottom"&&this.drawCaret(t,e,i,n),e.lineTo(a+f,l+h),e.quadraticCurveTo(a,l+h,a,l+h-f),o==="center"&&r==="left"&&this.drawCaret(t,e,i,n),e.lineTo(a,l+u),e.quadraticCurveTo(a,l,a+u,l),e.closePath(),e.fill(),n.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,n=i&&i.x,r=i&&i.y;if(n||r){const o=di[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=ml(this,t),l=Object.assign({},o,this._size),c=pl(e,t,l),h=_l(t,l,c,e);(n._to!==h.x||r._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const n={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=It(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(r,t,n,e),gh(t,e.textDirection),r.y+=o.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),mh(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,n=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!In(i,n),o=this._positionChanged(n,e);(r||o)&&(this._active=n,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,r=this._active||[],o=this._getActiveElements(t,r,e,i),a=this._positionChanged(o,t),l=e||!In(o,r)||a;return l&&(this._active=o,(n.enabled||n.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,i,n){const r=this.options;if(t.type==="mouseout")return[];if(!n)return e.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:i,caretY:n,options:r}=this,o=di[r.position].call(this,t,e);return o!==!1&&(i!==o.x||n!==o.y)}}C(to,"positioners",di);var n_={id:"tooltip",_element:to,positioners:di,afterInit(s,t,e){e&&(s.tooltip=new to({chart:s,options:e}))},beforeUpdate(s,t,e){s.tooltip&&s.tooltip.initialize(e)},reset(s,t,e){s.tooltip&&s.tooltip.initialize(e)},afterDraw(s){const t=s.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(s.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(s.ctx),s.notifyPlugins("afterTooltipDraw",e)}},afterEvent(s,t){if(s.tooltip){const e=t.replay;s.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(s,t)=>t.bodyFont.size,boxWidth:(s,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:zh},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:s=>s!=="filter"&&s!=="itemSort"&&s!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},r_=Object.freeze({__proto__:null,Colors:_p,Decimation:wp,Filler:Vp,Legend:Yp,SubTitle:Jp,Title:Zp,Tooltip:n_});const o_=(s,t,e,i)=>(typeof t=="string"?(e=s.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function a_(s,t,e,i){const n=s.indexOf(t);if(n===-1)return o_(s,t,e,i);const r=s.lastIndexOf(t);return n!==r?e:n}const l_=(s,t)=>s===null?null:Tt(Math.round(s),0,t);function vl(s){const t=this.getLabels();return s>=0&&s<t.length?t[s]:s}class eo extends gs{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:n,label:r}of e)i[n]===r&&i.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Y(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:a_(i,t,j(e,t),this._addedLabels),l_(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(n=this.getLabels().length-1)),this.min=i,this.max=n}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,n=[];let r=this.getLabels();r=t===0&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=t;o<=e;o++)n.push({value:o});return n}getLabelForValue(t){return vl.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}C(eo,"id","category"),C(eo,"defaults",{ticks:{callback:vl}});function c_(s,t){const e=[],{bounds:n,step:r,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:u,includeBounds:d}=s,f=r||1,g=h-1,{min:p,max:m}=t,_=!Y(o),b=!Y(a),w=!Y(c),v=(m-p)/(u+1);let x=ga((m-p)/g/f)*f,O,M,T,E;if(x<1e-14&&!_&&!b)return[{value:p},{value:m}];E=Math.ceil(m/x)-Math.floor(p/x),E>g&&(x=ga(E*x/g/f)*f),Y(l)||(O=Math.pow(10,l),x=Math.ceil(x*O)/O),n==="ticks"?(M=Math.floor(p/x)*x,T=Math.ceil(m/x)*x):(M=p,T=m),_&&b&&r&&sf((a-o)/r,x/1e3)?(E=Math.round(Math.min((a-o)/x,h)),x=(a-o)/E,M=o,T=a):w?(M=_?o:M,T=b?a:T,E=c-1,x=(T-M)/E):(E=(T-M)/x,_i(E,Math.round(E),x/1e3)?E=Math.round(E):E=Math.ceil(E));const D=Math.max(ma(x),ma(M));O=Math.pow(10,Y(l)?D:l),M=Math.round(M*O)/O,T=Math.round(T*O)/O;let P=0;for(_&&(d&&M!==o?(e.push({value:o}),M<o&&P++,_i(Math.round((M+P*x)*O)/O,o,wl(o,v,s))&&P++):M<o&&P++);P<E;++P){const L=Math.round((M+P*x)*O)/O;if(b&&L>a)break;e.push({value:L})}return b&&d&&T!==a?e.length&&_i(e[e.length-1].value,a,wl(a,v,s))?e[e.length-1].value=a:e.push({value:a}):(!b||T===a)&&e.push({value:T}),e}function wl(s,t,{horizontal:e,minRotation:i}){const n=re(i),r=(e?Math.sin(n):Math.cos(n))||.001,o=.75*t*(""+s).length;return Math.min(t/r,o)}class zn extends gs{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Y(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:n,max:r}=this;const o=l=>n=e?n:l,a=l=>r=i?r:l;if(t){const l=ge(n),c=ge(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(n===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(n-l)}this.min=n,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,n;return i?(n=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),e=e||11),e&&(n=Math.min(e,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const n={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},r=this._range||this,o=c_(n,r);return t.bounds==="ticks"&&Kc(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const n=(i-e)/Math.max(t.length-1,1)/2;e-=n,i+=n}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Fi(t,this.chart.options.locale,this.options.ticks.format)}}class so extends zn{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=mt(t)?t:0,this.max=mt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=re(this.options.ticks.minRotation),n=(t?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/n))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}C(so,"id","linear"),C(so,"defaults",{ticks:{callback:Jn.formatters.numeric}});const Pi=s=>Math.floor($e(s)),Ze=(s,t)=>Math.pow(10,Pi(s)+t);function xl(s){return s/Math.pow(10,Pi(s))===1}function kl(s,t,e){const i=Math.pow(10,e),n=Math.floor(s/i);return Math.ceil(t/i)-n}function h_(s,t){const e=t-s;let i=Pi(e);for(;kl(s,t,i)>10;)i++;for(;kl(s,t,i)<10;)i--;return Math.min(i,Pi(s))}function u_(s,{min:t,max:e}){t=Wt(s.min,t);const i=[],n=Pi(t);let r=h_(t,e),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=n>r?Math.pow(10,n):0,c=Math.round((t-l)*o)/o,h=Math.floor((t-l)/a/10)*a*10;let u=Math.floor((c-h)/Math.pow(10,r)),d=Wt(s.min,Math.round((l+h+u*Math.pow(10,r))*o)/o);for(;d<e;)i.push({value:d,major:xl(d),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(r++,u=2,o=r>=0?1:o),d=Math.round((l+h+u*Math.pow(10,r))*o)/o;const f=Wt(s.max,d);return i.push({value:f,major:xl(f),significand:u}),i}class io extends gs{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=zn.prototype.parse.apply(this,[t,e]);if(i===0){this._zero=!0;return}return mt(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=mt(t)?Math.max(0,t):null,this.max=mt(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!mt(this._userMin)&&(this.min=t===Ze(this.min,0)?Ze(this.min,-1):Ze(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,n=this.max;const r=a=>i=t?i:a,o=a=>n=e?n:a;i===n&&(i<=0?(r(1),o(10)):(r(Ze(i,-1)),o(Ze(n,1)))),i<=0&&r(Ze(n,-1)),n<=0&&o(Ze(i,1)),this.min=i,this.max=n}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},i=u_(e,this);return t.bounds==="ticks"&&Kc(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":Fi(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=$e(t),this._valueRange=$e(this.max)-$e(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:($e(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}C(io,"id","logarithmic"),C(io,"defaults",{ticks:{callback:Jn.formatters.logarithmic,major:{enabled:!0}}});function no(s){const t=s.ticks;if(t.display&&s.display){const e=It(t.backdropPadding);return j(t.font&&t.font.size,pt.font.size)+e.height}return 0}function d_(s,t,e){return e=ut(e)?e:[e],{w:vf(s,t.string,e),h:e.length*t.lineHeight}}function Sl(s,t,e,i,n){return s===i||s===n?{start:t-e/2,end:t+e/2}:s<i||s>n?{start:t-e,end:t}:{start:t,end:t+e}}function f_(s){const t={l:s.left+s._padding.left,r:s.right-s._padding.right,t:s.top+s._padding.top,b:s.bottom-s._padding.bottom},e=Object.assign({},t),i=[],n=[],r=s._pointLabels.length,o=s.options.pointLabels,a=o.centerPointLabels?ot/r:0;for(let l=0;l<r;l++){const c=o.setContext(s.getPointLabelContext(l));n[l]=c.padding;const h=s.getPointPosition(l,s.drawingArea+n[l],a),u=St(c.font),d=d_(s.ctx,u,s._pointLabels[l]);i[l]=d;const f=Bt(s.getIndexAngle(l)+a),g=Math.round(Eo(f)),p=Sl(g,h.x,d.w,0,180),m=Sl(g,h.y,d.h,90,270);g_(e,t,f,p,m)}s.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),s._pointLabelItems=__(s,i,n)}function g_(s,t,e,i,n){const r=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let a=0,l=0;i.start<t.l?(a=(t.l-i.start)/r,s.l=Math.min(s.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/r,s.r=Math.max(s.r,t.r+a)),n.start<t.t?(l=(t.t-n.start)/o,s.t=Math.min(s.t,t.t-l)):n.end>t.b&&(l=(n.end-t.b)/o,s.b=Math.max(s.b,t.b+l))}function m_(s,t,e){const i=s.drawingArea,{extra:n,additionalAngle:r,padding:o,size:a}=e,l=s.getPointPosition(t,i+n+o,r),c=Math.round(Eo(Bt(l.angle+yt))),h=v_(l.y,a.h,c),u=b_(c),d=y_(l.x,a.w,u);return{visible:!0,x:l.x,y:h,textAlign:u,left:d,top:h,right:d+a.w,bottom:h+a.h}}function p_(s,t){if(!t)return!0;const{left:e,top:i,right:n,bottom:r}=s;return!(ke({x:e,y:i},t)||ke({x:e,y:r},t)||ke({x:n,y:i},t)||ke({x:n,y:r},t))}function __(s,t,e){const i=[],n=s._pointLabels.length,r=s.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:no(r)/2,additionalAngle:o?ot/n:0};let c;for(let h=0;h<n;h++){l.padding=e[h],l.size=t[h];const u=m_(s,h,l);i.push(u),a==="auto"&&(u.visible=p_(u,c),u.visible&&(c=u))}return i}function b_(s){return s===0||s===180?"center":s<180?"left":"right"}function y_(s,t,e){return e==="right"?s-=t:e==="center"&&(s-=t/2),s}function v_(s,t,e){return e===90||e===270?s-=t/2:(e>270||e<90)&&(s-=t),s}function w_(s,t,e){const{left:i,top:n,right:r,bottom:o}=e,{backdropColor:a}=t;if(!Y(a)){const l=os(t.borderRadius),c=It(t.backdropPadding);s.fillStyle=a;const h=i-c.left,u=n-c.top,d=r-i+c.width,f=o-n+c.height;Object.values(l).some(g=>g!==0)?(s.beginPath(),Di(s,{x:h,y:u,w:d,h:f,radius:l}),s.fill()):s.fillRect(h,u,d,f)}}function x_(s,t){const{ctx:e,options:{pointLabels:i}}=s;for(let n=t-1;n>=0;n--){const r=s._pointLabelItems[n];if(!r.visible)continue;const o=i.setContext(s.getPointLabelContext(n));w_(e,o,r);const a=St(o.font),{x:l,y:c,textAlign:h}=r;fs(e,s._pointLabels[n],l,c+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function Vh(s,t,e,i){const{ctx:n}=s;if(e)n.arc(s.xCenter,s.yCenter,t,0,rt);else{let r=s.getPointPosition(0,t);n.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=s.getPointPosition(o,t),n.lineTo(r.x,r.y)}}function k_(s,t,e,i,n){const r=s.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!i||!a||!l||e<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(n.dash),r.lineDashOffset=n.dashOffset,r.beginPath(),Vh(s,e,o,i),r.closePath(),r.stroke(),r.restore())}function S_(s,t,e){return Ue(s,{label:e,index:t,type:"pointLabel"})}class fi extends zn{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=It(no(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=mt(t)&&!isNaN(t)?t:0,this.max=mt(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/no(this.options))}generateTickLabels(t){zn.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{const n=it(this.options.pointLabels.callback,[e,i],this);return n||n===0?n:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?f_(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,n){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,n))}getIndexAngle(t){const e=rt/(this._pointLabels.length||1),i=this.options.startAngle||0;return Bt(t*e+re(i))}getDistanceFromCenterForValue(t){if(Y(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Y(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return S_(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const n=this.getIndexAngle(t)-yt+i;return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter,angle:n}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:n,bottom:r}=this._pointLabelItems[t];return{left:e,top:i,right:n,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),Vh(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:n,border:r}=e,o=this._pointLabels.length;let a,l,c;if(e.pointLabels.display&&x_(this,o),n.display&&this.ticks.forEach((h,u)=>{if(u!==0||u===0&&this.min<0){l=this.getDistanceFromCenterForValue(h.value);const d=this.getContext(u),f=n.setContext(d),g=r.setContext(d);k_(this,f,l,o,g)}}),i.display){for(t.save(),a=o-1;a>=0;a--){const h=i.setContext(this.getPointLabelContext(a)),{color:u,lineWidth:d}=h;!d||!u||(t.lineWidth=d,t.strokeStyle=u,t.setLineDash(h.borderDash),t.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const n=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(n),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!e.reverse)return;const c=i.setContext(this.getContext(l)),h=St(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=h.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const u=It(c.backdropPadding);t.fillRect(-o/2-u.left,-r-h.size/2-u.top,o+u.width,h.size+u.height)}fs(t,a.label,0,-r,h,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}}C(fi,"id","radialLinear"),C(fi,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Jn.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),C(fi,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),C(fi,"descriptors",{angleLines:{_fallback:"grid"}});const tr={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},zt=Object.keys(tr);function Ol(s,t){return s-t}function Tl(s,t){if(Y(t))return null;const e=s._adapter,{parser:i,round:n,isoWeekday:r}=s._parseOpts;let o=t;return typeof i=="function"&&(o=i(o)),mt(o)||(o=typeof i=="string"?e.parse(o,i):e.parse(o)),o===null?null:(n&&(o=n==="week"&&(Fs(r)||r===!0)?e.startOf(o,"isoWeek",r):e.startOf(o,n)),+o)}function Ml(s,t,e,i){const n=zt.length;for(let r=zt.indexOf(s);r<n-1;++r){const o=tr[zt[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=i)return zt[r]}return zt[n-1]}function O_(s,t,e,i,n){for(let r=zt.length-1;r>=zt.indexOf(e);r--){const o=zt[r];if(tr[o].common&&s._adapter.diff(n,i,o)>=t-1)return o}return zt[e?zt.indexOf(e):0]}function T_(s){for(let t=zt.indexOf(s)+1,e=zt.length;t<e;++t)if(tr[zt[t]].common)return zt[t]}function El(s,t,e){if(!e)s[t]=!0;else if(e.length){const{lo:i,hi:n}=Co(e,t),r=e[i]>=t?e[i]:e[n];s[r]=!0}}function M_(s,t,e,i){const n=s._adapter,r=+n.startOf(t[0].value,i),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+n.add(a,1,i))l=e[a],l>=0&&(t[l].major=!0);return t}function Cl(s,t,e){const i=[],n={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],n[a]=o,i.push({value:a,major:!1});return r===0||!e?i:M_(s,i,n,e)}class Ii extends gs{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),n=this._adapter=new Ng._date(t.adapters.date);n.init(e),pi(i.displayFormats,n.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:Tl(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:n,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(n=Math.min(n,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),n=mt(n)&&!isNaN(n)?n:+e.startOf(Date.now(),i),r=mt(r)&&!isNaN(r)?r:+e.endOf(Date.now(),i)+1,this.min=Math.min(n,r-1),this.max=Math.max(n+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,n=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const r=this.min,o=this.max,a=af(n,r,o);return this._unit=e.unit||(i.autoSkip?Ml(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):O_(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:T_(this._unit),this.initOffsets(n),t.reverse&&a.reverse(),Cl(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,n,r;this.options.offset&&t.length&&(n=this.getDecimalForValue(t[0]),t.length===1?e=1-n:e=(this.getDecimalForValue(t[1])-n)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?i=r:i=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;e=Tt(e,0,o),i=Tt(i,0,o),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,n=this.options,r=n.time,o=r.unit||Ml(r.minUnit,e,i,this._getLabelCapacity(e)),a=j(n.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=Fs(l)||l===!0,h={};let u=e,d,f;if(c&&(u=+t.startOf(u,"isoWeek",l)),u=+t.startOf(u,c?"day":o),t.diff(i,e,o)>1e5*a)throw new Error(e+" and "+i+" are too far apart with stepSize of "+a+" "+o);const g=n.ticks.source==="data"&&this.getDataTimestamps();for(d=u,f=0;d<i;d=+t.add(d,a,o),f++)El(h,d,g);return(d===i||n.bounds==="ticks"||f===1)&&El(h,d,g),Object.keys(h).sort(Ol).map(p=>+p)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const n=this.options.time.displayFormats,r=this._unit,o=e||n[r];return this._adapter.format(t,o)}_tickFormatFunction(t,e,i,n){const r=this.options,o=r.ticks.callback;if(o)return it(o,[t,e,i],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],u=c&&a[c],d=i[e],f=c&&u&&d&&d.major;return this._adapter.format(t,n||(f?u:h))}generateTickLabels(t){let e,i,n;for(e=0,i=t.length;e<i;++e)n=t[e],n.label=this._tickFormatFunction(n.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,n=re(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(n),o=Math.sin(n),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,n=i[e.unit]||i.millisecond,r=this._tickFormatFunction(t,0,Cl(this,[t],this._majorUnit),n),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(e=0,i=n.length;e<i;++e)t=t.concat(n[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const n=this.getLabels();for(e=0,i=n.length;e<i;++e)t.push(Tl(this,n[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return th(t.sort(Ol))}}C(Ii,"id","time"),C(Ii,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function an(s,t,e){let i=0,n=s.length-1,r,o,a,l;e?(t>=s[i].pos&&t<=s[n].pos&&({lo:i,hi:n}=xe(s,"pos",t)),{pos:r,time:a}=s[i],{pos:o,time:l}=s[n]):(t>=s[i].time&&t<=s[n].time&&({lo:i,hi:n}=xe(s,"time",t)),{time:r,pos:a}=s[i],{time:o,pos:l}=s[n]);const c=o-r;return c?a+(l-a)*(t-r)/c:a}class ro extends Ii{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=an(e,this.min),this._tableRange=an(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,n=[],r=[];let o,a,l,c,h;for(o=0,a=t.length;o<a;++o)c=t[o],c>=e&&c<=i&&n.push(c);if(n.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,a=n.length;o<a;++o)h=n[o+1],l=n[o-1],c=n[o],Math.round((h+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((n,r)=>n-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(an(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return an(this._table,i*this._tableRange+this._minPos,!0)}}C(ro,"id","timeseries"),C(ro,"defaults",Ii.defaults);var E_=Object.freeze({__proto__:null,CategoryScale:eo,LinearScale:so,LogarithmicScale:io,RadialLinearScale:fi,TimeScale:Ii,TimeSeriesScale:ro});const C_=[Rg,up,r_,E_],vs=[];function zi(s,t=N){let e;const i=new Set;function n(a){if(ue(s,a)&&(s=a,e)){const l=!vs.length;for(const c of i)c[1](),vs.push(c,s);if(l){for(let c=0;c<vs.length;c+=2)vs[c][0](vs[c+1]);vs.length=0}}}function r(a){n(a(s))}function o(a,l=N){const c=[a,l];return i.add(c),i.size===1&&(e=t(n,r)||N),a(s),()=>{i.delete(c),i.size===0&&e&&(e(),e=null)}}return{set:n,update:r,subscribe:o}}const D_="modulepreload",A_=function(s){return"/"+s},Dl={},Vs=function(t,e,i){let n=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),o=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));n=Promise.all(e.map(a=>{if(a=A_(a),a in Dl)return;Dl[a]=!0;const l=a.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${c}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":D_,l||(h.as="script",h.crossOrigin=""),h.href=a,o&&h.setAttribute("nonce",o),document.head.appendChild(h),l)return new Promise((u,d)=>{h.addEventListener("load",u),h.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${a}`)))})}))}return n.then(()=>t()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})},P_=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...e)=>Vs(()=>Promise.resolve().then(()=>Vi),void 0).then(({default:i})=>i(...e)):t=fetch,(...e)=>t(...e)};class Vo extends Error{constructor(t,e="FunctionsError",i){super(t),this.name=e,this.context=i}}class I_ extends Vo{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class L_ extends Vo{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class R_ extends Vo{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var oo;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(oo||(oo={}));var N_=function(s,t,e,i){function n(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):n(h.value).then(a,l)}c((i=i.apply(s,t||[])).next())})};class $_{constructor(t,{headers:e={},customFetch:i,region:n=oo.Any}={}){this.url=t,this.headers=e,this.region=n,this.fetch=P_(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,e={}){var i;return N_(this,void 0,void 0,function*(){try{const{headers:n,method:r,body:o}=e;let a={},{region:l}=e;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const h=yield this.fetch(`${this.url}/${t}`,{method:r||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),n),body:c}).catch(g=>{throw new I_(g)}),u=h.headers.get("x-relay-error");if(u&&u==="true")throw new L_(h);if(!h.ok)throw new R_(h);let d=((i=h.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),f;return d==="application/json"?f=yield h.json():d==="application/octet-stream"?f=yield h.blob():d==="text/event-stream"?f=h:d==="multipart/form-data"?f=yield h.formData():f=yield h.text(),{data:f,error:null}}catch(n){return{data:null,error:n}}})}}var F_=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ws=F_();const j_=Ws.fetch,Wo=Ws.fetch.bind(Ws),Wh=Ws.Headers,z_=Ws.Request,V_=Ws.Response,Vi=Object.freeze(Object.defineProperty({__proto__:null,Headers:Wh,Request:z_,Response:V_,default:Wo,fetch:j_},Symbol.toStringTag,{value:"Module"}));class W_ extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}class B_{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Wo:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const i=this.fetch;let n=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async r=>{var o,a,l;let c=null,h=null,u=null,d=r.status,f=r.statusText;if(r.ok){if(this.method!=="HEAD"){const _=await r.text();_===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?h=_:h=JSON.parse(_))}const p=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),m=(a=r.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");p&&m&&m.length>1&&(u=parseInt(m[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(c={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,u=null,d=406,f="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const p=await r.text();try{c=JSON.parse(p),Array.isArray(c)&&r.status===404&&(h=[],c=null,d=200,f="OK")}catch{r.status===404&&p===""?(d=204,f="No Content"):c={message:p}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,d=200,f="OK"),c&&this.shouldThrowOnError)throw new W_(c)}return{error:c,data:h,count:u,status:d,statusText:f}});return this.shouldThrowOnError||(n=n.catch(r=>{var o,a,l;return{error:{message:`${(o=r==null?void 0:r.name)!==null&&o!==void 0?o:"FetchError"}: ${r==null?void 0:r.message}`,details:`${(a=r==null?void 0:r.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=r==null?void 0:r.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),n.then(t,e)}}class H_ extends B_{select(t){let e=!1;const i=(t??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:e=!0,nullsFirst:i,foreignTable:n,referencedTable:r=n}={}){const o=r?`${r}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:i=e}={}){const n=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,e,{foreignTable:i,referencedTable:n=i}={}){const r=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:e=!1,settings:i=!1,buffers:n=!1,wal:r=!1,format:o="text"}={}){var a;const l=[t?"analyze":null,e?"verbose":null,i?"settings":null,n?"buffers":null,r?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Es extends H_{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){const i=Array.from(new Set(e)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${i})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:i,type:n}={}){let r="";n==="plain"?r="pl":n==="phrase"?r="ph":n==="websearch"&&(r="w");const o=i===void 0?"":`(${i})`;return this.url.searchParams.append(t,`${r}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,i])=>{this.url.searchParams.append(e,`eq.${i}`)}),this}not(t,e,i){return this.url.searchParams.append(t,`not.${e}.${i}`),this}or(t,{foreignTable:e,referencedTable:i=e}={}){const n=i?`${i}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,e,i){return this.url.searchParams.append(t,`${e}.${i}`),this}}class U_{constructor(t,{headers:e={},schema:i,fetch:n}){this.url=t,this.headers=e,this.schema=i,this.fetch=n}select(t,{head:e=!1,count:i}={}){const n=e?"HEAD":"GET";let r=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",o),i&&(this.headers.Prefer=`count=${i}`),new Es({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:e,defaultToNull:i=!0}={}){const n="POST",r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),e&&r.push(`count=${e}`),i||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(t)){const o=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Es({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:e,ignoreDuplicates:i=!1,count:n,defaultToNull:r=!0}={}){const o="POST",a=[`resolution=${i?"ignore":"merge"}-duplicates`];if(e!==void 0&&this.url.searchParams.set("on_conflict",e),this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),r||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const l=t.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(l.length>0){const c=[...new Set(l)].map(h=>`"${h}"`);this.url.searchParams.set("columns",c.join(","))}}return new Es({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:e}={}){const i="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),e&&n.push(`count=${e}`),this.headers.Prefer=n.join(","),new Es({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const e="DELETE",i=[];return t&&i.push(`count=${t}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new Es({method:e,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const q_="1.15.2",Y_={"X-Client-Info":`postgrest-js/${q_}`};class Bo{constructor(t,{headers:e={},schema:i,fetch:n}={}){this.url=t,this.headers=Object.assign(Object.assign({},Y_),e),this.schemaName=i,this.fetch=n}from(t){const e=new URL(`${this.url}/${t}`);return new U_(e,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Bo(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:i=!1,get:n=!1,count:r}={}){let o;const a=new URL(`${this.url}/rpc/${t}`);let l;i||n?(o=i?"HEAD":"GET",Object.entries(e).filter(([h,u])=>u!==void 0).map(([h,u])=>[h,Array.isArray(u)?`{${u.join(",")}}`:`${u}`]).forEach(([h,u])=>{a.searchParams.append(h,u)})):(o="POST",l=e);const c=Object.assign({},this.headers);return r&&(c.Prefer=`count=${r}`),new Es({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}}const G_="2.9.5",Z_={"X-Client-Info":`realtime-js/${G_}`},J_="1.0.0",Bh=1e4,K_=1e3;var Ls;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Ls||(Ls={}));var Vt;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(Vt||(Vt={}));var ie;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(ie||(ie={}));var ao;(function(s){s.websocket="websocket"})(ao||(ao={}));var is;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(is||(is={}));class Hh{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class X_{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const e=new DataView(t),i=new TextDecoder;return this._decodeBroadcast(t,e,i)}_decodeBroadcast(t,e,i){const n=e.getUint8(1),r=e.getUint8(2);let o=this.HEADER_LENGTH+2;const a=i.decode(t.slice(o,o+n));o=o+n;const l=i.decode(t.slice(o,o+r));o=o+r;const c=JSON.parse(i.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class kr{constructor(t,e,i={},n=Bh){this.channel=t,this.event=e,this.payload=i,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var i;return this._hasReceived(t)&&e((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Al;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Al||(Al={}));class wi{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(e==null?void 0:e.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},n=>{const{onJoin:r,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=wi.syncState(this.state,n,r,o),this.pendingDiffs.forEach(l=>{this.state=wi.syncDiff(this.state,l,r,o)}),this.pendingDiffs=[],a()}),this.channel._on(i.diff,{},n=>{const{onJoin:r,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=wi.syncDiff(this.state,n,r,o),a())}),this.onJoin((n,r,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:r,newPresences:o})}),this.onLeave((n,r,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:r,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,i,n){const r=this.cloneDeep(t),o=this.transformState(e),a={},l={};return this.map(r,(c,h)=>{o[c]||(l[c]=h)}),this.map(o,(c,h)=>{const u=r[c];if(u){const d=h.map(m=>m.presence_ref),f=u.map(m=>m.presence_ref),g=h.filter(m=>f.indexOf(m.presence_ref)<0),p=u.filter(m=>d.indexOf(m.presence_ref)<0);g.length>0&&(a[c]=g),p.length>0&&(l[c]=p)}else a[c]=h}),this.syncDiff(r,{joins:a,leaves:l},i,n)}static syncDiff(t,e,i,n){const{joins:r,leaves:o}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return i||(i=()=>{}),n||(n=()=>{}),this.map(r,(a,l)=>{var c;const h=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),h.length>0){const u=t[a].map(f=>f.presence_ref),d=h.filter(f=>u.indexOf(f.presence_ref)<0);t[a].unshift(...d)}i(a,h,l)}),this.map(o,(a,l)=>{let c=t[a];if(!c)return;const h=l.map(u=>u.presence_ref);c=c.filter(u=>h.indexOf(u.presence_ref)<0),t[a]=c,n(a,c,l),c.length===0&&delete t[a]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(i=>e(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,i)=>{const n=t[i];return"metas"in n?e[i]=n.metas.map(r=>(r.presence_ref=r.phx_ref,delete r.phx_ref,delete r.phx_ref_prev,r)):e[i]=n,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var st;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(st||(st={}));const Pl=(s,t,e={})=>{var i;const n=(i=e.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(t).reduce((r,o)=>(r[o]=Q_(o,s,t,n),r),{})},Q_=(s,t,e,i)=>{const n=t.find(a=>a.name===s),r=n==null?void 0:n.type,o=e[s];return r&&!i.includes(r)?Uh(r,o):lo(o)},Uh=(s,t)=>{if(s.charAt(0)==="_"){const e=s.slice(1,s.length);return ib(t,e)}switch(s){case st.bool:return tb(t);case st.float4:case st.float8:case st.int2:case st.int4:case st.int8:case st.numeric:case st.oid:return eb(t);case st.json:case st.jsonb:return sb(t);case st.timestamp:return nb(t);case st.abstime:case st.date:case st.daterange:case st.int4range:case st.int8range:case st.money:case st.reltime:case st.text:case st.time:case st.timestamptz:case st.timetz:case st.tsrange:case st.tstzrange:return lo(t);default:return lo(t)}},lo=s=>s,tb=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},eb=s=>{if(typeof s=="string"){const t=parseFloat(s);if(!Number.isNaN(t))return t}return s},sb=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(t){return console.log(`JSON parse error: ${t}`),s}return s},ib=(s,t)=>{if(typeof s!="string")return s;const e=s.length-1,i=s[e];if(s[0]==="{"&&i==="}"){let r;const o=s.slice(1,e);try{r=JSON.parse("["+o+"]")}catch{r=o?o.split(","):[]}return r.map(a=>Uh(t,a))}return s},nb=s=>typeof s=="string"?s.replace(" ","T"):s;var Il;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Il||(Il={}));var Ll;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes"})(Ll||(Ll={}));var Rl;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(Rl||(Rl={}));class Ho{constructor(t,e={config:{}},i){this.topic=t,this.params=e,this.socket=i,this.bindings={},this.state=Vt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},e.config),this.timeout=this.socket.timeout,this.joinPush=new kr(this,ie.join,this.params,this.timeout),this.rejoinTimer=new Hh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Vt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Vt.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ie.reply,{},(n,r)=>{this._trigger(this._replyEventName(r),n)}),this.presence=new wi(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(t,e=this.timeout){var i,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:r,presence:o}}=this.params;this._onError(c=>t&&t("CHANNEL_ERROR",c)),this._onClose(()=>t&&t("CLOSED"));const a={},l={broadcast:r,presence:o,postgres_changes:(n=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(c=>c.filter))!==null&&n!==void 0?n:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},a)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",({postgres_changes:c})=>{var h;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){t&&t("SUBSCRIBED");return}else{const u=this.bindings.postgres_changes,d=(h=u==null?void 0:u.length)!==null&&h!==void 0?h:0,f=[];for(let g=0;g<d;g++){const p=u[g],{filter:{event:m,schema:_,table:b,filter:w}}=p,v=c&&c[g];if(v&&v.event===m&&v.schema===_&&v.table===b&&v.filter===w)f.push(Object.assign(Object.assign({},p),{id:v.id}));else{this.unsubscribe(),t&&t("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,t&&t("SUBSCRIBED");return}}).receive("error",c=>{t&&t("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{t&&t("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(t,e={}){return await this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,e,i){return this._on(t,e,i)}async send(t,e={}){var i,n;if(!this._canPush()&&t.type==="broadcast"){const{event:r,payload:o}=t,a={method:"POST",headers:{apikey:(i=this.socket.apiKey)!==null&&i!==void 0?i:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:o}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,a,(n=e.timeout)!==null&&n!==void 0?n:this.timeout)).ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(r=>{var o,a,l;const c=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&r("ok"),c.receive("ok",()=>r("ok")),c.receive("error",()=>r("error")),c.receive("timeout",()=>r("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Vt.leaving;const e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ie.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(i=>{const n=new kr(this,ie.leave,{},t);n.receive("ok",()=>{e(),i("ok")}).receive("timeout",()=>{e(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}_broadcastEndpointURL(){let t=this.socket.endPoint;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(t,e,i){const n=new AbortController,r=setTimeout(()=>n.abort(),i),o=await this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:n.signal}));return clearTimeout(r),o}_push(t,e,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new kr(this,t,e,i);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(t,e,i){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,i){var n,r;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:h}=ie;if(i&&[a,l,c,h].indexOf(o)>=0&&i!==this._joinRef())return;let d=this._onMessage(o,e,i);if(e&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(f=>{var g,p,m;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((m=(p=f.filter)===null||p===void 0?void 0:p.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===o}).map(f=>f.callback(d,i)):(r=this.bindings[o])===null||r===void 0||r.filter(f=>{var g,p,m,_,b,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const v=f.id,x=(g=f.filter)===null||g===void 0?void 0:g.event;return v&&((p=e.ids)===null||p===void 0?void 0:p.includes(v))&&(x==="*"||(x==null?void 0:x.toLocaleLowerCase())===((m=e.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const v=(b=(_=f==null?void 0:f.filter)===null||_===void 0?void 0:_.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return v==="*"||v===((w=e==null?void 0:e.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof d=="object"&&"ids"in d){const g=d.data,{schema:p,table:m,commit_timestamp:_,type:b,errors:w}=g;d=Object.assign(Object.assign({},{schema:p,table:m,commit_timestamp:_,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(g))}f.callback(d,i)})}_isClosed(){return this.state===Vt.closed}_isJoined(){return this.state===Vt.joined}_isJoining(){return this.state===Vt.joining}_isLeaving(){return this.state===Vt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,i){const n=t.toLocaleLowerCase(),r={type:n,filter:e,callback:i};return this.bindings[n]?this.bindings[n].push(r):this.bindings[n]=[r],this}_off(t,e){const i=t.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(n=>{var r;return!(((r=n.type)===null||r===void 0?void 0:r.toLocaleLowerCase())===i&&Ho.isEqual(n.filter,e))}),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(t[i]!==e[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ie.close,{},t)}_onError(t){this._on(ie.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Vt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=Pl(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=Pl(t.columns,t.old_record)),e}}const rb=()=>{},ob=typeof WebSocket<"u";class ab{constructor(t,e){var i;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=Z_,this.params={},this.timeout=Bh,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=rb,this.conn=null,this.sendBuffer=[],this.serializer=new X_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=r=>{let o;return r?o=r:typeof fetch>"u"?o=(...a)=>Vs(()=>Promise.resolve().then(()=>Vi),void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${t}/${ao.websocket}`,e!=null&&e.transport?this.transport=e.transport:this.transport=null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.headers&&(this.headers=Object.assign(Object.assign({},this.headers),e.headers)),e!=null&&e.timeout&&(this.timeout=e.timeout),e!=null&&e.logger&&(this.logger=e.logger),e!=null&&e.heartbeatIntervalMs&&(this.heartbeatIntervalMs=e.heartbeatIntervalMs);const n=(i=e==null?void 0:e.params)===null||i===void 0?void 0:i.apikey;n&&(this.accessToken=n,this.apiKey=n),this.reconnectAfterMs=e!=null&&e.reconnectAfterMs?e.reconnectAfterMs:r=>[1e3,2e3,5e3,1e4][r-1]||1e4,this.encode=e!=null&&e.encode?e.encode:(r,o)=>o(JSON.stringify(r)),this.decode=e!=null&&e.decode?e.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Hh(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(e==null?void 0:e.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(ob){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new lb(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),Vs(()=>import("./browser-BImCA5dO.js").then(t=>t.b),[]).then(({default:t})=>{this.conn=new t(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(t,e){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,e??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const e=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),e}async removeAllChannels(){const t=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.disconnect(),t}log(t,e,i){this.logger(t,e,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Ls.connecting:return is.Connecting;case Ls.open:return is.Open;case Ls.closing:return is.Closing;default:return is.Closed}}isConnected(){return this.connectionState()===is.Open}channel(t,e={config:{}}){const i=new Ho(`realtime:${t}`,e,this);return this.channels.push(i),i}push(t){const{topic:e,event:i,payload:n,ref:r}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${e} ${i} (${r})`,n),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(t){this.accessToken=t,this.channels.forEach(e=>{t&&e.updateJoinPayload({access_token:t}),e.joinedOnce&&e._isJoined()&&e._push(ie.access_token,{access_token:t})})}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:J_}))}_onConnMessage(t){this.decode(t.data,e=>{let{topic:i,event:n,payload:r,ref:o}=e;(o&&o===this.pendingHeartbeatRef||n===(r==null?void 0:r.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${r.status||""} ${i} ${n} ${o&&"("+o+")"||""}`,r),this.channels.filter(a=>a._isMember(i)).forEach(a=>a._trigger(n,r,o)),this.stateChangeCallbacks.message.forEach(a=>a(e))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(e=>e(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(e=>e(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(ie.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;const i=t.match(/\?/)?"&":"?",n=new URLSearchParams(e);return`${t}${i}${n}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(K_,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class lb{constructor(t,e,i){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ls.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=i.close}}class Uo extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Dt(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class cb extends Uo{constructor(t,e){super(t),this.name="StorageApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Nl extends Uo{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}}var hb=function(s,t,e,i){function n(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):n(h.value).then(a,l)}c((i=i.apply(s,t||[])).next())})};const qh=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...e)=>Vs(()=>Promise.resolve().then(()=>Vi),void 0).then(({default:i})=>i(...e)):t=fetch,(...e)=>t(...e)},ub=()=>hb(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Vs(()=>Promise.resolve().then(()=>Vi),void 0)).Response:Response});var Us=function(s,t,e,i){function n(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):n(h.value).then(a,l)}c((i=i.apply(s,t||[])).next())})};const Sr=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),db=(s,t)=>Us(void 0,void 0,void 0,function*(){const e=yield ub();s instanceof e?s.json().then(i=>{t(new cb(Sr(i),s.status||500))}).catch(i=>{t(new Nl(Sr(i),i))}):t(new Nl(Sr(s),s))}),fb=(s,t,e,i)=>{const n={method:s,headers:(t==null?void 0:t.headers)||{}};return s==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n.body=JSON.stringify(i),Object.assign(Object.assign({},n),e))};function er(s,t,e,i,n,r){return Us(this,void 0,void 0,function*(){return new Promise((o,a)=>{s(e,fb(t,i,n,r)).then(l=>{if(!l.ok)throw l;return i!=null&&i.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>db(l,a))})})}function co(s,t,e,i){return Us(this,void 0,void 0,function*(){return er(s,"GET",t,e,i)})}function Pe(s,t,e,i,n){return Us(this,void 0,void 0,function*(){return er(s,"POST",t,i,n,e)})}function gb(s,t,e,i,n){return Us(this,void 0,void 0,function*(){return er(s,"PUT",t,i,n,e)})}function Yh(s,t,e,i,n){return Us(this,void 0,void 0,function*(){return er(s,"DELETE",t,i,n,e)})}var qt=function(s,t,e,i){function n(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):n(h.value).then(a,l)}c((i=i.apply(s,t||[])).next())})};const mb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$l={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class pb{constructor(t,e={},i,n){this.url=t,this.headers=e,this.bucketId=i,this.fetch=qh(n)}uploadOrUpdate(t,e,i,n){return qt(this,void 0,void 0,function*(){try{let r;const o=Object.assign(Object.assign({},$l),n),a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&i instanceof Blob?(r=new FormData,r.append("cacheControl",o.cacheControl),r.append("",i)):typeof FormData<"u"&&i instanceof FormData?(r=i,r.append("cacheControl",o.cacheControl)):(r=i,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType);const l=this._removeEmptyFolders(e),c=this._getFinalPath(l),h=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:t,body:r,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),u=yield h.json();return h.ok?{data:{path:l,id:u.Id,fullPath:u.Key},error:null}:{data:null,error:u}}catch(r){if(Dt(r))return{data:null,error:r};throw r}})}upload(t,e,i){return qt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,i)})}uploadToSignedUrl(t,e,i,n){return qt(this,void 0,void 0,function*(){const r=this._removeEmptyFolders(t),o=this._getFinalPath(r),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let l;const c=Object.assign({upsert:$l.upsert},n),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.append("cacheControl",c.cacheControl)):(l=i,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType);const u=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:h}),d=yield u.json();return u.ok?{data:{path:r,fullPath:d.Key},error:null}:{data:null,error:d}}catch(l){if(Dt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t){return qt(this,void 0,void 0,function*(){try{let e=this._getFinalPath(t);const i=yield Pe(this.fetch,`${this.url}/object/upload/sign/${e}`,{},{headers:this.headers}),n=new URL(this.url+i.url),r=n.searchParams.get("token");if(!r)throw new Uo("No token returned by API");return{data:{signedUrl:n.toString(),path:t,token:r},error:null}}catch(e){if(Dt(e))return{data:null,error:e};throw e}})}update(t,e,i){return qt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,i)})}move(t,e){return qt(this,void 0,void 0,function*(){try{return{data:yield Pe(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e},{headers:this.headers}),error:null}}catch(i){if(Dt(i))return{data:null,error:i};throw i}})}copy(t,e){return qt(this,void 0,void 0,function*(){try{return{data:{path:(yield Pe(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e},{headers:this.headers})).Key},error:null}}catch(i){if(Dt(i))return{data:null,error:i};throw i}})}createSignedUrl(t,e,i){return qt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),r=yield Pe(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:e},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const o=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return r={signedUrl:encodeURI(`${this.url}${r.signedURL}${o}`)},{data:r,error:null}}catch(n){if(Dt(n))return{data:null,error:n};throw n}})}createSignedUrls(t,e,i){return qt(this,void 0,void 0,function*(){try{const n=yield Pe(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),r=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${r}`):null})),error:null}}catch(n){if(Dt(n))return{data:null,error:n};throw n}})}download(t,e){return qt(this,void 0,void 0,function*(){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),o=r?`?${r}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield co(this.fetch,`${this.url}/${n}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Dt(a))return{data:null,error:a};throw a}})}getPublicUrl(t,e){const i=this._getFinalPath(t),n=[],r=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";r!==""&&n.push(r);const a=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});l!==""&&n.push(l);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${i}${c}`)}}}remove(t){return qt(this,void 0,void 0,function*(){try{return{data:yield Yh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(Dt(e))return{data:null,error:e};throw e}})}list(t,e,i){return qt(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},mb),e),{prefix:t||""});return{data:yield Pe(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},i),error:null}}catch(n){if(Dt(n))return{data:null,error:n};throw n}})}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}}const _b="2.5.5",bb={"X-Client-Info":`storage-js/${_b}`};var ws=function(s,t,e,i){function n(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):n(h.value).then(a,l)}c((i=i.apply(s,t||[])).next())})};class yb{constructor(t,e={},i){this.url=t,this.headers=Object.assign(Object.assign({},bb),e),this.fetch=qh(i)}listBuckets(){return ws(this,void 0,void 0,function*(){try{return{data:yield co(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Dt(t))return{data:null,error:t};throw t}})}getBucket(t){return ws(this,void 0,void 0,function*(){try{return{data:yield co(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(Dt(e))return{data:null,error:e};throw e}})}createBucket(t,e={public:!1}){return ws(this,void 0,void 0,function*(){try{return{data:yield Pe(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Dt(i))return{data:null,error:i};throw i}})}updateBucket(t,e){return ws(this,void 0,void 0,function*(){try{return{data:yield gb(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Dt(i))return{data:null,error:i};throw i}})}emptyBucket(t){return ws(this,void 0,void 0,function*(){try{return{data:yield Pe(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(Dt(e))return{data:null,error:e};throw e}})}deleteBucket(t){return ws(this,void 0,void 0,function*(){try{return{data:yield Yh(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(Dt(e))return{data:null,error:e};throw e}})}}class vb extends yb{constructor(t,e={},i){super(t,e,i)}from(t){return new pb(this.url,this.headers,t,this.fetch)}}const wb="2.43.2";let gi="";typeof Deno<"u"?gi="deno":typeof document<"u"?gi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?gi="react-native":gi="node";const xb={"X-Client-Info":`supabase-js-${gi}/${wb}`},kb={headers:xb},Sb={schema:"public"},Ob={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Tb={};var Mb=function(s,t,e,i){function n(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):n(h.value).then(a,l)}c((i=i.apply(s,t||[])).next())})};const Eb=s=>{let t;return s?t=s:typeof fetch>"u"?t=Wo:t=fetch,(...e)=>t(...e)},Cb=()=>typeof Headers>"u"?Wh:Headers,Db=(s,t,e)=>{const i=Eb(e),n=Cb();return(r,o)=>Mb(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:s;let c=new n(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",s),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),i(r,Object.assign(Object.assign({},o),{headers:c}))})};function Ab(s){return s.replace(/\/$/,"")}function Pb(s,t){const{db:e,auth:i,realtime:n,global:r}=s,{db:o,auth:a,realtime:l,global:c}=t;return{db:Object.assign(Object.assign({},o),e),auth:Object.assign(Object.assign({},a),i),realtime:Object.assign(Object.assign({},l),n),global:Object.assign(Object.assign({},c),r)}}const Gh="2.64.2",Ib="http://localhost:9999",Lb="supabase.auth.token",Rb={"X-Client-Info":`gotrue-js/${Gh}`},Fl=10,ho="X-Supabase-Api-Version",Zh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Nb(s){return Math.round(Date.now()/1e3)+s}function $b(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const t=Math.random()*16|0;return(s=="x"?t:t&3|8).toString(16)})}const se=()=>typeof document<"u",Je={tested:!1,writable:!1},xi=()=>{if(!se())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Je.tested)return Je.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Je.tested=!0,Je.writable=!0}catch{Je.tested=!0,Je.writable=!1}return Je.writable};function Or(s){const t={},e=new URL(s);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((n,r)=>{t[r]=n})}catch{}return e.searchParams.forEach((i,n)=>{t[n]=i}),t}const Jh=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...e)=>Vs(()=>Promise.resolve().then(()=>Vi),void 0).then(({default:i})=>i(...e)):t=fetch,(...e)=>t(...e)},Fb=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Kh=async(s,t,e)=>{await s.setItem(t,JSON.stringify(e))},ln=async(s,t)=>{const e=await s.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}},Tr=async(s,t)=>{await s.removeItem(t)};function jb(s){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let e="",i,n,r,o,a,l,c,h=0;for(s=s.replace("-","+").replace("_","/");h<s.length;)o=t.indexOf(s.charAt(h++)),a=t.indexOf(s.charAt(h++)),l=t.indexOf(s.charAt(h++)),c=t.indexOf(s.charAt(h++)),i=o<<2|a>>4,n=(a&15)<<4|l>>2,r=(l&3)<<6|c,e=e+String.fromCharCode(i),l!=64&&n!=0&&(e=e+String.fromCharCode(n)),c!=64&&r!=0&&(e=e+String.fromCharCode(r));return e}class sr{constructor(){this.promise=new sr.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}}sr.promiseConstructor=Promise;function jl(s){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,e=s.split(".");if(e.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(e[1]))throw new Error("JWT is not valid: payload is not in base64url format");const i=e[1];return JSON.parse(jb(i))}async function zb(s){return await new Promise(t=>{setTimeout(()=>t(null),s)})}function Vb(s,t){return new Promise((i,n)=>{(async()=>{for(let r=0;r<1/0;r++)try{const o=await s(r);if(!t(r,null,o)){i(o);return}}catch(o){if(!t(r,o)){n(o);return}}})()})}function Wb(s){return("0"+s.toString(16)).substr(-2)}function Bb(){const t=new Uint32Array(56);if(typeof crypto>"u"){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*i));return n}return crypto.getRandomValues(t),Array.from(t,Wb).join("")}async function Hb(s){const e=new TextEncoder().encode(s),i=await crypto.subtle.digest("SHA-256",e),n=new Uint8Array(i);return Array.from(n).map(r=>String.fromCharCode(r)).join("")}function Ub(s){return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function qb(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const e=await Hb(s);return Ub(e)}async function xs(s,t,e=!1){const i=Bb();let n=i;e&&(n+="/PASSWORD_RECOVERY"),await Kh(s,`${t}-code-verifier`,n);const r=await qb(i);return[r,i===r?"plain":"s256"]}const Yb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Gb(s){const t=s.headers.get(ho);if(!t||!t.match(Yb))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}class qo extends Error{constructor(t,e,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=i}}function V(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class Zb extends qo{constructor(t,e,i){super(t,e,i),this.name="AuthApiError",this.status=e,this.code=i}}function Jb(s){return V(s)&&s.name==="AuthApiError"}class Xh extends qo{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}}class ms extends qo{constructor(t,e,i,n){super(t,i,n),this.name=e,this.status=i}}class Ke extends ms{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Mr extends ms{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class cn extends ms{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class hn extends ms{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zl extends ms{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class uo extends ms{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}}function Er(s){return V(s)&&s.name==="AuthRetryableFetchError"}class Vl extends ms{constructor(t,e,i){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=i}}var Kb=function(s,t){var e={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&t.indexOf(i)<0&&(e[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(s);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(s,i[n])&&(e[i[n]]=s[i[n]]);return e};const ss=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Xb=[502,503,504];async function Wl(s){var t;if(!Fb(s))throw new uo(ss(s),0);if(Xb.includes(s.status))throw new uo(ss(s),s.status);let e;try{e=await s.json()}catch(r){throw new Xh(ss(r),r)}let i;const n=Gb(s);if(n&&n.getTime()>=Zh["2024-01-01"].timestamp&&typeof e=="object"&&e&&typeof e.code=="string"?i=e.code:typeof e=="object"&&e&&typeof e.error_code=="string"&&(i=e.error_code),i){if(i==="weak_password")throw new Vl(ss(e),s.status,((t=e.weak_password)===null||t===void 0?void 0:t.reasons)||[])}else if(typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0))throw new Vl(ss(e),s.status,e.weak_password.reasons);throw new Zb(ss(e),s.status||500,i)}const Qb=(s,t,e,i)=>{const n={method:s,headers:(t==null?void 0:t.headers)||{}};return s==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),n.body=JSON.stringify(i),Object.assign(Object.assign({},n),e))};async function U(s,t,e,i){var n;const r=Object.assign({},i==null?void 0:i.headers);r[ho]||(r[ho]=Zh["2024-01-01"].name),i!=null&&i.jwt&&(r.Authorization=`Bearer ${i.jwt}`);const o=(n=i==null?void 0:i.query)!==null&&n!==void 0?n:{};i!=null&&i.redirectTo&&(o.redirect_to=i.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await ty(s,t,e+a,{headers:r,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(l):{data:Object.assign({},l),error:null}}async function ty(s,t,e,i,n,r){const o=Qb(t,i,n,r);let a;try{a=await s(e,Object.assign({},o))}catch(l){throw console.error(l),new uo(ss(l),0)}if(a.ok||await Wl(a),i!=null&&i.noResolveJson)return a;try{return await a.json()}catch(l){await Wl(l)}}function Ae(s){var t;let e=null;ny(s)&&(e=Object.assign({},s),s.expires_at||(e.expires_at=Nb(s.expires_in)));const i=(t=s.user)!==null&&t!==void 0?t:s;return{data:{session:e,user:i},error:null}}function Bl(s){const t=Ae(s);return!t.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((e,i)=>e&&typeof i=="string",!0)&&(t.data.weak_password=s.weak_password),t}function Le(s){var t;return{data:{user:(t=s.user)!==null&&t!==void 0?t:s},error:null}}function ey(s){return{data:s,error:null}}function sy(s){const{action_link:t,email_otp:e,hashed_token:i,redirect_to:n,verification_type:r}=s,o=Kb(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:e,hashed_token:i,redirect_to:n,verification_type:r},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function iy(s){return s}function ny(s){return s.access_token&&s.refresh_token&&s.expires_in}var ry=function(s,t){var e={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&t.indexOf(i)<0&&(e[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(s);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(s,i[n])&&(e[i[n]]=s[i[n]]);return e};class oy{constructor({url:t="",headers:e={},fetch:i}){this.url=t,this.headers=e,this.fetch=Jh(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,e="global"){try{return await U(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(V(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,e={}){try{return await U(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:Le})}catch(i){if(V(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:e}=t,i=ry(t,["options"]),n=Object.assign(Object.assign({},i),e);return"newEmail"in i&&(n.new_email=i==null?void 0:i.newEmail,delete n.newEmail),await U(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:sy,redirectTo:e==null?void 0:e.redirectTo})}catch(e){if(V(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(t){try{return await U(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Le})}catch(e){if(V(e))return{data:{user:null},error:e};throw e}}async listUsers(t){var e,i,n,r,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},h=await U(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(e=t==null?void 0:t.page)===null||e===void 0?void 0:e.toString())!==null&&i!==void 0?i:"",per_page:(r=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:""},xform:iy});if(h.error)throw h.error;const u=await h.json(),d=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(g=>{const p=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(g.split(";")[1].split("=")[1]);c[`${m}Page`]=p}),c.total=parseInt(d)),{data:Object.assign(Object.assign({},u),c),error:null}}catch(c){if(V(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){try{return await U(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Le})}catch(e){if(V(e))return{data:{user:null},error:e};throw e}}async updateUserById(t,e){try{return await U(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:Le})}catch(i){if(V(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,e=!1){try{return await U(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:Le})}catch(i){if(V(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){try{const{data:e,error:i}=await U(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:e,error:i}}catch(e){if(V(e))return{data:null,error:e};throw e}}async _deleteFactor(t){try{return{data:await U(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}}const ay={getItem:s=>xi()?globalThis.localStorage.getItem(s):null,setItem:(s,t)=>{xi()&&globalThis.localStorage.setItem(s,t)},removeItem:s=>{xi()&&globalThis.localStorage.removeItem(s)}};function Hl(s={}){return{getItem:t=>s[t]||null,setItem:(t,e)=>{s[t]=e},removeItem:t=>{delete s[t]}}}function ly(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ks={debug:!!(globalThis&&xi()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Qh extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class cy extends Qh{}async function hy(s,t,e){ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),ks.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},t),await globalThis.navigator.locks.request(s,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async n=>{if(n){ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,n.name);try{return await e()}finally{ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,n.name)}}else{if(t===0)throw ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new cy(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(ks.debug)try{const r=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(r,null,"  "))}catch(r){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",r)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await e()}})}ly();const uy={url:Ib,storageKey:Lb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Rb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},ri=30*1e3,Ul=3;async function ql(s,t,e){return await e()}class Li{constructor(t){var e,i;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Li.nextInstanceID,Li.nextInstanceID+=1,this.instanceID>0&&se()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},uy),t);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new oy({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Jh(n.fetch),this.lock=n.lock||ql,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:se()&&(!((e=globalThis==null?void 0:globalThis.navigator)===null||e===void 0)&&e.locks)?this.lock=hy:this.lock=ql,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:xi()?this.storage=ay:(this.memoryStorage={},this.storage=Hl(this.memoryStorage)):(this.memoryStorage={},this.storage=Hl(this.memoryStorage)),se()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(r){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",r)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async r=>{this._debug("received broadcast notification from other tab or client",r),await this._notifyAllSubscribers(r.data.event,r.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Gh}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const t=se()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",t),t||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:e,error:i}=await this._getSessionFromURL(t);if(i)return this._debug("#_initialize()","error detecting session from URL",i),(i==null?void 0:i.message)==="Identity is already linked"||(i==null?void 0:i.message)==="Identity is already linked to another user"?{error:i}:(await this._removeSession(),{error:i});const{session:n,redirectType:r}=e;return this._debug("#_initialize()","detected session in URL",n,"redirect type",r),await this._saveSession(n),setTimeout(async()=>{r==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return V(t)?{error:t}:{error:new Xh("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var e,i,n;try{await this._removeSession();const r=await U(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(e=t==null?void 0:t.options)===null||e===void 0?void 0:e.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.captchaToken}},xform:Ae}),{data:o,error:a}=r;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(r){if(V(r))return{data:{user:null,session:null},error:r};throw r}}async signUp(t){var e,i,n;try{await this._removeSession();let r;if("email"in t){const{email:h,password:u,options:d}=t;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await xs(this.storage,this.storageKey)),r=await U(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:h,password:u,data:(e=d==null?void 0:d.data)!==null&&e!==void 0?e:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:g},xform:Ae})}else if("phone"in t){const{phone:h,password:u,options:d}=t;r=await U(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:u,data:(i=d==null?void 0:d.data)!==null&&i!==void 0?i:{},channel:(n=d==null?void 0:d.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Ae})}else throw new cn("You must provide either an email or phone number and a password");const{data:o,error:a}=r;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(r){if(V(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithPassword(t){try{await this._removeSession();let e;if("email"in t){const{email:r,password:o,options:a}=t;e=await U(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Bl})}else if("phone"in t){const{phone:r,password:o,options:a}=t;e=await U(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Bl})}else throw new cn("You must provide either an email or phone number and a password");const{data:i,error:n}=e;return n?{data:{user:null,session:null},error:n}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Mr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:n})}catch(e){if(V(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOAuth(t){var e,i,n,r;return await this._removeSession(),await this._handleProviderSignIn(t.provider,{redirectTo:(e=t.options)===null||e===void 0?void 0:e.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(r=t.options)===null||r===void 0?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const e=await ln(this.storage,`${this.storageKey}-code-verifier`),[i,n]=(e??"").split("/"),{data:r,error:o}=await U(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:Ae});return await Tr(this.storage,`${this.storageKey}-code-verifier`),o?{data:{user:null,session:null,redirectType:null},error:o}:!r||!r.session||!r.user?{data:{user:null,session:null,redirectType:null},error:new Mr}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign(Object.assign({},r),{redirectType:n??null}),error:o})}async signInWithIdToken(t){await this._removeSession();try{const{options:e,provider:i,token:n,access_token:r,nonce:o}=t,a=await U(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:n,access_token:r,nonce:o,gotrue_meta_security:{captcha_token:e==null?void 0:e.captchaToken}},xform:Ae}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Mr}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(e){if(V(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOtp(t){var e,i,n,r,o;try{if(await this._removeSession(),"email"in t){const{email:a,options:l}=t;let c=null,h=null;this.flowType==="pkce"&&([c,h]=await xs(this.storage,this.storageKey));const{error:u}=await U(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(e=l==null?void 0:l.data)!==null&&e!==void 0?e:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:h},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:u}}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:h}=await U(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h}}throw new cn("You must provide either an email or phone number.")}catch(a){if(V(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var e,i;try{t.type!=="email_change"&&t.type!=="phone_change"&&await this._removeSession();let n,r;"options"in t&&(n=(e=t.options)===null||e===void 0?void 0:e.redirectTo,r=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:o,error:a}=await U(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:r}}),redirectTo:n,xform:Ae});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(n){if(V(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(t){var e,i,n;try{await this._removeSession();let r=null,o=null;return this.flowType==="pkce"&&([r,o]=await xs(this.storage,this.storageKey)),await U(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(e=t.options)===null||e===void 0?void 0:e.redirectTo)!==null&&i!==void 0?i:void 0}),!((n=t==null?void 0:t.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:o}),headers:this.headers,xform:ey})}catch(r){if(V(r))return{data:null,error:r};throw r}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:e},error:i}=t;if(i)throw i;if(!e)throw new Ke;const{error:n}=await U(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:e.access_token});return{data:{user:null,session:null},error:n}})}catch(t){if(V(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{t.type!="email_change"&&t.type!="phone_change"&&await this._removeSession();const e=`${this.url}/resend`;if("email"in t){const{email:i,type:n,options:r}=t,{error:o}=await U(this.fetch,"POST",e,{headers:this.headers,body:{email:i,type:n,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},redirectTo:r==null?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:i,type:n,options:r}=t,{data:o,error:a}=await U(this.fetch,"POST",e,{headers:this.headers,body:{phone:i,type:n,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new cn("You must provide either an email or phone number and a type")}catch(e){if(V(e))return{data:{user:null,session:null},error:e};throw e}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(t,e){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await i,await e()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=e();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const e=await this.__loadSession();return await t(e)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const e=await ln(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",e),e!==null&&(this._isValidSession(e)?t=e:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.storage.isServer){const o=this.suppressGetSessionWarning;t=new Proxy(t,{get(l,c,h){return!o&&c==="user"&&console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(l,c,h)}})}return{data:{session:t},error:null}}const{session:n,error:r}=await this._callRefreshToken(t.refresh_token);return r?{data:{session:null},error:r}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await U(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Le}):await this._useSession(async e=>{var i,n,r;const{data:o,error:a}=e;if(a)throw a;return!(!((i=o.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ke}:await U(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(r=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0,xform:Le})})}catch(e){if(V(e))return{data:{user:null},error:e};throw e}}async updateUser(t,e={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,e))}async _updateUser(t,e={}){try{return await this._useSession(async i=>{const{data:n,error:r}=i;if(r)throw r;if(!n.session)throw new Ke;const o=n.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await xs(this.storage,this.storageKey));const{data:c,error:h}=await U(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:e==null?void 0:e.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Le});if(h)throw h;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(i){if(V(i))return{data:{user:null},error:i};throw i}}_decodeJWT(t){return jl(t)}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ke;const e=Date.now()/1e3;let i=e,n=!0,r=null;const o=jl(t.access_token);if(o.exp&&(i=o.exp,n=i<=e),n){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};r=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;r={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:i-e,expires_at:i},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(e){if(V(e))return{data:{session:null,user:null},error:e};throw e}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async e=>{var i;if(!t){const{data:o,error:a}=e;if(a)throw a;t=(i=o.session)!==null&&i!==void 0?i:void 0}if(!(t!=null&&t.refresh_token))throw new Ke;const{session:n,error:r}=await this._callRefreshToken(t.refresh_token);return r?{data:{user:null,session:null},error:r}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(e){if(V(e))return{data:{user:null,session:null},error:e};throw e}}async _getSessionFromURL(t){try{if(!se())throw new hn("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new hn("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!t)throw new zl("Not a valid PKCE flow url.");const e=Or(window.location.href);if(t){if(!e.code)throw new zl("No code detected.");const{data:b,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const v=new URL(window.location.href);return v.searchParams.delete("code"),window.history.replaceState(window.history.state,"",v.toString()),{data:{session:b.session,redirectType:null},error:null}}if(e.error||e.error_description||e.error_code)throw new hn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});const{provider_token:i,provider_refresh_token:n,access_token:r,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!r||!a||!o||!c)throw new hn("No session defined in URL");const h=Math.round(Date.now()/1e3),u=parseInt(a);let d=h+u;l&&(d=parseInt(l));const f=d-h;f*1e3<=ri&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${u}s`);const g=d-u;h-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,d,h):h-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",g,d,h);const{data:p,error:m}=await this._getUser(r);if(m)throw m;const _={provider_token:i,provider_refresh_token:n,access_token:r,expires_in:u,expires_at:d,refresh_token:o,token_type:c,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:e.type},error:null}}catch(e){if(V(e))return{data:{session:null,redirectType:null},error:e};throw e}}_isImplicitGrantFlow(){const t=Or(window.location.href);return!!(se()&&(t.access_token||t.error_description))}async _isPKCEFlow(){const t=Or(window.location.href),e=await ln(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&e)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async e=>{var i;const{data:n,error:r}=e;if(r)return{error:r};const o=(i=n.session)===null||i===void 0?void 0:i.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(Jb(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Tr(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(t){const e=$b(),i={id:e,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",e),this.stateChangeEmitters.delete(e)}};return this._debug("#onAuthStateChange()","registered callback with id",e),this.stateChangeEmitters.set(e,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(e)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async e=>{var i,n;try{const{data:{session:r},error:o}=e;if(o)throw o;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",t,"session",r)}catch(r){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",r),console.error(r)}})}async resetPasswordForEmail(t,e={}){let i=null,n=null;this.flowType==="pkce"&&([i,n]=await xs(this.storage,this.storageKey,!0));try{return await U(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:n,gotrue_meta_security:{captcha_token:e.captchaToken}},headers:this.headers,redirectTo:e.redirectTo})}catch(r){if(V(r))return{data:null,error:r};throw r}}async getUserIdentities(){var t;try{const{data:e,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(t=e.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}async linkIdentity(t){var e;try{const{data:i,error:n}=await this._useSession(async r=>{var o,a,l,c,h;const{data:u,error:d}=r;if(d)throw d;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await U(this.fetch,"GET",f,{headers:this.headers,jwt:(h=(c=u.session)===null||c===void 0?void 0:c.access_token)!==null&&h!==void 0?h:void 0})});if(n)throw n;return se()&&!(!((e=t.options)===null||e===void 0)&&e.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:t.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(V(i))return{data:{provider:t.provider,url:null},error:i};throw i}}async unlinkIdentity(t){try{return await this._useSession(async e=>{var i,n;const{data:r,error:o}=e;if(o)throw o;return await U(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(i=r.session)===null||i===void 0?void 0:i.access_token)!==null&&n!==void 0?n:void 0})})}catch(e){if(V(e))return{data:null,error:e};throw e}}async _refreshAccessToken(t){const e=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(e,"begin");try{const i=Date.now();return await Vb(async n=>(n>0&&await zb(200*Math.pow(2,n-1)),this._debug(e,"refreshing attempt",n),await U(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ae})),(n,r)=>{const o=200*Math.pow(2,n);return r&&Er(r)&&Date.now()+o-i<ri})}catch(i){if(this._debug(e,"error",i),V(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(e,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,e){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:e.redirectTo,scopes:e.scopes,queryParams:e.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",e,"url",i),se()&&!e.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t;const e="#_recoverAndRefresh()";this._debug(e,"begin");try{const i=await ln(this.storage,this.storageKey);if(this._debug(e,"session from storage",i),!this._isValidSession(i)){this._debug(e,"session is not valid"),i!==null&&await this._removeSession();return}const n=Math.round(Date.now()/1e3),r=((t=i.expires_at)!==null&&t!==void 0?t:1/0)<n+Fl;if(this._debug(e,`session has${r?"":" not"} expired with margin of ${Fl}s`),r){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),Er(o)||(this._debug(e,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(e,"error",i),console.error(i);return}finally{this._debug(e,"end")}}async _callRefreshToken(t){var e,i;if(!t)throw new Ke;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new sr;const{data:r,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!r.session)throw new Ke;await this._saveSession(r.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",r.session);const a={session:r.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(r){if(this._debug(n,"error",r),V(r)){const o={session:null,error:r};return Er(r)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(e=this.refreshingDeferred)===null||e===void 0||e.resolve(o),o}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(r),r}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,e,i=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",e,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:e});const r=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,e)}catch(l){r.push(l)}});if(await Promise.all(o),r.length>0){for(let a=0;a<r.length;a+=1)console.error(r[a]);throw r[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Kh(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Tr(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&se()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ri);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:i}}=e;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((i.expires_at*1e3-t)/ri);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${ri}ms, refresh threshold is ${Ul} ticks`),n<=Ul&&await this._callRefreshToken(i.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Qh)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!se()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const e=`#_onVisibilityChanged(${t})`;this._debug(e,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(e,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,e,i){const n=[`provider=${encodeURIComponent(e)}`];if(i!=null&&i.redirectTo&&n.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&n.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[r,o]=await xs(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(r)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(a.toString())}if(i!=null&&i.queryParams){const r=new URLSearchParams(i.queryParams);n.push(r.toString())}return i!=null&&i.skipBrowserRedirect&&n.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async e=>{var i;const{data:n,error:r}=e;return r?{data:null,error:r}:await U(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=n==null?void 0:n.session)===null||i===void 0?void 0:i.access_token})})}catch(e){if(V(e))return{data:null,error:e};throw e}}async _enroll(t){try{return await this._useSession(async e=>{var i,n;const{data:r,error:o}=e;if(o)return{data:null,error:o};const{data:a,error:l}=await U(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:t.friendlyName,factor_type:t.factorType,issuer:t.issuer},headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});return l?{data:null,error:l}:(!((n=a==null?void 0:a.totp)===null||n===void 0)&&n.qr_code&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(e){if(V(e))return{data:null,error:e};throw e}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async e=>{var i;const{data:n,error:r}=e;if(r)return{data:null,error:r};const{data:o,error:a}=await U(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(i=n==null?void 0:n.session)===null||i===void 0?void 0:i.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(e){if(V(e))return{data:null,error:e};throw e}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async e=>{var i;const{data:n,error:r}=e;return r?{data:null,error:r}:await U(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{headers:this.headers,jwt:(i=n==null?void 0:n.session)===null||i===void 0?void 0:i.access_token})})}catch(e){if(V(e))return{data:null,error:e};throw e}})}async _challengeAndVerify(t){const{data:e,error:i}=await this._challenge({factorId:t.factorId});return i?{data:null,error:i}:await this._verify({factorId:t.factorId,challengeId:e.id,code:t.code})}async _listFactors(){const{data:{user:t},error:e}=await this.getUser();if(e)return{data:null,error:e};const i=(t==null?void 0:t.factors)||[],n=i.filter(r=>r.factor_type==="totp"&&r.status==="verified");return{data:{all:i,totp:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var e,i;const{data:{session:n},error:r}=t;if(r)return{data:null,error:r};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(n.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((i=(e=n.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(l="aal2");const h=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:h},error:null}}))}}Li.nextInstanceID=0;const dy=Li;class fy extends dy{constructor(t){super(t)}}var gy=function(s,t,e,i){function n(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):n(h.value).then(a,l)}c((i=i.apply(s,t||[])).next())})};class my{constructor(t,e,i){var n,r,o,a,l,c,h,u;if(this.supabaseUrl=t,this.supabaseKey=e,!t)throw new Error("supabaseUrl is required.");if(!e)throw new Error("supabaseKey is required.");const d=Ab(t);this.realtimeUrl=`${d}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${d}/auth/v1`,this.storageUrl=`${d}/storage/v1`,this.functionsUrl=`${d}/functions/v1`;const f=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,g={db:Sb,realtime:Tb,auth:Object.assign(Object.assign({},Ob),{storageKey:f}),global:kb},p=Pb(i??{},g);this.storageKey=(r=(n=p.auth)===null||n===void 0?void 0:n.storageKey)!==null&&r!==void 0?r:"",this.headers=(a=(o=p.global)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((l=p.auth)!==null&&l!==void 0?l:{},this.headers,(c=p.global)===null||c===void 0?void 0:c.fetch),this.fetch=Db(e,this._getAccessToken.bind(this),(h=p.global)===null||h===void 0?void 0:h.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},p.realtime)),this.rest=new Bo(`${d}/rest/v1`,{headers:this.headers,schema:(u=p.db)===null||u===void 0?void 0:u.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new $_(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new vb(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},i={}){return this.rest.rpc(t,e,i)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,e;return gy(this,void 0,void 0,function*(){const{data:i}=yield this.auth.getSession();return(e=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:i,storage:n,storageKey:r,flowType:o,debug:a},l,c){var h;const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new fy({url:this.authUrl,headers:Object.assign(Object.assign({},u),l),storageKey:r,autoRefreshToken:t,persistSession:e,detectSessionInUrl:i,storage:n,flowType:o,debug:a,fetch:c,hasCustomAuthorizationHeader:(h="Authorization"in this.headers)!==null&&h!==void 0?h:!1})}_initRealtimeClient(t){return new ab(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,i)=>{this._handleTokenChanged(e,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(t,e,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==i?(this.realtime.setAuth(i??null),this.changedAccessToken=i):t==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const py=(s,t,e)=>new my(s,t,e);async function _y(s){const{data:t,error:e}=await Qt.from("access").insert({on:Xt.id,on_email:Xt.email,to:s});if(e)throw e;return t}async function by(s){const{data:t,error:e}=await Qt.from("access").delete().eq("on",Xt.id).eq("to",s);if(e)throw e}async function Cr(){const{data:s,error:t}=await Qt.from("access").select().filter("on_email","eq",Xt.email);if(t)throw t;return s}async function yy(){const{data:s,error:t}=await Qt.from("access").select("*").filter("to","eq",Xt.email);if(t)throw t;return s}function fo(s,t){console.log(s,t),ir.set(s),Bs.set(t),localStorage.setItem("email",s),localStorage.setItem("uuid",t)}const vy="https://qipnvyttafkjlwfkolsq.supabase.co",wy="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFpcG52eXR0YWZramx3ZmtvbHNxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTIwNTc5NzksImV4cCI6MjAyNzYzMzk3OX0.8D2UoQHC89N9KQDej-5v1N13n6mCSjP0WiO_xs2Vh34",Qt=py(vy,wy);let Xt,Bs=zi(),ir=zi();async function xy(){let{data:s,error:t}=await Qt.auth.getUser();if(t)return console.log("Not logged in!"),!1;if(!s.user||!s.user.email)return;console.log(s),Xt=s.user,Bs.set(s.user.id),ir.set(s.user.email);const e=localStorage.getItem("uuid"),i=localStorage.getItem("email");return e&&i&&(Bs.set(e),fo(i,e)),!0}async function ky(s){Xt=s.detail}class ps extends Error{}class Sy extends ps{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class Oy extends ps{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class Ty extends ps{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class Cs extends ps{}class tu extends ps{constructor(t){super(`Invalid unit ${t}`)}}class Ft extends ps{}class Ce extends ps{constructor(){super("Zone is an abstract class")}}const A="numeric",ce="short",Ht="long",Vn={year:A,month:A,day:A},eu={year:A,month:ce,day:A},My={year:A,month:ce,day:A,weekday:ce},su={year:A,month:Ht,day:A},iu={year:A,month:Ht,day:A,weekday:Ht},nu={hour:A,minute:A},ru={hour:A,minute:A,second:A},ou={hour:A,minute:A,second:A,timeZoneName:ce},au={hour:A,minute:A,second:A,timeZoneName:Ht},lu={hour:A,minute:A,hourCycle:"h23"},cu={hour:A,minute:A,second:A,hourCycle:"h23"},hu={hour:A,minute:A,second:A,hourCycle:"h23",timeZoneName:ce},uu={hour:A,minute:A,second:A,hourCycle:"h23",timeZoneName:Ht},du={year:A,month:A,day:A,hour:A,minute:A},fu={year:A,month:A,day:A,hour:A,minute:A,second:A},gu={year:A,month:ce,day:A,hour:A,minute:A},mu={year:A,month:ce,day:A,hour:A,minute:A,second:A},Ey={year:A,month:ce,day:A,weekday:ce,hour:A,minute:A},pu={year:A,month:Ht,day:A,hour:A,minute:A,timeZoneName:ce},_u={year:A,month:Ht,day:A,hour:A,minute:A,second:A,timeZoneName:ce},bu={year:A,month:Ht,day:A,weekday:Ht,hour:A,minute:A,timeZoneName:Ht},yu={year:A,month:Ht,day:A,weekday:Ht,hour:A,minute:A,second:A,timeZoneName:Ht};class Wi{get type(){throw new Ce}get name(){throw new Ce}get ianaName(){return this.name}get isUniversal(){throw new Ce}offsetName(t,e){throw new Ce}formatOffset(t,e){throw new Ce}offset(t){throw new Ce}equals(t){throw new Ce}get isValid(){throw new Ce}}let Dr=null;class nr extends Wi{static get instance(){return Dr===null&&(Dr=new nr),Dr}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:e,locale:i}){return Eu(t,e,i)}formatOffset(t,e){return ki(this.offset(t),e)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let En={};function Cy(s){return En[s]||(En[s]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:s,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),En[s]}const Dy={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Ay(s,t){const e=s.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(e),[,n,r,o,a,l,c,h]=i;return[o,n,r,a,l,c,h]}function Py(s,t){const e=s.formatToParts(t),i=[];for(let n=0;n<e.length;n++){const{type:r,value:o}=e[n],a=Dy[r];r==="era"?i[a]=o:$(a)||(i[a]=parseInt(o,10))}return i}let un={};class Te extends Wi{static create(t){return un[t]||(un[t]=new Te(t)),un[t]}static resetCache(){un={},En={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Te.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:e,locale:i}){return Eu(t,e,i,this.name)}formatOffset(t,e){return ki(this.offset(t),e)}offset(t){const e=new Date(t);if(isNaN(e))return NaN;const i=Cy(this.name);let[n,r,o,a,l,c,h]=i.formatToParts?Py(i,e):Ay(i,e);a==="BC"&&(n=-Math.abs(n)+1);const d=or({year:n,month:r,day:o,hour:l===24?0:l,minute:c,second:h,millisecond:0});let f=+e;const g=f%1e3;return f-=g>=0?g:1e3+g,(d-f)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let Yl={};function Iy(s,t={}){const e=JSON.stringify([s,t]);let i=Yl[e];return i||(i=new Intl.ListFormat(s,t),Yl[e]=i),i}let go={};function mo(s,t={}){const e=JSON.stringify([s,t]);let i=go[e];return i||(i=new Intl.DateTimeFormat(s,t),go[e]=i),i}let po={};function Ly(s,t={}){const e=JSON.stringify([s,t]);let i=po[e];return i||(i=new Intl.NumberFormat(s,t),po[e]=i),i}let _o={};function Ry(s,t={}){const{base:e,...i}=t,n=JSON.stringify([s,i]);let r=_o[n];return r||(r=new Intl.RelativeTimeFormat(s,t),_o[n]=r),r}let mi=null;function Ny(){return mi||(mi=new Intl.DateTimeFormat().resolvedOptions().locale,mi)}let Gl={};function $y(s){let t=Gl[s];if(!t){const e=new Intl.Locale(s);t="getWeekInfo"in e?e.getWeekInfo():e.weekInfo,Gl[s]=t}return t}function Fy(s){const t=s.indexOf("-x-");t!==-1&&(s=s.substring(0,t));const e=s.indexOf("-u-");if(e===-1)return[s];{let i,n;try{i=mo(s).resolvedOptions(),n=s}catch{const l=s.substring(0,e);i=mo(l).resolvedOptions(),n=l}const{numberingSystem:r,calendar:o}=i;return[n,r,o]}}function jy(s,t,e){return(e||t)&&(s.includes("-u-")||(s+="-u"),e&&(s+=`-ca-${e}`),t&&(s+=`-nu-${t}`)),s}function zy(s){const t=[];for(let e=1;e<=12;e++){const i=R.utc(2009,e,1);t.push(s(i))}return t}function Vy(s){const t=[];for(let e=1;e<=7;e++){const i=R.utc(2016,11,13+e);t.push(s(i))}return t}function dn(s,t,e,i){const n=s.listingMode();return n==="error"?null:n==="en"?e(t):i(t)}function Wy(s){return s.numberingSystem&&s.numberingSystem!=="latn"?!1:s.numberingSystem==="latn"||!s.locale||s.locale.startsWith("en")||new Intl.DateTimeFormat(s.intl).resolvedOptions().numberingSystem==="latn"}class By{constructor(t,e,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:n,floor:r,...o}=i;if(!e||Object.keys(o).length>0){const a={useGrouping:!1,...i};i.padTo>0&&(a.minimumIntegerDigits=i.padTo),this.inf=Ly(t,a)}}format(t){if(this.inf){const e=this.floor?Math.floor(t):t;return this.inf.format(e)}else{const e=this.floor?Math.floor(t):Jo(t,3);return wt(e,this.padTo)}}}class Hy{constructor(t,e,i){this.opts=i,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&Te.create(a).valid?(n=a,this.dt=t):(n="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,n=t.zone.name):(n="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const r={...this.opts};r.timeZone=r.timeZone||n,this.dtf=mo(e,r)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(e=>{if(e.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...e,value:i}}else return e}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class Uy{constructor(t,e,i){this.opts={style:"long",...i},!e&&Tu()&&(this.rtf=Ry(t,i))}format(t,e){return this.rtf?this.rtf.format(t,e):u0(e,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,e){return this.rtf?this.rtf.formatToParts(t,e):[]}}const qy={firstDay:1,minimalDays:4,weekend:[6,7]};class tt{static fromOpts(t){return tt.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,e,i,n,r=!1){const o=t||bt.defaultLocale,a=o||(r?"en-US":Ny()),l=e||bt.defaultNumberingSystem,c=i||bt.defaultOutputCalendar,h=bo(n)||bt.defaultWeekSettings;return new tt(a,l,c,h,o)}static resetCache(){mi=null,go={},po={},_o={}}static fromObject({locale:t,numberingSystem:e,outputCalendar:i,weekSettings:n}={}){return tt.create(t,e,i,n)}constructor(t,e,i,n,r){const[o,a,l]=Fy(t);this.locale=o,this.numberingSystem=e||a||null,this.outputCalendar=i||l||null,this.weekSettings=n,this.intl=jy(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Wy(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),e=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&e?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:tt.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,bo(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,e=!1){return dn(this,t,Au,()=>{const i=e?{month:t,day:"numeric"}:{month:t},n=e?"format":"standalone";return this.monthsCache[n][t]||(this.monthsCache[n][t]=zy(r=>this.extract(r,i,"month"))),this.monthsCache[n][t]})}weekdays(t,e=!1){return dn(this,t,Lu,()=>{const i=e?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},n=e?"format":"standalone";return this.weekdaysCache[n][t]||(this.weekdaysCache[n][t]=Vy(r=>this.extract(r,i,"weekday"))),this.weekdaysCache[n][t]})}meridiems(){return dn(this,void 0,()=>Ru,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[R.utc(2016,11,13,9),R.utc(2016,11,13,19)].map(e=>this.extract(e,t,"dayperiod"))}return this.meridiemCache})}eras(t){return dn(this,t,Nu,()=>{const e={era:t};return this.eraCache[t]||(this.eraCache[t]=[R.utc(-40,1,1),R.utc(2017,1,1)].map(i=>this.extract(i,e,"era"))),this.eraCache[t]})}extract(t,e,i){const n=this.dtFormatter(t,e),r=n.formatToParts(),o=r.find(a=>a.type.toLowerCase()===i);return o?o.value:null}numberFormatter(t={}){return new By(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,e={}){return new Hy(t,this.intl,e)}relFormatter(t={}){return new Uy(this.intl,this.isEnglish(),t)}listFormatter(t={}){return Iy(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Mu()?$y(this.locale):qy}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}let Ar=null;class Rt extends Wi{static get utcInstance(){return Ar===null&&(Ar=new Rt(0)),Ar}static instance(t){return t===0?Rt.utcInstance:new Rt(t)}static parseSpecifier(t){if(t){const e=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(e)return new Rt(ar(e[1],e[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${ki(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${ki(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,e){return ki(this.fixed,e)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class Yy extends Wi{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Re(s,t){if($(s)||s===null)return t;if(s instanceof Wi)return s;if(Jy(s)){const e=s.toLowerCase();return e==="default"?t:e==="local"||e==="system"?nr.instance:e==="utc"||e==="gmt"?Rt.utcInstance:Rt.parseSpecifier(e)||Te.create(s)}else return ls(s)?Rt.instance(s):typeof s=="object"&&"offset"in s&&typeof s.offset=="function"?s:new Yy(s)}let Zl=()=>Date.now(),Jl="system",Kl=null,Xl=null,Ql=null,tc=60,ec,sc=null;class bt{static get now(){return Zl}static set now(t){Zl=t}static set defaultZone(t){Jl=t}static get defaultZone(){return Re(Jl,nr.instance)}static get defaultLocale(){return Kl}static set defaultLocale(t){Kl=t}static get defaultNumberingSystem(){return Xl}static set defaultNumberingSystem(t){Xl=t}static get defaultOutputCalendar(){return Ql}static set defaultOutputCalendar(t){Ql=t}static get defaultWeekSettings(){return sc}static set defaultWeekSettings(t){sc=bo(t)}static get twoDigitCutoffYear(){return tc}static set twoDigitCutoffYear(t){tc=t%100}static get throwOnInvalid(){return ec}static set throwOnInvalid(t){ec=t}static resetCaches(){tt.resetCache(),Te.resetCache()}}class oe{constructor(t,e){this.reason=t,this.explanation=e}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const vu=[0,31,59,90,120,151,181,212,243,273,304,334],wu=[0,31,60,91,121,152,182,213,244,274,305,335];function Jt(s,t){return new oe("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${s}, which is invalid`)}function Yo(s,t,e){const i=new Date(Date.UTC(s,t-1,e));s<100&&s>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const n=i.getUTCDay();return n===0?7:n}function xu(s,t,e){return e+(Bi(s)?wu:vu)[t-1]}function ku(s,t){const e=Bi(s)?wu:vu,i=e.findIndex(r=>r<t),n=t-e[i];return{month:i+1,day:n}}function Go(s,t){return(s-t+7)%7+1}function Wn(s,t=4,e=1){const{year:i,month:n,day:r}=s,o=xu(i,n,r),a=Go(Yo(i,n,r),e);let l=Math.floor((o-a+14-t)/7),c;return l<1?(c=i-1,l=Ri(c,t,e)):l>Ri(i,t,e)?(c=i+1,l=1):c=i,{weekYear:c,weekNumber:l,weekday:a,...lr(s)}}function ic(s,t=4,e=1){const{weekYear:i,weekNumber:n,weekday:r}=s,o=Go(Yo(i,1,t),e),a=Rs(i);let l=n*7+r-o-7+t,c;l<1?(c=i-1,l+=Rs(c)):l>a?(c=i+1,l-=Rs(i)):c=i;const{month:h,day:u}=ku(c,l);return{year:c,month:h,day:u,...lr(s)}}function Pr(s){const{year:t,month:e,day:i}=s,n=xu(t,e,i);return{year:t,ordinal:n,...lr(s)}}function nc(s){const{year:t,ordinal:e}=s,{month:i,day:n}=ku(t,e);return{year:t,month:i,day:n,...lr(s)}}function rc(s,t){if(!$(s.localWeekday)||!$(s.localWeekNumber)||!$(s.localWeekYear)){if(!$(s.weekday)||!$(s.weekNumber)||!$(s.weekYear))throw new Cs("Cannot mix locale-based week fields with ISO-based week fields");return $(s.localWeekday)||(s.weekday=s.localWeekday),$(s.localWeekNumber)||(s.weekNumber=s.localWeekNumber),$(s.localWeekYear)||(s.weekYear=s.localWeekYear),delete s.localWeekday,delete s.localWeekNumber,delete s.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Gy(s,t=4,e=1){const i=rr(s.weekYear),n=Kt(s.weekNumber,1,Ri(s.weekYear,t,e)),r=Kt(s.weekday,1,7);return i?n?r?!1:Jt("weekday",s.weekday):Jt("week",s.weekNumber):Jt("weekYear",s.weekYear)}function Zy(s){const t=rr(s.year),e=Kt(s.ordinal,1,Rs(s.year));return t?e?!1:Jt("ordinal",s.ordinal):Jt("year",s.year)}function Su(s){const t=rr(s.year),e=Kt(s.month,1,12),i=Kt(s.day,1,Bn(s.year,s.month));return t?e?i?!1:Jt("day",s.day):Jt("month",s.month):Jt("year",s.year)}function Ou(s){const{hour:t,minute:e,second:i,millisecond:n}=s,r=Kt(t,0,23)||t===24&&e===0&&i===0&&n===0,o=Kt(e,0,59),a=Kt(i,0,59),l=Kt(n,0,999);return r?o?a?l?!1:Jt("millisecond",n):Jt("second",i):Jt("minute",e):Jt("hour",t)}function $(s){return typeof s>"u"}function ls(s){return typeof s=="number"}function rr(s){return typeof s=="number"&&s%1===0}function Jy(s){return typeof s=="string"}function Ky(s){return Object.prototype.toString.call(s)==="[object Date]"}function Tu(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Mu(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Xy(s){return Array.isArray(s)?s:[s]}function oc(s,t,e){if(s.length!==0)return s.reduce((i,n)=>{const r=[t(n),n];return i&&e(i[0],r[0])===i[0]?i:r},null)[1]}function Qy(s,t){return t.reduce((e,i)=>(e[i]=s[i],e),{})}function Hs(s,t){return Object.prototype.hasOwnProperty.call(s,t)}function bo(s){if(s==null)return null;if(typeof s!="object")throw new Ft("Week settings must be an object");if(!Kt(s.firstDay,1,7)||!Kt(s.minimalDays,1,7)||!Array.isArray(s.weekend)||s.weekend.some(t=>!Kt(t,1,7)))throw new Ft("Invalid week settings");return{firstDay:s.firstDay,minimalDays:s.minimalDays,weekend:Array.from(s.weekend)}}function Kt(s,t,e){return rr(s)&&s>=t&&s<=e}function t0(s,t){return s-t*Math.floor(s/t)}function wt(s,t=2){const e=s<0;let i;return e?i="-"+(""+-s).padStart(t,"0"):i=(""+s).padStart(t,"0"),i}function Ie(s){if(!($(s)||s===null||s===""))return parseInt(s,10)}function Xe(s){if(!($(s)||s===null||s===""))return parseFloat(s)}function Zo(s){if(!($(s)||s===null||s==="")){const t=parseFloat("0."+s)*1e3;return Math.floor(t)}}function Jo(s,t,e=!1){const i=10**t;return(e?Math.trunc:Math.round)(s*i)/i}function Bi(s){return s%4===0&&(s%100!==0||s%400===0)}function Rs(s){return Bi(s)?366:365}function Bn(s,t){const e=t0(t-1,12)+1,i=s+(t-e)/12;return e===2?Bi(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][e-1]}function or(s){let t=Date.UTC(s.year,s.month-1,s.day,s.hour,s.minute,s.second,s.millisecond);return s.year<100&&s.year>=0&&(t=new Date(t),t.setUTCFullYear(s.year,s.month-1,s.day)),+t}function ac(s,t,e){return-Go(Yo(s,1,t),e)+t-1}function Ri(s,t=4,e=1){const i=ac(s,t,e),n=ac(s+1,t,e);return(Rs(s)-i+n)/7}function yo(s){return s>99?s:s>bt.twoDigitCutoffYear?1900+s:2e3+s}function Eu(s,t,e,i=null){const n=new Date(s),r={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(r.timeZone=i);const o={timeZoneName:t,...r},a=new Intl.DateTimeFormat(e,o).formatToParts(n).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function ar(s,t){let e=parseInt(s,10);Number.isNaN(e)&&(e=0);const i=parseInt(t,10)||0,n=e<0||Object.is(e,-0)?-i:i;return e*60+n}function Cu(s){const t=Number(s);if(typeof s=="boolean"||s===""||Number.isNaN(t))throw new Ft(`Invalid unit value ${s}`);return t}function Hn(s,t){const e={};for(const i in s)if(Hs(s,i)){const n=s[i];if(n==null)continue;e[t(i)]=Cu(n)}return e}function ki(s,t){const e=Math.trunc(Math.abs(s/60)),i=Math.trunc(Math.abs(s%60)),n=s>=0?"+":"-";switch(t){case"short":return`${n}${wt(e,2)}:${wt(i,2)}`;case"narrow":return`${n}${e}${i>0?`:${i}`:""}`;case"techie":return`${n}${wt(e,2)}${wt(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function lr(s){return Qy(s,["hour","minute","second","millisecond"])}const e0=["January","February","March","April","May","June","July","August","September","October","November","December"],Du=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s0=["J","F","M","A","M","J","J","A","S","O","N","D"];function Au(s){switch(s){case"narrow":return[...s0];case"short":return[...Du];case"long":return[...e0];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Pu=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Iu=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],i0=["M","T","W","T","F","S","S"];function Lu(s){switch(s){case"narrow":return[...i0];case"short":return[...Iu];case"long":return[...Pu];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Ru=["AM","PM"],n0=["Before Christ","Anno Domini"],r0=["BC","AD"],o0=["B","A"];function Nu(s){switch(s){case"narrow":return[...o0];case"short":return[...r0];case"long":return[...n0];default:return null}}function a0(s){return Ru[s.hour<12?0:1]}function l0(s,t){return Lu(t)[s.weekday-1]}function c0(s,t){return Au(t)[s.month-1]}function h0(s,t){return Nu(t)[s.year<0?0:1]}function u0(s,t,e="always",i=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},r=["hours","minutes","seconds"].indexOf(s)===-1;if(e==="auto"&&r){const u=s==="days";switch(t){case 1:return u?"tomorrow":`next ${n[s][0]}`;case-1:return u?"yesterday":`last ${n[s][0]}`;case 0:return u?"today":`this ${n[s][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,c=n[s],h=i?l?c[1]:c[2]||c[1]:l?n[s][0]:s;return o?`${a} ${h} ago`:`in ${a} ${h}`}function lc(s,t){let e="";for(const i of s)i.literal?e+=i.val:e+=t(i.val);return e}const d0={D:Vn,DD:eu,DDD:su,DDDD:iu,t:nu,tt:ru,ttt:ou,tttt:au,T:lu,TT:cu,TTT:hu,TTTT:uu,f:du,ff:gu,fff:pu,ffff:bu,F:fu,FF:mu,FFF:_u,FFFF:yu};class At{static create(t,e={}){return new At(t,e)}static parseFormat(t){let e=null,i="",n=!1;const r=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(i.length>0&&r.push({literal:n||/^\s+$/.test(i),val:i}),e=null,i="",n=!n):n||a===e?i+=a:(i.length>0&&r.push({literal:/^\s+$/.test(i),val:i}),i=a,e=a)}return i.length>0&&r.push({literal:n||/^\s+$/.test(i),val:i}),r}static macroTokenToFormatOpts(t){return d0[t]}constructor(t,e){this.opts=e,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,e){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...e}).format()}dtFormatter(t,e={}){return this.loc.dtFormatter(t,{...this.opts,...e})}formatDateTime(t,e){return this.dtFormatter(t,e).format()}formatDateTimeParts(t,e){return this.dtFormatter(t,e).formatToParts()}formatInterval(t,e){return this.dtFormatter(t.start,e).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,e){return this.dtFormatter(t,e).resolvedOptions()}num(t,e=0){if(this.opts.forceSimple)return wt(t,e);const i={...this.opts};return e>0&&(i.padTo=e),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,e){const i=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",r=(f,g)=>this.loc.extract(t,f,g),o=f=>t.isOffsetFixed&&t.offset===0&&f.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,f.format):"",a=()=>i?a0(t):r({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(f,g)=>i?c0(t,f):r(g?{month:f}:{month:f,day:"numeric"},"month"),c=(f,g)=>i?l0(t,f):r(g?{weekday:f}:{weekday:f,month:"long",day:"numeric"},"weekday"),h=f=>{const g=At.macroTokenToFormatOpts(f);return g?this.formatWithSystemDefault(t,g):f},u=f=>i?h0(t,f):r({era:f},"era"),d=f=>{switch(f){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return n?r({day:"numeric"},"day"):this.num(t.day);case"dd":return n?r({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return n?r({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return n?r({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return n?r({month:"numeric"},"month"):this.num(t.month);case"MM":return n?r({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return n?r({year:"numeric"},"year"):this.num(t.year);case"yy":return n?r({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return n?r({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return n?r({year:"numeric"},"year"):this.num(t.year,6);case"G":return u("short");case"GG":return u("long");case"GGGGG":return u("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return h(f)}};return lc(At.parseFormat(e),d)}formatDurationFromString(t,e){const i=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=l=>c=>{const h=i(c);return h?this.num(l.get(h),c.length):c},r=At.parseFormat(e),o=r.reduce((l,{literal:c,val:h})=>c?l:l.concat(h),[]),a=t.shiftTo(...o.map(i).filter(l=>l));return lc(r,n(a))}}const $u=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function qs(...s){const t=s.reduce((e,i)=>e+i.source,"");return RegExp(`^${t}$`)}function Ys(...s){return t=>s.reduce(([e,i,n],r)=>{const[o,a,l]=r(t,n);return[{...e,...o},a||i,l]},[{},null,1]).slice(0,2)}function Gs(s,...t){if(s==null)return[null,null];for(const[e,i]of t){const n=e.exec(s);if(n)return i(n)}return[null,null]}function Fu(...s){return(t,e)=>{const i={};let n;for(n=0;n<s.length;n++)i[s[n]]=Ie(t[e+n]);return[i,null,e+n]}}const ju=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,f0=`(?:${ju.source}?(?:\\[(${$u.source})\\])?)?`,Ko=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,zu=RegExp(`${Ko.source}${f0}`),Xo=RegExp(`(?:T${zu.source})?`),g0=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,m0=/(\d{4})-?W(\d\d)(?:-?(\d))?/,p0=/(\d{4})-?(\d{3})/,_0=Fu("weekYear","weekNumber","weekDay"),b0=Fu("year","ordinal"),y0=/(\d{4})-(\d\d)-(\d\d)/,Vu=RegExp(`${Ko.source} ?(?:${ju.source}|(${$u.source}))?`),v0=RegExp(`(?: ${Vu.source})?`);function Ns(s,t,e){const i=s[t];return $(i)?e:Ie(i)}function w0(s,t){return[{year:Ns(s,t),month:Ns(s,t+1,1),day:Ns(s,t+2,1)},null,t+3]}function Zs(s,t){return[{hours:Ns(s,t,0),minutes:Ns(s,t+1,0),seconds:Ns(s,t+2,0),milliseconds:Zo(s[t+3])},null,t+4]}function Hi(s,t){const e=!s[t]&&!s[t+1],i=ar(s[t+1],s[t+2]),n=e?null:Rt.instance(i);return[{},n,t+3]}function Ui(s,t){const e=s[t]?Te.create(s[t]):null;return[{},e,t+1]}const x0=RegExp(`^T?${Ko.source}$`),k0=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function S0(s){const[t,e,i,n,r,o,a,l,c]=s,h=t[0]==="-",u=l&&l[0]==="-",d=(f,g=!1)=>f!==void 0&&(g||f&&h)?-f:f;return[{years:d(Xe(e)),months:d(Xe(i)),weeks:d(Xe(n)),days:d(Xe(r)),hours:d(Xe(o)),minutes:d(Xe(a)),seconds:d(Xe(l),l==="-0"),milliseconds:d(Zo(c),u)}]}const O0={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Qo(s,t,e,i,n,r,o){const a={year:t.length===2?yo(Ie(t)):Ie(t),month:Du.indexOf(e)+1,day:Ie(i),hour:Ie(n),minute:Ie(r)};return o&&(a.second=Ie(o)),s&&(a.weekday=s.length>3?Pu.indexOf(s)+1:Iu.indexOf(s)+1),a}const T0=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function M0(s){const[,t,e,i,n,r,o,a,l,c,h,u]=s,d=Qo(t,n,i,e,r,o,a);let f;return l?f=O0[l]:c?f=0:f=ar(h,u),[d,new Rt(f)]}function E0(s){return s.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const C0=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,D0=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,A0=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function cc(s){const[,t,e,i,n,r,o,a]=s;return[Qo(t,n,i,e,r,o,a),Rt.utcInstance]}function P0(s){const[,t,e,i,n,r,o,a]=s;return[Qo(t,a,e,i,n,r,o),Rt.utcInstance]}const I0=qs(g0,Xo),L0=qs(m0,Xo),R0=qs(p0,Xo),N0=qs(zu),Wu=Ys(w0,Zs,Hi,Ui),$0=Ys(_0,Zs,Hi,Ui),F0=Ys(b0,Zs,Hi,Ui),j0=Ys(Zs,Hi,Ui);function z0(s){return Gs(s,[I0,Wu],[L0,$0],[R0,F0],[N0,j0])}function V0(s){return Gs(E0(s),[T0,M0])}function W0(s){return Gs(s,[C0,cc],[D0,cc],[A0,P0])}function B0(s){return Gs(s,[k0,S0])}const H0=Ys(Zs);function U0(s){return Gs(s,[x0,H0])}const q0=qs(y0,v0),Y0=qs(Vu),G0=Ys(Zs,Hi,Ui);function Z0(s){return Gs(s,[q0,Wu],[Y0,G0])}const hc="Invalid Duration",Bu={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},J0={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Bu},Yt=146097/400,Ss=146097/4800,K0={years:{quarters:4,months:12,weeks:Yt/7,days:Yt,hours:Yt*24,minutes:Yt*24*60,seconds:Yt*24*60*60,milliseconds:Yt*24*60*60*1e3},quarters:{months:3,weeks:Yt/28,days:Yt/4,hours:Yt*24/4,minutes:Yt*24*60/4,seconds:Yt*24*60*60/4,milliseconds:Yt*24*60*60*1e3/4},months:{weeks:Ss/7,days:Ss,hours:Ss*24,minutes:Ss*24*60,seconds:Ss*24*60*60,milliseconds:Ss*24*60*60*1e3},...Bu},rs=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],X0=rs.slice(0).reverse();function De(s,t,e=!1){const i={values:e?t.values:{...s.values,...t.values||{}},loc:s.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||s.conversionAccuracy,matrix:t.matrix||s.matrix};return new W(i)}function Hu(s,t){let e=t.milliseconds??0;for(const i of X0.slice(1))t[i]&&(e+=t[i]*s[i].milliseconds);return e}function uc(s,t){const e=Hu(s,t)<0?-1:1;rs.reduceRight((i,n)=>{if($(t[n]))return i;if(i){const r=t[i]*e,o=s[n][i],a=Math.floor(r/o);t[n]+=a*e,t[i]-=a*o*e}return n},null),rs.reduce((i,n)=>{if($(t[n]))return i;if(i){const r=t[i]%1;t[i]-=r,t[n]+=r*s[i][n]}return n},null)}function Q0(s){const t={};for(const[e,i]of Object.entries(s))i!==0&&(t[e]=i);return t}class W{constructor(t){const e=t.conversionAccuracy==="longterm"||!1;let i=e?K0:J0;t.matrix&&(i=t.matrix),this.values=t.values,this.loc=t.loc||tt.create(),this.conversionAccuracy=e?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(t,e){return W.fromObject({milliseconds:t},e)}static fromObject(t,e={}){if(t==null||typeof t!="object")throw new Ft(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new W({values:Hn(t,W.normalizeUnit),loc:tt.fromObject(e),conversionAccuracy:e.conversionAccuracy,matrix:e.matrix})}static fromDurationLike(t){if(ls(t))return W.fromMillis(t);if(W.isDuration(t))return t;if(typeof t=="object")return W.fromObject(t);throw new Ft(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,e){const[i]=B0(t);return i?W.fromObject(i,e):W.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,e){const[i]=U0(t);return i?W.fromObject(i,e):W.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,e=null){if(!t)throw new Ft("need to specify a reason the Duration is invalid");const i=t instanceof oe?t:new oe(t,e);if(bt.throwOnInvalid)throw new Ty(i);return new W({invalid:i})}static normalizeUnit(t){const e={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!e)throw new tu(t);return e}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,e={}){const i={...e,floor:e.round!==!1&&e.floor!==!1};return this.isValid?At.create(this.loc,i).formatDurationFromString(this,t):hc}toHuman(t={}){if(!this.isValid)return hc;const e=rs.map(i=>{const n=this.values[i];return $(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(n)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(e)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=Jo(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const e=this.toMillis();return e<0||e>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},R.fromMillis(e,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Hu(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const e=W.fromDurationLike(t),i={};for(const n of rs)(Hs(e.values,n)||Hs(this.values,n))&&(i[n]=e.get(n)+this.get(n));return De(this,{values:i},!0)}minus(t){if(!this.isValid)return this;const e=W.fromDurationLike(t);return this.plus(e.negate())}mapUnits(t){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=Cu(t(this.values[i],i));return De(this,{values:e},!0)}get(t){return this[W.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const e={...this.values,...Hn(t,W.normalizeUnit)};return De(this,{values:e})}reconfigure({locale:t,numberingSystem:e,conversionAccuracy:i,matrix:n}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:e}),matrix:n,conversionAccuracy:i};return De(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return uc(this.matrix,t),De(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=Q0(this.normalize().shiftToAll().toObject());return De(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>W.normalizeUnit(o));const e={},i={},n=this.toObject();let r;for(const o of rs)if(t.indexOf(o)>=0){r=o;let a=0;for(const c in i)a+=this.matrix[c][o]*i[c],i[c]=0;ls(n[o])&&(a+=n[o]);const l=Math.trunc(a);e[o]=l,i[o]=(a*1e3-l*1e3)/1e3}else ls(n[o])&&(i[o]=n[o]);for(const o in i)i[o]!==0&&(e[r]+=o===r?i[o]:i[o]/this.matrix[r][o]);return uc(this.matrix,e),De(this,{values:e},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const e of Object.keys(this.values))t[e]=this.values[e]===0?0:-this.values[e];return De(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function e(i,n){return i===void 0||i===0?n===void 0||n===0:i===n}for(const i of rs)if(!e(this.values[i],t.values[i]))return!1;return!0}}const Os="Invalid Interval";function tv(s,t){return!s||!s.isValid?gt.invalid("missing or invalid start"):!t||!t.isValid?gt.invalid("missing or invalid end"):t<s?gt.invalid("end before start",`The end of an interval must be after its start, but you had start=${s.toISO()} and end=${t.toISO()}`):null}class gt{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,e=null){if(!t)throw new Ft("need to specify a reason the Interval is invalid");const i=t instanceof oe?t:new oe(t,e);if(bt.throwOnInvalid)throw new Oy(i);return new gt({invalid:i})}static fromDateTimes(t,e){const i=ai(t),n=ai(e),r=tv(i,n);return r??new gt({start:i,end:n})}static after(t,e){const i=W.fromDurationLike(e),n=ai(t);return gt.fromDateTimes(n,n.plus(i))}static before(t,e){const i=W.fromDurationLike(e),n=ai(t);return gt.fromDateTimes(n.minus(i),n)}static fromISO(t,e){const[i,n]=(t||"").split("/",2);if(i&&n){let r,o;try{r=R.fromISO(i,e),o=r.isValid}catch{o=!1}let a,l;try{a=R.fromISO(n,e),l=a.isValid}catch{l=!1}if(o&&l)return gt.fromDateTimes(r,a);if(o){const c=W.fromISO(n,e);if(c.isValid)return gt.after(r,c)}else if(l){const c=W.fromISO(i,e);if(c.isValid)return gt.before(a,c)}}return gt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",e){if(!this.isValid)return NaN;const i=this.start.startOf(t,e);let n;return e!=null&&e.useLocaleWeeks?n=this.end.reconfigure({locale:i.locale}):n=this.end,n=n.startOf(t,e),Math.floor(n.diff(i,t).get(t))+(n.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:e}={}){return this.isValid?gt.fromDateTimes(t||this.s,e||this.e):this}splitAt(...t){if(!this.isValid)return[];const e=t.map(ai).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),i=[];let{s:n}=this,r=0;for(;n<this.e;){const o=e[r]||this.e,a=+o>+this.e?this.e:o;i.push(gt.fromDateTimes(n,a)),n=a,r+=1}return i}splitBy(t){const e=W.fromDurationLike(t);if(!this.isValid||!e.isValid||e.as("milliseconds")===0)return[];let{s:i}=this,n=1,r;const o=[];for(;i<this.e;){const a=this.start.plus(e.mapUnits(l=>l*n));r=+a>+this.e?this.e:a,o.push(gt.fromDateTimes(i,r)),i=r,n+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const e=this.s>t.s?this.s:t.s,i=this.e<t.e?this.e:t.e;return e>=i?null:gt.fromDateTimes(e,i)}union(t){if(!this.isValid)return this;const e=this.s<t.s?this.s:t.s,i=this.e>t.e?this.e:t.e;return gt.fromDateTimes(e,i)}static merge(t){const[e,i]=t.sort((n,r)=>n.s-r.s).reduce(([n,r],o)=>r?r.overlaps(o)||r.abutsStart(o)?[n,r.union(o)]:[n.concat([r]),o]:[n,o],[[],null]);return i&&e.push(i),e}static xor(t){let e=null,i=0;const n=[],r=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...r),a=o.sort((l,c)=>l.time-c.time);for(const l of a)i+=l.type==="s"?1:-1,i===1?e=l.time:(e&&+e!=+l.time&&n.push(gt.fromDateTimes(e,l.time)),e=null);return gt.merge(n)}difference(...t){return gt.xor([this].concat(t)).map(e=>this.intersection(e)).filter(e=>e&&!e.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Os}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=Vn,e={}){return this.isValid?At.create(this.s.loc.clone(e),t).formatInterval(this):Os}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Os}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Os}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Os}toFormat(t,{separator:e=" – "}={}){return this.isValid?`${this.s.toFormat(t)}${e}${this.e.toFormat(t)}`:Os}toDuration(t,e){return this.isValid?this.e.diff(this.s,t,e):W.invalid(this.invalidReason)}mapEndpoints(t){return gt.fromDateTimes(t(this.s),t(this.e))}}class fn{static hasDST(t=bt.defaultZone){const e=R.now().setZone(t).set({month:12});return!t.isUniversal&&e.offset!==e.set({month:6}).offset}static isValidIANAZone(t){return Te.isValidZone(t)}static normalizeZone(t){return Re(t,bt.defaultZone)}static getStartOfWeek({locale:t=null,locObj:e=null}={}){return(e||tt.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:e=null}={}){return(e||tt.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:e=null}={}){return(e||tt.create(t)).getWeekendDays().slice()}static months(t="long",{locale:e=null,numberingSystem:i=null,locObj:n=null,outputCalendar:r="gregory"}={}){return(n||tt.create(e,i,r)).months(t)}static monthsFormat(t="long",{locale:e=null,numberingSystem:i=null,locObj:n=null,outputCalendar:r="gregory"}={}){return(n||tt.create(e,i,r)).months(t,!0)}static weekdays(t="long",{locale:e=null,numberingSystem:i=null,locObj:n=null}={}){return(n||tt.create(e,i,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:e=null,numberingSystem:i=null,locObj:n=null}={}){return(n||tt.create(e,i,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return tt.create(t).meridiems()}static eras(t="short",{locale:e=null}={}){return tt.create(e,null,"gregory").eras(t)}static features(){return{relative:Tu(),localeWeek:Mu()}}}function dc(s,t){const e=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=e(t)-e(s);return Math.floor(W.fromMillis(i).as("days"))}function ev(s,t,e){const i=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const h=dc(l,c);return(h-h%7)/7}],["days",dc]],n={},r=s;let o,a;for(const[l,c]of i)e.indexOf(l)>=0&&(o=l,n[l]=c(s,t),a=r.plus(n),a>t?(n[l]--,s=r.plus(n),s>t&&(a=s,n[l]--,s=r.plus(n))):s=a);return[s,n,a,o]}function sv(s,t,e,i){let[n,r,o,a]=ev(s,t,e);const l=t-n,c=e.filter(u=>["hours","minutes","seconds","milliseconds"].indexOf(u)>=0);c.length===0&&(o<t&&(o=n.plus({[a]:1})),o!==n&&(r[a]=(r[a]||0)+l/(o-n)));const h=W.fromObject(r,i);return c.length>0?W.fromMillis(l,i).shiftTo(...c).plus(h):h}const ta={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},fc={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},iv=ta.hanidec.replace(/[\[|\]]/g,"").split("");function nv(s){let t=parseInt(s,10);if(isNaN(t)){t="";for(let e=0;e<s.length;e++){const i=s.charCodeAt(e);if(s[e].search(ta.hanidec)!==-1)t+=iv.indexOf(s[e]);else for(const n in fc){const[r,o]=fc[n];i>=r&&i<=o&&(t+=i-r)}}return parseInt(t,10)}else return t}function te({numberingSystem:s},t=""){return new RegExp(`${ta[s||"latn"]}${t}`)}const rv="missing Intl.DateTimeFormat.formatToParts support";function K(s,t=e=>e){return{regex:s,deser:([e])=>t(nv(e))}}const ov=" ",Uu=`[ ${ov}]`,qu=new RegExp(Uu,"g");function av(s){return s.replace(/\./g,"\\.?").replace(qu,Uu)}function gc(s){return s.replace(/\./g,"").replace(qu," ").toLowerCase()}function ee(s,t){return s===null?null:{regex:RegExp(s.map(av).join("|")),deser:([e])=>s.findIndex(i=>gc(e)===gc(i))+t}}function mc(s,t){return{regex:s,deser:([,e,i])=>ar(e,i),groups:t}}function gn(s){return{regex:s,deser:([t])=>t}}function lv(s){return s.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function cv(s,t){const e=te(t),i=te(t,"{2}"),n=te(t,"{3}"),r=te(t,"{4}"),o=te(t,"{6}"),a=te(t,"{1,2}"),l=te(t,"{1,3}"),c=te(t,"{1,6}"),h=te(t,"{1,9}"),u=te(t,"{2,4}"),d=te(t,"{4,6}"),f=m=>({regex:RegExp(lv(m.val)),deser:([_])=>_,literal:!0}),p=(m=>{if(s.literal)return f(m);switch(m.val){case"G":return ee(t.eras("short"),0);case"GG":return ee(t.eras("long"),0);case"y":return K(c);case"yy":return K(u,yo);case"yyyy":return K(r);case"yyyyy":return K(d);case"yyyyyy":return K(o);case"M":return K(a);case"MM":return K(i);case"MMM":return ee(t.months("short",!0),1);case"MMMM":return ee(t.months("long",!0),1);case"L":return K(a);case"LL":return K(i);case"LLL":return ee(t.months("short",!1),1);case"LLLL":return ee(t.months("long",!1),1);case"d":return K(a);case"dd":return K(i);case"o":return K(l);case"ooo":return K(n);case"HH":return K(i);case"H":return K(a);case"hh":return K(i);case"h":return K(a);case"mm":return K(i);case"m":return K(a);case"q":return K(a);case"qq":return K(i);case"s":return K(a);case"ss":return K(i);case"S":return K(l);case"SSS":return K(n);case"u":return gn(h);case"uu":return gn(a);case"uuu":return K(e);case"a":return ee(t.meridiems(),0);case"kkkk":return K(r);case"kk":return K(u,yo);case"W":return K(a);case"WW":return K(i);case"E":case"c":return K(e);case"EEE":return ee(t.weekdays("short",!1),1);case"EEEE":return ee(t.weekdays("long",!1),1);case"ccc":return ee(t.weekdays("short",!0),1);case"cccc":return ee(t.weekdays("long",!0),1);case"Z":case"ZZ":return mc(new RegExp(`([+-]${a.source})(?::(${i.source}))?`),2);case"ZZZ":return mc(new RegExp(`([+-]${a.source})(${i.source})?`),2);case"z":return gn(/[a-z_+-/]{1,256}?/i);case" ":return gn(/[^\S\n\r]/);default:return f(m)}})(s)||{invalidReason:rv};return p.token=s,p}const hv={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function uv(s,t,e){const{type:i,value:n}=s;if(i==="literal"){const l=/^\s+$/.test(n);return{literal:!l,val:l?" ":n}}const r=t[i];let o=i;i==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=e.hour12?"hour12":"hour24");let a=hv[o];if(typeof a=="object"&&(a=a[r]),a)return{literal:!1,val:a}}function dv(s){return[`^${s.map(e=>e.regex).reduce((e,i)=>`${e}(${i.source})`,"")}$`,s]}function fv(s,t,e){const i=s.match(t);if(i){const n={};let r=1;for(const o in e)if(Hs(e,o)){const a=e[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(n[a.token.val[0]]=a.deser(i.slice(r,r+l))),r+=l}return[i,n]}else return[i,{}]}function gv(s){const t=r=>{switch(r){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let e=null,i;return $(s.z)||(e=Te.create(s.z)),$(s.Z)||(e||(e=new Rt(s.Z)),i=s.Z),$(s.q)||(s.M=(s.q-1)*3+1),$(s.h)||(s.h<12&&s.a===1?s.h+=12:s.h===12&&s.a===0&&(s.h=0)),s.G===0&&s.y&&(s.y=-s.y),$(s.u)||(s.S=Zo(s.u)),[Object.keys(s).reduce((r,o)=>{const a=t(o);return a&&(r[a]=s[o]),r},{}),e,i]}let Ir=null;function mv(){return Ir||(Ir=R.fromMillis(1555555555555)),Ir}function pv(s,t){if(s.literal)return s;const e=At.macroTokenToFormatOpts(s.val),i=Zu(e,t);return i==null||i.includes(void 0)?s:i}function Yu(s,t){return Array.prototype.concat(...s.map(e=>pv(e,t)))}function Gu(s,t,e){const i=Yu(At.parseFormat(e),s),n=i.map(o=>cv(o,s)),r=n.find(o=>o.invalidReason);if(r)return{input:t,tokens:i,invalidReason:r.invalidReason};{const[o,a]=dv(n),l=RegExp(o,"i"),[c,h]=fv(t,l,a),[u,d,f]=h?gv(h):[null,null,void 0];if(Hs(h,"a")&&Hs(h,"H"))throw new Cs("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:i,regex:l,rawMatches:c,matches:h,result:u,zone:d,specificOffset:f}}}function _v(s,t,e){const{result:i,zone:n,specificOffset:r,invalidReason:o}=Gu(s,t,e);return[i,n,r,o]}function Zu(s,t){if(!s)return null;const i=At.create(t,s).dtFormatter(mv()),n=i.formatToParts(),r=i.resolvedOptions();return n.map(o=>uv(o,s,r))}const Lr="Invalid DateTime",pc=864e13;function mn(s){return new oe("unsupported zone",`the zone "${s.name}" is not supported`)}function Rr(s){return s.weekData===null&&(s.weekData=Wn(s.c)),s.weekData}function Nr(s){return s.localWeekData===null&&(s.localWeekData=Wn(s.c,s.loc.getMinDaysInFirstWeek(),s.loc.getStartOfWeek())),s.localWeekData}function Qe(s,t){const e={ts:s.ts,zone:s.zone,c:s.c,o:s.o,loc:s.loc,invalid:s.invalid};return new R({...e,...t,old:e})}function Ju(s,t,e){let i=s-t*60*1e3;const n=e.offset(i);if(t===n)return[i,t];i-=(n-t)*60*1e3;const r=e.offset(i);return n===r?[i,n]:[s-Math.min(n,r)*60*1e3,Math.max(n,r)]}function pn(s,t){s+=t*60*1e3;const e=new Date(s);return{year:e.getUTCFullYear(),month:e.getUTCMonth()+1,day:e.getUTCDate(),hour:e.getUTCHours(),minute:e.getUTCMinutes(),second:e.getUTCSeconds(),millisecond:e.getUTCMilliseconds()}}function Cn(s,t,e){return Ju(or(s),t,e)}function _c(s,t){const e=s.o,i=s.c.year+Math.trunc(t.years),n=s.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,r={...s.c,year:i,month:n,day:Math.min(s.c.day,Bn(i,n))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=W.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=or(r);let[l,c]=Ju(a,e,s.zone);return o!==0&&(l+=o,c=s.zone.offset(l)),{ts:l,o:c}}function oi(s,t,e,i,n,r){const{setZone:o,zone:a}=e;if(s&&Object.keys(s).length!==0||t){const l=t||a,c=R.fromObject(s,{...e,zone:l,specificOffset:r});return o?c:c.setZone(a)}else return R.invalid(new oe("unparsable",`the input "${n}" can't be parsed as ${i}`))}function _n(s,t,e=!0){return s.isValid?At.create(tt.create("en-US"),{allowZ:e,forceSimple:!0}).formatDateTimeFromString(s,t):null}function $r(s,t){const e=s.c.year>9999||s.c.year<0;let i="";return e&&s.c.year>=0&&(i+="+"),i+=wt(s.c.year,e?6:4),t?(i+="-",i+=wt(s.c.month),i+="-",i+=wt(s.c.day)):(i+=wt(s.c.month),i+=wt(s.c.day)),i}function bc(s,t,e,i,n,r){let o=wt(s.c.hour);return t?(o+=":",o+=wt(s.c.minute),(s.c.millisecond!==0||s.c.second!==0||!e)&&(o+=":")):o+=wt(s.c.minute),(s.c.millisecond!==0||s.c.second!==0||!e)&&(o+=wt(s.c.second),(s.c.millisecond!==0||!i)&&(o+=".",o+=wt(s.c.millisecond,3))),n&&(s.isOffsetFixed&&s.offset===0&&!r?o+="Z":s.o<0?(o+="-",o+=wt(Math.trunc(-s.o/60)),o+=":",o+=wt(Math.trunc(-s.o%60))):(o+="+",o+=wt(Math.trunc(s.o/60)),o+=":",o+=wt(Math.trunc(s.o%60)))),r&&(o+="["+s.zone.ianaName+"]"),o}const Ku={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},bv={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},yv={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Xu=["year","month","day","hour","minute","second","millisecond"],vv=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],wv=["year","ordinal","hour","minute","second","millisecond"];function xv(s){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[s.toLowerCase()];if(!t)throw new tu(s);return t}function yc(s){switch(s.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return xv(s)}}function vc(s,t){const e=Re(t.zone,bt.defaultZone),i=tt.fromObject(t),n=bt.now();let r,o;if($(s.year))r=n;else{for(const c of Xu)$(s[c])&&(s[c]=Ku[c]);const a=Su(s)||Ou(s);if(a)return R.invalid(a);const l=e.offset(n);[r,o]=Cn(s,l,e)}return new R({ts:r,zone:e,loc:i,o})}function wc(s,t,e){const i=$(e.round)?!0:e.round,n=(o,a)=>(o=Jo(o,i||e.calendary?0:2,!0),t.loc.clone(e).relFormatter(e).format(o,a)),r=o=>e.calendary?t.hasSame(s,o)?0:t.startOf(o).diff(s.startOf(o),o).get(o):t.diff(s,o).get(o);if(e.unit)return n(r(e.unit),e.unit);for(const o of e.units){const a=r(o);if(Math.abs(a)>=1)return n(a,o)}return n(s>t?-0:0,e.units[e.units.length-1])}function xc(s){let t={},e;return s.length>0&&typeof s[s.length-1]=="object"?(t=s[s.length-1],e=Array.from(s).slice(0,s.length-1)):e=Array.from(s),[t,e]}class R{constructor(t){const e=t.zone||bt.defaultZone;let i=t.invalid||(Number.isNaN(t.ts)?new oe("invalid input"):null)||(e.isValid?null:mn(e));this.ts=$(t.ts)?bt.now():t.ts;let n=null,r=null;if(!i)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(e))[n,r]=[t.old.c,t.old.o];else{const a=e.offset(this.ts);n=pn(this.ts,a),i=Number.isNaN(n.year)?new oe("invalid input"):null,n=i?null:n,r=i?null:a}this._zone=e,this.loc=t.loc||tt.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=n,this.o=r,this.isLuxonDateTime=!0}static now(){return new R({})}static local(){const[t,e]=xc(arguments),[i,n,r,o,a,l,c]=e;return vc({year:i,month:n,day:r,hour:o,minute:a,second:l,millisecond:c},t)}static utc(){const[t,e]=xc(arguments),[i,n,r,o,a,l,c]=e;return t.zone=Rt.utcInstance,vc({year:i,month:n,day:r,hour:o,minute:a,second:l,millisecond:c},t)}static fromJSDate(t,e={}){const i=Ky(t)?t.valueOf():NaN;if(Number.isNaN(i))return R.invalid("invalid input");const n=Re(e.zone,bt.defaultZone);return n.isValid?new R({ts:i,zone:n,loc:tt.fromObject(e)}):R.invalid(mn(n))}static fromMillis(t,e={}){if(ls(t))return t<-pc||t>pc?R.invalid("Timestamp out of range"):new R({ts:t,zone:Re(e.zone,bt.defaultZone),loc:tt.fromObject(e)});throw new Ft(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,e={}){if(ls(t))return new R({ts:t*1e3,zone:Re(e.zone,bt.defaultZone),loc:tt.fromObject(e)});throw new Ft("fromSeconds requires a numerical input")}static fromObject(t,e={}){t=t||{};const i=Re(e.zone,bt.defaultZone);if(!i.isValid)return R.invalid(mn(i));const n=tt.fromObject(e),r=Hn(t,yc),{minDaysInFirstWeek:o,startOfWeek:a}=rc(r,n),l=bt.now(),c=$(e.specificOffset)?i.offset(l):e.specificOffset,h=!$(r.ordinal),u=!$(r.year),d=!$(r.month)||!$(r.day),f=u||d,g=r.weekYear||r.weekNumber;if((f||h)&&g)throw new Cs("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&h)throw new Cs("Can't mix ordinal dates with month/day");const p=g||r.weekday&&!f;let m,_,b=pn(l,c);p?(m=vv,_=bv,b=Wn(b,o,a)):h?(m=wv,_=yv,b=Pr(b)):(m=Xu,_=Ku);let w=!1;for(const D of m){const P=r[D];$(P)?w?r[D]=_[D]:r[D]=b[D]:w=!0}const v=p?Gy(r,o,a):h?Zy(r):Su(r),x=v||Ou(r);if(x)return R.invalid(x);const O=p?ic(r,o,a):h?nc(r):r,[M,T]=Cn(O,c,i),E=new R({ts:M,zone:i,o:T,loc:n});return r.weekday&&f&&t.weekday!==E.weekday?R.invalid("mismatched weekday",`you can't specify both a weekday of ${r.weekday} and a date of ${E.toISO()}`):E}static fromISO(t,e={}){const[i,n]=z0(t);return oi(i,n,e,"ISO 8601",t)}static fromRFC2822(t,e={}){const[i,n]=V0(t);return oi(i,n,e,"RFC 2822",t)}static fromHTTP(t,e={}){const[i,n]=W0(t);return oi(i,n,e,"HTTP",e)}static fromFormat(t,e,i={}){if($(t)||$(e))throw new Ft("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:r=null}=i,o=tt.fromOpts({locale:n,numberingSystem:r,defaultToEN:!0}),[a,l,c,h]=_v(o,t,e);return h?R.invalid(h):oi(a,l,i,`format ${e}`,t,c)}static fromString(t,e,i={}){return R.fromFormat(t,e,i)}static fromSQL(t,e={}){const[i,n]=Z0(t);return oi(i,n,e,"SQL",t)}static invalid(t,e=null){if(!t)throw new Ft("need to specify a reason the DateTime is invalid");const i=t instanceof oe?t:new oe(t,e);if(bt.throwOnInvalid)throw new Sy(i);return new R({invalid:i})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,e={}){const i=Zu(t,tt.fromObject(e));return i?i.map(n=>n?n.val:null).join(""):null}static expandFormat(t,e={}){return Yu(At.parseFormat(t),tt.fromObject(e)).map(n=>n.val).join("")}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Rr(this).weekYear:NaN}get weekNumber(){return this.isValid?Rr(this).weekNumber:NaN}get weekday(){return this.isValid?Rr(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Nr(this).weekday:NaN}get localWeekNumber(){return this.isValid?Nr(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Nr(this).weekYear:NaN}get ordinal(){return this.isValid?Pr(this.c).ordinal:NaN}get monthShort(){return this.isValid?fn.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?fn.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?fn.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?fn.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,e=6e4,i=or(this.c),n=this.zone.offset(i-t),r=this.zone.offset(i+t),o=this.zone.offset(i-n*e),a=this.zone.offset(i-r*e);if(o===a)return[this];const l=i-o*e,c=i-a*e,h=pn(l,o),u=pn(c,a);return h.hour===u.hour&&h.minute===u.minute&&h.second===u.second&&h.millisecond===u.millisecond?[Qe(this,{ts:l}),Qe(this,{ts:c})]:[this]}get isInLeapYear(){return Bi(this.year)}get daysInMonth(){return Bn(this.year,this.month)}get daysInYear(){return this.isValid?Rs(this.year):NaN}get weeksInWeekYear(){return this.isValid?Ri(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Ri(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:e,numberingSystem:i,calendar:n}=At.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:e,numberingSystem:i,outputCalendar:n}}toUTC(t=0,e={}){return this.setZone(Rt.instance(t),e)}toLocal(){return this.setZone(bt.defaultZone)}setZone(t,{keepLocalTime:e=!1,keepCalendarTime:i=!1}={}){if(t=Re(t,bt.defaultZone),t.equals(this.zone))return this;if(t.isValid){let n=this.ts;if(e||i){const r=t.offset(this.ts),o=this.toObject();[n]=Cn(o,r,t)}return Qe(this,{ts:n,zone:t})}else return R.invalid(mn(t))}reconfigure({locale:t,numberingSystem:e,outputCalendar:i}={}){const n=this.loc.clone({locale:t,numberingSystem:e,outputCalendar:i});return Qe(this,{loc:n})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const e=Hn(t,yc),{minDaysInFirstWeek:i,startOfWeek:n}=rc(e,this.loc),r=!$(e.weekYear)||!$(e.weekNumber)||!$(e.weekday),o=!$(e.ordinal),a=!$(e.year),l=!$(e.month)||!$(e.day),c=a||l,h=e.weekYear||e.weekNumber;if((c||o)&&h)throw new Cs("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new Cs("Can't mix ordinal dates with month/day");let u;r?u=ic({...Wn(this.c,i,n),...e},i,n):$(e.ordinal)?(u={...this.toObject(),...e},$(e.day)&&(u.day=Math.min(Bn(u.year,u.month),u.day))):u=nc({...Pr(this.c),...e});const[d,f]=Cn(u,this.o,this.zone);return Qe(this,{ts:d,o:f})}plus(t){if(!this.isValid)return this;const e=W.fromDurationLike(t);return Qe(this,_c(this,e))}minus(t){if(!this.isValid)return this;const e=W.fromDurationLike(t).negate();return Qe(this,_c(this,e))}startOf(t,{useLocaleWeeks:e=!1}={}){if(!this.isValid)return this;const i={},n=W.normalizeUnit(t);switch(n){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(n==="weeks")if(e){const r=this.loc.getStartOfWeek(),{weekday:o}=this;o<r&&(i.weekNumber=this.weekNumber-1),i.weekday=r}else i.weekday=1;if(n==="quarters"){const r=Math.ceil(this.month/3);i.month=(r-1)*3+1}return this.set(i)}endOf(t,e){return this.isValid?this.plus({[t]:1}).startOf(t,e).minus(1):this}toFormat(t,e={}){return this.isValid?At.create(this.loc.redefaultToEN(e)).formatDateTimeFromString(this,t):Lr}toLocaleString(t=Vn,e={}){return this.isValid?At.create(this.loc.clone(e),t).formatDateTime(this):Lr}toLocaleParts(t={}){return this.isValid?At.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:e=!1,suppressMilliseconds:i=!1,includeOffset:n=!0,extendedZone:r=!1}={}){if(!this.isValid)return null;const o=t==="extended";let a=$r(this,o);return a+="T",a+=bc(this,o,e,i,n,r),a}toISODate({format:t="extended"}={}){return this.isValid?$r(this,t==="extended"):null}toISOWeekDate(){return _n(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:e=!1,includeOffset:i=!0,includePrefix:n=!1,extendedZone:r=!1,format:o="extended"}={}){return this.isValid?(n?"T":"")+bc(this,o==="extended",e,t,i,r):null}toRFC2822(){return _n(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return _n(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?$r(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:e=!1,includeOffsetSpace:i=!0}={}){let n="HH:mm:ss.SSS";return(e||t)&&(i&&(n+=" "),e?n+="z":t&&(n+="ZZ")),_n(this,n,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():Lr}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const e={...this.c};return t.includeConfig&&(e.outputCalendar=this.outputCalendar,e.numberingSystem=this.loc.numberingSystem,e.locale=this.loc.locale),e}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,e="milliseconds",i={}){if(!this.isValid||!t.isValid)return W.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...i},r=Xy(e).map(W.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,l=o?t:this,c=sv(a,l,r,n);return o?c.negate():c}diffNow(t="milliseconds",e={}){return this.diff(R.now(),t,e)}until(t){return this.isValid?gt.fromDateTimes(this,t):this}hasSame(t,e,i){if(!this.isValid)return!1;const n=t.valueOf(),r=this.setZone(t.zone,{keepLocalTime:!0});return r.startOf(e,i)<=n&&n<=r.endOf(e,i)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const e=t.base||R.fromObject({},{zone:this.zone}),i=t.padding?this<e?-t.padding:t.padding:0;let n=["years","months","days","hours","minutes","seconds"],r=t.unit;return Array.isArray(t.unit)&&(n=t.unit,r=void 0),wc(e,this.plus(i),{...t,numeric:"always",units:n,unit:r})}toRelativeCalendar(t={}){return this.isValid?wc(t.base||R.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(R.isDateTime))throw new Ft("min requires all arguments be DateTimes");return oc(t,e=>e.valueOf(),Math.min)}static max(...t){if(!t.every(R.isDateTime))throw new Ft("max requires all arguments be DateTimes");return oc(t,e=>e.valueOf(),Math.max)}static fromFormatExplain(t,e,i={}){const{locale:n=null,numberingSystem:r=null}=i,o=tt.fromOpts({locale:n,numberingSystem:r,defaultToEN:!0});return Gu(o,t,e)}static fromStringExplain(t,e,i={}){return R.fromFormatExplain(t,e,i)}static get DATE_SHORT(){return Vn}static get DATE_MED(){return eu}static get DATE_MED_WITH_WEEKDAY(){return My}static get DATE_FULL(){return su}static get DATE_HUGE(){return iu}static get TIME_SIMPLE(){return nu}static get TIME_WITH_SECONDS(){return ru}static get TIME_WITH_SHORT_OFFSET(){return ou}static get TIME_WITH_LONG_OFFSET(){return au}static get TIME_24_SIMPLE(){return lu}static get TIME_24_WITH_SECONDS(){return cu}static get TIME_24_WITH_SHORT_OFFSET(){return hu}static get TIME_24_WITH_LONG_OFFSET(){return uu}static get DATETIME_SHORT(){return du}static get DATETIME_SHORT_WITH_SECONDS(){return fu}static get DATETIME_MED(){return gu}static get DATETIME_MED_WITH_SECONDS(){return mu}static get DATETIME_MED_WITH_WEEKDAY(){return Ey}static get DATETIME_FULL(){return pu}static get DATETIME_FULL_WITH_SECONDS(){return _u}static get DATETIME_HUGE(){return bu}static get DATETIME_HUGE_WITH_SECONDS(){return yu}}function ai(s){if(R.isDateTime(s))return s;if(s&&s.valueOf&&ls(s.valueOf()))return R.fromJSDate(s);if(s&&typeof s=="object")return R.fromObject(s);throw new Ft(`Unknown datetime argument: ${s}, of type ${typeof s}`)}function kv(s){const t=R.now(),e=t.minus(s),i=["M","A","E","N"];let n=e,r=[],o=[],a=0;for(;!t.equals(n);){if(a++,a>300)throw"generateLabels did not resolve in reasonable amount of time";n=n.plus({days:1}),r.push(n)}for(const l of r)for(const c of i)o.push(`${l.toFormat("LLL dd")} ${c}`);return o}var Si=(s=>(s[s.LAST_WEEK=0]="LAST_WEEK",s[s.LAST_MONTH=1]="LAST_MONTH",s[s.LAST_3MONTH=2]="LAST_3MONTH",s))(Si||{}),jt=(s=>(s[s.MORNING=0]="MORNING",s[s.AFTERNOON=1]="AFTERNOON",s[s.EVENING=2]="EVENING",s[s.NIGHT=3]="NIGHT",s))(jt||{});async function Sv(s){let t;if(s==0)t=W.fromObject({days:7});else if(s==1)t=W.fromObject({months:1});else if(s==2)t=W.fromObject({months:3});else throw"Invalid TimeFrame";const e=R.now().minus(t);let i=kv(t),n=[],r={morning:[],afternoon:[],night:[]},o={morning:[],afternoon:[],night:[]},a={morning:[],afternoon:[],night:[]},{error:l,data:c}=await Qt.from("record").select("*").filter("user_uid","eq",jc(Bs)).filter("date","gt",e.toSQLDate()).order("date",{ascending:!0});if(l||!c)throw l;return c.map(u=>{n.push(`${R.fromSQL(u.date).toFormat("LLL dd")}`),Number(u.time)==0?(r.morning.push(u.heart_rate),o.morning.push(u.value_sys),a.morning.push(u.value_dia)):Number(u.time)==1&&(r.afternoon.push(u.heart_rate),o.afternoon.push(u.value_sys),a.afternoon.push(u.value_dia)),Number(u.time)==3&&(r.night.push(u.heart_rate),o.night.push(u.value_sys),a.night.push(u.value_dia))}),{labels:[...new Set(n)],hrValues:r,sysValues:o,diaValues:a,chart_labels:i}}function kc(s){return s.labels}function Fr(s){return s.sysValues}function jr(s){return s.diaValues}function zr(s){return s.hrValues}function Sc(s){let t,e,i;return{c(){t=S("div"),e=S("h2"),i=ct(s[4]),k(e,"class","svelte-1tcs69g"),k(t,"class","canvas nodata svelte-1tcs69g")},m(n,r){et(n,t,r),y(t,e),y(e,i)},p(n,r){r&16&&Zt(i,n[4])},d(n){n&&Q(t)}}}function Oc(s){let t,e,i;return{c(){t=S("div"),e=S("h2"),i=ct(s[4]),k(e,"class","svelte-1tcs69g"),k(t,"class","canvas nodata svelte-1tcs69g")},m(n,r){et(n,t,r),y(t,e),y(e,i)},p(n,r){r&16&&Zt(i,n[4])},d(n){n&&Q(t)}}}function Ov(s){let t,e,i,n,r,o,a,l,c,h,u,d,f,g,p,m,_,b,w,v,x,O,M,T=!s[3]&&Sc(s),E=!s[3]&&Oc(s);return{c(){t=S("main"),e=S("div"),i=S("div"),i.innerHTML='<h1 class="svelte-1tcs69g">Home</h1>',n=I(),r=S("div"),o=S("select"),a=S("option"),a.textContent="Last Week",l=S("option"),l.textContent="Last Month",c=S("option"),c.textContent="Last 3 Months",h=I(),u=S("div"),d=S("h2"),d.textContent="Blood Pressure",f=I(),g=S("canvas"),p=I(),T&&T.c(),m=I(),_=S("div"),b=S("h2"),b.textContent="Heart Rate",w=I(),v=S("canvas"),x=I(),E&&E.c(),k(i,"class","titleContainer"),a.__value=Si.LAST_WEEK,dt(a,a.__value),l.__value=Si.LAST_MONTH,dt(l,l.__value),c.__value=Si.LAST_3MONTH,dt(c,c.__value),k(o,"class","svelte-1tcs69g"),s[0]===void 0&&us(()=>s[6].call(o)),k(r,"class","selectionContainer"),k(e,"class","padded svelte-1tcs69g"),k(d,"class","svelte-1tcs69g"),k(g,"style",s[5]),k(g,"class","canvas svelte-1tcs69g"),k(g,"height",globalThis.vh*40),k(g,"width",globalThis.vw*100),k(u,"class","bpContainer"),k(b,"class","svelte-1tcs69g"),k(v,"style",s[5]),k(v,"class","canvas svelte-1tcs69g"),k(v,"height",globalThis.vh*40),k(v,"width",globalThis.vw*100),k(_,"class","hrContainer"),k(t,"class","svelte-1tcs69g")},m(D,P){et(D,t,P),y(t,e),y(e,i),y(e,n),y(e,r),y(r,o),y(o,a),y(o,l),y(o,c),sa(o,s[0],!0),y(t,h),y(t,u),y(u,d),y(u,f),y(u,g),s[7](g),y(u,p),T&&T.m(u,null),y(t,m),y(t,_),y(_,b),y(_,w),y(_,v),s[8](v),y(_,x),E&&E.m(_,null),O||(M=ht(o,"change",s[6]),O=!0)},p(D,[P]){P&1&&sa(o,D[0]),P&32&&k(g,"style",D[5]),D[3]?T&&(T.d(1),T=null):T?T.p(D,P):(T=Sc(D),T.c(),T.m(u,null)),P&32&&k(v,"style",D[5]),D[3]?E&&(E.d(1),E=null):E?E.p(D,P):(E=Oc(D),E.c(),E.m(_,null))},i:N,o:N,d(D){D&&Q(t),s[7](null),T&&T.d(),s[8](null),E&&E.d(),O=!1,M()}}}function Tv(s,t,e){ne.register(...C_),ne.defaults.color="#fff";let i,n,r,o,a=!1,l=Si.LAST_WEEK,c=!1,h="Fetching data...";function u(m){if(console.log("==== CHANGED ====",m.labels.length,c?"flex":"none"),a&&(o.destroy(),r.destroy()),console.log(m),m.labels.length===0){e(3,c=!1),e(4,h="No data!"),console.log("No data!");return}e(3,c=!0),e(5,d="display: block"),console.log("Reach"),a=!0;const _=i.getContext("2d"),b=n.getContext("2d");r=new ne(_,{type:"line",data:{labels:kc(m),datasets:[{label:"Systolic - Morning",data:Fr(m).morning,fill:!1,tension:.1,borderColor:"#DA012D"},{label:"Diastolic - Morning",data:jr(m).morning,fill:!1,tension:.1,borderColor:"#00FFEF"},{label:"Systolic - Afternoon",data:Fr(m).afternoon,fill:!1,tension:.1,borderColor:"#960018"},{label:"Diastolic - Afternoon",data:jr(m).afternoon,fill:!1,tension:.1,borderColor:"#007FFF"},{label:"Systolic - Night",data:Fr(m).night,fill:!1,tension:.1,borderColor:"#722F37"},{label:"Diastolic - Night",data:jr(m).night,fill:!1,tension:.1,borderColor:"#191970"}]}}),o=new ne(b,{type:"line",data:{labels:kc(m),datasets:[{label:"Heart Rate - Morning",data:zr(m).morning,fill:!1,tension:.1,borderColor:"#DA012D"},{label:"Heart Rate - Afternoon",data:zr(m).afternoon,fill:!1,tension:.1,borderColor:"#960018"},{label:"Heart Rate - Night",data:zr(m).night,fill:!1,tension:.1,borderColor:"#722F37"}]}})}let d="";function f(){l=hd(this),e(0,l)}function g(m){hs[m?"unshift":"push"](()=>{i=m,e(1,i)})}function p(m){hs[m?"unshift":"push"](()=>{n=m,e(2,n)})}return s.$$.update=()=>{s.$$.dirty&1&&(e(5,d="display: none;"),e(3,c=!1),e(4,h="Fetching...."),Sv(l).then(u))},[l,i,n,c,h,d,f,g,p]}class Mv extends Ee{constructor(t){super(),Me(this,t,Tv,Ov,ue,{})}}async function Ev(s){for(let[h,u]of s)if(h!="comment"&&!u)return alert(`Field ${h} is not filled in`),!1;const{value_sys:t,value_dia:e,heart_rate:i,comment:n,time:r,date:o,user_uid:a}=Object.fromEntries(s.entries());console.log({value_sys:t,value_dia:e,heart_rate:i,comment:n,time:r,date:o,user_uid:a});const{error:l,data:c}=await Qt.from("record").insert([{value_sys:t,value_dia:e,heart_rate:i,comment:n,time:r,date:o,user_uid:a}]).select();if(l)throw l;return!0}async function Cv(s){for(let[u,d]of s)if(u!="comment"&&!d)return alert(`Field ${u} is not filled in`),!1;const{id:t,value_sys:e,value_dia:i,heart_rate:n,comment:r,time:o,date:a,user_uid:l}=Object.fromEntries(s.entries());console.log({value_sys:e,value_dia:i,heart_rate:n,comment:r,time:o,date:a,user_uid:l});const{data:c,error:h}=await Qt.from("record").update({value_sys:e,value_dia:i,heart_rate:n,comment:r,time:o,date:a,user_uid:l}).eq("id",t).select();if(h)throw h;return!0}function Tc(s){let t,e,i,n,r,o,a,l,c,h,u,d,f,g,p,m,_,b,w,v,x;return{c(){t=S("h1"),t.textContent="Add Record",e=I(),i=S("form"),n=S("input"),r=I(),o=S("div"),a=S("input"),l=I(),c=S("div"),h=S("select"),u=S("option"),u.textContent="Morning",d=S("option"),d.textContent="Afternoon",f=S("option"),f.textContent="Night",g=I(),p=S("div"),p.innerHTML='<input type="text" placeholder="Comment..." name="comment" class="svelte-nf8blj"/>',m=I(),_=S("div"),_.innerHTML='<input type="number" name="value_sys" placeholder="Sys" class="svelte-nf8blj"/> <input type="number" name="value_dia" placeholder="Dia" class="svelte-nf8blj"/> <input type="number" name="heart_rate" placeholder="HR" class="svelte-nf8blj"/>',b=I(),w=S("div"),w.innerHTML='<input type="submit" class="svelte-nf8blj"/>',k(t,"class","svelte-nf8blj"),k(n,"type","hidden"),k(n,"name","user_uid"),n.value=s[2],k(a,"type","date"),k(a,"name","date"),a.value=s[3](),k(a,"class","svelte-nf8blj"),k(o,"class","row svelte-nf8blj"),u.__value=jt.MORNING,dt(u,u.__value),d.__value=jt.AFTERNOON,dt(d,d.__value),f.__value=jt.NIGHT,dt(f,f.__value),k(h,"name","time"),k(h,"class","svelte-nf8blj"),k(c,"class","row svelte-nf8blj"),k(p,"class","row svelte-nf8blj"),k(_,"class","row split svelte-nf8blj"),k(w,"class","row svelte-nf8blj"),k(i,"action","")},m(O,M){et(O,t,M),et(O,e,M),et(O,i,M),y(i,n),y(i,r),y(i,o),y(o,a),y(i,l),y(i,c),y(c,h),y(h,u),y(h,d),y(h,f),y(i,g),y(i,p),y(i,m),y(i,_),y(i,b),y(i,w),s[5](i),v||(x=ht(i,"submit",s[4]),v=!0)},p(O,M){M&4&&(n.value=O[2])},d(O){O&&(Q(t),Q(e),Q(i)),s[5](null),v=!1,x()}}}function Dv(s){let t,e=s[1],i=Tc(s);return{c(){t=S("main"),i.c(),k(t,"class","svelte-nf8blj")},m(n,r){et(n,t,r),i.m(t,null)},p(n,[r]){r&2&&ue(e,e=n[1])?(i.d(1),i=Tc(n),i.c(),i.m(t,null)):i.p(n,r)},i:N,o:N,d(n){n&&Q(t),i.d(n)}}}function Av(s,t,e){let i;cs(s,Bs,c=>e(2,i=c));let n,r=!0;function o(){return R.now().toISODate()}async function a(c){c.preventDefault();const h=new FormData(n);await Ev(h)&&(alert("Success!"),e(1,r=!r))}function l(c){hs[c?"unshift":"push"](()=>{n=c,e(0,n)})}return[n,r,i,o,a,l]}class Pv extends Ee{constructor(t){super(),Me(this,t,Av,Dv,ue,{})}}var xt=(s=>(s[s.HOME_SCREEN=0]="HOME_SCREEN",s[s.ADD_RECORD=1]="ADD_RECORD",s[s.SYNC_DETAILS=2]="SYNC_DETAILS",s[s.RAW_DATA=3]="RAW_DATA",s[s.EDIT_RECORD=4]="EDIT_RECORD",s))(xt||{});const Qu=zi(),He=zi(0),Ni=zi(!1);function Mc(s,t,e){const i=s.slice();return i[11]=t[e],i}function Ec(s,t,e){const i=s.slice();return i[11]=t[e],i}function Iv(s){return{c:N,m:N,p:N,d:N}}function Lv(s){let t,e=$s(s[0]),i=[];for(let n=0;n<e.length;n+=1)i[n]=Cc(Ec(s,e,n));return{c(){for(let n=0;n<i.length;n+=1)i[n].c();t=qn()},m(n,r){for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(n,r);et(n,t,r)},p(n,r){if(r&65){e=$s(n[0]);let o;for(o=0;o<e.length;o+=1){const a=Ec(n,e,o);i[o]?i[o].p(a,r):(i[o]=Cc(a),i[o].c(),i[o].m(t.parentNode,t))}for(;o<i.length;o+=1)i[o].d(1);i.length=e.length}},d(n){n&&Q(t),wo(i,n)}}}function Cc(s){let t,e,i=s[11].to+"",n,r,o,a;return{c(){t=S("li"),e=S("button"),n=ct(i),r=I(),k(e,"class","list-item svelte-1biiz6x"),k(t,"class","svelte-1biiz6x")},m(l,c){et(l,t,c),y(t,e),y(e,n),y(t,r),o||(a=ht(e,"click",function(){Un(s[6](s[11].to))&&s[6](s[11].to).apply(this,arguments)}),o=!0)},p(l,c){s=l,c&1&&i!==(i=s[11].to+"")&&Zt(n,i)},d(l){l&&Q(t),o=!1,a()}}}function Rv(s){let t;return{c(){t=ct("Loading....")},m(e,i){et(e,t,i)},p:N,d(e){e&&Q(t)}}}function Nv(s){return{c:N,m:N,p:N,d:N}}function $v(s){let t,e=$s(s[1]),i=[];for(let n=0;n<e.length;n+=1)i[n]=Dc(Mc(s,e,n));return{c(){for(let n=0;n<i.length;n+=1)i[n].c();t=qn()},m(n,r){for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(n,r);et(n,t,r)},p(n,r){if(r&2){e=$s(n[1]);let o;for(o=0;o<e.length;o+=1){const a=Mc(n,e,o);i[o]?i[o].p(a,r):(i[o]=Dc(a),i[o].c(),i[o].m(t.parentNode,t))}for(;o<i.length;o+=1)i[o].d(1);i.length=e.length}},d(n){n&&Q(t),wo(i,n)}}}function Dc(s){let t,e=s[11].on_email+"",i,n,r,o;function a(){return s[7](s[11])}return{c(){t=S("button"),i=ct(e),n=I(),k(t,"class","list-item svelte-1biiz6x")},m(l,c){et(l,t,c),y(t,i),y(t,n),r||(o=ht(t,"click",a),r=!0)},p(l,c){s=l,c&2&&e!==(e=s[11].on_email+"")&&Zt(i,e)},d(l){l&&Q(t),r=!1,o()}}}function Fv(s){let t;return{c(){t=ct("Loading....")},m(e,i){et(e,t,i)},p:N,d(e){e&&Q(t)}}}function jv(s){let t,e,i,n,r,o,a,l,c,h,u,d,f,g,p,m,_,b,w,v,x,O,M,T,E,D,P,L,q,G,z,F,H,at,Z,Mt,J,nt,Ot,lt,Nt,Lt,vt,Js,qi,_t={ctx:s,current:null,token:null,hasCatch:!1,pending:Rv,then:Lv,catch:Iv};Wr(s[4],_t);let ft={ctx:s,current:null,token:null,hasCatch:!1,pending:Fv,then:$v,catch:Nv};return Wr(s[5],ft),{c(){t=S("main"),e=S("h1"),e.textContent="Sync Settings",i=I(),n=S("div"),r=S("div"),r.textContent="Signed in as:",o=I(),a=S("div"),l=S("div"),l.textContent=`${Xt.email}`,c=I(),h=S("div"),u=S("div"),u.textContent="Syncing info to:",d=I(),f=S("div"),g=S("div"),p=ct(s[2]),m=I(),_=S("h2"),_.textContent="Account Sharing",b=I(),w=S("div"),v=S("div"),v.textContent="Users with access to your account:",x=I(),O=S("div"),_t.block.c(),M=I(),T=S("button"),T.textContent="Add user +",E=I(),D=S("div"),P=S("div"),P.textContent="Users accounts you have access to:",L=I(),q=S("div"),ft.block.c(),G=I(),z=S("button"),z.textContent="Your Account",F=I(),H=S("h2"),H.textContent="View Raw Data",at=I(),Z=S("div"),Mt=S("div"),J=S("button"),J.textContent="View Raw Data",nt=I(),Ot=S("h2"),Ot.textContent="Sign out",lt=I(),Nt=S("div"),Lt=S("div"),vt=S("button"),vt.textContent="Sign Out",k(e,"class","svelte-1biiz6x"),k(r,"class","field svelte-1biiz6x"),k(l,"class","list-item"),k(a,"class","value svelte-1biiz6x"),k(n,"class","info svelte-1biiz6x"),k(u,"class","field svelte-1biiz6x"),k(g,"class","list-item"),k(f,"class","value svelte-1biiz6x"),k(h,"class","info svelte-1biiz6x"),k(v,"class","field svelte-1biiz6x"),k(T,"class","list-item svelte-1biiz6x"),k(O,"class","value svelte-1biiz6x"),k(w,"class","info svelte-1biiz6x"),k(P,"class","field svelte-1biiz6x"),k(z,"class","list-item svelte-1biiz6x"),k(q,"class","value svelte-1biiz6x"),k(D,"class","info svelte-1biiz6x"),k(J,"class","list-item svelte-1biiz6x"),k(Mt,"class","value svelte-1biiz6x"),k(Z,"class","info svelte-1biiz6x"),k(vt,"class","list-item svelte-1biiz6x"),k(Lt,"class","value svelte-1biiz6x"),k(Nt,"class","info svelte-1biiz6x"),k(t,"class","svelte-1biiz6x")},m(Ks,Xs){et(Ks,t,Xs),y(t,e),y(t,i),y(t,n),y(n,r),y(n,o),y(n,a),y(a,l),y(t,c),y(t,h),y(h,u),y(h,d),y(h,f),y(f,g),y(g,p),y(t,m),y(t,_),y(t,b),y(t,w),y(w,v),y(w,x),y(w,O),_t.block.m(O,_t.anchor=null),_t.mount=()=>O,_t.anchor=M,y(O,M),y(O,T),y(t,E),y(t,D),y(D,P),y(D,L),y(D,q),ft.block.m(q,ft.anchor=null),ft.mount=()=>q,ft.anchor=G,y(q,G),y(q,z),y(t,F),y(t,H),y(t,at),y(t,Z),y(Z,Mt),y(Mt,J),y(t,nt),y(t,Ot),y(t,lt),y(t,Nt),y(Nt,Lt),y(Lt,vt),Js||(qi=[ht(T,"click",s[3]),ht(z,"click",s[8]),ht(J,"click",s[9]),ht(vt,"click",s[10])],Js=!0)},p(Ks,[Xs]){s=Ks,Xs&4&&Zt(p,s[2]),Br(_t,s,Xs),Br(ft,s,Xs)},i:N,o:N,d(Ks){Ks&&Q(t),_t.block.d(),_t.token=null,_t=null,ft.block.d(),ft.token=null,ft=null,Js=!1,he(qi)}}}function zv(s,t,e){let i;cs(s,ir,g=>e(2,i=g));let n=[],r=[];async function o(){let g=prompt("Email address to give access to:");await _y(g),e(0,n=await Cr())}let a=new Promise(async(g,p)=>{e(0,n=await Cr()),console.log(n),g()}),l=new Promise(async(g,p)=>{e(1,r=await yy()),console.log(r),g()});function c(g){return async()=>{confirm(`Revoke access from ${g}`)&&(await by(g),e(0,n=await Cr()))}}return[n,r,i,o,a,l,c,g=>{fo(g.on_email,g.on)},()=>{fo(Xt.email,Xt.id)},()=>{He.set(xt.RAW_DATA)},async()=>{await Qt.auth.signOut(),location.reload()}]}class Vv extends Ee{constructor(t){super(),Me(this,t,zv,jv,ue,{})}}const Ac=20;async function Wv(s){const{data:t,error:e}=await Qt.from("record").select().eq("user_uid",jc(Bs)).order("date",{ascending:!1}).order("time",{ascending:!1}).range((s-1)*Ac,s*Ac-1);if(e)throw e;return console.log(`Fetched page ${s}`,t),t}async function Bv(s){const{data:t,error:e}=await Qt.from("record").delete().eq("id",s);if(console.log("Deleting",s,t),e)throw e}function Pc(s,t,e){const i=s.slice();return i[11]=t[e],i[13]=e,i}function Ic(s){let t,e,i=s[11].comment+"",n;return{c(){t=S("div"),e=S("div"),n=ct(i),k(e,"class","left svelte-1ixxhu6"),k(t,"class","row svelte-1ixxhu6")},m(r,o){et(r,t,o),y(t,e),y(e,n)},p(r,o){o&1&&i!==(i=r[11].comment+"")&&Zt(n,i)},d(r){r&&Q(t)}}}function Lc(s){let t,e,i,n=R.fromSQL(s[11].date).toLocaleString(R.DATE_FULL)+"",r,o,a,l=s[4](s[11].time)+"",c,h,u,d,f,g=s[11].value_sys+"",p,m,_,b,w,v=s[11].value_dia+"",x,O,M,T,E,D,P=s[11].heart_rate+"",L,q,G,z,F,H,at,Z,Mt,J,nt,Ot,lt,Nt,Lt,vt=s[11].comment&&Ic(s);function Js(){return s[8](s[13])}function qi(){return s[9](s[13])}return{c(){t=S("div"),e=S("div"),i=S("div"),r=ct(n),o=I(),a=S("div"),c=ct(l),h=I(),u=S("div"),d=S("div"),f=S("span"),p=ct(g),m=ct("s"),b=ct(`
                        /
                        `),w=S("span"),x=ct(v),M=ct(`
                        (S/D)`),T=I(),E=S("div"),D=S("span"),L=ct(P),G=ct(`
                        (HR)`),z=I(),vt&&vt.c(),F=I(),H=S("div"),at=S("div"),Z=S("button"),Z.textContent="Edit",Mt=I(),J=S("div"),nt=S("button"),nt.textContent="Delete",k(i,"class","left svelte-1ixxhu6"),k(a,"class","right svelte-1ixxhu6"),k(e,"class","row svelte-1ixxhu6"),k(f,"class",_=Gt(Ts(s[2].BP_SYS,s[11].value_sys))+" svelte-1ixxhu6"),k(w,"class",O=Gt(Ts(s[2].BP_DIA,s[11].value_dia))+" svelte-1ixxhu6"),k(d,"class","left svelte-1ixxhu6"),k(D,"class",q=Gt(Ts(s[2].HR,s[11].heart_rate))+" svelte-1ixxhu6"),k(E,"class","right svelte-1ixxhu6"),k(u,"class","row svelte-1ixxhu6"),k(Z,"class","abtn edit svelte-1ixxhu6"),k(at,"class","left svelte-1ixxhu6"),k(nt,"class","abtn delete svelte-1ixxhu6"),k(J,"class","right svelte-1ixxhu6"),k(H,"class","row svelte-1ixxhu6"),k(t,"class","record svelte-1ixxhu6")},m(_t,ft){et(_t,t,ft),y(t,e),y(e,i),y(i,r),y(e,o),y(e,a),y(a,c),y(t,h),y(t,u),y(u,d),y(d,f),y(f,p),y(f,m),y(d,b),y(d,w),y(w,x),y(d,M),y(u,T),y(u,E),y(E,D),y(D,L),y(E,G),y(t,z),vt&&vt.m(t,null),y(t,F),y(t,H),y(H,at),y(at,Z),y(H,Mt),y(H,J),y(J,nt),lt=!0,Nt||(Lt=[ht(Z,"click",Js),ht(nt,"click",qi)],Nt=!0)},p(_t,ft){s=_t,(!lt||ft&1)&&n!==(n=R.fromSQL(s[11].date).toLocaleString(R.DATE_FULL)+"")&&Zt(r,n),(!lt||ft&1)&&l!==(l=s[4](s[11].time)+"")&&Zt(c,l),(!lt||ft&1)&&g!==(g=s[11].value_sys+"")&&Zt(p,g),(!lt||ft&1&&_!==(_=Gt(Ts(s[2].BP_SYS,s[11].value_sys))+" svelte-1ixxhu6"))&&k(f,"class",_),(!lt||ft&1)&&v!==(v=s[11].value_dia+"")&&Zt(x,v),(!lt||ft&1&&O!==(O=Gt(Ts(s[2].BP_DIA,s[11].value_dia))+" svelte-1ixxhu6"))&&k(w,"class",O),(!lt||ft&1)&&P!==(P=s[11].heart_rate+"")&&Zt(L,P),(!lt||ft&1&&q!==(q=Gt(Ts(s[2].HR,s[11].heart_rate))+" svelte-1ixxhu6"))&&k(D,"class",q),s[11].comment?vt?vt.p(s,ft):(vt=Ic(s),vt.c(),vt.m(t,F)):vt&&(vt.d(1),vt=null)},i(_t){lt||(_t&&us(()=>{lt&&(Ot||(Ot=Pn(t,oa,{},!0)),Ot.run(1))}),lt=!0)},o(_t){_t&&(Ot||(Ot=Pn(t,oa,{},!1)),Ot.run(0)),lt=!1},d(_t){_t&&Q(t),vt&&vt.d(),_t&&Ot&&Ot.end(),Nt=!1,he(Lt)}}}function Hv(s){let t,e,i,n,r,o,a,l,c,h,u,d,f,g,p=$s(s[0]),m=[];for(let b=0;b<p.length;b+=1)m[b]=Lc(Pc(s,p,b));const _=b=>Et(m[b],1,1,()=>{m[b]=null});return{c(){t=S("main"),e=S("div"),i=S("h1"),i.textContent="Raw Data",n=I(),r=S("button"),r.textContent="✕",o=I(),a=S("div");for(let b=0;b<m.length;b+=1)m[b].c();l=I(),c=S("div"),h=S("button"),u=ct("Load More"),k(r,"class","close svelte-1ixxhu6"),k(e,"class","topContainer svelte-1ixxhu6"),k(h,"class","loadmore abtn edit svelte-1ixxhu6"),h.disabled=s[1],k(c,"class","loadmore svelte-1ixxhu6"),k(a,"class","scrollable svelte-1ixxhu6"),k(t,"class","svelte-1ixxhu6")},m(b,w){et(b,t,w),y(t,e),y(e,i),y(e,n),y(e,r),y(t,o),y(t,a);for(let v=0;v<m.length;v+=1)m[v]&&m[v].m(a,null);y(a,l),y(a,c),y(c,h),y(h,u),d=!0,f||(g=[ht(r,"click",s[7]),ht(h,"click",s[3])],f=!0)},p(b,[w]){if(w&117){p=$s(b[0]);let v;for(v=0;v<p.length;v+=1){const x=Pc(b,p,v);m[v]?(m[v].p(x,w),kt(m[v],1)):(m[v]=Lc(x),m[v].c(),kt(m[v],1),m[v].m(a,l))}for(Gn(),v=p.length;v<m.length;v+=1)_(v);Zn()}(!d||w&2)&&(h.disabled=b[1])},i(b){if(!d){for(let w=0;w<p.length;w+=1)kt(m[w]);d=!0}},o(b){m=m.filter(Boolean);for(let w=0;w<m.length;w+=1)Et(m[w]);d=!1},d(b){b&&Q(t),wo(m,b),f=!1,he(g)}}}const Uv=140,qv=110,Yv=85,Gv=50,Zv=90,Jv=60;function Ts(s,t){if(s==0){if(t>Uv)return"high";if(t<qv)return"low"}else if(s==1){if(t>Yv)return"high";if(t<Gv)return"low"}else if(s==2){if(t>Zv)return"high";if(t<Jv)return"low"}return""}function Kv(s,t,e){xo(()=>{Ni.set(!0),console.log("Hiding")}),Hc(()=>{Ni.set(!1)});let i=[],n=0,r=!1;var o=(g=>(g[g.BP_SYS=0]="BP_SYS",g[g.BP_DIA=1]="BP_DIA",g[g.HR=2]="HR",g))(o||{});async function a(){e(1,r=!0),n++;let g=await Wv(n);e(0,i=[...i,...g]),g.length===0?alert("No more records"):e(1,r=!1)}function l(g){switch(+g){case jt.MORNING:return"Morning";case jt.AFTERNOON:return"Afternoon";case jt.EVENING:return"Evenng";case jt.NIGHT:return"Night";default:return g}}async function c(g){if(!confirm("Are you sure you want to delete this record?"))return;let p=i[g].id;await Bv(p),i.splice(g,1),e(0,i)}a();function h(g){Qu.set(i[g]),He.set(xt.EDIT_RECORD)}return[i,r,o,a,l,c,h,()=>{He.set(xt.SYNC_DETAILS)},g=>{h(g)},g=>{c(g)}]}class Xv extends Ee{constructor(t){super(),Me(this,t,Kv,Hv,ue,{})}}function Qv(s){let t,e,i,n,r,o,a,l,c,h,u,d,f,g,p,m,_,b,w,v,x,O,M,T,E,D,P,L,q,G,z,F,H,at,Z,Mt;return{c(){t=S("main"),e=S("div"),i=S("h1"),i.textContent="Edit Record",n=I(),r=S("button"),r.textContent="✕",o=I(),a=S("form"),l=S("input"),c=I(),h=S("input"),u=I(),d=S("div"),f=S("input"),g=I(),p=S("div"),m=S("select"),_=S("option"),b=ct("Morning"),w=S("option"),v=ct("Afternoon"),x=S("option"),O=ct("Night"),M=I(),T=S("div"),E=S("input"),D=I(),P=S("div"),L=S("input"),q=I(),G=S("input"),z=I(),F=S("input"),H=I(),at=S("div"),at.innerHTML='<input type="submit" class="svelte-xe29ey"/>',k(i,"class","svelte-xe29ey"),k(r,"class","close svelte-xe29ey"),k(e,"class","titleContainer svelte-xe29ey"),k(l,"type","hidden"),k(l,"name","id"),k(h,"type","hidden"),k(h,"name","user_uid"),k(f,"type","date"),k(f,"name","date"),k(f,"class","svelte-xe29ey"),k(d,"class","row svelte-xe29ey"),_.__value=jt.MORNING,dt(_,_.__value),_.selected=jt.MORNING==s[8],w.__value=jt.AFTERNOON,dt(w,w.__value),w.selected=jt.AFTERNOON==s[8],x.__value=jt.NIGHT,dt(x,x.__value),x.selected=jt.NIGHT==s[8],k(m,"name","time"),k(m,"class","svelte-xe29ey"),k(p,"class","row svelte-xe29ey"),k(E,"type","text"),k(E,"placeholder","Comment..."),k(E,"name","comment"),k(E,"class","svelte-xe29ey"),k(T,"class","row svelte-xe29ey"),k(L,"type","number"),k(L,"name","value_sys"),k(L,"placeholder","Sys"),k(L,"class","svelte-xe29ey"),k(G,"type","number"),k(G,"name","value_dia"),k(G,"placeholder","Dia"),k(G,"class","svelte-xe29ey"),k(F,"type","number"),k(F,"name","heart_rate"),k(F,"placeholder","HR"),k(F,"class","svelte-xe29ey"),k(P,"class","row split svelte-xe29ey"),k(at,"class","row svelte-xe29ey"),k(a,"action",""),k(t,"class","svelte-xe29ey")},m(J,nt){et(J,t,nt),y(t,e),y(e,i),y(e,n),y(e,r),y(t,o),y(t,a),y(a,l),dt(l,s[1]),y(a,c),y(a,h),dt(h,s[7]),y(a,u),y(a,d),y(d,f),dt(f,s[2]),y(a,g),y(a,p),y(p,m),y(m,_),y(_,b),y(m,w),y(w,v),y(m,x),y(x,O),y(a,M),y(a,T),y(T,E),dt(E,s[6]),y(a,D),y(a,P),y(P,L),dt(L,s[3]),y(P,q),y(P,G),dt(G,s[4]),y(P,z),y(P,F),dt(F,s[5]),y(a,H),y(a,at),s[19](a),Z||(Mt=[ht(r,"click",s[11]),ht(l,"input",s[12]),ht(h,"input",s[13]),ht(f,"input",s[14]),ht(E,"input",s[15]),ht(L,"input",s[16]),ht(G,"input",s[17]),ht(F,"input",s[18]),ht(a,"submit",s[9])],Z=!0)},p(J,[nt]){nt&2&&dt(l,J[1]),nt&128&&dt(h,J[7]),nt&4&&dt(f,J[2]),nt&64&&E.value!==J[6]&&dt(E,J[6]),nt&8&&As(L.value)!==J[3]&&dt(L,J[3]),nt&16&&As(G.value)!==J[4]&&dt(G,J[4]),nt&32&&As(F.value)!==J[5]&&dt(F,J[5])},i:N,o:N,d(J){J&&Q(t),s[19](null),Z=!1,he(Mt)}}}function tw(s,t,e){let i;Ni.set(!0);let{record:n}=t,{id:r,date:o,time:a,value_sys:l,value_dia:c,heart_rate:h,comment:u,user_uid:d}=n;async function f(M){M.preventDefault();const T=new FormData(i);await Cv(T)&&(alert("Edit Success"),He.set(xt.RAW_DATA))}Hc(()=>{Ni.set(!1)});const g=()=>{He.set(xt.RAW_DATA)};function p(){r=this.value,e(1,r)}function m(){d=this.value,e(7,d)}function _(){o=this.value,e(2,o)}function b(){u=this.value,e(6,u)}function w(){l=As(this.value),e(3,l)}function v(){c=As(this.value),e(4,c)}function x(){h=As(this.value),e(5,h)}function O(M){hs[M?"unshift":"push"](()=>{i=M,e(0,i)})}return s.$$set=M=>{"record"in M&&e(10,n=M.record)},[i,r,o,l,c,h,u,d,a,f,n,g,p,m,_,b,w,v,x,O]}class ew extends Ee{constructor(t){super(),Me(this,t,tw,Qv,ue,{record:10})}}function sw(s){let t,e;return t=new ew({props:{record:s[1]}}),{c(){Ve(t.$$.fragment)},m(i,n){Se(t,i,n),e=!0},p(i,n){const r={};n&2&&(r.record=i[1]),t.$set(r)},i(i){e||(kt(t.$$.fragment,i),e=!0)},o(i){Et(t.$$.fragment,i),e=!1},d(i){Oe(t,i)}}}function iw(s){let t,e;return t=new Xv({}),{c(){Ve(t.$$.fragment)},m(i,n){Se(t,i,n),e=!0},p:N,i(i){e||(kt(t.$$.fragment,i),e=!0)},o(i){Et(t.$$.fragment,i),e=!1},d(i){Oe(t,i)}}}function nw(s){let t,e;return t=new Vv({}),{c(){Ve(t.$$.fragment)},m(i,n){Se(t,i,n),e=!0},p:N,i(i){e||(kt(t.$$.fragment,i),e=!0)},o(i){Et(t.$$.fragment,i),e=!1},d(i){Oe(t,i)}}}function rw(s){let t,e;return t=new Pv({}),{c(){Ve(t.$$.fragment)},m(i,n){Se(t,i,n),e=!0},p:N,i(i){e||(kt(t.$$.fragment,i),e=!0)},o(i){Et(t.$$.fragment,i),e=!1},d(i){Oe(t,i)}}}function ow(s){let t,e;return t=new Mv({}),{c(){Ve(t.$$.fragment)},m(i,n){Se(t,i,n),e=!0},p:N,i(i){e||(kt(t.$$.fragment,i),e=!0)},o(i){Et(t.$$.fragment,i),e=!1},d(i){Oe(t,i)}}}function aw(s){let t,e,i,n;const r=[ow,rw,nw,iw,sw],o=[];function a(l,c){return l[0]==xt.HOME_SCREEN?0:l[0]==xt.ADD_RECORD?1:l[0]==xt.SYNC_DETAILS?2:l[0]==xt.RAW_DATA?3:l[0]==xt.EDIT_RECORD?4:-1}return~(e=a(s))&&(i=o[e]=r[e](s)),{c(){t=S("main"),i&&i.c(),k(t,"class","svelte-1t3yj0k")},m(l,c){et(l,t,c),~e&&o[e].m(t,null),n=!0},p(l,[c]){let h=e;e=a(l),e===h?~e&&o[e].p(l,c):(i&&(Gn(),Et(o[h],1,1,()=>{o[h]=null}),Zn()),~e?(i=o[e],i?i.p(l,c):(i=o[e]=r[e](l),i.c()),kt(i,1),i.m(t,null)):i=null)},i(l){n||(kt(i),n=!0)},o(l){Et(i),n=!1},d(l){l&&Q(t),~e&&o[e].d()}}}function lw(s,t,e){let i,n;return cs(s,He,r=>e(0,i=r)),cs(s,Qu,r=>e(1,n=r)),[i,n]}class cw extends Ee{constructor(t){super(),Me(this,t,lw,aw,ue,{})}}function Rc(s){let t,e,i,n,r,o,a,l,c,h,u,d,f,g;return{c(){t=S("main"),e=S("button"),i=S("span"),i.textContent="Home",r=I(),o=S("button"),a=S("span"),a.textContent="Add",c=I(),h=S("button"),u=S("span"),u.textContent="Sync",k(e,"class",n=Gt(s[1]==xt.HOME_SCREEN?"selected":"")+" svelte-148ktx5"),k(o,"class",l=Gt(s[1]==xt.ADD_RECORD?"selected":"")+" svelte-148ktx5"),k(h,"class",d=Gt(s[1]==xt.SYNC_DETAILS?"selected":"")+" svelte-148ktx5"),k(t,"class","svelte-148ktx5")},m(p,m){et(p,t,m),y(t,e),y(e,i),y(t,r),y(t,o),y(o,a),y(t,c),y(t,h),y(h,u),f||(g=[ht(e,"click",s[2](xt.HOME_SCREEN)),ht(o,"click",s[2](xt.ADD_RECORD)),ht(h,"click",s[2](xt.SYNC_DETAILS))],f=!0)},p(p,m){m&2&&n!==(n=Gt(p[1]==xt.HOME_SCREEN?"selected":"")+" svelte-148ktx5")&&k(e,"class",n),m&2&&l!==(l=Gt(p[1]==xt.ADD_RECORD?"selected":"")+" svelte-148ktx5")&&k(o,"class",l),m&2&&d!==(d=Gt(p[1]==xt.SYNC_DETAILS?"selected":"")+" svelte-148ktx5")&&k(h,"class",d)},d(p){p&&Q(t),f=!1,he(g)}}}function hw(s){let t,e=!s[0]&&Rc(s);return{c(){e&&e.c(),t=qn()},m(i,n){e&&e.m(i,n),et(i,t,n)},p(i,[n]){i[0]?e&&(e.d(1),e=null):e?e.p(i,n):(e=Rc(i),e.c(),e.m(t.parentNode,t))},i:N,o:N,d(i){i&&Q(t),e&&e.d(i)}}}function uw(s,t,e){let i,n;cs(s,Ni,o=>e(0,i=o)),cs(s,He,o=>e(1,n=o));function r(o){return()=>{He.set(o)}}return[i,n,r]}class dw extends Ee{constructor(t){super(),Me(this,t,uw,hw,ue,{})}}function fw(s){let t,e;return{c(){t=S("main"),e=S("div"),k(e,"class","loginbtn svelte-85nb0j"),k(t,"class","svelte-85nb0j")},m(i,n){et(i,t,n),y(t,e),s[1](e)},p:N,i:N,o:N,d(i){i&&Q(t),s[1](null)}}}function gw(s,t,e){let i=globalThis.google,n;md();async function r(a){const{data:l,error:c}=await Qt.auth.signInWithIdToken({provider:"google",token:a.credential});if(c)throw c;location.reload()}window.onload=function(){},xo(()=>{i.accounts.id.initialize({use_fedcm_for_prompt:!0,client_id:"221575063928-600fstdnkbu22ehiljl2a7ohck8e4i2r.apps.googleusercontent.com",callback:r}),i.accounts.id.renderButton(n,{theme:"outline",size:"medium"}),i.accounts.id.prompt()});function o(a){hs[a?"unshift":"push"](()=>{n=a,e(0,n)})}return[n,o]}class mw extends Ee{constructor(t){super(),Me(this,t,gw,fw,ue,{})}}function pw(s){return{c:N,m:N,p:N,i:N,o:N,d:N}}function _w(s){let t,e,i,n;const r=[yw,bw],o=[];function a(l,c){return l[1]?0:1}return t=a(s),e=o[t]=r[t](s),{c(){e.c(),i=qn()},m(l,c){o[t].m(l,c),et(l,i,c),n=!0},p(l,c){e.p(l,c)},i(l){n||(kt(e),n=!0)},o(l){Et(e),n=!1},d(l){l&&Q(i),o[t].d(l)}}}function bw(s){let t,e;return t=new mw({}),t.$on("loginDone",ky),{c(){Ve(t.$$.fragment)},m(i,n){Se(t,i,n),e=!0},p:N,i(i){e||(kt(t.$$.fragment,i),e=!0)},o(i){Et(t.$$.fragment,i),e=!1},d(i){Oe(t,i)}}}function yw(s){let t,e,i,n,r,o=Xt.email!=s[0]&&Nc(s);return e=new cw({}),n=new dw({}),{c(){o&&o.c(),t=I(),Ve(e.$$.fragment),i=I(),Ve(n.$$.fragment)},m(a,l){o&&o.m(a,l),et(a,t,l),Se(e,a,l),et(a,i,l),Se(n,a,l),r=!0},p(a,l){Xt.email!=a[0]?o?(o.p(a,l),l&1&&kt(o,1)):(o=Nc(a),o.c(),kt(o,1),o.m(t.parentNode,t)):o&&(Gn(),Et(o,1,1,()=>{o=null}),Zn())},i(a){r||(kt(o),kt(e.$$.fragment,a),kt(n.$$.fragment,a),r=!0)},o(a){Et(o),Et(e.$$.fragment,a),Et(n.$$.fragment,a),r=!1},d(a){a&&(Q(t),Q(i)),o&&o.d(a),Oe(e,a),Oe(n,a)}}}function Nc(s){let t,e,i,n;return{c(){t=S("div"),e=ct(s[0]),k(t,"class","currentAccount svelte-89f8od")},m(r,o){et(r,t,o),y(t,e),n=!0},p(r,o){(!n||o&1)&&Zt(e,r[0])},i(r){n||(r&&us(()=>{n&&(i||(i=Pn(t,ra,{},!0)),i.run(1))}),n=!0)},o(r){r&&(i||(i=Pn(t,ra,{},!1)),i.run(0)),n=!1},d(r){r&&Q(t),r&&i&&i.end()}}}function vw(s){return{c:N,m:N,p:N,i:N,o:N,d:N}}function ww(s){let t,e,i={ctx:s,current:null,token:null,hasCatch:!1,pending:vw,then:_w,catch:pw,value:1,blocks:[,,,]};return Wr(xy(),i),{c(){t=S("main"),i.block.c(),k(t,"class","svelte-89f8od")},m(n,r){et(n,t,r),i.block.m(t,i.anchor=null),i.mount=()=>t,i.anchor=null,e=!0},p(n,[r]){s=n,Br(i,s,r)},i(n){e||(kt(i.block),e=!0)},o(n){for(let r=0;r<3;r+=1){const o=i.blocks[r];Et(o)}e=!1},d(n){n&&Q(t),i.block.d(),i.token=null,i=null}}}function xw(s,t,e){let i;return cs(s,ir,n=>e(0,i=n)),xo(()=>{window.innerWidth>600&&(console.log("Moving to desktop"),location.href="/desktop.html")}),[i]}class kw extends Ee{constructor(t){super(),Me(this,t,xw,ww,ue,{})}}new kw({target:document.body,props:{}});
