var ed=Object.defineProperty;var sd=(s,t,e)=>t in s?ed(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var E=(s,t,e)=>(sd(s,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();function j(){}const nd=s=>s;function id(s){return!!s&&(typeof s=="object"||typeof s=="function")&&typeof s.then=="function"}function Fc(s){return s()}function sa(){return Object.create(null)}function he(s){s.forEach(Fc)}function Ui(s){return typeof s=="function"}function ue(s,t){return s!=s?t==t:s!==t||s&&typeof s=="object"||typeof s=="function"}function rd(s){return Object.keys(s).length===0}function jc(s,...t){if(s==null){for(const n of t)n(void 0);return j}const e=s.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function zc(s){let t;return jc(s,e=>t=e)(),t}function hs(s,t,e){s.$$.on_destroy.push(jc(t,e))}function Zt(s){return s??""}const Vc=typeof window<"u";let od=Vc?()=>window.performance.now():()=>Date.now(),wo=Vc?s=>requestAnimationFrame(s):j;const Ds=new Set;function Wc(s){Ds.forEach(t=>{t.c(s)||(Ds.delete(t),t.f())}),Ds.size!==0&&wo(Wc)}function ad(s){let t;return Ds.size===0&&wo(Wc),{promise:new Promise(e=>{Ds.add(t={c:s,f:e})}),abort(){Ds.delete(t)}}}function v(s,t){s.appendChild(t)}function Bc(s){if(!s)return document;const t=s.getRootNode?s.getRootNode():s.ownerDocument;return t&&t.host?t:s.ownerDocument}function ld(s){const t=S("style");return t.textContent="/* empty */",cd(Bc(s),t),t.sheet}function cd(s,t){return v(s.head||s,t),t.sheet}function st(s,t,e){s.insertBefore(t,e||null)}function Q(s){s.parentNode&&s.parentNode.removeChild(s)}function xo(s,t){for(let e=0;e<s.length;e+=1)s[e]&&s[e].d(t)}function S(s){return document.createElement(s)}function ot(s){return document.createTextNode(s)}function R(){return ot(" ")}function qi(){return ot("")}function ht(s,t,e,n){return s.addEventListener(t,e,n),()=>s.removeEventListener(t,e,n)}function k(s,t,e){e==null?s.removeAttribute(t):s.getAttribute(t)!==e&&s.setAttribute(t,e)}function As(s){return s===""?null:+s}function hd(s){return Array.from(s.childNodes)}function Ht(s,t){t=""+t,s.data!==t&&(s.data=t)}function dt(s,t){s.value=t??""}function na(s,t,e){for(let n=0;n<s.options.length;n+=1){const i=s.options[n];if(i.__value===t){i.selected=!0;return}}(!e||t!==void 0)&&(s.selectedIndex=-1)}function ud(s){const t=s.querySelector(":checked");return t&&t.__value}function Hc(s,t,{bubbles:e=!1,cancelable:n=!1}={}){return new CustomEvent(s,{detail:t,bubbles:e,cancelable:n})}const Di=new Map;let Ai=0;function dd(s){let t=5381,e=s.length;for(;e--;)t=(t<<5)-t^s.charCodeAt(e);return t>>>0}function fd(s,t){const e={stylesheet:ld(t),rules:{}};return Di.set(s,e),e}function ia(s,t,e,n,i,r,o,a=0){const l=16.666/n;let c=`{
`;for(let p=0;p<=1;p+=l){const _=t+(e-t)*r(p);c+=p*100+`%{${o(_,1-_)}}
`}const h=c+`100% {${o(e,1-e)}}
}`,u=`__svelte_${dd(h)}_${a}`,d=Bc(s),{stylesheet:f,rules:g}=Di.get(d)||fd(d,s);g[u]||(g[u]=!0,f.insertRule(`@keyframes ${u} ${h}`,f.cssRules.length));const m=s.style.animation||"";return s.style.animation=`${m?`${m}, `:""}${u} ${n}ms linear ${i}ms 1 both`,Ai+=1,u}function gd(s,t){const e=(s.style.animation||"").split(", "),n=e.filter(t?r=>r.indexOf(t)<0:r=>r.indexOf("__svelte")===-1),i=e.length-n.length;i&&(s.style.animation=n.join(", "),Ai-=i,Ai||md())}function md(){wo(()=>{Ai||(Di.forEach(s=>{const{ownerNode:t}=s.stylesheet;t&&Q(t)}),Di.clear())})}let Tn;function ye(s){Tn=s}function Yi(){if(!Tn)throw new Error("Function called outside component initialization");return Tn}function ko(s){Yi().$$.on_mount.push(s)}function Uc(s){Yi().$$.on_destroy.push(s)}function pd(){const s=Yi();return(t,e,{cancelable:n=!1}={})=>{const i=s.$$.callbacks[t];if(i){const r=Hc(t,e,{cancelable:n});return i.slice().forEach(o=>{o.call(s,r)}),!r.defaultPrevented}return!0}}const Ms=[],ze=[];let Ps=[];const ra=[],_d=Promise.resolve();let Wr=!1;function bd(){Wr||(Wr=!0,_d.then(So))}function us(s){Ps.push(s)}const cr=new Set;let _s=0;function So(){if(_s!==0)return;const s=Tn;do{try{for(;_s<Ms.length;){const t=Ms[_s];_s++,ye(t),yd(t.$$)}}catch(t){throw Ms.length=0,_s=0,t}for(ye(null),Ms.length=0,_s=0;ze.length;)ze.pop()();for(let t=0;t<Ps.length;t+=1){const e=Ps[t];cr.has(e)||(cr.add(e),e())}Ps.length=0}while(Ms.length);for(;ra.length;)ra.pop()();Wr=!1,cr.clear(),ye(s)}function yd(s){if(s.fragment!==null){s.update(),he(s.before_update);const t=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,t),s.after_update.forEach(us)}}function vd(s){const t=[],e=[];Ps.forEach(n=>s.indexOf(n)===-1?t.push(n):e.push(n)),e.forEach(n=>n()),Ps=t}let Qs;function wd(){return Qs||(Qs=Promise.resolve(),Qs.then(()=>{Qs=null})),Qs}function hr(s,t,e){s.dispatchEvent(Hc(`${t?"intro":"outro"}${e}`))}const bi=new Set;let ve;function Gi(){ve={r:0,c:[],p:ve}}function Zi(){ve.r||he(ve.c),ve=ve.p}function kt(s,t){s&&s.i&&(bi.delete(s),s.i(t))}function Et(s,t,e,n){if(s&&s.o){if(bi.has(s))return;bi.add(s),ve.c.push(()=>{bi.delete(s),n&&(e&&s.d(1),n())}),s.o(t)}else n&&n()}const xd={duration:0};function Pi(s,t,e,n){let r=t(s,e,{direction:"both"}),o=n?0:1,a=null,l=null,c=null,h;function u(){c&&gd(s,c)}function d(g,m){const p=g.b-o;return m*=Math.abs(p),{a:o,b:g.b,d:p,duration:m,start:g.start,end:g.start+m,group:g.group}}function f(g){const{delay:m=0,duration:p=300,easing:_=nd,tick:b=j,css:y}=r||xd,w={start:od()+m,b:g};g||(w.group=ve,ve.r+=1),"inert"in s&&(g?h!==void 0&&(s.inert=h):(h=s.inert,s.inert=!0)),a||l?l=w:(y&&(u(),c=ia(s,o,g,p,m,_,y)),g&&b(0,1),a=d(w,p),us(()=>hr(s,g,"start")),ad(x=>{if(l&&x>l.start&&(a=d(l,p),l=null,hr(s,a.b,"start"),y&&(u(),c=ia(s,o,a.b,a.duration,0,_,r.css))),a){if(x>=a.end)b(o=a.b,1-o),hr(s,a.b,"end"),l||(a.b?u():--a.group.r||he(a.group.c)),a=null;else if(x>=a.start){const T=x-a.start;o=a.a+a.d*_(T/a.duration),b(o,1-o)}}return!!(a||l)}))}return{run(g){Ui(r)?wd().then(()=>{r=r({direction:g?"in":"out"}),f(g)}):f(g)},end(){u(),a=l=null}}}function Br(s,t){const e=t.token={};function n(i,r,o,a){if(t.token!==e)return;t.resolved=a;let l=t.ctx;o!==void 0&&(l=l.slice(),l[o]=a);const c=i&&(t.current=i)(l);let h=!1;t.block&&(t.blocks?t.blocks.forEach((u,d)=>{d!==r&&u&&(Gi(),Et(u,1,1,()=>{t.blocks[d]===u&&(t.blocks[d]=null)}),Zi())}):t.block.d(1),c.c(),kt(c,1),c.m(t.mount(),t.anchor),h=!0),t.block=c,t.blocks&&(t.blocks[r]=c),h&&So()}if(id(s)){const i=Yi();if(s.then(r=>{ye(i),n(t.then,1,t.value,r),ye(null)},r=>{if(ye(i),n(t.catch,2,t.error,r),ye(null),!t.hasCatch)throw r}),t.current!==t.pending)return n(t.pending,0),!0}else{if(t.current!==t.then)return n(t.then,1,t.value,s),!0;t.resolved=s}}function Hr(s,t,e){const n=t.slice(),{resolved:i}=s;s.current===s.then&&(n[s.value]=i),s.current===s.catch&&(n[s.error]=i),s.block.p(n,e)}function $s(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function We(s){s&&s.c()}function Se(s,t,e){const{fragment:n,after_update:i}=s.$$;n&&n.m(t,e),us(()=>{const r=s.$$.on_mount.map(Fc).filter(Ui);s.$$.on_destroy?s.$$.on_destroy.push(...r):he(r),s.$$.on_mount=[]}),i.forEach(us)}function Oe(s,t){const e=s.$$;e.fragment!==null&&(vd(e.after_update),he(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function kd(s,t){s.$$.dirty[0]===-1&&(Ms.push(s),bd(),s.$$.dirty.fill(0)),s.$$.dirty[t/31|0]|=1<<t%31}function Me(s,t,e,n,i,r,o=null,a=[-1]){const l=Tn;ye(s);const c=s.$$={fragment:null,ctx:[],props:r,update:j,not_equal:i,bound:sa(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:sa(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};o&&o(c.root);let h=!1;if(c.ctx=e?e(s,t.props||{},(u,d,...f)=>{const g=f.length?f[0]:d;return c.ctx&&i(c.ctx[u],c.ctx[u]=g)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](g),h&&kd(s,u)),d}):[],c.update(),h=!0,he(c.before_update),c.fragment=n?n(c.ctx):!1,t.target){if(t.hydrate){const u=hd(t.target);c.fragment&&c.fragment.l(u),u.forEach(Q)}else c.fragment&&c.fragment.c();t.intro&&kt(s.$$.fragment),Se(s,t.target,t.anchor),So()}ye(l)}class Ee{constructor(){E(this,"$$");E(this,"$$set")}$destroy(){Oe(this,1),this.$destroy=j}$on(t,e){if(!Ui(e))return j;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const i=n.indexOf(e);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!rd(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Sd="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Sd);function qc(s){const t=s-1;return t*t*t+1}function oa(s,{delay:t=0,duration:e=400,easing:n=qc,axis:i="y"}={}){const r=getComputedStyle(s),o=+r.opacity,a=i==="y"?"height":"width",l=parseFloat(r[a]),c=i==="y"?["top","bottom"]:["left","right"],h=c.map(_=>`${_[0].toUpperCase()}${_.slice(1)}`),u=parseFloat(r[`padding${h[0]}`]),d=parseFloat(r[`padding${h[1]}`]),f=parseFloat(r[`margin${h[0]}`]),g=parseFloat(r[`margin${h[1]}`]),m=parseFloat(r[`border${h[0]}Width`]),p=parseFloat(r[`border${h[1]}Width`]);return{delay:t,duration:e,easing:n,css:_=>`overflow: hidden;opacity: ${Math.min(_*20,1)*o};${a}: ${_*l}px;padding-${c[0]}: ${_*u}px;padding-${c[1]}: ${_*d}px;margin-${c[0]}: ${_*f}px;margin-${c[1]}: ${_*g}px;border-${c[0]}-width: ${_*m}px;border-${c[1]}-width: ${_*p}px;`}}function aa(s,{delay:t=0,duration:e=400,easing:n=qc,start:i=0,opacity:r=0}={}){const o=getComputedStyle(s),a=+o.opacity,l=o.transform==="none"?"":o.transform,c=1-i,h=a*(1-r);return{delay:t,duration:e,easing:n,css:(u,d)=>`
			transform: ${l} scale(${1-c*d});
			opacity: ${a-h*d}
		`}}/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Fn(s){return s+.5|0}const Ne=(s,t,e)=>Math.max(Math.min(s,e),t);function cn(s){return Ne(Fn(s*2.55),0,255)}function Ve(s){return Ne(Fn(s*255),0,255)}function be(s){return Ne(Fn(s/2.55)/100,0,1)}function la(s){return Ne(Fn(s*100),0,100)}const qt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ur=[..."0123456789ABCDEF"],Od=s=>Ur[s&15],Td=s=>Ur[(s&240)>>4]+Ur[s&15],Gn=s=>(s&240)>>4===(s&15),Md=s=>Gn(s.r)&&Gn(s.g)&&Gn(s.b)&&Gn(s.a);function Ed(s){var t=s.length,e;return s[0]==="#"&&(t===4||t===5?e={r:255&qt[s[1]]*17,g:255&qt[s[2]]*17,b:255&qt[s[3]]*17,a:t===5?qt[s[4]]*17:255}:(t===7||t===9)&&(e={r:qt[s[1]]<<4|qt[s[2]],g:qt[s[3]]<<4|qt[s[4]],b:qt[s[5]]<<4|qt[s[6]],a:t===9?qt[s[7]]<<4|qt[s[8]]:255})),e}const Cd=(s,t)=>s<255?t(s):"";function Dd(s){var t=Md(s)?Od:Td;return s?"#"+t(s.r)+t(s.g)+t(s.b)+Cd(s.a,t):void 0}const Ad=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Yc(s,t,e){const n=t*Math.min(e,1-e),i=(r,o=(r+s/30)%12)=>e-n*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function Pd(s,t,e){const n=(i,r=(i+s/60)%6)=>e-e*t*Math.max(Math.min(r,4-r,1),0);return[n(5),n(3),n(1)]}function Id(s,t,e){const n=Yc(s,1,.5);let i;for(t+e>1&&(i=1/(t+e),t*=i,e*=i),i=0;i<3;i++)n[i]*=1-t-e,n[i]+=t;return n}function Ld(s,t,e,n,i){return s===i?(t-e)/n+(t<e?6:0):t===i?(e-s)/n+2:(s-t)/n+4}function Oo(s){const e=s.r/255,n=s.g/255,i=s.b/255,r=Math.max(e,n,i),o=Math.min(e,n,i),a=(r+o)/2;let l,c,h;return r!==o&&(h=r-o,c=a>.5?h/(2-r-o):h/(r+o),l=Ld(e,n,i,h,r),l=l*60+.5),[l|0,c||0,a]}function To(s,t,e,n){return(Array.isArray(t)?s(t[0],t[1],t[2]):s(t,e,n)).map(Ve)}function Mo(s,t,e){return To(Yc,s,t,e)}function Rd(s,t,e){return To(Id,s,t,e)}function Nd(s,t,e){return To(Pd,s,t,e)}function Gc(s){return(s%360+360)%360}function $d(s){const t=Ad.exec(s);let e=255,n;if(!t)return;t[5]!==n&&(e=t[6]?cn(+t[5]):Ve(+t[5]));const i=Gc(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?n=Rd(i,r,o):t[1]==="hsv"?n=Nd(i,r,o):n=Mo(i,r,o),{r:n[0],g:n[1],b:n[2],a:e}}function Fd(s,t){var e=Oo(s);e[0]=Gc(e[0]+t),e=Mo(e),s.r=e[0],s.g=e[1],s.b=e[2]}function jd(s){if(!s)return;const t=Oo(s),e=t[0],n=la(t[1]),i=la(t[2]);return s.a<255?`hsla(${e}, ${n}%, ${i}%, ${be(s.a)})`:`hsl(${e}, ${n}%, ${i}%)`}const ca={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ha={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function zd(){const s={},t=Object.keys(ha),e=Object.keys(ca);let n,i,r,o,a;for(n=0;n<t.length;n++){for(o=a=t[n],i=0;i<e.length;i++)r=e[i],a=a.replace(r,ca[r]);r=parseInt(ha[o],16),s[a]=[r>>16&255,r>>8&255,r&255]}return s}let Zn;function Vd(s){Zn||(Zn=zd(),Zn.transparent=[0,0,0,0]);const t=Zn[s.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const Wd=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Bd(s){const t=Wd.exec(s);let e=255,n,i,r;if(t){if(t[7]!==n){const o=+t[7];e=t[8]?cn(o):Ne(o*255,0,255)}return n=+t[1],i=+t[3],r=+t[5],n=255&(t[2]?cn(n):Ne(n,0,255)),i=255&(t[4]?cn(i):Ne(i,0,255)),r=255&(t[6]?cn(r):Ne(r,0,255)),{r:n,g:i,b:r,a:e}}}function Hd(s){return s&&(s.a<255?`rgba(${s.r}, ${s.g}, ${s.b}, ${be(s.a)})`:`rgb(${s.r}, ${s.g}, ${s.b})`)}const ur=s=>s<=.0031308?s*12.92:Math.pow(s,1/2.4)*1.055-.055,bs=s=>s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4);function Ud(s,t,e){const n=bs(be(s.r)),i=bs(be(s.g)),r=bs(be(s.b));return{r:Ve(ur(n+e*(bs(be(t.r))-n))),g:Ve(ur(i+e*(bs(be(t.g))-i))),b:Ve(ur(r+e*(bs(be(t.b))-r))),a:s.a+e*(t.a-s.a)}}function Jn(s,t,e){if(s){let n=Oo(s);n[t]=Math.max(0,Math.min(n[t]+n[t]*e,t===0?360:1)),n=Mo(n),s.r=n[0],s.g=n[1],s.b=n[2]}}function Zc(s,t){return s&&Object.assign(t||{},s)}function ua(s){var t={r:0,g:0,b:0,a:255};return Array.isArray(s)?s.length>=3&&(t={r:s[0],g:s[1],b:s[2],a:255},s.length>3&&(t.a=Ve(s[3]))):(t=Zc(s,{r:0,g:0,b:0,a:1}),t.a=Ve(t.a)),t}function qd(s){return s.charAt(0)==="r"?Bd(s):$d(s)}class Mn{constructor(t){if(t instanceof Mn)return t;const e=typeof t;let n;e==="object"?n=ua(t):e==="string"&&(n=Ed(t)||Vd(t)||qd(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=Zc(this._rgb);return t&&(t.a=be(t.a)),t}set rgb(t){this._rgb=ua(t)}rgbString(){return this._valid?Hd(this._rgb):void 0}hexString(){return this._valid?Dd(this._rgb):void 0}hslString(){return this._valid?jd(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,i=t.rgb;let r;const o=e===r?.5:e,a=2*o-1,l=n.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,n.r=255&c*n.r+r*i.r+.5,n.g=255&c*n.g+r*i.g+.5,n.b=255&c*n.b+r*i.b+.5,n.a=o*n.a+(1-o)*i.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=Ud(this._rgb,t._rgb,e)),this}clone(){return new Mn(this.rgb)}alpha(t){return this._rgb.a=Ve(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Fn(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Jn(this._rgb,2,t),this}darken(t){return Jn(this._rgb,2,-t),this}saturate(t){return Jn(this._rgb,1,t),this}desaturate(t){return Jn(this._rgb,1,-t),this}rotate(t){return Fd(this._rgb,t),this}}/*!
 * Chart.js v4.4.3
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function me(){}const Yd=(()=>{let s=0;return()=>s++})();function Z(s){return s===null||typeof s>"u"}function ut(s){if(Array.isArray&&Array.isArray(s))return!0;const t=Object.prototype.toString.call(s);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function q(s){return s!==null&&Object.prototype.toString.call(s)==="[object Object]"}function mt(s){return(typeof s=="number"||s instanceof Number)&&isFinite(+s)}function Wt(s,t){return mt(s)?s:t}function W(s,t){return typeof s>"u"?t:s}const Gd=(s,t)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100:+s/t,Jc=(s,t)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100*t:+s;function it(s,t,e){if(s&&typeof s.call=="function")return s.apply(e,t)}function tt(s,t,e,n){let i,r,o;if(ut(s))for(r=s.length,i=0;i<r;i++)t.call(e,s[i],i);else if(q(s))for(o=Object.keys(s),r=o.length,i=0;i<r;i++)t.call(e,s[o[i]],o[i])}function Ii(s,t){let e,n,i,r;if(!s||!t||s.length!==t.length)return!1;for(e=0,n=s.length;e<n;++e)if(i=s[e],r=t[e],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function Li(s){if(ut(s))return s.map(Li);if(q(s)){const t=Object.create(null),e=Object.keys(s),n=e.length;let i=0;for(;i<n;++i)t[e[i]]=Li(s[e[i]]);return t}return s}function Kc(s){return["__proto__","prototype","constructor"].indexOf(s)===-1}function Zd(s,t,e,n){if(!Kc(s))return;const i=t[s],r=e[s];q(i)&&q(r)?En(i,r,n):t[s]=Li(r)}function En(s,t,e){const n=ut(t)?t:[t],i=n.length;if(!q(s))return s;e=e||{};const r=e.merger||Zd;let o;for(let a=0;a<i;++a){if(o=n[a],!q(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)r(l[c],s,o,e)}return s}function _n(s,t){return En(s,t,{merger:Jd})}function Jd(s,t,e){if(!Kc(s))return;const n=t[s],i=e[s];q(n)&&q(i)?_n(n,i):Object.prototype.hasOwnProperty.call(t,s)||(t[s]=Li(i))}const da={"":s=>s,x:s=>s.x,y:s=>s.y};function Kd(s){const t=s.split("."),e=[];let n="";for(const i of t)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(e.push(n),n="");return e}function Xd(s){const t=Kd(s);return e=>{for(const n of t){if(n==="")break;e=e&&e[n]}return e}}function Be(s,t){return(da[t]||(da[t]=Xd(t)))(s)}function Eo(s){return s.charAt(0).toUpperCase()+s.slice(1)}const Cn=s=>typeof s<"u",He=s=>typeof s=="function",fa=(s,t)=>{if(s.size!==t.size)return!1;for(const e of s)if(!t.has(e))return!1;return!0};function Qd(s){return s.type==="mouseup"||s.type==="click"||s.type==="contextmenu"}const lt=Math.PI,at=2*lt,tf=at+lt,Ri=Number.POSITIVE_INFINITY,ef=lt/180,yt=lt/2,Ye=lt/4,ga=lt*2/3,$e=Math.log10,ge=Math.sign;function bn(s,t,e){return Math.abs(s-t)<e}function ma(s){const t=Math.round(s);s=bn(s,t,s/1e3)?t:s;const e=Math.pow(10,Math.floor($e(s))),n=s/e;return(n<=1?1:n<=2?2:n<=5?5:10)*e}function sf(s){const t=[],e=Math.sqrt(s);let n;for(n=1;n<e;n++)s%n===0&&(t.push(n),t.push(s/n));return e===(e|0)&&t.push(e),t.sort((i,r)=>i-r).pop(),t}function Fs(s){return!isNaN(parseFloat(s))&&isFinite(s)}function nf(s,t){const e=Math.round(s);return e-t<=s&&e+t>=s}function Xc(s,t,e){let n,i,r;for(n=0,i=s.length;n<i;n++)r=s[n][e],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function re(s){return s*(lt/180)}function Co(s){return s*(180/lt)}function pa(s){if(!mt(s))return;let t=1,e=0;for(;Math.round(s*t)/t!==s;)t*=10,e++;return e}function Qc(s,t){const e=t.x-s.x,n=t.y-s.y,i=Math.sqrt(e*e+n*n);let r=Math.atan2(n,e);return r<-.5*lt&&(r+=at),{angle:r,distance:i}}function qr(s,t){return Math.sqrt(Math.pow(t.x-s.x,2)+Math.pow(t.y-s.y,2))}function rf(s,t){return(s-t+tf)%at-lt}function Bt(s){return(s%at+at)%at}function Dn(s,t,e,n){const i=Bt(s),r=Bt(t),o=Bt(e),a=Bt(r-i),l=Bt(o-i),c=Bt(i-r),h=Bt(i-o);return i===r||i===o||n&&r===o||a>l&&c<h}function Tt(s,t,e){return Math.max(t,Math.min(e,s))}function of(s){return Tt(s,-32768,32767)}function we(s,t,e,n=1e-6){return s>=Math.min(t,e)-n&&s<=Math.max(t,e)+n}function Do(s,t,e){e=e||(o=>s[o]<t);let n=s.length-1,i=0,r;for(;n-i>1;)r=i+n>>1,e(r)?i=r:n=r;return{lo:i,hi:n}}const xe=(s,t,e,n)=>Do(s,e,n?i=>{const r=s[i][t];return r<e||r===e&&s[i+1][t]===e}:i=>s[i][t]<e),af=(s,t,e)=>Do(s,e,n=>s[n][t]>=e);function lf(s,t,e){let n=0,i=s.length;for(;n<i&&s[n]<t;)n++;for(;i>n&&s[i-1]>e;)i--;return n>0||i<s.length?s.slice(n,i):s}const th=["push","pop","shift","splice","unshift"];function cf(s,t){if(s._chartjs){s._chartjs.listeners.push(t);return}Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),th.forEach(e=>{const n="_onData"+Eo(e),i=s[e];Object.defineProperty(s,e,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return s._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...r)}),o}})})}function _a(s,t){const e=s._chartjs;if(!e)return;const n=e.listeners,i=n.indexOf(t);i!==-1&&n.splice(i,1),!(n.length>0)&&(th.forEach(r=>{delete s[r]}),delete s._chartjs)}function eh(s){const t=new Set(s);return t.size===s.length?s:Array.from(t)}const sh=function(){return typeof window>"u"?function(s){return s()}:window.requestAnimationFrame}();function nh(s,t){let e=[],n=!1;return function(...i){e=i,n||(n=!0,sh.call(window,()=>{n=!1,s.apply(t,e)}))}}function hf(s,t){let e;return function(...n){return t?(clearTimeout(e),e=setTimeout(s,t,n)):s.apply(this,n),t}}const Ao=s=>s==="start"?"left":s==="end"?"right":"center",Ct=(s,t,e)=>s==="start"?t:s==="end"?e:(t+e)/2,uf=(s,t,e,n)=>s===(n?"left":"right")?e:s==="center"?(t+e)/2:t;function ih(s,t,e){const n=t.length;let i=0,r=n;if(s._sorted){const{iScale:o,_parsed:a}=s,l=o.axis,{min:c,max:h,minDefined:u,maxDefined:d}=o.getUserBounds();u&&(i=Tt(Math.min(xe(a,l,c).lo,e?n:xe(t,l,o.getPixelForValue(c)).lo),0,n-1)),d?r=Tt(Math.max(xe(a,o.axis,h,!0).hi+1,e?0:xe(t,l,o.getPixelForValue(h),!0).hi+1),i,n)-i:r=n-i}return{start:i,count:r}}function rh(s){const{xScale:t,yScale:e,_scaleRanges:n}=s,i={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!n)return s._scaleRanges=i,!0;const r=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==e.min||n.ymax!==e.max;return Object.assign(n,i),r}const Kn=s=>s===0||s===1,ba=(s,t,e)=>-(Math.pow(2,10*(s-=1))*Math.sin((s-t)*at/e)),ya=(s,t,e)=>Math.pow(2,-10*s)*Math.sin((s-t)*at/e)+1,yn={linear:s=>s,easeInQuad:s=>s*s,easeOutQuad:s=>-s*(s-2),easeInOutQuad:s=>(s/=.5)<1?.5*s*s:-.5*(--s*(s-2)-1),easeInCubic:s=>s*s*s,easeOutCubic:s=>(s-=1)*s*s+1,easeInOutCubic:s=>(s/=.5)<1?.5*s*s*s:.5*((s-=2)*s*s+2),easeInQuart:s=>s*s*s*s,easeOutQuart:s=>-((s-=1)*s*s*s-1),easeInOutQuart:s=>(s/=.5)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2),easeInQuint:s=>s*s*s*s*s,easeOutQuint:s=>(s-=1)*s*s*s*s+1,easeInOutQuint:s=>(s/=.5)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2),easeInSine:s=>-Math.cos(s*yt)+1,easeOutSine:s=>Math.sin(s*yt),easeInOutSine:s=>-.5*(Math.cos(lt*s)-1),easeInExpo:s=>s===0?0:Math.pow(2,10*(s-1)),easeOutExpo:s=>s===1?1:-Math.pow(2,-10*s)+1,easeInOutExpo:s=>Kn(s)?s:s<.5?.5*Math.pow(2,10*(s*2-1)):.5*(-Math.pow(2,-10*(s*2-1))+2),easeInCirc:s=>s>=1?s:-(Math.sqrt(1-s*s)-1),easeOutCirc:s=>Math.sqrt(1-(s-=1)*s),easeInOutCirc:s=>(s/=.5)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1),easeInElastic:s=>Kn(s)?s:ba(s,.075,.3),easeOutElastic:s=>Kn(s)?s:ya(s,.075,.3),easeInOutElastic(s){return Kn(s)?s:s<.5?.5*ba(s*2,.1125,.45):.5+.5*ya(s*2-1,.1125,.45)},easeInBack(s){return s*s*((1.70158+1)*s-1.70158)},easeOutBack(s){return(s-=1)*s*((1.70158+1)*s+1.70158)+1},easeInOutBack(s){let t=1.70158;return(s/=.5)<1?.5*(s*s*(((t*=1.525)+1)*s-t)):.5*((s-=2)*s*(((t*=1.525)+1)*s+t)+2)},easeInBounce:s=>1-yn.easeOutBounce(1-s),easeOutBounce(s){return s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375},easeInOutBounce:s=>s<.5?yn.easeInBounce(s*2)*.5:yn.easeOutBounce(s*2-1)*.5+.5};function Po(s){if(s&&typeof s=="object"){const t=s.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function va(s){return Po(s)?s:new Mn(s)}function dr(s){return Po(s)?s:new Mn(s).saturate(.5).darken(.1).hexString()}const df=["x","y","borderWidth","radius","tension"],ff=["color","borderColor","backgroundColor"];function gf(s){s.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),s.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),s.set("animations",{colors:{type:"color",properties:ff},numbers:{type:"number",properties:df}}),s.describe("animations",{_fallback:"animation"}),s.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function mf(s){s.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const wa=new Map;function pf(s,t){t=t||{};const e=s+JSON.stringify(t);let n=wa.get(e);return n||(n=new Intl.NumberFormat(s,t),wa.set(e,n)),n}function jn(s,t,e){return pf(t,e).format(s)}const oh={values(s){return ut(s)?s:""+s},numeric(s,t,e){if(s===0)return"0";const n=this.chart.options.locale;let i,r=s;if(e.length>1){const c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),r=_f(s,e)}const o=$e(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),jn(s,n,l)},logarithmic(s,t,e){if(s===0)return"0";const n=e[t].significand||s/Math.pow(10,Math.floor($e(s)));return[1,2,3,5,10,15].includes(n)||t>.8*e.length?oh.numeric.call(this,s,t,e):""}};function _f(s,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&s!==Math.floor(s)&&(e=s-Math.floor(s)),e}var Ji={formatters:oh};function bf(s){s.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ji.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),s.route("scale.ticks","color","","color"),s.route("scale.grid","color","","borderColor"),s.route("scale.border","color","","borderColor"),s.route("scale.title","color","","color"),s.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),s.describe("scales",{_fallback:"scale"}),s.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const ds=Object.create(null),Yr=Object.create(null);function vn(s,t){if(!t)return s;const e=t.split(".");for(let n=0,i=e.length;n<i;++n){const r=e[n];s=s[r]||(s[r]=Object.create(null))}return s}function fr(s,t,e){return typeof t=="string"?En(vn(s,t),e):En(vn(s,""),t)}class yf{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>dr(i.backgroundColor),this.hoverBorderColor=(n,i)=>dr(i.borderColor),this.hoverColor=(n,i)=>dr(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return fr(this,t,e)}get(t){return vn(this,t)}describe(t,e){return fr(Yr,t,e)}override(t,e){return fr(ds,t,e)}route(t,e,n,i){const r=vn(this,t),o=vn(this,n),a="_"+e;Object.defineProperties(r,{[a]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[a],c=o[i];return q(l)?Object.assign({},c,l):W(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}}var pt=new yf({_scriptable:s=>!s.startsWith("on"),_indexable:s=>s!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[gf,mf,bf]);function vf(s){return!s||Z(s.size)||Z(s.family)?null:(s.style?s.style+" ":"")+(s.weight?s.weight+" ":"")+s.size+"px "+s.family}function Ni(s,t,e,n,i){let r=t[i];return r||(r=t[i]=s.measureText(i).width,e.push(i)),r>n&&(n=r),n}function wf(s,t,e,n){n=n||{};let i=n.data=n.data||{},r=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(i=n.data={},r=n.garbageCollect=[],n.font=t),s.save(),s.font=t;let o=0;const a=e.length;let l,c,h,u,d;for(l=0;l<a;l++)if(u=e[l],u!=null&&!ut(u))o=Ni(s,i,r,o,u);else if(ut(u))for(c=0,h=u.length;c<h;c++)d=u[c],d!=null&&!ut(d)&&(o=Ni(s,i,r,o,d));s.restore();const f=r.length/2;if(f>e.length){for(l=0;l<f;l++)delete i[r[l]];r.splice(0,f)}return o}function Ge(s,t,e){const n=s.currentDevicePixelRatio,i=e!==0?Math.max(e/2,.5):0;return Math.round((t-i)*n)/n+i}function xa(s,t){!t&&!s||(t=t||s.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,s.width,s.height),t.restore())}function Gr(s,t,e,n){ah(s,t,e,n,null)}function ah(s,t,e,n,i){let r,o,a,l,c,h,u,d;const f=t.pointStyle,g=t.rotation,m=t.radius;let p=(g||0)*ef;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){s.save(),s.translate(e,n),s.rotate(p),s.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),s.restore();return}if(!(isNaN(m)||m<=0)){switch(s.beginPath(),f){default:i?s.ellipse(e,n,i/2,m,0,0,at):s.arc(e,n,m,0,at),s.closePath();break;case"triangle":h=i?i/2:m,s.moveTo(e+Math.sin(p)*h,n-Math.cos(p)*m),p+=ga,s.lineTo(e+Math.sin(p)*h,n-Math.cos(p)*m),p+=ga,s.lineTo(e+Math.sin(p)*h,n-Math.cos(p)*m),s.closePath();break;case"rectRounded":c=m*.516,l=m-c,o=Math.cos(p+Ye)*l,u=Math.cos(p+Ye)*(i?i/2-c:l),a=Math.sin(p+Ye)*l,d=Math.sin(p+Ye)*(i?i/2-c:l),s.arc(e-u,n-a,c,p-lt,p-yt),s.arc(e+d,n-o,c,p-yt,p),s.arc(e+u,n+a,c,p,p+yt),s.arc(e-d,n+o,c,p+yt,p+lt),s.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*m,h=i?i/2:l,s.rect(e-h,n-l,2*h,2*l);break}p+=Ye;case"rectRot":u=Math.cos(p)*(i?i/2:m),o=Math.cos(p)*m,a=Math.sin(p)*m,d=Math.sin(p)*(i?i/2:m),s.moveTo(e-u,n-a),s.lineTo(e+d,n-o),s.lineTo(e+u,n+a),s.lineTo(e-d,n+o),s.closePath();break;case"crossRot":p+=Ye;case"cross":u=Math.cos(p)*(i?i/2:m),o=Math.cos(p)*m,a=Math.sin(p)*m,d=Math.sin(p)*(i?i/2:m),s.moveTo(e-u,n-a),s.lineTo(e+u,n+a),s.moveTo(e+d,n-o),s.lineTo(e-d,n+o);break;case"star":u=Math.cos(p)*(i?i/2:m),o=Math.cos(p)*m,a=Math.sin(p)*m,d=Math.sin(p)*(i?i/2:m),s.moveTo(e-u,n-a),s.lineTo(e+u,n+a),s.moveTo(e+d,n-o),s.lineTo(e-d,n+o),p+=Ye,u=Math.cos(p)*(i?i/2:m),o=Math.cos(p)*m,a=Math.sin(p)*m,d=Math.sin(p)*(i?i/2:m),s.moveTo(e-u,n-a),s.lineTo(e+u,n+a),s.moveTo(e+d,n-o),s.lineTo(e-d,n+o);break;case"line":o=i?i/2:Math.cos(p)*m,a=Math.sin(p)*m,s.moveTo(e-o,n-a),s.lineTo(e+o,n+a);break;case"dash":s.moveTo(e,n),s.lineTo(e+Math.cos(p)*(i?i/2:m),n+Math.sin(p)*m);break;case!1:s.closePath();break}s.fill(),t.borderWidth>0&&s.stroke()}}function ke(s,t,e){return e=e||.5,!t||s&&s.x>t.left-e&&s.x<t.right+e&&s.y>t.top-e&&s.y<t.bottom+e}function Ki(s,t){s.save(),s.beginPath(),s.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),s.clip()}function Xi(s){s.restore()}function xf(s,t,e,n,i){if(!t)return s.lineTo(e.x,e.y);if(i==="middle"){const r=(t.x+e.x)/2;s.lineTo(r,t.y),s.lineTo(r,e.y)}else i==="after"!=!!n?s.lineTo(t.x,e.y):s.lineTo(e.x,t.y);s.lineTo(e.x,e.y)}function kf(s,t,e,n){if(!t)return s.lineTo(e.x,e.y);s.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?e.cp2x:e.cp1x,n?e.cp2y:e.cp1y,e.x,e.y)}function Sf(s,t){t.translation&&s.translate(t.translation[0],t.translation[1]),Z(t.rotation)||s.rotate(t.rotation),t.color&&(s.fillStyle=t.color),t.textAlign&&(s.textAlign=t.textAlign),t.textBaseline&&(s.textBaseline=t.textBaseline)}function Of(s,t,e,n,i){if(i.strikethrough||i.underline){const r=s.measureText(n),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=e-r.actualBoundingBoxAscent,c=e+r.actualBoundingBoxDescent,h=i.strikethrough?(l+c)/2:c;s.strokeStyle=s.fillStyle,s.beginPath(),s.lineWidth=i.decorationWidth||2,s.moveTo(o,h),s.lineTo(a,h),s.stroke()}}function Tf(s,t){const e=s.fillStyle;s.fillStyle=t.color,s.fillRect(t.left,t.top,t.width,t.height),s.fillStyle=e}function fs(s,t,e,n,i,r={}){const o=ut(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(s.save(),s.font=i.string,Sf(s,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&Tf(s,r.backdrop),a&&(r.strokeColor&&(s.strokeStyle=r.strokeColor),Z(r.strokeWidth)||(s.lineWidth=r.strokeWidth),s.strokeText(c,e,n,r.maxWidth)),s.fillText(c,e,n,r.maxWidth),Of(s,e,n,c,r),n+=Number(i.lineHeight);s.restore()}function An(s,t){const{x:e,y:n,w:i,h:r,radius:o}=t;s.arc(e+o.topLeft,n+o.topLeft,o.topLeft,1.5*lt,lt,!0),s.lineTo(e,n+r-o.bottomLeft),s.arc(e+o.bottomLeft,n+r-o.bottomLeft,o.bottomLeft,lt,yt,!0),s.lineTo(e+i-o.bottomRight,n+r),s.arc(e+i-o.bottomRight,n+r-o.bottomRight,o.bottomRight,yt,0,!0),s.lineTo(e+i,n+o.topRight),s.arc(e+i-o.topRight,n+o.topRight,o.topRight,0,-yt,!0),s.lineTo(e+o.topLeft,n)}const Mf=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Ef=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Cf(s,t){const e=(""+s).match(Mf);if(!e||e[1]==="normal")return t*1.2;switch(s=+e[2],e[3]){case"px":return s;case"%":s/=100;break}return t*s}const Df=s=>+s||0;function Io(s,t){const e={},n=q(t),i=n?Object.keys(t):t,r=q(s)?n?o=>W(s[o],s[t[o]]):o=>s[o]:()=>s;for(const o of i)e[o]=Df(r(o));return e}function lh(s){return Io(s,{top:"y",right:"x",bottom:"y",left:"x"})}function as(s){return Io(s,["topLeft","topRight","bottomLeft","bottomRight"])}function It(s){const t=lh(s);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function St(s,t){s=s||{},t=t||pt.font;let e=W(s.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let n=W(s.style,t.style);n&&!(""+n).match(Ef)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const i={family:W(s.family,t.family),lineHeight:Cf(W(s.lineHeight,t.lineHeight),e),size:e,style:n,weight:W(s.weight,t.weight),string:""};return i.string=vf(i),i}function hn(s,t,e,n){let i,r,o;for(i=0,r=s.length;i<r;++i)if(o=s[i],o!==void 0&&o!==void 0)return o}function Af(s,t,e){const{min:n,max:i}=s,r=Jc(t,(i-n)/2),o=(a,l)=>e&&a===0?0:a+l;return{min:o(n,-Math.abs(r)),max:o(i,r)}}function qe(s,t){return Object.assign(Object.create(s),t)}function Lo(s,t=[""],e,n,i=()=>s[0]){const r=e||s;typeof n>"u"&&(n=dh("_fallback",s));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:s,_rootScopes:r,_fallback:n,_getTarget:i,override:a=>Lo([a,...s],t,r,n)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete s[0][l],!0},get(a,l){return hh(a,l,()=>jf(l,t,s,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(s[0])},has(a,l){return Sa(a).includes(l)},ownKeys(a){return Sa(a)},set(a,l,c){const h=a._storage||(a._storage=i());return a[l]=h[l]=c,delete a._keys,!0}})}function js(s,t,e,n){const i={_cacheable:!1,_proxy:s,_context:t,_subProxy:e,_stack:new Set,_descriptors:ch(s,n),setContext:r=>js(s,r,e,n),override:r=>js(s.override(r),t,e,n)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete s[o],!0},get(r,o,a){return hh(r,o,()=>If(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(s,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(s,o)},getPrototypeOf(){return Reflect.getPrototypeOf(s)},has(r,o){return Reflect.has(s,o)},ownKeys(){return Reflect.ownKeys(s)},set(r,o,a){return s[o]=a,delete r[o],!0}})}function ch(s,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:n=t.indexable,_allKeys:i=t.allKeys}=s;return{allKeys:i,scriptable:e,indexable:n,isScriptable:He(e)?e:()=>e,isIndexable:He(n)?n:()=>n}}const Pf=(s,t)=>s?s+Eo(t):t,Ro=(s,t)=>q(t)&&s!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function hh(s,t,e){if(Object.prototype.hasOwnProperty.call(s,t)||t==="constructor")return s[t];const n=e();return s[t]=n,n}function If(s,t,e){const{_proxy:n,_context:i,_subProxy:r,_descriptors:o}=s;let a=n[t];return He(a)&&o.isScriptable(t)&&(a=Lf(t,a,s,e)),ut(a)&&a.length&&(a=Rf(t,a,s,o.isIndexable)),Ro(t,a)&&(a=js(a,i,r&&r[t],o)),a}function Lf(s,t,e,n){const{_proxy:i,_context:r,_subProxy:o,_stack:a}=e;if(a.has(s))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+s);a.add(s);let l=t(r,o||n);return a.delete(s),Ro(s,l)&&(l=No(i._scopes,i,s,l)),l}function Rf(s,t,e,n){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=e;if(typeof r.index<"u"&&n(s))return t[r.index%t.length];if(q(t[0])){const l=t,c=i._scopes.filter(h=>h!==l);t=[];for(const h of l){const u=No(c,i,s,h);t.push(js(u,r,o&&o[s],a))}}return t}function uh(s,t,e){return He(s)?s(t,e):s}const Nf=(s,t)=>s===!0?t:typeof s=="string"?Be(t,s):void 0;function $f(s,t,e,n,i){for(const r of t){const o=Nf(e,r);if(o){s.add(o);const a=uh(o._fallback,e,i);if(typeof a<"u"&&a!==e&&a!==n)return a}else if(o===!1&&typeof n<"u"&&e!==n)return null}return!1}function No(s,t,e,n){const i=t._rootScopes,r=uh(t._fallback,e,n),o=[...s,...i],a=new Set;a.add(n);let l=ka(a,o,e,r||e,n);return l===null||typeof r<"u"&&r!==e&&(l=ka(a,o,r,l,n),l===null)?!1:Lo(Array.from(a),[""],i,r,()=>Ff(t,e,n))}function ka(s,t,e,n,i){for(;e;)e=$f(s,t,e,n,i);return e}function Ff(s,t,e){const n=s._getTarget();t in n||(n[t]={});const i=n[t];return ut(i)&&q(e)?e:i||{}}function jf(s,t,e,n){let i;for(const r of t)if(i=dh(Pf(r,s),e),typeof i<"u")return Ro(s,i)?No(e,n,s,i):i}function dh(s,t){for(const e of t){if(!e)continue;const n=e[s];if(typeof n<"u")return n}}function Sa(s){let t=s._keys;return t||(t=s._keys=zf(s._scopes)),t}function zf(s){const t=new Set;for(const e of s)for(const n of Object.keys(e).filter(i=>!i.startsWith("_")))t.add(n);return Array.from(t)}function fh(s,t,e,n){const{iScale:i}=s,{key:r="r"}=this._parsing,o=new Array(n);let a,l,c,h;for(a=0,l=n;a<l;++a)c=a+e,h=t[c],o[a]={r:i.parse(Be(h,r),c)};return o}const Vf=Number.EPSILON||1e-14,zs=(s,t)=>t<s.length&&!s[t].skip&&s[t],gh=s=>s==="x"?"y":"x";function Wf(s,t,e,n){const i=s.skip?t:s,r=t,o=e.skip?t:e,a=qr(r,i),l=qr(o,r);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const u=n*c,d=n*h;return{previous:{x:r.x-u*(o.x-i.x),y:r.y-u*(o.y-i.y)},next:{x:r.x+d*(o.x-i.x),y:r.y+d*(o.y-i.y)}}}function Bf(s,t,e){const n=s.length;let i,r,o,a,l,c=zs(s,0);for(let h=0;h<n-1;++h)if(l=c,c=zs(s,h+1),!(!l||!c)){if(bn(t[h],0,Vf)){e[h]=e[h+1]=0;continue}i=e[h]/t[h],r=e[h+1]/t[h],a=Math.pow(i,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),e[h]=i*o*t[h],e[h+1]=r*o*t[h])}}function Hf(s,t,e="x"){const n=gh(e),i=s.length;let r,o,a,l=zs(s,0);for(let c=0;c<i;++c){if(o=a,a=l,l=zs(s,c+1),!a)continue;const h=a[e],u=a[n];o&&(r=(h-o[e])/3,a[`cp1${e}`]=h-r,a[`cp1${n}`]=u-r*t[c]),l&&(r=(l[e]-h)/3,a[`cp2${e}`]=h+r,a[`cp2${n}`]=u+r*t[c])}}function Uf(s,t="x"){const e=gh(t),n=s.length,i=Array(n).fill(0),r=Array(n);let o,a,l,c=zs(s,0);for(o=0;o<n;++o)if(a=l,l=c,c=zs(s,o+1),!!l){if(c){const h=c[t]-l[t];i[o]=h!==0?(c[e]-l[e])/h:0}r[o]=a?c?ge(i[o-1])!==ge(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}Bf(s,i,r),Hf(s,r,t)}function Xn(s,t,e){return Math.max(Math.min(s,e),t)}function qf(s,t){let e,n,i,r,o,a=ke(s[0],t);for(e=0,n=s.length;e<n;++e)o=r,r=a,a=e<n-1&&ke(s[e+1],t),r&&(i=s[e],o&&(i.cp1x=Xn(i.cp1x,t.left,t.right),i.cp1y=Xn(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=Xn(i.cp2x,t.left,t.right),i.cp2y=Xn(i.cp2y,t.top,t.bottom)))}function Yf(s,t,e,n,i){let r,o,a,l;if(t.spanGaps&&(s=s.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")Uf(s,i);else{let c=n?s[s.length-1]:s[0];for(r=0,o=s.length;r<o;++r)a=s[r],l=Wf(c,a,s[Math.min(r+1,o-(n?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&qf(s,e)}function $o(){return typeof window<"u"&&typeof document<"u"}function Fo(s){let t=s.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function $i(s,t,e){let n;return typeof s=="string"?(n=parseInt(s,10),s.indexOf("%")!==-1&&(n=n/100*t.parentNode[e])):n=s,n}const Qi=s=>s.ownerDocument.defaultView.getComputedStyle(s,null);function Gf(s,t){return Qi(s).getPropertyValue(t)}const Zf=["top","right","bottom","left"];function ls(s,t,e){const n={};e=e?"-"+e:"";for(let i=0;i<4;i++){const r=Zf[i];n[r]=parseFloat(s[t+"-"+r+e])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const Jf=(s,t,e)=>(s>0||t>0)&&(!e||!e.shadowRoot);function Kf(s,t){const e=s.touches,n=e&&e.length?e[0]:s,{offsetX:i,offsetY:r}=n;let o=!1,a,l;if(Jf(i,r,s.target))a=i,l=r;else{const c=t.getBoundingClientRect();a=n.clientX-c.left,l=n.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function es(s,t){if("native"in s)return s;const{canvas:e,currentDevicePixelRatio:n}=t,i=Qi(e),r=i.boxSizing==="border-box",o=ls(i,"padding"),a=ls(i,"border","width"),{x:l,y:c,box:h}=Kf(s,e),u=o.left+(h&&a.left),d=o.top+(h&&a.top);let{width:f,height:g}=t;return r&&(f-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-u)/f*e.width/n),y:Math.round((c-d)/g*e.height/n)}}function Xf(s,t,e){let n,i;if(t===void 0||e===void 0){const r=s&&Fo(s);if(!r)t=s.clientWidth,e=s.clientHeight;else{const o=r.getBoundingClientRect(),a=Qi(r),l=ls(a,"border","width"),c=ls(a,"padding");t=o.width-c.width-l.width,e=o.height-c.height-l.height,n=$i(a.maxWidth,r,"clientWidth"),i=$i(a.maxHeight,r,"clientHeight")}}return{width:t,height:e,maxWidth:n||Ri,maxHeight:i||Ri}}const Qn=s=>Math.round(s*10)/10;function Qf(s,t,e,n){const i=Qi(s),r=ls(i,"margin"),o=$i(i.maxWidth,s,"clientWidth")||Ri,a=$i(i.maxHeight,s,"clientHeight")||Ri,l=Xf(s,t,e);let{width:c,height:h}=l;if(i.boxSizing==="content-box"){const d=ls(i,"border","width"),f=ls(i,"padding");c-=f.width+d.width,h-=f.height+d.height}return c=Math.max(0,c-r.width),h=Math.max(0,n?c/n:h-r.height),c=Qn(Math.min(c,o,l.maxWidth)),h=Qn(Math.min(h,a,l.maxHeight)),c&&!h&&(h=Qn(c/2)),(t!==void 0||e!==void 0)&&n&&l.height&&h>l.height&&(h=l.height,c=Qn(Math.floor(h*n))),{width:c,height:h}}function Oa(s,t,e){const n=t||1,i=Math.floor(s.height*n),r=Math.floor(s.width*n);s.height=Math.floor(s.height),s.width=Math.floor(s.width);const o=s.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${s.height}px`,o.style.width=`${s.width}px`),s.currentDevicePixelRatio!==n||o.height!==i||o.width!==r?(s.currentDevicePixelRatio=n,o.height=i,o.width=r,s.ctx.setTransform(n,0,0,n,0,0),!0):!1}const tg=function(){let s=!1;try{const t={get passive(){return s=!0,!1}};$o()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return s}();function Ta(s,t){const e=Gf(s,t),n=e&&e.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function ss(s,t,e,n){return{x:s.x+e*(t.x-s.x),y:s.y+e*(t.y-s.y)}}function eg(s,t,e,n){return{x:s.x+e*(t.x-s.x),y:n==="middle"?e<.5?s.y:t.y:n==="after"?e<1?s.y:t.y:e>0?t.y:s.y}}function sg(s,t,e,n){const i={x:s.cp2x,y:s.cp2y},r={x:t.cp1x,y:t.cp1y},o=ss(s,i,e),a=ss(i,r,e),l=ss(r,t,e),c=ss(o,a,e),h=ss(a,l,e);return ss(c,h,e)}const ng=function(s,t){return{x(e){return s+s+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,n){return e-n},leftForLtr(e,n){return e-n}}},ig=function(){return{x(s){return s},setWidth(s){},textAlign(s){return s},xPlus(s,t){return s+t},leftForLtr(s,t){return s}}};function Is(s,t,e){return s?ng(t,e):ig()}function mh(s,t){let e,n;(t==="ltr"||t==="rtl")&&(e=s.canvas.style,n=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),s.prevTextDirection=n)}function ph(s,t){t!==void 0&&(delete s.prevTextDirection,s.canvas.style.setProperty("direction",t[0],t[1]))}function _h(s){return s==="angle"?{between:Dn,compare:rf,normalize:Bt}:{between:we,compare:(t,e)=>t-e,normalize:t=>t}}function Ma({start:s,end:t,count:e,loop:n,style:i}){return{start:s%e,end:t%e,loop:n&&(t-s+1)%e===0,style:i}}function rg(s,t,e){const{property:n,start:i,end:r}=e,{between:o,normalize:a}=_h(n),l=t.length;let{start:c,end:h,loop:u}=s,d,f;if(u){for(c+=l,h+=l,d=0,f=l;d<f&&o(a(t[c%l][n]),i,r);++d)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:u,style:s.style}}function bh(s,t,e){if(!e)return[s];const{property:n,start:i,end:r}=e,o=t.length,{compare:a,between:l,normalize:c}=_h(n),{start:h,end:u,loop:d,style:f}=rg(s,t,e),g=[];let m=!1,p=null,_,b,y;const w=()=>l(i,y,_)&&a(i,y)!==0,x=()=>a(r,_)===0||l(r,y,_),T=()=>m||w(),O=()=>!m||x();for(let M=h,C=h;M<=u;++M)b=t[M%o],!b.skip&&(_=c(b[n]),_!==y&&(m=l(_,i,r),p===null&&T()&&(p=a(_,i)===0?M:C),p!==null&&O()&&(g.push(Ma({start:p,end:M,loop:d,count:o,style:f})),p=null),C=M,y=_));return p!==null&&g.push(Ma({start:p,end:u,loop:d,count:o,style:f})),g}function yh(s,t){const e=[],n=s.segments;for(let i=0;i<n.length;i++){const r=bh(n[i],s.points,t);r.length&&e.push(...r)}return e}function og(s,t,e,n){let i=0,r=t-1;if(e&&!n)for(;i<t&&!s[i].skip;)i++;for(;i<t&&s[i].skip;)i++;for(i%=t,e&&(r+=i);r>i&&s[r%t].skip;)r--;return r%=t,{start:i,end:r}}function ag(s,t,e,n){const i=s.length,r=[];let o=t,a=s[t],l;for(l=t+1;l<=e;++l){const c=s[l%i];c.skip||c.stop?a.skip||(n=!1,r.push({start:t%i,end:(l-1)%i,loop:n}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&r.push({start:t%i,end:o%i,loop:n}),r}function lg(s,t){const e=s.points,n=s.options.spanGaps,i=e.length;if(!i)return[];const r=!!s._loop,{start:o,end:a}=og(e,i,r,n);if(n===!0)return Ea(s,[{start:o,end:a,loop:r}],e,t);const l=a<o?a+i:a,c=!!s._fullLoop&&o===0&&a===i-1;return Ea(s,ag(e,o,l,c),e,t)}function Ea(s,t,e,n){return!n||!n.setContext||!e?t:cg(s,t,e,n)}function cg(s,t,e,n){const i=s._chart.getContext(),r=Ca(s.options),{_datasetIndex:o,options:{spanGaps:a}}=s,l=e.length,c=[];let h=r,u=t[0].start,d=u;function f(g,m,p,_){const b=a?-1:1;if(g!==m){for(g+=l;e[g%l].skip;)g-=b;for(;e[m%l].skip;)m+=b;g%l!==m%l&&(c.push({start:g%l,end:m%l,loop:p,style:_}),h=_,u=m%l)}}for(const g of t){u=a?u:g.start;let m=e[u%l],p;for(d=u+1;d<=g.end;d++){const _=e[d%l];p=Ca(n.setContext(qe(i,{type:"segment",p0:m,p1:_,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),hg(p,h)&&f(u,d-1,g.loop,h),m=_,h=p}u<d-1&&f(u,d-1,g.loop,h)}return c}function Ca(s){return{backgroundColor:s.backgroundColor,borderCapStyle:s.borderCapStyle,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderJoinStyle:s.borderJoinStyle,borderWidth:s.borderWidth,borderColor:s.borderColor}}function hg(s,t){if(!t)return!1;const e=[],n=function(i,r){return Po(r)?(e.includes(r)||e.push(r),e.indexOf(r)):r};return JSON.stringify(s,n)!==JSON.stringify(t,n)}/*!
 * Chart.js v4.4.3
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class ug{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,i){const r=e.listeners[i],o=e.duration;r.forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(n-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=sh.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,n,t,"progress")),r.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),e+=r.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var pe=new ug;const Da="transparent",dg={boolean(s,t,e){return e>.5?t:s},color(s,t,e){const n=va(s||Da),i=n.valid&&va(t||Da);return i&&i.valid?i.mix(n,e).hexString():t},number(s,t,e){return s+(t-s)*e}};class fg{constructor(t,e,n,i){const r=e[n];i=hn([t.to,i,r,t.from]);const o=hn([t.from,r,i]);this._active=!0,this._fn=t.fn||dg[t.type||typeof o],this._easing=yn[t.easing]||yn.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,o=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=hn([t.to,e,i,t.from]),this._from=hn([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||e<n),!this._active){this._target[i]=a,this._notify(!0);return}if(e<0){this._target[i]=r;return}l=e/n%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][e]()}}class vh{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!q(t))return;const e=Object.keys(pt.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const r=t[i];if(!q(r))return;const o={};for(const a of e)o[a]=r[a];(ut(r.properties)&&r.properties||[i]).forEach(a=>{(a===i||!n.has(a))&&n.set(a,o)})})}_animateOptions(t,e){const n=e.options,i=mg(t,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&gg(t.options.$animations,n).then(()=>{t.options=n},()=>{}),r}_createAnimations(t,e){const n=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(t,e));continue}const h=e[c];let u=r[c];const d=n.get(c);if(u)if(d&&u.active()){u.update(d,h,a);continue}else u.cancel();if(!d||!d.duration){t[c]=h;continue}r[c]=u=new fg(d,t,c,h),i.push(u)}return i}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const n=this._createAnimations(t,e);if(n.length)return pe.add(this._chart,n),!0}}function gg(s,t){const e=[],n=Object.keys(t);for(let i=0;i<n.length;i++){const r=s[n[i]];r&&r.active()&&e.push(r.wait())}return Promise.all(e)}function mg(s,t){if(!t)return;let e=s.options;if(!e){s.options=t;return}return e.$shared&&(s.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function Aa(s,t){const e=s&&s.options||{},n=e.reverse,i=e.min===void 0?t:0,r=e.max===void 0?t:0;return{start:n?r:i,end:n?i:r}}function pg(s,t,e){if(e===!1)return!1;const n=Aa(s,e),i=Aa(t,e);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function _g(s){let t,e,n,i;return q(s)?(t=s.top,e=s.right,n=s.bottom,i=s.left):t=e=n=i=s,{top:t,right:e,bottom:n,left:i,disabled:s===!1}}function wh(s,t){const e=[],n=s._getSortedDatasetMetas(t);let i,r;for(i=0,r=n.length;i<r;++i)e.push(n[i].index);return e}function Pa(s,t,e,n={}){const i=s.keys,r=n.mode==="single";let o,a,l,c;if(t!==null){for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===e){if(n.all)continue;break}c=s.values[l],mt(c)&&(r||t===0||ge(t)===ge(c))&&(t+=c)}return t}}function bg(s,t){const{iScale:e,vScale:n}=t,i=e.axis==="x"?"x":"y",r=n.axis==="x"?"x":"y",o=Object.keys(s),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[i]:h,[r]:s[h]};return a}function Ia(s,t){const e=s&&s.options.stacked;return e||e===void 0&&t.stack!==void 0}function yg(s,t,e){return`${s.id}.${t.id}.${e.stack||e.type}`}function vg(s){const{min:t,max:e,minDefined:n,maxDefined:i}=s.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:i?e:Number.POSITIVE_INFINITY}}function wg(s,t,e){const n=s[t]||(s[t]={});return n[e]||(n[e]={})}function La(s,t,e,n){for(const i of t.getMatchingVisibleMetas(n).reverse()){const r=s[i.index];if(e&&r>0||!e&&r<0)return i.index}return null}function Ra(s,t){const{chart:e,_cachedMeta:n}=s,i=e._stacks||(e._stacks={}),{iScale:r,vScale:o,index:a}=n,l=r.axis,c=o.axis,h=yg(r,o,n),u=t.length;let d;for(let f=0;f<u;++f){const g=t[f],{[l]:m,[c]:p}=g,_=g._stacks||(g._stacks={});d=_[c]=wg(i,h,m),d[a]=p,d._top=La(d,o,!0,n.type),d._bottom=La(d,o,!1,n.type);const b=d._visualValues||(d._visualValues={});b[a]=p}}function gr(s,t){const e=s.scales;return Object.keys(e).filter(n=>e[n].axis===t).shift()}function xg(s,t){return qe(s,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function kg(s,t,e){return qe(s,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function tn(s,t){const e=s.controller.index,n=s.vScale&&s.vScale.axis;if(n){t=t||s._parsed;for(const i of t){const r=i._stacks;if(!r||r[n]===void 0||r[n][e]===void 0)return;delete r[n][e],r[n]._visualValues!==void 0&&r[n]._visualValues[e]!==void 0&&delete r[n]._visualValues[e]}}}const mr=s=>s==="reset"||s==="none",Na=(s,t)=>t?s:Object.assign({},s),Sg=(s,t,e)=>s&&!t.hidden&&t._stacked&&{keys:wh(e,!0),values:null};class ae{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Ia(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&tn(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),i=(u,d,f,g)=>u==="x"?d:u==="r"?g:f,r=e.xAxisID=W(n.xAxisID,gr(t,"x")),o=e.yAxisID=W(n.yAxisID,gr(t,"y")),a=e.rAxisID=W(n.rAxisID,gr(t,"r")),l=e.indexAxis,c=e.iAxisID=i(l,r,o,a),h=e.vAxisID=i(l,o,r,a);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(c),e.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&_a(this._data,this),t._stacked&&tn(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(q(e)){const i=this._cachedMeta;this._data=bg(e,i)}else if(n!==e){if(n){_a(n,this);const i=this._cachedMeta;tn(i),i._parsed=[]}e&&Object.isExtensible(e)&&cf(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=e._stacked;e._stacked=Ia(e.vScale,e),e.stack!==n.stack&&(i=!0,tn(e),e.stack=n.stack),this._resyncElements(t),(i||r!==e._stacked)&&Ra(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:o}=n,a=r.axis;let l=t===0&&e===i.length?!0:n._sorted,c=t>0&&n._parsed[t-1],h,u,d;if(this._parsing===!1)n._parsed=i,n._sorted=!0,d=i;else{ut(i[t])?d=this.parseArrayData(n,i,t,e):q(i[t])?d=this.parseObjectData(n,i,t,e):d=this.parsePrimitiveData(n,i,t,e);const f=()=>u[a]===null||c&&u[a]<c[a];for(h=0;h<e;++h)n._parsed[h+t]=u=d[h],l&&(f()&&(l=!1),c=u);n._sorted=l}o&&Ra(this,d)}parsePrimitiveData(t,e,n,i){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,c=r.getLabels(),h=r===o,u=new Array(i);let d,f,g;for(d=0,f=i;d<f;++d)g=d+n,u[d]={[a]:h||r.parse(c[g],g),[l]:o.parse(e[g],g)};return u}parseArrayData(t,e,n,i){const{xScale:r,yScale:o}=t,a=new Array(i);let l,c,h,u;for(l=0,c=i;l<c;++l)h=l+n,u=e[h],a[l]={x:r.parse(u[0],h),y:o.parse(u[1],h)};return a}parseObjectData(t,e,n,i){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let h,u,d,f;for(h=0,u=i;h<u;++h)d=h+n,f=e[d],c[h]={x:r.parse(Be(f,a),d),y:o.parse(Be(f,l),d)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const i=this.chart,r=this._cachedMeta,o=e[t.axis],a={keys:wh(i,!0),values:e._stacks[t.axis]._visualValues};return Pa(a,o,r.index,{mode:n})}updateRangeFromParsed(t,e,n,i){const r=n[e.axis];let o=r===null?NaN:r;const a=i&&n._stacks[e.axis];i&&a&&(i.values=a,o=Pa(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&t===n.iScale,o=i.length,a=this._getOtherScale(t),l=Sg(e,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:u}=vg(a);let d,f;function g(){f=i[d];const m=f[a.axis];return!mt(f[t.axis])||h>m||u<m}for(d=0;d<o&&!(!g()&&(this.updateRangeFromParsed(c,t,f,l),r));++d);if(r){for(d=o-1;d>=0;--d)if(!g()){this.updateRangeFromParsed(c,t,f,l);break}}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let i,r,o;for(i=0,r=e.length;i<r;++i)o=e[i][t.axis],mt(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,i=e.vScale,r=this.getParsed(t);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=_g(W(this.options.clip,pg(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,i=n.data||[],r=e.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let h;for(n.dataset&&n.dataset.draw(t,r,a,l),h=a;h<a+l;++h){const u=i[h];u.hidden||(u.active&&c?o.push(u):u.draw(t,r))}for(h=0;h<o.length;++h)o[h].draw(t,r)}getStyle(t,e){const n=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=kg(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=xg(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=n,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const i=e==="active",r=this._cachedDataOpts,o=t+"-"+e,a=r[o],l=this.enableOptionSharing&&Cn(n);if(a)return Na(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,t),u=i?[`${t}Hover`,"hover",t,""]:[t,""],d=c.getOptionScopes(this.getDataset(),h),f=Object.keys(pt.elements[t]),g=()=>this.getContext(n,i,e),m=c.resolveNamedOptions(d,f,g,u);return m.$shared&&(m.$shared=l,r[o]=Object.freeze(Na(m,l))),m}_resolveAnimations(t,e,n){const i=this.chart,r=this._cachedDataOpts,o=`animation-${e}`,a=r[o];if(a)return a;let l;if(i.options.animation!==!1){const h=this.chart.config,u=h.datasetAnimationScopeKeys(this._type,e),d=h.getOptionScopes(this.getDataset(),u);l=h.createResolver(d,this.getContext(t,n,e))}const c=new vh(i,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||mr(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),i=this._sharedOptions,r=this.getSharedOptions(n),o=this.includeOptions(e,r)||r!==i;return this.updateSharedOptions(r,e,n),{sharedOptions:r,includeOptions:o}}updateElement(t,e,n,i){mr(i)?Object.assign(t,n):this._resolveAnimations(e,i).update(t,n)}updateSharedOptions(t,e,n){t&&!mr(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,i){t.active=i;const r=this.getStyle(e,i);this._resolveAnimations(e,n,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=n.length,r=e.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,e,n=!0){const i=this._cachedMeta,r=i.data,o=t+e;let a;const l=c=>{for(c.length+=e,a=c.length-1;a>=o;a--)c[a]=c[a-e]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,e),n&&this.updateElements(r,t,e,"reset")}updateElements(t,e,n,i){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,e);n._stacked&&tn(n,i)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,i]=t;this[e](n,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}E(ae,"defaults",{}),E(ae,"datasetElementType",null),E(ae,"dataElementType",null);function Og(s,t){if(!s._cache.$bar){const e=s.getMatchingVisibleMetas(t);let n=[];for(let i=0,r=e.length;i<r;i++)n=n.concat(e[i].controller.getAllParsedValues(s));s._cache.$bar=eh(n.sort((i,r)=>i-r))}return s._cache.$bar}function Tg(s){const t=s.iScale,e=Og(t,s.type);let n=t._length,i,r,o,a;const l=()=>{o===32767||o===-32768||(Cn(a)&&(n=Math.min(n,Math.abs(o-a)||n)),a=o)};for(i=0,r=e.length;i<r;++i)o=t.getPixelForValue(e[i]),l();for(a=void 0,i=0,r=t.ticks.length;i<r;++i)o=t.getPixelForTick(i),l();return n}function Mg(s,t,e,n){const i=e.barThickness;let r,o;return Z(i)?(r=t.min*e.categoryPercentage,o=e.barPercentage):(r=i*n,o=1),{chunk:r/n,ratio:o,start:t.pixels[s]-r/2}}function Eg(s,t,e,n){const i=t.pixels,r=i[s];let o=s>0?i[s-1]:null,a=s<i.length-1?i[s+1]:null;const l=e.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/n,ratio:e.barPercentage,start:c}}function Cg(s,t,e,n){const i=e.parse(s[0],n),r=e.parse(s[1],n),o=Math.min(i,r),a=Math.max(i,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:r,min:o,max:a}}function xh(s,t,e,n){return ut(s)?Cg(s,t,e,n):t[e.axis]=e.parse(s,n),t}function $a(s,t,e,n){const i=s.iScale,r=s.vScale,o=i.getLabels(),a=i===r,l=[];let c,h,u,d;for(c=e,h=e+n;c<h;++c)d=t[c],u={},u[i.axis]=a||i.parse(o[c],c),l.push(xh(d,u,r,c));return l}function pr(s){return s&&s.barStart!==void 0&&s.barEnd!==void 0}function Dg(s,t,e){return s!==0?ge(s):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function Ag(s){let t,e,n,i,r;return s.horizontal?(t=s.base>s.x,e="left",n="right"):(t=s.base<s.y,e="bottom",n="top"),t?(i="end",r="start"):(i="start",r="end"),{start:e,end:n,reverse:t,top:i,bottom:r}}function Pg(s,t,e,n){let i=t.borderSkipped;const r={};if(!i){s.borderSkipped=r;return}if(i===!0){s.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:h}=Ag(s);i==="middle"&&e&&(s.enableBorderRadius=!0,(e._top||0)===n?i=c:(e._bottom||0)===n?i=h:(r[Fa(h,o,a,l)]=!0,i=c)),r[Fa(i,o,a,l)]=!0,s.borderSkipped=r}function Fa(s,t,e,n){return n?(s=Ig(s,t,e),s=ja(s,e,t)):s=ja(s,t,e),s}function Ig(s,t,e){return s===t?e:s===e?t:s}function ja(s,t,e){return s==="start"?t:s==="end"?e:s}function Lg(s,{inflateAmount:t},e){s.inflateAmount=t==="auto"?e===1?.33:0:t}class yi extends ae{parsePrimitiveData(t,e,n,i){return $a(t,e,n,i)}parseArrayData(t,e,n,i){return $a(t,e,n,i)}parseObjectData(t,e,n,i){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,h=o.axis==="x"?a:l,u=[];let d,f,g,m;for(d=n,f=n+i;d<f;++d)m=e[d],g={},g[r.axis]=r.parse(Be(m,c),d),u.push(xh(Be(m,h),g,o,d));return u}updateRangeFromParsed(t,e,n,i){super.updateRangeFromParsed(t,e,n,i);const r=n._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:i}=e,r=this.getParsed(t),o=r._custom,a=pr(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,i){const r=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(e,i);for(let f=e;f<e+n;f++){const g=this.getParsed(f),m=r||Z(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),p=this._calculateBarIndexPixels(f,h),_=(g._stacks||{})[a.axis],b={horizontal:c,base:m.base,enableBorderRadius:!_||pr(g._custom)||o===_._top||o===_._bottom,x:c?m.head:p.center,y:c?p.center:m.head,height:c?p.size:Math.abs(m.size),width:c?Math.abs(m.size):p.size};d&&(b.options=u||this.resolveDataElementOptions(f,t[f].active?"active":i));const y=b.options||t[f].options;Pg(b,y,_,o),Lg(b,y,h.ratio),this.updateElement(t[f],f,b,i)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),r=n.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(e),h=c&&c[l.vScale.axis];if(Z(h)||isNaN(h))return!0};for(const l of i)if(!(e!==void 0&&a(l))&&((r===!1||o.indexOf(l.stack)===-1||r===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,n){const i=this._getStacks(t,n),r=e!==void 0?i.indexOf(e):-1;return r===-1?i.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,i=[];let r,o;for(r=0,o=e.data.length;r<o;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const a=t.barThickness;return{min:a||Tg(e),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:i},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(t),c=l._custom,h=pr(c);let u=l[e.axis],d=0,f=n?this.applyStack(e,l,n):u,g,m;f!==u&&(d=f-u,f=u),h&&(u=c.barStart,f=c.barEnd-c.barStart,u!==0&&ge(u)!==ge(c.barEnd)&&(d=0),d+=u);const p=!Z(r)&&!h?r:d;let _=e.getPixelForValue(p);if(this.chart.getDataVisibility(t)?g=e.getPixelForValue(d+f):g=_,m=g-_,Math.abs(m)<o){m=Dg(m,e,a)*o,u===a&&(_-=m/2);const b=e.getPixelForDecimal(0),y=e.getPixelForDecimal(1),w=Math.min(b,y),x=Math.max(b,y);_=Math.max(Math.min(_,x),w),g=_+m,n&&!h&&(l._stacks[e.axis]._visualValues[i]=e.getValueForPixel(g)-e.getValueForPixel(_))}if(_===e.getPixelForValue(a)){const b=ge(m)*e.getLineWidthForValue(a)/2;_+=b,m-=b}return{size:m,base:_,head:g,center:g+m/2}}_calculateBarIndexPixels(t,e){const n=e.scale,i=this.options,r=i.skipNull,o=W(i.maxBarThickness,1/0);let a,l;if(e.grouped){const c=r?this._getStackCount(t):e.stackCount,h=i.barThickness==="flex"?Eg(t,e,i,c):Mg(t,e,i,c),u=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);a=h.start+h.chunk*u+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),l=Math.min(o,e.min*e.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,i=n.length;let r=0;for(;r<i;++r)this.getParsed(r)[e.axis]!==null&&!n[r].hidden&&n[r].draw(this._ctx)}}E(yi,"id","bar"),E(yi,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),E(yi,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class vi extends ae{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,i){const r=super.parsePrimitiveData(t,e,n,i);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+n).radius;return r}parseArrayData(t,e,n,i){const r=super.parseArrayData(t,e,n,i);for(let o=0;o<r.length;o++){const a=e[n+o];r[o]._custom=W(a[2],this.resolveDataElementOptions(o+n).radius)}return r}parseObjectData(t,e,n,i){const r=super.parseObjectData(t,e,n,i);for(let o=0;o<r.length;o++){const a=e[n+o];r[o]._custom=W(a&&a.r&&+a.r,this.resolveDataElementOptions(o+n).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=e,o=this.getParsed(t),a=i.getLabelForValue(o.x),l=r.getLabelForValue(o.y),c=o._custom;return{label:n[t]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,i){const r=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(e,i),h=o.axis,u=a.axis;for(let d=e;d<e+n;d++){const f=t[d],g=!r&&this.getParsed(d),m={},p=m[h]=r?o.getPixelForDecimal(.5):o.getPixelForValue(g[h]),_=m[u]=r?a.getBasePixel():a.getPixelForValue(g[u]);m.skip=isNaN(p)||isNaN(_),c&&(m.options=l||this.resolveDataElementOptions(d,f.active?"active":i),r&&(m.options.radius=0)),this.updateElement(f,d,m,i)}}resolveDataElementOptions(t,e){const n=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return e!=="active"&&(i.radius=0),i.radius+=W(n&&n._custom,r),i}}E(vi,"id","bubble"),E(vi,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),E(vi,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function Rg(s,t,e){let n=1,i=1,r=0,o=0;if(t<at){const a=s,l=a+t,c=Math.cos(a),h=Math.sin(a),u=Math.cos(l),d=Math.sin(l),f=(y,w,x)=>Dn(y,a,l,!0)?1:Math.max(w,w*e,x,x*e),g=(y,w,x)=>Dn(y,a,l,!0)?-1:Math.min(w,w*e,x,x*e),m=f(0,c,u),p=f(yt,h,d),_=g(lt,c,u),b=g(lt+yt,h,d);n=(m-_)/2,i=(p-b)/2,r=-(m+_)/2,o=-(p+b)/2}return{ratioX:n,ratioY:i,offsetX:r,offsetY:o}}class rs extends ae{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=n;else{let r=l=>+n[l];if(q(n[t])){const{key:l="value"}=this._parsing;r=c=>+Be(n[c],l)}let o,a;for(o=t,a=t+e;o<a;++o)i._parsed[o]=r(o)}}_getRotation(){return re(this.options.rotation-90)}_getCircumference(){return re(this.options.circumference)}_getRotationExtents(){let t=at,e=-at;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),o=i._getCircumference();t=Math.min(t,r),e=Math.max(e,r+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-o)/2,0),l=Math.min(Gd(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:u}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:g,offsetY:m}=Rg(u,h,l),p=(n.width-o)/d,_=(n.height-o)/f,b=Math.max(Math.min(p,_)/2,0),y=Jc(this.options.radius,b),w=Math.max(y*l,0),x=(y-w)/this._getVisibleDatasetWeightTotal();this.offsetX=g*y,this.offsetY=m*y,i.total=this.calculateTotal(),this.outerRadius=y-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*c,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/at)}updateElements(t,e,n,i){const r=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,h=(a.left+a.right)/2,u=(a.top+a.bottom)/2,d=r&&c.animateScale,f=d?0:this.innerRadius,g=d?0:this.outerRadius,{sharedOptions:m,includeOptions:p}=this._getSharedOptions(e,i);let _=this._getRotation(),b;for(b=0;b<e;++b)_+=this._circumference(b,r);for(b=e;b<e+n;++b){const y=this._circumference(b,r),w=t[b],x={x:h+this.offsetX,y:u+this.offsetY,startAngle:_,endAngle:_+y,circumference:y,outerRadius:g,innerRadius:f};p&&(x.options=m||this.resolveDataElementOptions(b,w.active?"active":i)),_+=y,this.updateElement(w,b,x,i)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n=0,i;for(i=0;i<e.length;i++){const r=t._parsed[i];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(i)&&!e[i].hidden&&(n+=Math.abs(r))}return n}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?at*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=jn(e._parsed[t],n.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const n=this.chart;let i,r,o,a,l;if(!t){for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){o=n.getDatasetMeta(i),t=o.data,a=o.controller;break}}if(!t)return 0;for(i=0,r=t.length;i<r;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,i=t.length;n<i;++n){const r=this.resolveDataElementOptions(n);e=Math.max(e,r.offset||0,r.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(W(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}E(rs,"id","doughnut"),E(rs,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),E(rs,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),E(rs,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}});class wi extends ae{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=e,o=this.chart._animationsDisabled;let{start:a,count:l}=ih(e,i,o);this._drawStart=a,this._drawCount=l,rh(e)&&(a=0,l=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:c},t),this.updateElements(i,a,l,t)}updateElements(t,e,n,i){const r=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:u}=this._getSharedOptions(e,i),d=o.axis,f=a.axis,{spanGaps:g,segment:m}=this.options,p=Fs(g)?g:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||r||i==="none",b=e+n,y=t.length;let w=e>0&&this.getParsed(e-1);for(let x=0;x<y;++x){const T=t[x],O=_?T:{};if(x<e||x>=b){O.skip=!0;continue}const M=this.getParsed(x),C=Z(M[f]),A=O[d]=o.getPixelForValue(M[d],x),P=O[f]=r||C?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,M,l):M[f],x);O.skip=isNaN(A)||isNaN(P)||C,O.stop=x>0&&Math.abs(M[d]-w[d])>p,m&&(O.parsed=M,O.raw=c.data[x]),u&&(O.options=h||this.resolveDataElementOptions(x,T.active?"active":i)),_||this.updateElement(T,x,O,i),w=M}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}E(wi,"id","line"),E(wi,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),E(wi,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class wn extends ae{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=jn(e._parsed[t].r,n.options.locale);return{label:i[t]||"",value:r}}parseObjectData(t,e,n,i){return fh.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((n,i)=>{const r=this.getParsed(i).r;!isNaN(r)&&this.chart.getDataVisibility(i)&&(r<e.min&&(e.min=r),r>e.max&&(e.max=r))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,i=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(i/2,0),o=Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0),a=(r-o)/t.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,e,n,i){const r=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,h=c.xCenter,u=c.yCenter,d=c.getIndexAngle(0)-.5*lt;let f=d,g;const m=360/this.countVisibleElements();for(g=0;g<e;++g)f+=this._computeAngle(g,i,m);for(g=e;g<e+n;g++){const p=t[g];let _=f,b=f+this._computeAngle(g,i,m),y=o.getDataVisibility(g)?c.getDistanceFromCenterForValue(this.getParsed(g).r):0;f=b,r&&(l.animateScale&&(y=0),l.animateRotate&&(_=b=d));const w={x:h,y:u,innerRadius:0,outerRadius:y,startAngle:_,endAngle:b,options:this.resolveDataElementOptions(g,p.active?"active":i)};this.updateElement(p,g,w,i)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((n,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&e++}),e}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?re(this.resolveDataElementOptions(t,e).angle||n):0}}E(wn,"id","polarArea"),E(wn,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),E(wn,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Zr extends rs{}E(Zr,"id","pie"),E(Zr,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class xi extends ae{getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}parseObjectData(t,e,n,i){return fh.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta,n=e.dataset,i=e.data||[],r=e.iScale.getLabels();if(n.points=i,t!=="resize"){const o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===i.length,options:o};this.updateElement(n,void 0,a,t)}this.updateElements(i,0,i.length,t)}updateElements(t,e,n,i){const r=this._cachedMeta.rScale,o=i==="reset";for(let a=e;a<e+n;a++){const l=t[a],c=this.resolveDataElementOptions(a,l.active?"active":i),h=r.getPointPositionForValue(a,this.getParsed(a).r),u=o?r.xCenter:h.x,d=o?r.yCenter:h.y,f={x:u,y:d,angle:h.angle,skip:isNaN(u)||isNaN(d),options:c};this.updateElement(l,a,f,i)}}}E(xi,"id","radar"),E(xi,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),E(xi,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class ki extends ae{getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=e,o=this.getParsed(t),a=i.getLabelForValue(o.x),l=r.getLabelForValue(o.y);return{label:n[t]||"",value:"("+a+", "+l+")"}}update(t){const e=this._cachedMeta,{data:n=[]}=e,i=this.chart._animationsDisabled;let{start:r,count:o}=ih(e,n,i);if(this._drawStart=r,this._drawCount=o,rh(e)&&(r=0,o=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=e;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=n;const c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(n,r,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,n,i){const r=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,h=this.resolveDataElementOptions(e,i),u=this.getSharedOptions(h),d=this.includeOptions(i,u),f=o.axis,g=a.axis,{spanGaps:m,segment:p}=this.options,_=Fs(m)?m:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||r||i==="none";let y=e>0&&this.getParsed(e-1);for(let w=e;w<e+n;++w){const x=t[w],T=this.getParsed(w),O=b?x:{},M=Z(T[g]),C=O[f]=o.getPixelForValue(T[f],w),A=O[g]=r||M?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,T,l):T[g],w);O.skip=isNaN(C)||isNaN(A)||M,O.stop=w>0&&Math.abs(T[f]-y[f])>_,p&&(O.parsed=T,O.raw=c.data[w]),d&&(O.options=u||this.resolveDataElementOptions(w,x.active?"active":i)),b||this.updateElement(x,w,O,i),y=T}this.updateSharedOptions(u,i,h)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let a=0;for(let l=e.length-1;l>=0;--l)a=Math.max(a,e[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const n=t.dataset,i=n.options&&n.options.borderWidth||0;if(!e.length)return i;const r=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(i,r,o)/2}}E(ki,"id","scatter"),E(ki,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),E(ki,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var Ng=Object.freeze({__proto__:null,BarController:yi,BubbleController:vi,DoughnutController:rs,LineController:wi,PieController:Zr,PolarAreaController:wn,RadarController:xi,ScatterController:ki});function Ze(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class jo{constructor(t){E(this,"options");this.options=t||{}}static override(t){Object.assign(jo.prototype,t)}init(){}formats(){return Ze()}parse(){return Ze()}format(){return Ze()}add(){return Ze()}diff(){return Ze()}startOf(){return Ze()}endOf(){return Ze()}}var $g={_date:jo};function Fg(s,t,e,n){const{controller:i,data:r,_sorted:o}=s,a=i._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const l=a._reversePixels?af:xe;if(n){if(i._sharedOptions){const c=r[0],h=typeof c.getRange=="function"&&c.getRange(t);if(h){const u=l(r,t,e-h),d=l(r,t,e+h);return{lo:u.lo,hi:d.hi}}}}else return l(r,t,e)}return{lo:0,hi:r.length-1}}function zn(s,t,e,n,i){const r=s.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,l=r.length;a<l;++a){const{index:c,data:h}=r[a],{lo:u,hi:d}=Fg(r[a],t,o,i);for(let f=u;f<=d;++f){const g=h[f];g.skip||n(g,c,f)}}}function jg(s){const t=s.indexOf("x")!==-1,e=s.indexOf("y")!==-1;return function(n,i){const r=t?Math.abs(n.x-i.x):0,o=e?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function _r(s,t,e,n,i){const r=[];return!i&&!s.isPointInArea(t)||zn(s,e,t,function(a,l,c){!i&&!ke(a,s.chartArea,0)||a.inRange(t.x,t.y,n)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function zg(s,t,e,n){let i=[];function r(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],n),{angle:u}=Qc(o,{x:t.x,y:t.y});Dn(u,c,h)&&i.push({element:o,datasetIndex:a,index:l})}return zn(s,e,t,r),i}function Vg(s,t,e,n,i,r){let o=[];const a=jg(e);let l=Number.POSITIVE_INFINITY;function c(h,u,d){const f=h.inRange(t.x,t.y,i);if(n&&!f)return;const g=h.getCenterPoint(i);if(!(!!r||s.isPointInArea(g))&&!f)return;const p=a(t,g);p<l?(o=[{element:h,datasetIndex:u,index:d}],l=p):p===l&&o.push({element:h,datasetIndex:u,index:d})}return zn(s,e,t,c),o}function br(s,t,e,n,i,r){return!r&&!s.isPointInArea(t)?[]:e==="r"&&!n?zg(s,t,e,i):Vg(s,t,e,n,i,r)}function za(s,t,e,n,i){const r=[],o=e==="x"?"inXRange":"inYRange";let a=!1;return zn(s,e,t,(l,c,h)=>{l[o](t[e],i)&&(r.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(t.x,t.y,i))}),n&&!a?[]:r}var Wg={evaluateInteractionItems:zn,modes:{index(s,t,e,n){const i=es(t,s),r=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?_r(s,i,r,n,o):br(s,i,r,!1,n,o),l=[];return a.length?(s.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,u=c.data[h];u&&!u.skip&&l.push({element:u,datasetIndex:c.index,index:h})}),l):[]},dataset(s,t,e,n){const i=es(t,s),r=e.axis||"xy",o=e.includeInvisible||!1;let a=e.intersect?_r(s,i,r,n,o):br(s,i,r,!1,n,o);if(a.length>0){const l=a[0].datasetIndex,c=s.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(s,t,e,n){const i=es(t,s),r=e.axis||"xy",o=e.includeInvisible||!1;return _r(s,i,r,n,o)},nearest(s,t,e,n){const i=es(t,s),r=e.axis||"xy",o=e.includeInvisible||!1;return br(s,i,r,e.intersect,n,o)},x(s,t,e,n){const i=es(t,s);return za(s,i,"x",e.intersect,n)},y(s,t,e,n){const i=es(t,s);return za(s,i,"y",e.intersect,n)}}};const kh=["left","top","right","bottom"];function en(s,t){return s.filter(e=>e.pos===t)}function Va(s,t){return s.filter(e=>kh.indexOf(e.pos)===-1&&e.box.axis===t)}function sn(s,t){return s.sort((e,n)=>{const i=t?n:e,r=t?e:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function Bg(s){const t=[];let e,n,i,r,o,a;for(e=0,n=(s||[]).length;e<n;++e)i=s[e],{position:r,options:{stack:o,stackWeight:a=1}}=i,t.push({index:e,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:a});return t}function Hg(s){const t={};for(const e of s){const{stack:n,pos:i,stackWeight:r}=e;if(!n||!kh.includes(i))continue;const o=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function Ug(s,t){const e=Hg(s),{vBoxMaxWidth:n,hBoxMaxHeight:i}=t;let r,o,a;for(r=0,o=s.length;r<o;++r){a=s[r];const{fullSize:l}=a.box,c=e[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*n:l&&t.availableWidth,a.height=i):(a.width=n,a.height=h?h*i:l&&t.availableHeight)}return e}function qg(s){const t=Bg(s),e=sn(t.filter(c=>c.box.fullSize),!0),n=sn(en(t,"left"),!0),i=sn(en(t,"right")),r=sn(en(t,"top"),!0),o=sn(en(t,"bottom")),a=Va(t,"x"),l=Va(t,"y");return{fullSize:e,leftAndTop:n.concat(r),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:en(t,"chartArea"),vertical:n.concat(i).concat(l),horizontal:r.concat(o).concat(a)}}function Wa(s,t,e,n){return Math.max(s[e],t[e])+Math.max(s[n],t[n])}function Sh(s,t){s.top=Math.max(s.top,t.top),s.left=Math.max(s.left,t.left),s.bottom=Math.max(s.bottom,t.bottom),s.right=Math.max(s.right,t.right)}function Yg(s,t,e,n){const{pos:i,box:r}=e,o=s.maxPadding;if(!q(i)){e.size&&(s[i]-=e.size);const u=n[e.stack]||{size:0,count:1};u.size=Math.max(u.size,e.horizontal?r.height:r.width),e.size=u.size/u.count,s[i]+=e.size}r.getPadding&&Sh(o,r.getPadding());const a=Math.max(0,t.outerWidth-Wa(o,s,"left","right")),l=Math.max(0,t.outerHeight-Wa(o,s,"top","bottom")),c=a!==s.w,h=l!==s.h;return s.w=a,s.h=l,e.horizontal?{same:c,other:h}:{same:h,other:c}}function Gg(s){const t=s.maxPadding;function e(n){const i=Math.max(t[n]-s[n],0);return s[n]+=i,i}s.y+=e("top"),s.x+=e("left"),e("right"),e("bottom")}function Zg(s,t){const e=t.maxPadding;function n(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(t[o],e[o])}),r}return n(s?["left","right"]:["top","bottom"])}function un(s,t,e,n){const i=[];let r,o,a,l,c,h;for(r=0,o=s.length,c=0;r<o;++r){a=s[r],l=a.box,l.update(a.width||t.w,a.height||t.h,Zg(a.horizontal,t));const{same:u,other:d}=Yg(t,e,a,n);c|=u&&i.length,h=h||d,l.fullSize||i.push(a)}return c&&un(i,t,e,n)||h}function ti(s,t,e,n,i){s.top=e,s.left=t,s.right=t+n,s.bottom=e+i,s.width=n,s.height=i}function Ba(s,t,e,n){const i=e.padding;let{x:r,y:o}=t;for(const a of s){const l=a.box,c=n[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const u=t.w*h,d=c.size||l.height;Cn(c.start)&&(o=c.start),l.fullSize?ti(l,i.left,o,e.outerWidth-i.right-i.left,d):ti(l,t.left+c.placed,o,u,d),c.start=o,c.placed+=u,o=l.bottom}else{const u=t.h*h,d=c.size||l.width;Cn(c.start)&&(r=c.start),l.fullSize?ti(l,r,i.top,d,e.outerHeight-i.bottom-i.top):ti(l,r,t.top+c.placed,d,u),c.start=r,c.placed+=u,r=l.right}}t.x=r,t.y=o}var Pt={addBox(s,t){s.boxes||(s.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},s.boxes.push(t)},removeBox(s,t){const e=s.boxes?s.boxes.indexOf(t):-1;e!==-1&&s.boxes.splice(e,1)},configure(s,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(s,t,e,n){if(!s)return;const i=It(s.options.layout.padding),r=Math.max(t-i.width,0),o=Math.max(e-i.height,0),a=qg(s.boxes),l=a.vertical,c=a.horizontal;tt(s.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const h=l.reduce((m,p)=>p.box.options&&p.box.options.display===!1?m:m+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:e,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/h,hBoxMaxHeight:o/2}),d=Object.assign({},i);Sh(d,It(n));const f=Object.assign({maxPadding:d,w:r,h:o,x:i.left,y:i.top},i),g=Ug(l.concat(c),u);un(a.fullSize,f,u,g),un(l,f,u,g),un(c,f,u,g)&&un(l,f,u,g),Gg(f),Ba(a.leftAndTop,f,u,g),f.x+=f.w,f.y+=f.h,Ba(a.rightAndBottom,f,u,g),s.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},tt(a.chartArea,m=>{const p=m.box;Object.assign(p,s.chartArea),p.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class Oh{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,i){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):n)}}isAttached(t){return!0}updateConfig(t){}}class Jg extends Oh{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Si="$chartjs",Kg={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Ha=s=>s===null||s==="";function Xg(s,t){const e=s.style,n=s.getAttribute("height"),i=s.getAttribute("width");if(s[Si]={initial:{height:n,width:i,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",Ha(i)){const r=Ta(s,"width");r!==void 0&&(s.width=r)}if(Ha(n))if(s.style.height==="")s.height=s.width/(t||2);else{const r=Ta(s,"height");r!==void 0&&(s.height=r)}return s}const Th=tg?{passive:!0}:!1;function Qg(s,t,e){s&&s.addEventListener(t,e,Th)}function tm(s,t,e){s&&s.canvas&&s.canvas.removeEventListener(t,e,Th)}function em(s,t){const e=Kg[s.type]||s.type,{x:n,y:i}=es(s,t);return{type:e,chart:t,native:s,x:n!==void 0?n:null,y:i!==void 0?i:null}}function Fi(s,t){for(const e of s)if(e===t||e.contains(t))return!0}function sm(s,t,e){const n=s.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Fi(a.addedNodes,n),o=o&&!Fi(a.removedNodes,n);o&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}function nm(s,t,e){const n=s.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Fi(a.removedNodes,n),o=o&&!Fi(a.addedNodes,n);o&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}const Pn=new Map;let Ua=0;function Mh(){const s=window.devicePixelRatio;s!==Ua&&(Ua=s,Pn.forEach((t,e)=>{e.currentDevicePixelRatio!==s&&t()}))}function im(s,t){Pn.size||window.addEventListener("resize",Mh),Pn.set(s,t)}function rm(s){Pn.delete(s),Pn.size||window.removeEventListener("resize",Mh)}function om(s,t,e){const n=s.canvas,i=n&&Fo(n);if(!i)return;const r=nh((a,l)=>{const c=i.clientWidth;e(a,l),c<i.clientWidth&&e()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||r(c,h)});return o.observe(i),im(s,r),o}function yr(s,t,e){e&&e.disconnect(),t==="resize"&&rm(s)}function am(s,t,e){const n=s.canvas,i=nh(r=>{s.ctx!==null&&e(em(r,s))},s);return Qg(n,t,i),i}class lm extends Oh{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(Xg(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[Si])return!1;const n=e[Si].initial;["height","width"].forEach(r=>{const o=n[r];Z(o)?e.removeAttribute(r):e.setAttribute(r,o)});const i=n.style||{};return Object.keys(i).forEach(r=>{e.style[r]=i[r]}),e.width=e.width,delete e[Si],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),o={attach:sm,detach:nm,resize:om}[e]||am;i[e]=o(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),i=n[e];if(!i)return;({attach:yr,detach:yr,resize:yr}[e]||tm)(t,e,i),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,i){return Qf(t,e,n,i)}isAttached(t){const e=t&&Fo(t);return!!(e&&e.isConnected)}}function cm(s){return!$o()||typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas?Jg:lm}class le{constructor(){E(this,"x");E(this,"y");E(this,"active",!1);E(this,"options");E(this,"$animations")}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return Fs(this.x)&&Fs(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const i={};return t.forEach(r=>{i[r]=n[r]&&n[r].active()?n[r]._to:this[r]}),i}}E(le,"defaults",{}),E(le,"defaultRoutes");function hm(s,t){const e=s.options.ticks,n=um(s),i=Math.min(e.maxTicksLimit||n,n),r=e.major.enabled?fm(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>i)return gm(t,c,r,o/i),c;const h=dm(r,t,i);if(o>0){let u,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(ei(t,c,h,Z(f)?0:a-f,a),u=0,d=o-1;u<d;u++)ei(t,c,h,r[u],r[u+1]);return ei(t,c,h,l,Z(f)?t.length:l+f),c}return ei(t,c,h),c}function um(s){const t=s.options.offset,e=s._tickSize(),n=s._length/e+(t?0:1),i=s._maxLength/e;return Math.floor(Math.min(n,i))}function dm(s,t,e){const n=mm(s),i=t.length/e;if(!n)return Math.max(i,1);const r=sf(n);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>i)return l}return Math.max(i,1)}function fm(s){const t=[];let e,n;for(e=0,n=s.length;e<n;e++)s[e].major&&t.push(e);return t}function gm(s,t,e,n){let i=0,r=e[0],o;for(n=Math.ceil(n),o=0;o<s.length;o++)o===r&&(t.push(s[o]),i++,r=e[i*n])}function ei(s,t,e,n,i){const r=W(n,0),o=Math.min(W(i,s.length),s.length);let a=0,l,c,h;for(e=Math.ceil(e),i&&(l=i-n,e=l/Math.floor(l/e)),h=r;h<0;)a++,h=Math.round(r+a*e);for(c=Math.max(r,0);c<o;c++)c===h&&(t.push(s[c]),a++,h=Math.round(r+a*e))}function mm(s){const t=s.length;let e,n;if(t<2)return!1;for(n=s[0],e=1;e<t;++e)if(s[e]-s[e-1]!==n)return!1;return n}const pm=s=>s==="left"?"right":s==="right"?"left":s,qa=(s,t,e)=>t==="top"||t==="left"?s[t]+e:s[t]-e,Ya=(s,t)=>Math.min(t||s,s);function Ga(s,t){const e=[],n=s.length/t,i=s.length;let r=0;for(;r<i;r+=n)e.push(s[Math.floor(r)]);return e}function _m(s,t,e){const n=s.ticks.length,i=Math.min(t,n-1),r=s._startPixel,o=s._endPixel,a=1e-6;let l=s.getPixelForTick(i),c;if(!(e&&(n===1?c=Math.max(l-r,o-l):t===0?c=(s.getPixelForTick(1)-l)/2:c=(l-s.getPixelForTick(i-1))/2,l+=i<t?c:-c,l<r-a||l>o+a)))return l}function bm(s,t){tt(s,e=>{const n=e.gc,i=n.length/2;let r;if(i>t){for(r=0;r<i;++r)delete e.data[n[r]];n.splice(0,i)}})}function nn(s){return s.drawTicks?s.tickLength:0}function Za(s,t){if(!s.display)return 0;const e=St(s.font,t),n=It(s.padding);return(ut(s.text)?s.text.length:1)*e.lineHeight+n.height}function ym(s,t){return qe(s,{scale:t,type:"scale"})}function vm(s,t,e){return qe(s,{tick:e,index:t,type:"tick"})}function wm(s,t,e){let n=Ao(s);return(e&&t!=="right"||!e&&t==="right")&&(n=pm(n)),n}function xm(s,t,e,n){const{top:i,left:r,bottom:o,right:a,chart:l}=s,{chartArea:c,scales:h}=l;let u=0,d,f,g;const m=o-i,p=a-r;if(s.isHorizontal()){if(f=Ct(n,r,a),q(e)){const _=Object.keys(e)[0],b=e[_];g=h[_].getPixelForValue(b)+m-t}else e==="center"?g=(c.bottom+c.top)/2+m-t:g=qa(s,e,t);d=a-r}else{if(q(e)){const _=Object.keys(e)[0],b=e[_];f=h[_].getPixelForValue(b)-p+t}else e==="center"?f=(c.left+c.right)/2-p+t:f=qa(s,e,t);g=Ct(n,o,i),u=e==="left"?-yt:yt}return{titleX:f,titleY:g,maxWidth:d,rotation:u}}class gs extends le{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:i}=this;return t=Wt(t,Number.POSITIVE_INFINITY),e=Wt(e,Number.NEGATIVE_INFINITY),n=Wt(n,Number.POSITIVE_INFINITY),i=Wt(i,Number.NEGATIVE_INFINITY),{min:Wt(t,n),max:Wt(e,i),minDefined:mt(t),maxDefined:mt(e)}}getMinMax(t){let{min:e,max:n,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:e,max:n};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),i||(e=Math.min(e,o.min)),r||(n=Math.max(n,o.max));return e=r&&e>n?n:e,n=i&&e>n?e:n,{min:Wt(e,Wt(n,e)),max:Wt(n,Wt(e,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){it(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Af(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Ga(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=hm(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,n;this.isHorizontal()?(e=this.left,n=this.right):(e=this.top,n=this.bottom,t=!t),this._startPixel=e,this._endPixel=n,this._reversePixels=t,this._length=n-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){it(this.options.afterUpdate,[this])}beforeSetDimensions(){it(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){it(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),it(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){it(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,i,r;for(n=0,i=t.length;n<i;n++)r=t[n],r.label=it(e.callback,[r.value,n,t],this)}afterTickToLabelConversion(){it(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){it(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=Ya(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,r=e.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!e.display||i>=r||n<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),u=h.widest.width,d=h.highest.height,f=Tt(this.chart.width-u,0,this.maxWidth);a=t.offset?this.maxWidth/n:f/(n-1),u+6>a&&(a=f/(n-(t.offset?.5:1)),l=this.maxHeight-nn(t.grid)-e.padding-Za(t.title,this.chart.options.font),c=Math.sqrt(u*u+d*d),o=Co(Math.min(Math.asin(Tt((h.highest.height+6)/a,-1,1)),Math.asin(Tt(l/c,-1,1))-Math.asin(Tt(d/c,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){it(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){it(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Za(i,e.options.font);if(a?(t.width=this.maxWidth,t.height=nn(r)+l):(t.height=this.maxHeight,t.width=nn(r)+l),n.display&&this.ticks.length){const{first:c,last:h,widest:u,highest:d}=this._getLabelSizes(),f=n.padding*2,g=re(this.labelRotation),m=Math.cos(g),p=Math.sin(g);if(a){const _=n.mirror?0:p*u.width+m*d.height;t.height=Math.min(this.maxHeight,t.height+_+f)}else{const _=n.mirror?0:m*u.width+p*d.height;t.width=Math.min(this.maxWidth,t.width+_+f)}this._calculatePadding(c,h,p,m)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,i){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=i*t.width,f=n*e.height):(d=n*t.height,f=i*e.width):r==="start"?f=e.width:r==="end"?d=t.width:r!=="inner"&&(d=t.width/2,f=e.width/2),this.paddingLeft=Math.max((d-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((f-u+o)*this.width/(this.width-u),0)}else{let h=e.height/2,u=t.height/2;r==="start"?(h=0,u=t.height):r==="end"&&(h=e.height,u=0),this.paddingTop=h+o,this.paddingBottom=u+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){it(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,n;for(e=0,n=t.length;e<n;e++)Z(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=Ga(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(e/Ya(e,n));let c=0,h=0,u,d,f,g,m,p,_,b,y,w,x;for(u=0;u<e;u+=l){if(g=t[u].label,m=this._resolveTickFontOptions(u),i.font=p=m.string,_=r[p]=r[p]||{data:{},gc:[]},b=m.lineHeight,y=w=0,!Z(g)&&!ut(g))y=Ni(i,_.data,_.gc,y,g),w=b;else if(ut(g))for(d=0,f=g.length;d<f;++d)x=g[d],!Z(x)&&!ut(x)&&(y=Ni(i,_.data,_.gc,y,x),w+=b);o.push(y),a.push(w),c=Math.max(y,c),h=Math.max(w,h)}bm(r,e);const T=o.indexOf(c),O=a.indexOf(h),M=C=>({width:o[C]||0,height:a[C]||0});return{first:M(0),last:M(e-1),widest:M(T),highest:M(O),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return of(this._alignToPixels?Ge(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=vm(this.getContext(),t,n))}return this.$context||(this.$context=ym(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=re(this.labelRotation),n=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*n>a*i?a/n:l/i:l*i<a*n?l/n:a/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,i=this.options,{grid:r,position:o,border:a}=i,l=r.offset,c=this.isHorizontal(),u=this.ticks.length+(l?1:0),d=nn(r),f=[],g=a.setContext(this.getContext()),m=g.display?g.width:0,p=m/2,_=function(I){return Ge(n,I,m)};let b,y,w,x,T,O,M,C,A,P,L,H;if(o==="top")b=_(this.bottom),O=this.bottom-d,C=b-p,P=_(t.top)+p,H=t.bottom;else if(o==="bottom")b=_(this.top),P=t.top,H=_(t.bottom)-p,O=b+p,C=this.top+d;else if(o==="left")b=_(this.right),T=this.right-d,M=b-p,A=_(t.left)+p,L=t.right;else if(o==="right")b=_(this.left),A=t.left,L=_(t.right)-p,T=b+p,M=this.left+d;else if(e==="x"){if(o==="center")b=_((t.top+t.bottom)/2+.5);else if(q(o)){const I=Object.keys(o)[0],$=o[I];b=_(this.chart.scales[I].getPixelForValue($))}P=t.top,H=t.bottom,O=b+p,C=O+d}else if(e==="y"){if(o==="center")b=_((t.left+t.right)/2);else if(q(o)){const I=Object.keys(o)[0],$=o[I];b=_(this.chart.scales[I].getPixelForValue($))}T=b-p,M=T-d,A=t.left,L=t.right}const z=W(i.ticks.maxTicksLimit,u),N=Math.max(1,Math.ceil(u/z));for(y=0;y<u;y+=N){const I=this.getContext(y),$=r.setContext(I),G=a.setContext(I),J=$.lineWidth,Mt=$.color,K=G.dash||[],rt=G.dashOffset,Ot=$.tickWidth,ct=$.tickColor,Nt=$.tickBorderDash||[],Lt=$.tickBorderDashOffset;w=_m(this,y,l),w!==void 0&&(x=Ge(n,w,J),c?T=M=A=L=x:O=C=P=H=x,f.push({tx1:T,ty1:O,tx2:M,ty2:C,x1:A,y1:P,x2:L,y2:H,width:J,color:Mt,borderDash:K,borderDashOffset:rt,tickWidth:Ot,tickColor:ct,tickBorderDash:Nt,tickBorderDashOffset:Lt}))}return this._ticksLength=u,this._borderValue=b,f}_computeLabelItems(t){const e=this.axis,n=this.options,{position:i,ticks:r}=n,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:u}=r,d=nn(n.grid),f=d+h,g=u?-h:f,m=-re(this.labelRotation),p=[];let _,b,y,w,x,T,O,M,C,A,P,L,H="middle";if(i==="top")T=this.bottom-g,O=this._getXAxisLabelAlignment();else if(i==="bottom")T=this.top+g,O=this._getXAxisLabelAlignment();else if(i==="left"){const N=this._getYAxisLabelAlignment(d);O=N.textAlign,x=N.x}else if(i==="right"){const N=this._getYAxisLabelAlignment(d);O=N.textAlign,x=N.x}else if(e==="x"){if(i==="center")T=(t.top+t.bottom)/2+f;else if(q(i)){const N=Object.keys(i)[0],I=i[N];T=this.chart.scales[N].getPixelForValue(I)+f}O=this._getXAxisLabelAlignment()}else if(e==="y"){if(i==="center")x=(t.left+t.right)/2-f;else if(q(i)){const N=Object.keys(i)[0],I=i[N];x=this.chart.scales[N].getPixelForValue(I)}O=this._getYAxisLabelAlignment(d).textAlign}e==="y"&&(l==="start"?H="top":l==="end"&&(H="bottom"));const z=this._getLabelSizes();for(_=0,b=a.length;_<b;++_){y=a[_],w=y.label;const N=r.setContext(this.getContext(_));M=this.getPixelForTick(_)+r.labelOffset,C=this._resolveTickFontOptions(_),A=C.lineHeight,P=ut(w)?w.length:1;const I=P/2,$=N.color,G=N.textStrokeColor,J=N.textStrokeWidth;let Mt=O;o?(x=M,O==="inner"&&(_===b-1?Mt=this.options.reverse?"left":"right":_===0?Mt=this.options.reverse?"right":"left":Mt="center"),i==="top"?c==="near"||m!==0?L=-P*A+A/2:c==="center"?L=-z.highest.height/2-I*A+A:L=-z.highest.height+A/2:c==="near"||m!==0?L=A/2:c==="center"?L=z.highest.height/2-I*A:L=z.highest.height-P*A,u&&(L*=-1),m!==0&&!N.showLabelBackdrop&&(x+=A/2*Math.sin(m))):(T=M,L=(1-P)*A/2);let K;if(N.showLabelBackdrop){const rt=It(N.backdropPadding),Ot=z.heights[_],ct=z.widths[_];let Nt=L-rt.top,Lt=0-rt.left;switch(H){case"middle":Nt-=Ot/2;break;case"bottom":Nt-=Ot;break}switch(O){case"center":Lt-=ct/2;break;case"right":Lt-=ct;break;case"inner":_===b-1?Lt-=ct:_>0&&(Lt-=ct/2);break}K={left:Lt,top:Nt,width:ct+rt.width,height:Ot+rt.height,color:N.backdropColor}}p.push({label:w,font:C,textOffset:L,options:{rotation:m,color:$,strokeColor:G,strokeWidth:J,textAlign:Mt,textBaseline:H,translation:[x,T],backdrop:K}})}return p}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-re(this.labelRotation))return t==="top"?"left":"right";let i="center";return e.align==="start"?i="left":e.align==="end"?i="right":e.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let c,h;return e==="left"?i?(h=this.right+r,n==="near"?c="left":n==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,n==="near"?c="right":n==="center"?(c="center",h-=l/2):(c="left",h=this.left)):e==="right"?i?(h=this.left+r,n==="near"?c="right":n==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,n==="near"?c="left":n==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:i,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,i,r,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const i=this.ticks.findIndex(r=>r.value===t);return i>=0?e.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const e=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,c,h)=>{!h.width||!h.color||(n.save(),n.lineWidth=h.width,n.strokeStyle=h.color,n.setLineDash(h.borderDash||[]),n.lineDashOffset=h.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(c.x,c.y),n.stroke(),n.restore())};if(e.display)for(r=0,o=i.length;r<o;++r){const l=i[r];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),o=n.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,u,d;this.isHorizontal()?(c=Ge(t,this.left,o)-o/2,h=Ge(t,this.right,a)+a/2,u=d=l):(u=Ge(t,this.top,o)-o/2,d=Ge(t,this.bottom,a)+a/2,c=h=l),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(c,u),e.lineTo(h,d),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,i=this._computeLabelArea();i&&Ki(n,i);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,c=o.label,h=o.textOffset;fs(n,c,0,h,l,a)}i&&Xi(n)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:i}}=this;if(!n.display)return;const r=St(n.font),o=It(n.padding),a=n.align;let l=r.lineHeight/2;e==="bottom"||e==="center"||q(e)?(l+=o.bottom,ut(n.text)&&(l+=r.lineHeight*(n.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:u,rotation:d}=xm(this,l,e,a);fs(t,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:d,textAlign:wm(a,e,i),textBaseline:"middle",translation:[c,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=W(t.grid&&t.grid.z,-1),i=W(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==gs.prototype.draw?[{z:e,draw:r=>{this.draw(r)}}]:[{z:n,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,o;for(r=0,o=e.length;r<o;++r){const a=e[r];a[n]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return St(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class si{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;Om(e)&&(n=this.register(e));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,km(t,o,n),this.override&&pt.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,i=this.scope;n in e&&delete e[n],i&&n in pt[i]&&(delete pt[i][n],this.override&&delete ds[n])}}function km(s,t,e){const n=En(Object.create(null),[e?pt.get(e):{},pt.get(t),s.defaults]);pt.set(t,n),s.defaultRoutes&&Sm(t,s.defaultRoutes),s.descriptors&&pt.describe(t,s.descriptors)}function Sm(s,t){Object.keys(t).forEach(e=>{const n=e.split("."),i=n.pop(),r=[s].concat(n).join("."),o=t[e].split("."),a=o.pop(),l=o.join(".");pt.route(r,i,l,a)})}function Om(s){return"id"in s&&"defaults"in s}class Tm{constructor(){this.controllers=new si(ae,"datasets",!0),this.elements=new si(le,"elements"),this.plugins=new si(Object,"plugins"),this.scales=new si(gs,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(i=>{const r=n||this._getRegistryForType(i);n||r.isForType(i)||r===this.plugins&&i.id?this._exec(t,r,i):tt(i,o=>{const a=n||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,n){const i=Eo(t);it(n["before"+i],[],n),e[t](n),it(n["after"+i],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const i=e.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return i}}var fe=new Tm;class Mm{constructor(){this._init=[]}notify(t,e,n,i){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,e,n);return e==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,n,i){i=i||{};for(const r of t){const o=r.plugin,a=o[n],l=[e,i,r.options];if(it(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Z(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,i=W(n.options&&n.options.plugins,{}),r=Em(n);return i===!1&&!e?[]:Dm(t,r,i,e)}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,i=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(e,n),t,"stop"),this._notify(i(n,e),t,"start")}}function Em(s){const t={},e=[],n=Object.keys(fe.plugins.items);for(let r=0;r<n.length;r++)e.push(fe.getPlugin(n[r]));const i=s.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function Cm(s,t){return!t&&s===!1?null:s===!0?{}:s}function Dm(s,{plugins:t,localIds:e},n,i){const r=[],o=s.getContext();for(const a of t){const l=a.id,c=Cm(n[l],i);c!==null&&r.push({plugin:a,options:Am(s.config,{plugin:a,local:e[l]},c,o)})}return r}function Am(s,{plugin:t,local:e},n,i){const r=s.pluginScopeKeys(t),o=s.getOptionScopes(n,r);return e&&t.defaults&&o.push(t.defaults),s.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Jr(s,t){const e=pt.datasets[s]||{};return((t.datasets||{})[s]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function Pm(s,t){let e=s;return s==="_index_"?e=t:s==="_value_"&&(e=t==="x"?"y":"x"),e}function Im(s,t){return s===t?"_index_":"_value_"}function Ja(s){if(s==="x"||s==="y"||s==="r")return s}function Lm(s){if(s==="top"||s==="bottom")return"x";if(s==="left"||s==="right")return"y"}function Kr(s,...t){if(Ja(s))return s;for(const e of t){const n=e.axis||Lm(e.position)||s.length>1&&Ja(s[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${s}' axis. Please provide 'axis' or 'position' option.`)}function Ka(s,t,e){if(e[t+"AxisID"]===s)return{axis:t}}function Rm(s,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(n=>n.xAxisID===s||n.yAxisID===s);if(e.length)return Ka(s,"x",e[0])||Ka(s,"y",e[0])}return{}}function Nm(s,t){const e=ds[s.type]||{scales:{}},n=t.scales||{},i=Jr(s.type,t),r=Object.create(null);return Object.keys(n).forEach(o=>{const a=n[o];if(!q(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Kr(o,a,Rm(o,s),pt.scales[a.type]),c=Im(l,i),h=e.scales||{};r[o]=_n(Object.create(null),[{axis:l},a,h[l],h[c]])}),s.data.datasets.forEach(o=>{const a=o.type||s.type,l=o.indexAxis||Jr(a,t),h=(ds[a]||{}).scales||{};Object.keys(h).forEach(u=>{const d=Pm(u,l),f=o[d+"AxisID"]||d;r[f]=r[f]||Object.create(null),_n(r[f],[{axis:d},n[f],h[u]])})}),Object.keys(r).forEach(o=>{const a=r[o];_n(a,[pt.scales[a.type],pt.scale])}),r}function Eh(s){const t=s.options||(s.options={});t.plugins=W(t.plugins,{}),t.scales=Nm(s,t)}function Ch(s){return s=s||{},s.datasets=s.datasets||[],s.labels=s.labels||[],s}function $m(s){return s=s||{},s.data=Ch(s.data),Eh(s),s}const Xa=new Map,Dh=new Set;function ni(s,t){let e=Xa.get(s);return e||(e=t(),Xa.set(s,e),Dh.add(e)),e}const rn=(s,t,e)=>{const n=Be(t,e);n!==void 0&&s.add(n)};class Fm{constructor(t){this._config=$m(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Ch(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Eh(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return ni(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return ni(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return ni(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,n=this.type;return ni(`${n}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let i=n.get(t);return(!i||e)&&(i=new Map,n.set(t,i)),i}getOptionScopes(t,e,n){const{options:i,type:r}=this,o=this._cachedScopes(t,n),a=o.get(e);if(a)return a;const l=new Set;e.forEach(h=>{t&&(l.add(t),h.forEach(u=>rn(l,t,u))),h.forEach(u=>rn(l,i,u)),h.forEach(u=>rn(l,ds[r]||{},u)),h.forEach(u=>rn(l,pt,u)),h.forEach(u=>rn(l,Yr,u))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Dh.has(e)&&o.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,ds[e]||{},pt.datasets[e]||{},{type:e},pt,Yr]}resolveNamedOptions(t,e,n,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=Qa(this._resolverCache,t,i);let l=o;if(zm(o,e)){r.$shared=!1,n=He(n)?n():n;const c=this.createResolver(t,n,a);l=js(o,n,c)}for(const c of e)r[c]=l[c];return r}createResolver(t,e,n=[""],i){const{resolver:r}=Qa(this._resolverCache,t,n);return q(e)?js(r,e,void 0,i):r}}function Qa(s,t,e){let n=s.get(t);n||(n=new Map,s.set(t,n));const i=e.join();let r=n.get(i);return r||(r={resolver:Lo(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},n.set(i,r)),r}const jm=s=>q(s)&&Object.getOwnPropertyNames(s).some(t=>He(s[t]));function zm(s,t){const{isScriptable:e,isIndexable:n}=ch(s);for(const i of t){const r=e(i),o=n(i),a=(o||r)&&s[i];if(r&&(He(a)||jm(a))||o&&ut(a))return!0}return!1}var Vm="4.4.3";const Wm=["top","bottom","left","right","chartArea"];function tl(s,t){return s==="top"||s==="bottom"||Wm.indexOf(s)===-1&&t==="x"}function el(s,t){return function(e,n){return e[s]===n[s]?e[t]-n[t]:e[s]-n[s]}}function sl(s){const t=s.chart,e=t.options.animation;t.notifyPlugins("afterRender"),it(e&&e.onComplete,[s],t)}function Bm(s){const t=s.chart,e=t.options.animation;it(e&&e.onProgress,[s],t)}function Ah(s){return $o()&&typeof s=="string"?s=document.getElementById(s):s&&s.length&&(s=s[0]),s&&s.canvas&&(s=s.canvas),s}const Oi={},nl=s=>{const t=Ah(s);return Object.values(Oi).filter(e=>e.canvas===t).pop()};function Hm(s,t,e){const n=Object.keys(s);for(const i of n){const r=+i;if(r>=t){const o=s[i];delete s[i],(e>0||r>t)&&(s[r+e]=o)}}}function Um(s,t,e,n){return!e||s.type==="mouseout"?null:n?t:s}function ii(s,t,e){return s.options.clip?s[e]:t[e]}function qm(s,t){const{xScale:e,yScale:n}=s;return e&&n?{left:ii(e,t,"left"),right:ii(e,t,"right"),top:ii(n,t,"top"),bottom:ii(n,t,"bottom")}:t}class Jt{static register(...t){fe.add(...t),il()}static unregister(...t){fe.remove(...t),il()}constructor(t,e){const n=this.config=new Fm(e),i=Ah(t),r=nl(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||cm(i)),this.platform.updateConfig(n);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=Yd(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Mm,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=hf(u=>this.update(u),o.resizeDelay||0),this._dataChanges=[],Oi[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}pe.listen(this,"complete",sl),pe.listen(this,"progress",Bm),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:i,_aspectRatio:r}=this;return Z(t)?e&&r?r:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return fe}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Oa(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return xa(this.canvas,this.ctx),this}stop(){return pe.stop(this),this}resize(t,e){pe.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,e,r),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Oa(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),it(n.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};tt(e,(n,i)=>{n.id=i})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,i=Object.keys(n).reduce((o,a)=>(o[a]=!1,o),{});let r=[];e&&(r=r.concat(Object.keys(e).map(o=>{const a=e[o],l=Kr(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),tt(r,o=>{const a=o.options,l=a.id,c=Kr(l,a),h=W(a.type,o.dtype);(a.position===void 0||tl(a.position,c)!==tl(o.dposition))&&(a.position=o.dposition),i[l]=!0;let u=null;if(l in n&&n[l].type===h)u=n[l];else{const d=fe.getScale(h);u=new d({id:l,type:h,ctx:this.ctx,chart:this}),n[u.id]=u}u.init(a,t)}),tt(i,(o,a)=>{o||delete n[a]}),tt(n,o=>{Pt.configure(this,o,o.options),Pt.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((i,r)=>i.index-r.index),n>e){for(let i=e;i<n;++i)this._destroyDatasetMeta(i);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(el("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((n,i)=>{e.filter(r=>r===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=e.length;n<i;n++){const r=e[n];let o=this.getDatasetMeta(n);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=a,o.indexAxis=r.indexAxis||Jr(a,this.options),o.order=r.order||0,o.index=n,o.label=""+r.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const l=fe.getController(a),{datasetElementType:c,dataElementType:h}=pt.datasets[a];Object.assign(l,{dataElementType:fe.getElement(h),datasetElementType:c&&fe.getElement(c)}),o.controller=new l(this,n),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){tt(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:u}=this.getDatasetMeta(c),d=!i&&r.indexOf(u)===-1;u.buildOrUpdateElements(d),o=Math.max(+u.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),i||tt(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(el("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){tt(this.scales,t=>{Pt.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!fa(e,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of e){const o=n==="_removeElements"?-r:r;Hm(t,i,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),i=n(0);for(let r=1;r<e;r++)if(!fa(i,n(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Pt.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],tt(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,n=this.data.datasets.length;e<n;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,He(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(pe.has(this)?this.attached&&!pe.running(this)&&pe.start(this):(this.draw(),sl({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:i}=this._resizeBeforeDraw;this._resize(n,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let i,r;for(i=0,r=e.length;i<r;++i){const o=e[i];(!t||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n=t._clip,i=!n.disabled,r=qm(t,this.chartArea),o={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&Ki(e,{left:n.left===!1?0:r.left-n.left,right:n.right===!1?this.width:r.right+n.right,top:n.top===!1?0:r.top-n.top,bottom:n.bottom===!1?this.height:r.bottom+n.bottom}),t.controller.draw(),i&&Xi(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return ke(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,i){const r=Wg.modes[e];return typeof r=="function"?r(this,t,n,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let i=n.filter(r=>r&&r._dataset===e).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=qe(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!e.hidden}setDatasetVisibility(t,e){const n=this.getDatasetMeta(t);n.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const i=n?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);Cn(e)?(r.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(r,{visible:n}),this.update(a=>a.datasetIndex===t?i:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),pe.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),xa(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Oi[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(r,o)=>{e.addEventListener(this,r,o),t[r]=o},i=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};tt(this.options.events,r=>n(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(l,c)=>{e.addEventListener(this,l,c),t[l]=c},i=(l,c)=>{t[l]&&(e.removeEventListener(this,l,c),delete t[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",r),n("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){tt(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},tt(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const i=n?"set":"remove";let r,o,a,l;for(e==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Ii(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,n){const i=this.options.hover,r=(l,c)=>l.filter(h=>!c.some(u=>h.datasetIndex===u.datasetIndex&&h.index===u.index)),o=r(e,t),a=n?t:r(t,e);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;const r=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:i=[],options:r}=this,o=e,a=this._getActiveElements(t,i,n,o),l=Qd(t),c=Um(t,this._lastEvent,n,l);n&&(this._lastEvent=null,it(r.onHover,[t,a,this],this),l&&it(r.onClick,[t,a,this],this));const h=!Ii(a,i);return(h||e)&&(this._active=a,this._updateHoverStyles(a,i,e)),this._lastEvent=c,h}_getActiveElements(t,e,n,i){if(t.type==="mouseout")return[];if(!n)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}}E(Jt,"defaults",pt),E(Jt,"instances",Oi),E(Jt,"overrides",ds),E(Jt,"registry",fe),E(Jt,"version",Vm),E(Jt,"getChart",nl);function il(){return tt(Jt.instances,s=>s._plugins.invalidate())}function Ym(s,t,e){const{startAngle:n,pixelMargin:i,x:r,y:o,outerRadius:a,innerRadius:l}=t;let c=i/a;s.beginPath(),s.arc(r,o,a,n-c,e+c),l>i?(c=i/l,s.arc(r,o,l,e+c,n-c,!0)):s.arc(r,o,i,e+yt,n-yt),s.closePath(),s.clip()}function Gm(s){return Io(s,["outerStart","outerEnd","innerStart","innerEnd"])}function Zm(s,t,e,n){const i=Gm(s.options.borderRadius),r=(e-t)/2,o=Math.min(r,n*t/2),a=l=>{const c=(e-Math.min(r,l))*n/2;return Tt(l,0,Math.min(r,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Tt(i.innerStart,0,o),innerEnd:Tt(i.innerEnd,0,o)}}function ys(s,t,e,n){return{x:e+s*Math.cos(t),y:n+s*Math.sin(t)}}function ji(s,t,e,n,i,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=t,u=Math.max(t.outerRadius+n+e-c,0),d=h>0?h+n+e+c:0;let f=0;const g=i-l;if(n){const N=h>0?h-n:0,I=u>0?u-n:0,$=(N+I)/2,G=$!==0?g*$/($+n):g;f=(g-G)/2}const m=Math.max(.001,g*u-e/lt)/u,p=(g-m)/2,_=l+p+f,b=i-p-f,{outerStart:y,outerEnd:w,innerStart:x,innerEnd:T}=Zm(t,d,u,b-_),O=u-y,M=u-w,C=_+y/O,A=b-w/M,P=d+x,L=d+T,H=_+x/P,z=b-T/L;if(s.beginPath(),r){const N=(C+A)/2;if(s.arc(o,a,u,C,N),s.arc(o,a,u,N,A),w>0){const J=ys(M,A,o,a);s.arc(J.x,J.y,w,A,b+yt)}const I=ys(L,b,o,a);if(s.lineTo(I.x,I.y),T>0){const J=ys(L,z,o,a);s.arc(J.x,J.y,T,b+yt,z+Math.PI)}const $=(b-T/d+(_+x/d))/2;if(s.arc(o,a,d,b-T/d,$,!0),s.arc(o,a,d,$,_+x/d,!0),x>0){const J=ys(P,H,o,a);s.arc(J.x,J.y,x,H+Math.PI,_-yt)}const G=ys(O,_,o,a);if(s.lineTo(G.x,G.y),y>0){const J=ys(O,C,o,a);s.arc(J.x,J.y,y,_-yt,C)}}else{s.moveTo(o,a);const N=Math.cos(C)*u+o,I=Math.sin(C)*u+a;s.lineTo(N,I);const $=Math.cos(A)*u+o,G=Math.sin(A)*u+a;s.lineTo($,G)}s.closePath()}function Jm(s,t,e,n,i){const{fullCircles:r,startAngle:o,circumference:a}=t;let l=t.endAngle;if(r){ji(s,t,e,n,l,i);for(let c=0;c<r;++c)s.fill();isNaN(a)||(l=o+(a%at||at))}return ji(s,t,e,n,l,i),s.fill(),l}function Km(s,t,e,n,i){const{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:h,borderDash:u,borderDashOffset:d}=l,f=l.borderAlign==="inner";if(!c)return;s.setLineDash(u||[]),s.lineDashOffset=d,f?(s.lineWidth=c*2,s.lineJoin=h||"round"):(s.lineWidth=c,s.lineJoin=h||"bevel");let g=t.endAngle;if(r){ji(s,t,e,n,g,i);for(let m=0;m<r;++m)s.stroke();isNaN(a)||(g=o+(a%at||at))}f&&Ym(s,t,g),r||(ji(s,t,e,n,g,i),s.stroke())}class dn extends le{constructor(e){super();E(this,"circumference");E(this,"endAngle");E(this,"fullCircles");E(this,"innerRadius");E(this,"outerRadius");E(this,"pixelMargin");E(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,i){const r=this.getProps(["x","y"],i),{angle:o,distance:a}=Qc(r,{x:e,y:n}),{startAngle:l,endAngle:c,innerRadius:h,outerRadius:u,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),f=(this.options.spacing+this.options.borderWidth)/2,m=W(d,c-l)>=at||Dn(o,l,c),p=we(a,h+f,u+f);return m&&p}getCenterPoint(e){const{x:n,y:i,startAngle:r,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:h}=this.options,u=(r+o)/2,d=(a+l+h+c)/2;return{x:n+Math.cos(u)*d,y:i+Math.sin(u)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:i}=this,r=(n.offset||0)/4,o=(n.spacing||0)/2,a=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=i>at?Math.floor(i/at):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*r,Math.sin(l)*r);const c=1-Math.sin(Math.min(lt,i||0)),h=r*c;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,Jm(e,this,h,o,a),Km(e,this,h,o,a),e.restore()}}E(dn,"id","arc"),E(dn,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),E(dn,"defaultRoutes",{backgroundColor:"backgroundColor"}),E(dn,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function Ph(s,t,e=t){s.lineCap=W(e.borderCapStyle,t.borderCapStyle),s.setLineDash(W(e.borderDash,t.borderDash)),s.lineDashOffset=W(e.borderDashOffset,t.borderDashOffset),s.lineJoin=W(e.borderJoinStyle,t.borderJoinStyle),s.lineWidth=W(e.borderWidth,t.borderWidth),s.strokeStyle=W(e.borderColor,t.borderColor)}function Xm(s,t,e){s.lineTo(e.x,e.y)}function Qm(s){return s.stepped?xf:s.tension||s.cubicInterpolationMode==="monotone"?kf:Xm}function Ih(s,t,e={}){const n=s.length,{start:i=0,end:r=n-1}=e,{start:o,end:a}=t,l=Math.max(i,o),c=Math.min(r,a),h=i<o&&r<o||i>a&&r>a;return{count:n,start:l,loop:t.loop,ilen:c<l&&!h?n+c-l:c-l}}function tp(s,t,e,n){const{points:i,options:r}=t,{count:o,start:a,loop:l,ilen:c}=Ih(i,e,n),h=Qm(r);let{move:u=!0,reverse:d}=n||{},f,g,m;for(f=0;f<=c;++f)g=i[(a+(d?c-f:f))%o],!g.skip&&(u?(s.moveTo(g.x,g.y),u=!1):h(s,m,g,d,r.stepped),m=g);return l&&(g=i[(a+(d?c:0))%o],h(s,m,g,d,r.stepped)),!!l}function ep(s,t,e,n){const i=t.points,{count:r,start:o,ilen:a}=Ih(i,e,n),{move:l=!0,reverse:c}=n||{};let h=0,u=0,d,f,g,m,p,_;const b=w=>(o+(c?a-w:w))%r,y=()=>{m!==p&&(s.lineTo(h,p),s.lineTo(h,m),s.lineTo(h,_))};for(l&&(f=i[b(0)],s.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=i[b(d)],f.skip)continue;const w=f.x,x=f.y,T=w|0;T===g?(x<m?m=x:x>p&&(p=x),h=(u*h+w)/++u):(y(),s.lineTo(w,x),g=T,u=0,m=p=x),_=x}y()}function Xr(s){const t=s.options,e=t.borderDash&&t.borderDash.length;return!s._decimated&&!s._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?ep:tp}function sp(s){return s.stepped?eg:s.tension||s.cubicInterpolationMode==="monotone"?sg:ss}function np(s,t,e,n){let i=t._path;i||(i=t._path=new Path2D,t.path(i,e,n)&&i.closePath()),Ph(s,t.options),s.stroke(i)}function ip(s,t,e,n){const{segments:i,options:r}=t,o=Xr(t);for(const a of i)Ph(s,r,a.style),s.beginPath(),o(s,t,a,{start:e,end:e+n-1})&&s.closePath(),s.stroke()}const rp=typeof Path2D=="function";function op(s,t,e,n){rp&&!t.options.segment?np(s,t,e,n):ip(s,t,e,n)}class Fe extends le{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;Yf(this._points,n,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=lg(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,i=t[e],r=this.points,o=yh(this,{property:e,start:i,end:i});if(!o.length)return;const a=[],l=sp(n);let c,h;for(c=0,h=o.length;c<h;++c){const{start:u,end:d}=o[c],f=r[u],g=r[d];if(f===g){a.push(f);continue}const m=Math.abs((i-f[e])/(g[e]-f[e])),p=l(f,g,m,n.stepped);p[e]=t[e],a.push(p)}return a.length===1?a[0]:a}pathSegment(t,e,n){return Xr(this)(t,this,e,n)}path(t,e,n){const i=this.segments,r=Xr(this);let o=this._loop;e=e||0,n=n||this.points.length-e;for(const a of i)o&=r(t,this,a,{start:e,end:e+n-1});return!!o}draw(t,e,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),op(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}E(Fe,"id","line"),E(Fe,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),E(Fe,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),E(Fe,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function rl(s,t,e,n){const i=s.options,{[e]:r}=s.getProps([e],n);return Math.abs(t-r)<i.radius+i.hitRadius}class Ti extends le{constructor(e){super();E(this,"parsed");E(this,"skip");E(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,i){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(e-o,2)+Math.pow(n-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,n){return rl(this,e,"x",n)}inYRange(e,n){return rl(this,e,"y",n)}getCenterPoint(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const i=n&&e.borderWidth||0;return(n+i)*2}draw(e,n){const i=this.options;this.skip||i.radius<.1||!ke(this,n,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,Gr(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}E(Ti,"id","point"),E(Ti,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),E(Ti,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Lh(s,t){const{x:e,y:n,base:i,width:r,height:o}=s.getProps(["x","y","base","width","height"],t);let a,l,c,h,u;return s.horizontal?(u=o/2,a=Math.min(e,i),l=Math.max(e,i),c=n-u,h=n+u):(u=r/2,a=e-u,l=e+u,c=Math.min(n,i),h=Math.max(n,i)),{left:a,top:c,right:l,bottom:h}}function je(s,t,e,n){return s?0:Tt(t,e,n)}function ap(s,t,e){const n=s.options.borderWidth,i=s.borderSkipped,r=lh(n);return{t:je(i.top,r.top,0,e),r:je(i.right,r.right,0,t),b:je(i.bottom,r.bottom,0,e),l:je(i.left,r.left,0,t)}}function lp(s,t,e){const{enableBorderRadius:n}=s.getProps(["enableBorderRadius"]),i=s.options.borderRadius,r=as(i),o=Math.min(t,e),a=s.borderSkipped,l=n||q(i);return{topLeft:je(!l||a.top||a.left,r.topLeft,0,o),topRight:je(!l||a.top||a.right,r.topRight,0,o),bottomLeft:je(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:je(!l||a.bottom||a.right,r.bottomRight,0,o)}}function cp(s){const t=Lh(s),e=t.right-t.left,n=t.bottom-t.top,i=ap(s,e/2,n/2),r=lp(s,e/2,n/2);return{outer:{x:t.left,y:t.top,w:e,h:n,radius:r},inner:{x:t.left+i.l,y:t.top+i.t,w:e-i.l-i.r,h:n-i.t-i.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,r.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(i.b,i.r))}}}}function vr(s,t,e,n){const i=t===null,r=e===null,a=s&&!(i&&r)&&Lh(s,n);return a&&(i||we(t,a.left,a.right))&&(r||we(e,a.top,a.bottom))}function hp(s){return s.topLeft||s.topRight||s.bottomLeft||s.bottomRight}function up(s,t){s.rect(t.x,t.y,t.w,t.h)}function wr(s,t,e={}){const n=s.x!==e.x?-t:0,i=s.y!==e.y?-t:0,r=(s.x+s.w!==e.x+e.w?t:0)-n,o=(s.y+s.h!==e.y+e.h?t:0)-i;return{x:s.x+n,y:s.y+i,w:s.w+r,h:s.h+o,radius:s.radius}}class Mi extends le{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:o}=cp(this),a=hp(o.radius)?An:up;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,wr(o,e,r)),t.clip(),a(t,wr(r,-e,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,wr(r,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,n){return vr(this,t,e,n)}inXRange(t,e){return vr(this,t,null,e)}inYRange(t,e){return vr(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+i)/2:e,y:r?n:(n+i)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}E(Mi,"id","bar"),E(Mi,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),E(Mi,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var dp=Object.freeze({__proto__:null,ArcElement:dn,BarElement:Mi,LineElement:Fe,PointElement:Ti});const Qr=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],ol=Qr.map(s=>s.replace("rgb(","rgba(").replace(")",", 0.5)"));function Rh(s){return Qr[s%Qr.length]}function Nh(s){return ol[s%ol.length]}function fp(s,t){return s.borderColor=Rh(t),s.backgroundColor=Nh(t),++t}function gp(s,t){return s.backgroundColor=s.data.map(()=>Rh(t++)),t}function mp(s,t){return s.backgroundColor=s.data.map(()=>Nh(t++)),t}function pp(s){let t=0;return(e,n)=>{const i=s.getDatasetMeta(n).controller;i instanceof rs?t=gp(e,t):i instanceof wn?t=mp(e,t):i&&(t=fp(e,t))}}function al(s){let t;for(t in s)if(s[t].borderColor||s[t].backgroundColor)return!0;return!1}function _p(s){return s&&(s.borderColor||s.backgroundColor)}var bp={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(s,t,e){if(!e.enabled)return;const{data:{datasets:n},options:i}=s.config,{elements:r}=i;if(!e.forceOverride&&(al(n)||_p(i)||r&&al(r)))return;const o=pp(s);n.forEach(o)}};function yp(s,t,e,n,i){const r=i.samples||n;if(r>=e)return s.slice(t,t+e);const o=[],a=(e-2)/(r-2);let l=0;const c=t+e-1;let h=t,u,d,f,g,m;for(o[l++]=s[h],u=0;u<r-2;u++){let p=0,_=0,b;const y=Math.floor((u+1)*a)+1+t,w=Math.min(Math.floor((u+2)*a)+1,e)+t,x=w-y;for(b=y;b<w;b++)p+=s[b].x,_+=s[b].y;p/=x,_/=x;const T=Math.floor(u*a)+1+t,O=Math.min(Math.floor((u+1)*a)+1,e)+t,{x:M,y:C}=s[h];for(f=g=-1,b=T;b<O;b++)g=.5*Math.abs((M-p)*(s[b].y-C)-(M-s[b].x)*(_-C)),g>f&&(f=g,d=s[b],m=b);o[l++]=d,h=m}return o[l++]=s[c],o}function vp(s,t,e,n){let i=0,r=0,o,a,l,c,h,u,d,f,g,m;const p=[],_=t+e-1,b=s[t].x,w=s[_].x-b;for(o=t;o<t+e;++o){a=s[o],l=(a.x-b)/w*n,c=a.y;const x=l|0;if(x===h)c<g?(g=c,u=o):c>m&&(m=c,d=o),i=(r*i+a.x)/++r;else{const T=o-1;if(!Z(u)&&!Z(d)){const O=Math.min(u,d),M=Math.max(u,d);O!==f&&O!==T&&p.push({...s[O],x:i}),M!==f&&M!==T&&p.push({...s[M],x:i})}o>0&&T!==f&&p.push(s[T]),p.push(a),h=x,r=0,g=m=c,u=d=f=o}}return p}function $h(s){if(s._decimated){const t=s._data;delete s._decimated,delete s._data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function ll(s){s.data.datasets.forEach(t=>{$h(t)})}function wp(s,t){const e=t.length;let n=0,i;const{iScale:r}=s,{min:o,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(n=Tt(xe(t,r.axis,o).lo,0,e-1)),c?i=Tt(xe(t,r.axis,a).hi+1,n,e)-n:i=e-n,{start:n,count:i}}var xp={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(s,t,e)=>{if(!e.enabled){ll(s);return}const n=s.width;s.data.datasets.forEach((i,r)=>{const{_data:o,indexAxis:a}=i,l=s.getDatasetMeta(r),c=o||i.data;if(hn([a,s.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const h=s.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||s.options.parsing)return;let{start:u,count:d}=wp(l,c);const f=e.threshold||4*n;if(d<=f){$h(i);return}Z(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(m){this._data=m}}));let g;switch(e.algorithm){case"lttb":g=yp(c,u,d,n,e);break;case"min-max":g=vp(c,u,d,n);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}i._decimated=g})},destroy(s){ll(s)}};function kp(s,t,e){const n=s.segments,i=s.points,r=t.points,o=[];for(const a of n){let{start:l,end:c}=a;c=zo(l,c,i);const h=to(e,i[l],i[c],a.loop);if(!t.segments){o.push({source:a,target:h,start:i[l],end:i[c]});continue}const u=yh(t,h);for(const d of u){const f=to(e,r[d.start],r[d.end],d.loop),g=bh(a,i,f);for(const m of g)o.push({source:m,target:d,start:{[e]:cl(h,f,"start",Math.max)},end:{[e]:cl(h,f,"end",Math.min)}})}}return o}function to(s,t,e,n){if(n)return;let i=t[s],r=e[s];return s==="angle"&&(i=Bt(i),r=Bt(r)),{property:s,start:i,end:r}}function Sp(s,t){const{x:e=null,y:n=null}=s||{},i=t.points,r=[];return t.segments.forEach(({start:o,end:a})=>{a=zo(o,a,i);const l=i[o],c=i[a];n!==null?(r.push({x:l.x,y:n}),r.push({x:c.x,y:n})):e!==null&&(r.push({x:e,y:l.y}),r.push({x:e,y:c.y}))}),r}function zo(s,t,e){for(;t>s;t--){const n=e[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function cl(s,t,e,n){return s&&t?n(s[e],t[e]):s?s[e]:t?t[e]:0}function Fh(s,t){let e=[],n=!1;return ut(s)?(n=!0,e=s):e=Sp(s,t),e.length?new Fe({points:e,options:{tension:0},_loop:n,_fullLoop:n}):null}function hl(s){return s&&s.fill!==!1}function Op(s,t,e){let i=s[t].fill;const r=[t];let o;if(!e)return i;for(;i!==!1&&r.indexOf(i)===-1;){if(!mt(i))return i;if(o=s[i],!o)return!1;if(o.visible)return i;r.push(i),i=o.fill}return!1}function Tp(s,t,e){const n=Dp(s);if(q(n))return isNaN(n.value)?!1:n;let i=parseFloat(n);return mt(i)&&Math.floor(i)===i?Mp(n[0],t,i,e):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function Mp(s,t,e,n){return(s==="-"||s==="+")&&(e=t+e),e===t||e<0||e>=n?!1:e}function Ep(s,t){let e=null;return s==="start"?e=t.bottom:s==="end"?e=t.top:q(s)?e=t.getPixelForValue(s.value):t.getBasePixel&&(e=t.getBasePixel()),e}function Cp(s,t,e){let n;return s==="start"?n=e:s==="end"?n=t.options.reverse?t.min:t.max:q(s)?n=s.value:n=t.getBaseValue(),n}function Dp(s){const t=s.options,e=t.fill;let n=W(e&&e.target,e);return n===void 0&&(n=!!t.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function Ap(s){const{scale:t,index:e,line:n}=s,i=[],r=n.segments,o=n.points,a=Pp(t,e);a.push(Fh({x:null,y:t.bottom},n));for(let l=0;l<r.length;l++){const c=r[l];for(let h=c.start;h<=c.end;h++)Ip(i,o[h],a)}return new Fe({points:i,options:{}})}function Pp(s,t){const e=[],n=s.getMatchingVisibleMetas("line");for(let i=0;i<n.length;i++){const r=n[i];if(r.index===t)break;r.hidden||e.unshift(r.dataset)}return e}function Ip(s,t,e){const n=[];for(let i=0;i<e.length;i++){const r=e[i],{first:o,last:a,point:l}=Lp(r,t,"x");if(!(!l||o&&a)){if(o)n.unshift(l);else if(s.push(l),!a)break}}s.push(...n)}function Lp(s,t,e){const n=s.interpolate(t,e);if(!n)return{};const i=n[e],r=s.segments,o=s.points;let a=!1,l=!1;for(let c=0;c<r.length;c++){const h=r[c],u=o[h.start][e],d=o[h.end][e];if(we(i,u,d)){a=i===u,l=i===d;break}}return{first:a,last:l,point:n}}class jh{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:i,y:r,radius:o}=this;return e=e||{start:0,end:at},t.arc(i,r,o,e.end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:i}=this,r=t.angle;return{x:e+Math.cos(r)*i,y:n+Math.sin(r)*i,angle:r}}}function Rp(s){const{chart:t,fill:e,line:n}=s;if(mt(e))return Np(t,e);if(e==="stack")return Ap(s);if(e==="shape")return!0;const i=$p(s);return i instanceof jh?i:Fh(i,n)}function Np(s,t){const e=s.getDatasetMeta(t);return e&&s.isDatasetVisible(t)?e.dataset:null}function $p(s){return(s.scale||{}).getPointPositionForValue?jp(s):Fp(s)}function Fp(s){const{scale:t={},fill:e}=s,n=Ep(e,t);if(mt(n)){const i=t.isHorizontal();return{x:i?n:null,y:i?null:n}}return null}function jp(s){const{scale:t,fill:e}=s,n=t.options,i=t.getLabels().length,r=n.reverse?t.max:t.min,o=Cp(e,t,r),a=[];if(n.grid.circular){const l=t.getPointPositionForValue(0,r);return new jh({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(t.getPointPositionForValue(l,o));return a}function xr(s,t,e){const n=Rp(t),{line:i,scale:r,axis:o}=t,a=i.options,l=a.fill,c=a.backgroundColor,{above:h=c,below:u=c}=l||{};n&&i.points.length&&(Ki(s,e),zp(s,{line:i,target:n,above:h,below:u,area:e,scale:r,axis:o}),Xi(s))}function zp(s,t){const{line:e,target:n,above:i,below:r,area:o,scale:a}=t,l=e._loop?"angle":t.axis;s.save(),l==="x"&&r!==i&&(ul(s,n,o.top),dl(s,{line:e,target:n,color:i,scale:a,property:l}),s.restore(),s.save(),ul(s,n,o.bottom)),dl(s,{line:e,target:n,color:r,scale:a,property:l}),s.restore()}function ul(s,t,e){const{segments:n,points:i}=t;let r=!0,o=!1;s.beginPath();for(const a of n){const{start:l,end:c}=a,h=i[l],u=i[zo(l,c,i)];r?(s.moveTo(h.x,h.y),r=!1):(s.lineTo(h.x,e),s.lineTo(h.x,h.y)),o=!!t.pathSegment(s,a,{move:o}),o?s.closePath():s.lineTo(u.x,e)}s.lineTo(t.first().x,e),s.closePath(),s.clip()}function dl(s,t){const{line:e,target:n,property:i,color:r,scale:o}=t,a=kp(e,n,i);for(const{source:l,target:c,start:h,end:u}of a){const{style:{backgroundColor:d=r}={}}=l,f=n!==!0;s.save(),s.fillStyle=d,Vp(s,o,f&&to(i,h,u)),s.beginPath();const g=!!e.pathSegment(s,l);let m;if(f){g?s.closePath():fl(s,n,u,i);const p=!!n.pathSegment(s,c,{move:g,reverse:!0});m=g&&p,m||fl(s,n,h,i)}s.closePath(),s.fill(m?"evenodd":"nonzero"),s.restore()}}function Vp(s,t,e){const{top:n,bottom:i}=t.chart.chartArea,{property:r,start:o,end:a}=e||{};r==="x"&&(s.beginPath(),s.rect(o,n,a-o,i-n),s.clip())}function fl(s,t,e,n){const i=t.interpolate(e,n);i&&s.lineTo(i.x,i.y)}var Wp={id:"filler",afterDatasetsUpdate(s,t,e){const n=(s.data.datasets||[]).length,i=[];let r,o,a,l;for(o=0;o<n;++o)r=s.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof Fe&&(l={visible:s.isDatasetVisible(o),index:o,fill:Tp(a,o,n),chart:s,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,i.push(l);for(o=0;o<n;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=Op(i,o,e.propagate))},beforeDraw(s,t,e){const n=e.drawTime==="beforeDraw",i=s.getSortedVisibleDatasetMetas(),r=s.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),n&&a.fill&&xr(s.ctx,a,r))}},beforeDatasetsDraw(s,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const n=s.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i){const r=n[i].$filler;hl(r)&&xr(s.ctx,r,s.chartArea)}},beforeDatasetDraw(s,t,e){const n=t.meta.$filler;!hl(n)||e.drawTime!=="beforeDatasetDraw"||xr(s.ctx,n,s.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const gl=(s,t)=>{let{boxHeight:e=t,boxWidth:n=t}=s;return s.usePointStyle&&(e=Math.min(e,t),n=s.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:e,itemHeight:Math.max(t,e)}},Bp=(s,t)=>s!==null&&t!==null&&s.datasetIndex===t.datasetIndex&&s.index===t.index;class ml extends le{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=it(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(n=>t.filter(n,this.chart.data))),t.sort&&(e=e.sort((n,i)=>t.sort(n,i,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,i=St(n.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=gl(n,r);let c,h;e.font=i.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,r,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=i+a;let u=t;r.textAlign="left",r.textBaseline="middle";let d=-1,f=-h;return this.legendItems.forEach((g,m)=>{const p=n+e/2+r.measureText(g.text).width;(m===0||c[c.length-1]+p+2*a>o)&&(u+=h,c[c.length-(m>0?0:1)]=0,f+=h,d++),l[m]={left:0,top:f,row:d,width:p,height:i},c[c.length-1]+=p+a}),u}_fitCols(t,e,n,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-t;let u=a,d=0,f=0,g=0,m=0;return this.legendItems.forEach((p,_)=>{const{itemWidth:b,itemHeight:y}=Hp(n,e,r,p,i);_>0&&f+y+2*a>h&&(u+=d+a,c.push({width:d,height:f}),g+=d+a,m++,d=f=0),l[_]={left:g,top:f,col:m,width:b,height:y},d=Math.max(d,b),f+=y+a}),u+=d,c.push({width:d,height:f}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:i},rtl:r}}=this,o=Is(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ct(n,this.left+i,this.right-this.lineWidths[a]);for(const c of e)a!==c.row&&(a=c.row,l=Ct(n,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+t+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Ct(n,this.top+t+i,this.bottom-this.columnSizes[a].height);for(const c of e)c.col!==a&&(a=c.col,l=Ct(n,this.top+t+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Ki(t,this),this._draw(),Xi(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:i}=this,{align:r,labels:o}=t,a=pt.color,l=Is(t.rtl,this.left,this.width),c=St(o.font),{padding:h}=o,u=c.size,d=u/2;let f;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:g,boxHeight:m,itemHeight:p}=gl(o,u),_=function(T,O,M){if(isNaN(g)||g<=0||isNaN(m)||m<0)return;i.save();const C=W(M.lineWidth,1);if(i.fillStyle=W(M.fillStyle,a),i.lineCap=W(M.lineCap,"butt"),i.lineDashOffset=W(M.lineDashOffset,0),i.lineJoin=W(M.lineJoin,"miter"),i.lineWidth=C,i.strokeStyle=W(M.strokeStyle,a),i.setLineDash(W(M.lineDash,[])),o.usePointStyle){const A={radius:m*Math.SQRT2/2,pointStyle:M.pointStyle,rotation:M.rotation,borderWidth:C},P=l.xPlus(T,g/2),L=O+d;ah(i,A,P,L,o.pointStyleWidth&&g)}else{const A=O+Math.max((u-m)/2,0),P=l.leftForLtr(T,g),L=as(M.borderRadius);i.beginPath(),Object.values(L).some(H=>H!==0)?An(i,{x:P,y:A,w:g,h:m,radius:L}):i.rect(P,A,g,m),i.fill(),C!==0&&i.stroke()}i.restore()},b=function(T,O,M){fs(i,M.text,T,O+p/2,c,{strikethrough:M.hidden,textAlign:l.textAlign(M.textAlign)})},y=this.isHorizontal(),w=this._computeTitleHeight();y?f={x:Ct(r,this.left+h,this.right-n[0]),y:this.top+h+w,line:0}:f={x:this.left+h,y:Ct(r,this.top+w+h,this.bottom-e[0].height),line:0},mh(this.ctx,t.textDirection);const x=p+h;this.legendItems.forEach((T,O)=>{i.strokeStyle=T.fontColor,i.fillStyle=T.fontColor;const M=i.measureText(T.text).width,C=l.textAlign(T.textAlign||(T.textAlign=o.textAlign)),A=g+d+M;let P=f.x,L=f.y;l.setWidth(this.width),y?O>0&&P+A+h>this.right&&(L=f.y+=x,f.line++,P=f.x=Ct(r,this.left+h,this.right-n[f.line])):O>0&&L+x>this.bottom&&(P=f.x=P+e[f.line].width+h,f.line++,L=f.y=Ct(r,this.top+w+h,this.bottom-e[f.line].height));const H=l.x(P);if(_(H,L,T),P=uf(C,P+g+d,y?P+A:this.right,t.rtl),b(l.x(P),L,T),y)f.x+=A+h;else if(typeof T.text!="string"){const z=c.lineHeight;f.y+=zh(T,z)+h}else f.y+=x}),ph(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=St(e.font),i=It(e.padding);if(!e.display)return;const r=Is(t.rtl,this.left,this.width),o=this.ctx,a=e.position,l=n.size/2,c=i.top+l;let h,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),h=this.top+c,u=Ct(t.align,u,this.right-d);else{const g=this.columnSizes.reduce((m,p)=>Math.max(m,p.height),0);h=c+Ct(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}const f=Ct(a,u,u+d);o.textAlign=r.textAlign(Ao(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=n.string,fs(o,e.text,f,h,n)}_computeTitleHeight(){const t=this.options.title,e=St(t.font),n=It(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,i,r;if(we(t,this.left,this.right)&&we(e,this.top,this.bottom)){for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],we(t,i.left,i.left+i.width)&&we(e,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(t){const e=this.options;if(!Yp(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,r=Bp(i,n);i&&!r&&it(e.onLeave,[t,i,this],this),this._hoveredItem=n,n&&!r&&it(e.onHover,[t,n,this],this)}else n&&it(e.onClick,[t,n,this],this)}}function Hp(s,t,e,n,i){const r=Up(n,s,t,e),o=qp(i,n,t.lineHeight);return{itemWidth:r,itemHeight:o}}function Up(s,t,e,n){let i=s.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),t+e.size/2+n.measureText(i).width}function qp(s,t,e){let n=s;return typeof t.text!="string"&&(n=zh(t,e)),n}function zh(s,t){const e=s.text?s.text.length:0;return t*e}function Yp(s,t){return!!((s==="mousemove"||s==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(s==="click"||s==="mouseup"))}var Gp={id:"legend",_element:ml,start(s,t,e){const n=s.legend=new ml({ctx:s.ctx,options:e,chart:s});Pt.configure(s,n,e),Pt.addBox(s,n)},stop(s){Pt.removeBox(s,s.legend),delete s.legend},beforeUpdate(s,t,e){const n=s.legend;Pt.configure(s,n,e),n.options=e},afterUpdate(s){const t=s.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(s,t){t.replay||s.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(s,t,e){const n=t.datasetIndex,i=e.chart;i.isDatasetVisible(n)?(i.hide(n),t.hidden=!0):(i.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:s=>s.chart.options.color,boxWidth:40,padding:10,generateLabels(s){const t=s.data.datasets,{labels:{usePointStyle:e,pointStyle:n,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=s.legend.options;return s._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(e?0:void 0),h=It(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:n||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:s=>s.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:s=>!s.startsWith("on"),labels:{_scriptable:s=>!["generateLabels","filter","sort"].includes(s)}}};class Vo extends le{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const i=ut(n.text)?n.text.length:1;this._padding=It(n.padding);const r=i*St(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:n,bottom:i,right:r,options:o}=this,a=o.align;let l=0,c,h,u;return this.isHorizontal()?(h=Ct(a,n,r),u=e+t,c=r-n):(o.position==="left"?(h=n+t,u=Ct(a,i,e),l=lt*-.5):(h=r-t,u=Ct(a,e,i),l=lt*.5),c=i-e),{titleX:h,titleY:u,maxWidth:c,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=St(e.font),r=n.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);fs(t,e.text,0,0,n,{color:e.color,maxWidth:l,rotation:c,textAlign:Ao(e.align),textBaseline:"middle",translation:[o,a]})}}function Zp(s,t){const e=new Vo({ctx:s.ctx,options:t,chart:s});Pt.configure(s,e,t),Pt.addBox(s,e),s.titleBlock=e}var Jp={id:"title",_element:Vo,start(s,t,e){Zp(s,e)},stop(s){const t=s.titleBlock;Pt.removeBox(s,t),delete s.titleBlock},beforeUpdate(s,t,e){const n=s.titleBlock;Pt.configure(s,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ri=new WeakMap;var Kp={id:"subtitle",start(s,t,e){const n=new Vo({ctx:s.ctx,options:e,chart:s});Pt.configure(s,n,e),Pt.addBox(s,n),ri.set(s,n)},stop(s){Pt.removeBox(s,ri.get(s)),ri.delete(s)},beforeUpdate(s,t,e){const n=ri.get(s);Pt.configure(s,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const fn={average(s){if(!s.length)return!1;let t,e,n=new Set,i=0,r=0;for(t=0,e=s.length;t<e;++t){const a=s[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();n.add(l.x),i+=l.y,++r}}return{x:[...n].reduce((a,l)=>a+l)/n.size,y:i/r}},nearest(s,t){if(!s.length)return!1;let e=t.x,n=t.y,i=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=s.length;r<o;++r){const l=s[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=qr(t,c);h<i&&(i=h,a=l)}}if(a){const l=a.tooltipPosition();e=l.x,n=l.y}return{x:e,y:n}}};function de(s,t){return t&&(ut(t)?Array.prototype.push.apply(s,t):s.push(t)),s}function _e(s){return(typeof s=="string"||s instanceof String)&&s.indexOf(`
`)>-1?s.split(`
`):s}function Xp(s,t){const{element:e,datasetIndex:n,index:i}=t,r=s.getDatasetMeta(n).controller,{label:o,value:a}=r.getLabelAndValue(i);return{chart:s,label:o,parsed:r.getParsed(i),raw:s.data.datasets[n].data[i],formattedValue:a,dataset:r.getDataset(),dataIndex:i,datasetIndex:n,element:e}}function pl(s,t){const e=s.chart.ctx,{body:n,footer:i,title:r}=s,{boxWidth:o,boxHeight:a}=t,l=St(t.bodyFont),c=St(t.titleFont),h=St(t.footerFont),u=r.length,d=i.length,f=n.length,g=It(t.padding);let m=g.height,p=0,_=n.reduce((w,x)=>w+x.before.length+x.lines.length+x.after.length,0);if(_+=s.beforeBody.length+s.afterBody.length,u&&(m+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),_){const w=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=f*w+(_-f)*l.lineHeight+(_-1)*t.bodySpacing}d&&(m+=t.footerMarginTop+d*h.lineHeight+(d-1)*t.footerSpacing);let b=0;const y=function(w){p=Math.max(p,e.measureText(w).width+b)};return e.save(),e.font=c.string,tt(s.title,y),e.font=l.string,tt(s.beforeBody.concat(s.afterBody),y),b=t.displayColors?o+2+t.boxPadding:0,tt(n,w=>{tt(w.before,y),tt(w.lines,y),tt(w.after,y)}),b=0,e.font=h.string,tt(s.footer,y),e.restore(),p+=g.width,{width:p,height:m}}function Qp(s,t){const{y:e,height:n}=t;return e<n/2?"top":e>s.height-n/2?"bottom":"center"}function t_(s,t,e,n){const{x:i,width:r}=n,o=e.caretSize+e.caretPadding;if(s==="left"&&i+r+o>t.width||s==="right"&&i-r-o<0)return!0}function e_(s,t,e,n){const{x:i,width:r}=e,{width:o,chartArea:{left:a,right:l}}=s;let c="center";return n==="center"?c=i<=(a+l)/2?"left":"right":i<=r/2?c="left":i>=o-r/2&&(c="right"),t_(c,s,t,e)&&(c="center"),c}function _l(s,t,e){const n=e.yAlign||t.yAlign||Qp(s,e);return{xAlign:e.xAlign||t.xAlign||e_(s,t,e,n),yAlign:n}}function s_(s,t){let{x:e,width:n}=s;return t==="right"?e-=n:t==="center"&&(e-=n/2),e}function n_(s,t,e){let{y:n,height:i}=s;return t==="top"?n+=e:t==="bottom"?n-=i+e:n-=i/2,n}function bl(s,t,e,n){const{caretSize:i,caretPadding:r,cornerRadius:o}=s,{xAlign:a,yAlign:l}=e,c=i+r,{topLeft:h,topRight:u,bottomLeft:d,bottomRight:f}=as(o);let g=s_(t,a);const m=n_(t,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(h,d)+i:a==="right"&&(g+=Math.max(u,f)+i),{x:Tt(g,0,n.width-t.width),y:Tt(m,0,n.height-t.height)}}function oi(s,t,e){const n=It(e.padding);return t==="center"?s.x+s.width/2:t==="right"?s.x+s.width-n.right:s.x+n.left}function yl(s){return de([],_e(s))}function i_(s,t,e){return qe(s,{tooltip:t,tooltipItems:e,type:"tooltip"})}function vl(s,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?s.override(e):s}const Vh={beforeTitle:me,title(s){if(s.length>0){const t=s[0],e=t.chart.data.labels,n=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return e[t.dataIndex]}return""},afterTitle:me,beforeBody:me,beforeLabel:me,label(s){if(this&&this.options&&this.options.mode==="dataset")return s.label+": "+s.formattedValue||s.formattedValue;let t=s.dataset.label||"";t&&(t+=": ");const e=s.formattedValue;return Z(e)||(t+=e),t},labelColor(s){const e=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(s){const e=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:me,afterBody:me,beforeFooter:me,footer:me,afterFooter:me};function $t(s,t,e,n){const i=s[t].call(e,n);return typeof i>"u"?Vh[t].call(e,n):i}class eo extends le{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&e.options.animation&&n.animations,r=new vh(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=i_(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:n}=e,i=$t(n,"beforeTitle",this,t),r=$t(n,"title",this,t),o=$t(n,"afterTitle",this,t);let a=[];return a=de(a,_e(i)),a=de(a,_e(r)),a=de(a,_e(o)),a}getBeforeBody(t,e){return yl($t(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,i=[];return tt(t,r=>{const o={before:[],lines:[],after:[]},a=vl(n,r);de(o.before,_e($t(a,"beforeLabel",this,r))),de(o.lines,$t(a,"label",this,r)),de(o.after,_e($t(a,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(t,e){return yl($t(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,i=$t(n,"beforeFooter",this,t),r=$t(n,"footer",this,t),o=$t(n,"afterFooter",this,t);let a=[];return a=de(a,_e(i)),a=de(a,_e(r)),a=de(a,_e(o)),a}_createItems(t){const e=this._active,n=this.chart.data,i=[],r=[],o=[];let a=[],l,c;for(l=0,c=e.length;l<c;++l)a.push(Xp(this.chart,e[l]));return t.filter&&(a=a.filter((h,u,d)=>t.filter(h,u,d,n))),t.itemSort&&(a=a.sort((h,u)=>t.itemSort(h,u,n))),tt(a,h=>{const u=vl(t.callbacks,h);i.push($t(u,"labelColor",this,h)),r.push($t(u,"labelPointStyle",this,h)),o.push($t(u,"labelTextColor",this,h))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,e){const n=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const a=fn[n.position].call(this,i,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const l=this._size=pl(this,n),c=Object.assign({},a,l),h=_l(this.chart,n,c),u=bl(n,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,r={opacity:1,x:u.x,y:u.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,i){const r=this.getCaretPosition(t,n,i);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,n){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=n,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:u}=as(a),{x:d,y:f}=t,{width:g,height:m}=e;let p,_,b,y,w,x;return r==="center"?(w=f+m/2,i==="left"?(p=d,_=p-o,y=w+o,x=w-o):(p=d+g,_=p+o,y=w-o,x=w+o),b=p):(i==="left"?_=d+Math.max(l,h)+o:i==="right"?_=d+g-Math.max(c,u)-o:_=this.caretX,r==="top"?(y=f,w=y-o,p=_-o,b=_+o):(y=f+m,w=y+o,p=_+o,b=_-o),x=y),{x1:p,x2:_,x3:b,y1:y,y2:w,y3:x}}drawTitle(t,e,n){const i=this.title,r=i.length;let o,a,l;if(r){const c=Is(n.rtl,this.x,this.width);for(t.x=oi(this,n.titleAlign,n),e.textAlign=c.textAlign(n.titleAlign),e.textBaseline="middle",o=St(n.titleFont),a=n.titleSpacing,e.fillStyle=n.titleColor,e.font=o.string,l=0;l<r;++l)e.fillText(i[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,e,n,i,r){const o=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:c}=r,h=St(r.bodyFont),u=oi(this,"left",r),d=i.x(u),f=l<h.lineHeight?(h.lineHeight-l)/2:0,g=e.y+f;if(r.usePointStyle){const m={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},p=i.leftForLtr(d,c)+c/2,_=g+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Gr(t,m,p,_),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Gr(t,m,p,_)}else{t.lineWidth=q(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const m=i.leftForLtr(d,c),p=i.leftForLtr(i.xPlus(d,1),c-2),_=as(o.borderRadius);Object.values(_).some(b=>b!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,An(t,{x:m,y:g,w:c,h:l,radius:_}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),An(t,{x:p,y:g+1,w:c-2,h:l-2,radius:_}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(m,g,c,l),t.strokeRect(m,g,c,l),t.fillStyle=o.backgroundColor,t.fillRect(p,g+1,c-2,l-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=n,u=St(n.bodyFont);let d=u.lineHeight,f=0;const g=Is(n.rtl,this.x,this.width),m=function(M){e.fillText(M,g.x(t.x+f),t.y+d/2),t.y+=d+r},p=g.textAlign(o);let _,b,y,w,x,T,O;for(e.textAlign=o,e.textBaseline="middle",e.font=u.string,t.x=oi(this,p,n),e.fillStyle=n.bodyColor,tt(this.beforeBody,m),f=a&&p!=="right"?o==="center"?c/2+h:c+2+h:0,w=0,T=i.length;w<T;++w){for(_=i[w],b=this.labelTextColors[w],e.fillStyle=b,tt(_.before,m),y=_.lines,a&&y.length&&(this._drawColorBox(e,t,w,g,n),d=Math.max(u.lineHeight,l)),x=0,O=y.length;x<O;++x)m(y[x]),d=u.lineHeight;tt(_.after,m)}f=0,d=u.lineHeight,tt(this.afterBody,m),t.y-=r}drawFooter(t,e,n){const i=this.footer,r=i.length;let o,a;if(r){const l=Is(n.rtl,this.x,this.width);for(t.x=oi(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=l.textAlign(n.footerAlign),e.textBaseline="middle",o=St(n.footerFont),e.fillStyle=n.footerColor,e.font=o.string,a=0;a<r;++a)e.fillText(i[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+n.footerSpacing}}drawBackground(t,e,n,i){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:h}=n,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:g}=as(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(a+u,l),o==="top"&&this.drawCaret(t,e,n,i),e.lineTo(a+c-d,l),e.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&r==="right"&&this.drawCaret(t,e,n,i),e.lineTo(a+c,l+h-g),e.quadraticCurveTo(a+c,l+h,a+c-g,l+h),o==="bottom"&&this.drawCaret(t,e,n,i),e.lineTo(a+f,l+h),e.quadraticCurveTo(a,l+h,a,l+h-f),o==="center"&&r==="left"&&this.drawCaret(t,e,n,i),e.lineTo(a,l+u),e.quadraticCurveTo(a,l,a+u,l),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const o=fn[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=pl(this,t),l=Object.assign({},o,this._size),c=_l(e,t,l),h=bl(t,l,c,e);(i._to!==h.x||r._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=It(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(r,t,i,e),mh(t,e.textDirection),r.y+=o.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),ph(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,i=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!Ii(n,i),o=this._positionChanged(i,e);(r||o)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(t,r,e,n),a=this._positionChanged(o,t),l=e||!Ii(o,r)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,n,i){const r=this.options;if(t.type==="mouseout")return[];if(!i)return e.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,n);return r.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:n,caretY:i,options:r}=this,o=fn[r.position].call(this,t,e);return o!==!1&&(n!==o.x||i!==o.y)}}E(eo,"positioners",fn);var r_={id:"tooltip",_element:eo,positioners:fn,afterInit(s,t,e){e&&(s.tooltip=new eo({chart:s,options:e}))},beforeUpdate(s,t,e){s.tooltip&&s.tooltip.initialize(e)},reset(s,t,e){s.tooltip&&s.tooltip.initialize(e)},afterDraw(s){const t=s.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(s.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(s.ctx),s.notifyPlugins("afterTooltipDraw",e)}},afterEvent(s,t){if(s.tooltip){const e=t.replay;s.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(s,t)=>t.bodyFont.size,boxWidth:(s,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Vh},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:s=>s!=="filter"&&s!=="itemSort"&&s!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},o_=Object.freeze({__proto__:null,Colors:bp,Decimation:xp,Filler:Wp,Legend:Gp,SubTitle:Kp,Title:Jp,Tooltip:r_});const a_=(s,t,e,n)=>(typeof t=="string"?(e=s.push(t)-1,n.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function l_(s,t,e,n){const i=s.indexOf(t);if(i===-1)return a_(s,t,e,n);const r=s.lastIndexOf(t);return i!==r?e:i}const c_=(s,t)=>s===null?null:Tt(Math.round(s),0,t);function wl(s){const t=this.getLabels();return s>=0&&s<t.length?t[s]:s}class so extends gs{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const n=this.getLabels();for(const{index:i,label:r}of e)n[i]===r&&n.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Z(t))return null;const n=this.getLabels();return e=isFinite(e)&&n[e]===t?e:l_(n,t,W(e,t),this._addedLabels),c_(e,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(n=0),e||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=t===0&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=t;o<=e;o++)i.push({value:o});return i}getLabelForValue(t){return wl.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}E(so,"id","category"),E(so,"defaults",{ticks:{callback:wl}});function h_(s,t){const e=[],{bounds:i,step:r,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:u,includeBounds:d}=s,f=r||1,g=h-1,{min:m,max:p}=t,_=!Z(o),b=!Z(a),y=!Z(c),w=(p-m)/(u+1);let x=ma((p-m)/g/f)*f,T,O,M,C;if(x<1e-14&&!_&&!b)return[{value:m},{value:p}];C=Math.ceil(p/x)-Math.floor(m/x),C>g&&(x=ma(C*x/g/f)*f),Z(l)||(T=Math.pow(10,l),x=Math.ceil(x*T)/T),i==="ticks"?(O=Math.floor(m/x)*x,M=Math.ceil(p/x)*x):(O=m,M=p),_&&b&&r&&nf((a-o)/r,x/1e3)?(C=Math.round(Math.min((a-o)/x,h)),x=(a-o)/C,O=o,M=a):y?(O=_?o:O,M=b?a:M,C=c-1,x=(M-O)/C):(C=(M-O)/x,bn(C,Math.round(C),x/1e3)?C=Math.round(C):C=Math.ceil(C));const A=Math.max(pa(x),pa(O));T=Math.pow(10,Z(l)?A:l),O=Math.round(O*T)/T,M=Math.round(M*T)/T;let P=0;for(_&&(d&&O!==o?(e.push({value:o}),O<o&&P++,bn(Math.round((O+P*x)*T)/T,o,xl(o,w,s))&&P++):O<o&&P++);P<C;++P){const L=Math.round((O+P*x)*T)/T;if(b&&L>a)break;e.push({value:L})}return b&&d&&M!==a?e.length&&bn(e[e.length-1].value,a,xl(a,w,s))?e[e.length-1].value=a:e.push({value:a}):(!b||M===a)&&e.push({value:M}),e}function xl(s,t,{horizontal:e,minRotation:n}){const i=re(n),r=(e?Math.sin(i):Math.cos(i))||.001,o=.75*t*(""+s).length;return Math.min(t/r,o)}class zi extends gs{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Z(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const o=l=>i=e?i:l,a=l=>r=n?r:l;if(t){const l=ge(i),c=ge(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(i-l)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:n}=t,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),e=e||11),e&&(i=Math.min(e,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},r=this._range||this,o=h_(i,r);return t.bounds==="ticks"&&Xc(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-e)/Math.max(t.length-1,1)/2;e-=i,n+=i}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return jn(t,this.chart.options.locale,this.options.ticks.format)}}class no extends zi{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=mt(t)?t:0,this.max=mt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=re(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}E(no,"id","linear"),E(no,"defaults",{ticks:{callback:Ji.formatters.numeric}});const In=s=>Math.floor($e(s)),Je=(s,t)=>Math.pow(10,In(s)+t);function kl(s){return s/Math.pow(10,In(s))===1}function Sl(s,t,e){const n=Math.pow(10,e),i=Math.floor(s/n);return Math.ceil(t/n)-i}function u_(s,t){const e=t-s;let n=In(e);for(;Sl(s,t,n)>10;)n++;for(;Sl(s,t,n)<10;)n--;return Math.min(n,In(s))}function d_(s,{min:t,max:e}){t=Wt(s.min,t);const n=[],i=In(t);let r=u_(t,e),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=i>r?Math.pow(10,i):0,c=Math.round((t-l)*o)/o,h=Math.floor((t-l)/a/10)*a*10;let u=Math.floor((c-h)/Math.pow(10,r)),d=Wt(s.min,Math.round((l+h+u*Math.pow(10,r))*o)/o);for(;d<e;)n.push({value:d,major:kl(d),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(r++,u=2,o=r>=0?1:o),d=Math.round((l+h+u*Math.pow(10,r))*o)/o;const f=Wt(s.max,d);return n.push({value:f,major:kl(f),significand:u}),n}class io extends gs{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=zi.prototype.parse.apply(this,[t,e]);if(n===0){this._zero=!0;return}return mt(n)&&n>0?n:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=mt(t)?Math.max(0,t):null,this.max=mt(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!mt(this._userMin)&&(this.min=t===Je(this.min,0)?Je(this.min,-1):Je(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,i=this.max;const r=a=>n=t?n:a,o=a=>i=e?i:a;n===i&&(n<=0?(r(1),o(10)):(r(Je(n,-1)),o(Je(i,1)))),n<=0&&r(Je(i,-1)),i<=0&&o(Je(n,1)),this.min=n,this.max=i}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},n=d_(e,this);return t.bounds==="ticks"&&Xc(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(t){return t===void 0?"0":jn(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=$e(t),this._valueRange=$e(this.max)-$e(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:($e(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}E(io,"id","logarithmic"),E(io,"defaults",{ticks:{callback:Ji.formatters.logarithmic,major:{enabled:!0}}});function ro(s){const t=s.ticks;if(t.display&&s.display){const e=It(t.backdropPadding);return W(t.font&&t.font.size,pt.font.size)+e.height}return 0}function f_(s,t,e){return e=ut(e)?e:[e],{w:wf(s,t.string,e),h:e.length*t.lineHeight}}function Ol(s,t,e,n,i){return s===n||s===i?{start:t-e/2,end:t+e/2}:s<n||s>i?{start:t-e,end:t}:{start:t,end:t+e}}function g_(s){const t={l:s.left+s._padding.left,r:s.right-s._padding.right,t:s.top+s._padding.top,b:s.bottom-s._padding.bottom},e=Object.assign({},t),n=[],i=[],r=s._pointLabels.length,o=s.options.pointLabels,a=o.centerPointLabels?lt/r:0;for(let l=0;l<r;l++){const c=o.setContext(s.getPointLabelContext(l));i[l]=c.padding;const h=s.getPointPosition(l,s.drawingArea+i[l],a),u=St(c.font),d=f_(s.ctx,u,s._pointLabels[l]);n[l]=d;const f=Bt(s.getIndexAngle(l)+a),g=Math.round(Co(f)),m=Ol(g,h.x,d.w,0,180),p=Ol(g,h.y,d.h,90,270);m_(e,t,f,m,p)}s.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),s._pointLabelItems=b_(s,n,i)}function m_(s,t,e,n,i){const r=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let a=0,l=0;n.start<t.l?(a=(t.l-n.start)/r,s.l=Math.min(s.l,t.l-a)):n.end>t.r&&(a=(n.end-t.r)/r,s.r=Math.max(s.r,t.r+a)),i.start<t.t?(l=(t.t-i.start)/o,s.t=Math.min(s.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/o,s.b=Math.max(s.b,t.b+l))}function p_(s,t,e){const n=s.drawingArea,{extra:i,additionalAngle:r,padding:o,size:a}=e,l=s.getPointPosition(t,n+i+o,r),c=Math.round(Co(Bt(l.angle+yt))),h=w_(l.y,a.h,c),u=y_(c),d=v_(l.x,a.w,u);return{visible:!0,x:l.x,y:h,textAlign:u,left:d,top:h,right:d+a.w,bottom:h+a.h}}function __(s,t){if(!t)return!0;const{left:e,top:n,right:i,bottom:r}=s;return!(ke({x:e,y:n},t)||ke({x:e,y:r},t)||ke({x:i,y:n},t)||ke({x:i,y:r},t))}function b_(s,t,e){const n=[],i=s._pointLabels.length,r=s.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:ro(r)/2,additionalAngle:o?lt/i:0};let c;for(let h=0;h<i;h++){l.padding=e[h],l.size=t[h];const u=p_(s,h,l);n.push(u),a==="auto"&&(u.visible=__(u,c),u.visible&&(c=u))}return n}function y_(s){return s===0||s===180?"center":s<180?"left":"right"}function v_(s,t,e){return e==="right"?s-=t:e==="center"&&(s-=t/2),s}function w_(s,t,e){return e===90||e===270?s-=t/2:(e>270||e<90)&&(s-=t),s}function x_(s,t,e){const{left:n,top:i,right:r,bottom:o}=e,{backdropColor:a}=t;if(!Z(a)){const l=as(t.borderRadius),c=It(t.backdropPadding);s.fillStyle=a;const h=n-c.left,u=i-c.top,d=r-n+c.width,f=o-i+c.height;Object.values(l).some(g=>g!==0)?(s.beginPath(),An(s,{x:h,y:u,w:d,h:f,radius:l}),s.fill()):s.fillRect(h,u,d,f)}}function k_(s,t){const{ctx:e,options:{pointLabels:n}}=s;for(let i=t-1;i>=0;i--){const r=s._pointLabelItems[i];if(!r.visible)continue;const o=n.setContext(s.getPointLabelContext(i));x_(e,o,r);const a=St(o.font),{x:l,y:c,textAlign:h}=r;fs(e,s._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function Wh(s,t,e,n){const{ctx:i}=s;if(e)i.arc(s.xCenter,s.yCenter,t,0,at);else{let r=s.getPointPosition(0,t);i.moveTo(r.x,r.y);for(let o=1;o<n;o++)r=s.getPointPosition(o,t),i.lineTo(r.x,r.y)}}function S_(s,t,e,n,i){const r=s.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!n||!a||!l||e<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(i.dash),r.lineDashOffset=i.dashOffset,r.beginPath(),Wh(s,e,o,n),r.closePath(),r.stroke(),r.restore())}function O_(s,t,e){return qe(s,{label:e,index:t,type:"pointLabel"})}class gn extends zi{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=It(ro(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=mt(t)&&!isNaN(t)?t:0,this.max=mt(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ro(this.options))}generateTickLabels(t){zi.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,n)=>{const i=it(this.options.pointLabels.callback,[e,n],this);return i||i===0?i:""}).filter((e,n)=>this.chart.getDataVisibility(n))}fit(){const t=this.options;t.display&&t.pointLabels.display?g_(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,i){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,i))}getIndexAngle(t){const e=at/(this._pointLabels.length||1),n=this.options.startAngle||0;return Bt(t*e+re(n))}getDistanceFromCenterForValue(t){if(Z(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Z(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return O_(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const i=this.getIndexAngle(t)-yt+n;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:i,bottom:r}=this._pointLabelItems[t];return{left:e,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),Wh(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:i,border:r}=e,o=this._pointLabels.length;let a,l,c;if(e.pointLabels.display&&k_(this,o),i.display&&this.ticks.forEach((h,u)=>{if(u!==0||u===0&&this.min<0){l=this.getDistanceFromCenterForValue(h.value);const d=this.getContext(u),f=i.setContext(d),g=r.setContext(d);S_(this,f,l,o,g)}}),n.display){for(t.save(),a=o-1;a>=0;a--){const h=n.setContext(this.getPointLabelContext(a)),{color:u,lineWidth:d}=h;!d||!u||(t.lineWidth=d,t.strokeStyle=u,t.setLineDash(h.borderDash),t.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!e.reverse)return;const c=n.setContext(this.getContext(l)),h=St(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=h.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const u=It(c.backdropPadding);t.fillRect(-o/2-u.left,-r-h.size/2-u.top,o+u.width,h.size+u.height)}fs(t,a.label,0,-r,h,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}}E(gn,"id","radialLinear"),E(gn,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ji.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),E(gn,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),E(gn,"descriptors",{angleLines:{_fallback:"grid"}});const tr={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},zt=Object.keys(tr);function Tl(s,t){return s-t}function Ml(s,t){if(Z(t))return null;const e=s._adapter,{parser:n,round:i,isoWeekday:r}=s._parseOpts;let o=t;return typeof n=="function"&&(o=n(o)),mt(o)||(o=typeof n=="string"?e.parse(o,n):e.parse(o)),o===null?null:(i&&(o=i==="week"&&(Fs(r)||r===!0)?e.startOf(o,"isoWeek",r):e.startOf(o,i)),+o)}function El(s,t,e,n){const i=zt.length;for(let r=zt.indexOf(s);r<i-1;++r){const o=tr[zt[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=n)return zt[r]}return zt[i-1]}function T_(s,t,e,n,i){for(let r=zt.length-1;r>=zt.indexOf(e);r--){const o=zt[r];if(tr[o].common&&s._adapter.diff(i,n,o)>=t-1)return o}return zt[e?zt.indexOf(e):0]}function M_(s){for(let t=zt.indexOf(s)+1,e=zt.length;t<e;++t)if(tr[zt[t]].common)return zt[t]}function Cl(s,t,e){if(!e)s[t]=!0;else if(e.length){const{lo:n,hi:i}=Do(e,t),r=e[n]>=t?e[n]:e[i];s[r]=!0}}function E_(s,t,e,n){const i=s._adapter,r=+i.startOf(t[0].value,n),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+i.add(a,1,n))l=e[a],l>=0&&(t[l].major=!0);return t}function Dl(s,t,e){const n=[],i={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],i[a]=o,n.push({value:a,major:!1});return r===0||!e?n:E_(s,n,i,e)}class Ln extends gs{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const n=t.time||(t.time={}),i=this._adapter=new $g._date(t.adapters.date);i.init(e),_n(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:Ml(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=mt(i)&&!isNaN(i)?i:+e.startOf(Date.now(),n),r=mt(r)&&!isNaN(r)?r:+e.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,a=lf(i,r,o);return this._unit=e.unit||(n.autoSkip?El(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):T_(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:M_(this._unit),this.initOffsets(i),t.reverse&&a.reverse(),Dl(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,n=0,i,r;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?e=1-i:e=(this.getDecimalForValue(t[1])-i)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?n=r:n=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;e=Tt(e,0,o),n=Tt(n,0,o),this._offsets={start:e,end:n,factor:1/(e+1+n)}}_generate(){const t=this._adapter,e=this.min,n=this.max,i=this.options,r=i.time,o=r.unit||El(r.minUnit,e,n,this._getLabelCapacity(e)),a=W(i.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=Fs(l)||l===!0,h={};let u=e,d,f;if(c&&(u=+t.startOf(u,"isoWeek",l)),u=+t.startOf(u,c?"day":o),t.diff(n,e,o)>1e5*a)throw new Error(e+" and "+n+" are too far apart with stepSize of "+a+" "+o);const g=i.ticks.source==="data"&&this.getDataTimestamps();for(d=u,f=0;d<n;d=+t.add(d,a,o),f++)Cl(h,d,g);return(d===n||i.bounds==="ticks"||f===1)&&Cl(h,d,g),Object.keys(h).sort(Tl).map(m=>+m)}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const i=this.options.time.displayFormats,r=this._unit,o=e||i[r];return this._adapter.format(t,o)}_tickFormatFunction(t,e,n,i){const r=this.options,o=r.ticks.callback;if(o)return it(o,[t,e,n],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],u=c&&a[c],d=n[e],f=c&&u&&d&&d.major;return this._adapter.format(t,i||(f?u:h))}generateTickLabels(t){let e,n,i;for(e=0,n=t.length;e<n;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,i=re(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*r+a*o,h:n*o+a*r}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,i=n[e.unit]||n.millisecond,r=this._tickFormatFunction(t,0,Dl(this,[t],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],e,n;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,n=i.length;e<n;++e)t=t.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const i=this.getLabels();for(e=0,n=i.length;e<n;++e)t.push(Ml(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return eh(t.sort(Tl))}}E(Ln,"id","time"),E(Ln,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function ai(s,t,e){let n=0,i=s.length-1,r,o,a,l;e?(t>=s[n].pos&&t<=s[i].pos&&({lo:n,hi:i}=xe(s,"pos",t)),{pos:r,time:a}=s[n],{pos:o,time:l}=s[i]):(t>=s[n].time&&t<=s[i].time&&({lo:n,hi:i}=xe(s,"time",t)),{time:r,pos:a}=s[n],{time:o,pos:l}=s[i]);const c=o-r;return c?a+(l-a)*(t-r)/c:a}class oo extends Ln{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=ai(e,this.min),this._tableRange=ai(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,i=[],r=[];let o,a,l,c,h;for(o=0,a=t.length;o<a;++o)c=t[o],c>=e&&c<=n&&i.push(c);if(i.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(o=0,a=i.length;o<a;++o)h=i[o+1],l=i[o-1],c=i[o],Math.round((h+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const t=this.min,e=this.max;let n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(e)||n.length===1)&&n.push(e),n.sort((i,r)=>i-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return e.length&&n.length?t=this.normalize(e.concat(n)):t=e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(ai(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return ai(this._table,n*this._tableRange+this._minPos,!0)}}E(oo,"id","timeseries"),E(oo,"defaults",Ln.defaults);var C_=Object.freeze({__proto__:null,CategoryScale:so,LinearScale:no,LogarithmicScale:io,RadialLinearScale:gn,TimeScale:Ln,TimeSeriesScale:oo});const D_=[Ng,dp,o_,C_],vs=[];function Vn(s,t=j){let e;const n=new Set;function i(a){if(ue(s,a)&&(s=a,e)){const l=!vs.length;for(const c of n)c[1](),vs.push(c,s);if(l){for(let c=0;c<vs.length;c+=2)vs[c][0](vs[c+1]);vs.length=0}}}function r(a){i(a(s))}function o(a,l=j){const c=[a,l];return n.add(c),n.size===1&&(e=t(i,r)||j),a(s),()=>{n.delete(c),n.size===0&&e&&(e(),e=null)}}return{set:i,update:r,subscribe:o}}const A_="modulepreload",P_=function(s){return"/"+s},Al={},Vs=function(t,e,n){let i=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),o=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));i=Promise.all(e.map(a=>{if(a=P_(a),a in Al)return;Al[a]=!0;const l=a.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${c}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":A_,l||(h.as="script",h.crossOrigin=""),h.href=a,o&&h.setAttribute("nonce",o),document.head.appendChild(h),l)return new Promise((u,d)=>{h.addEventListener("load",u),h.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${a}`)))})}))}return i.then(()=>t()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})},I_=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...e)=>Vs(()=>Promise.resolve().then(()=>Wn),void 0).then(({default:n})=>n(...e)):t=fetch,(...e)=>t(...e)};class Wo extends Error{constructor(t,e="FunctionsError",n){super(t),this.name=e,this.context=n}}class L_ extends Wo{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class R_ extends Wo{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class N_ extends Wo{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var ao;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(ao||(ao={}));var $_=function(s,t,e,n){function i(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):i(h.value).then(a,l)}c((n=n.apply(s,t||[])).next())})};class F_{constructor(t,{headers:e={},customFetch:n,region:i=ao.Any}={}){this.url=t,this.headers=e,this.region=i,this.fetch=I_(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,e={}){var n;return $_(this,void 0,void 0,function*(){try{const{headers:i,method:r,body:o}=e;let a={},{region:l}=e;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const h=yield this.fetch(`${this.url}/${t}`,{method:r||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(g=>{throw new L_(g)}),u=h.headers.get("x-relay-error");if(u&&u==="true")throw new R_(h);if(!h.ok)throw new N_(h);let d=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),f;return d==="application/json"?f=yield h.json():d==="application/octet-stream"?f=yield h.blob():d==="text/event-stream"?f=h:d==="multipart/form-data"?f=yield h.formData():f=yield h.text(),{data:f,error:null}}catch(i){return{data:null,error:i}}})}}var j_=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ws=j_();const z_=Ws.fetch,Bo=Ws.fetch.bind(Ws),Bh=Ws.Headers,V_=Ws.Request,W_=Ws.Response,Wn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Bh,Request:V_,Response:W_,default:Bo,fetch:z_},Symbol.toStringTag,{value:"Module"}));class B_ extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}class H_{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Bo:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async r=>{var o,a,l;let c=null,h=null,u=null,d=r.status,f=r.statusText;if(r.ok){if(this.method!=="HEAD"){const _=await r.text();_===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?h=_:h=JSON.parse(_))}const m=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),p=(a=r.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");m&&p&&p.length>1&&(u=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(c={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,u=null,d=406,f="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const m=await r.text();try{c=JSON.parse(m),Array.isArray(c)&&r.status===404&&(h=[],c=null,d=200,f="OK")}catch{r.status===404&&m===""?(d=204,f="No Content"):c={message:m}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,d=200,f="OK"),c&&this.shouldThrowOnError)throw new B_(c)}return{error:c,data:h,count:u,status:d,statusText:f}});return this.shouldThrowOnError||(i=i.catch(r=>{var o,a,l;return{error:{message:`${(o=r==null?void 0:r.name)!==null&&o!==void 0?o:"FetchError"}: ${r==null?void 0:r.message}`,details:`${(a=r==null?void 0:r.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=r==null?void 0:r.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}}class U_ extends H_{select(t){let e=!1;const n=(t??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:i,referencedTable:r=i}={}){const o=r?`${r}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:i=n}={}){const r=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:i=!1,wal:r=!1,format:o="text"}={}){var a;const l=[t?"analyze":null,e?"verbose":null,n?"settings":null,i?"buffers":null,r?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Es extends U_{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:i}={}){let r="";i==="plain"?r="pl":i==="phrase"?r="ph":i==="websearch"&&(r="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${r}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}}class q_{constructor(t,{headers:e={},schema:n,fetch:i}){this.url=t,this.headers=e,this.schema=n,this.fetch=i}select(t,{head:e=!1,count:n}={}){const i=e?"HEAD":"GET";let r=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Es({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:e,defaultToNull:n=!0}={}){const i="POST",r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),e&&r.push(`count=${e}`),n||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(t)){const o=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Es({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:i,defaultToNull:r=!0}={}){const o="POST",a=[`resolution=${n?"ignore":"merge"}-duplicates`];if(e!==void 0&&this.url.searchParams.set("on_conflict",e),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),r||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const l=t.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(l.length>0){const c=[...new Set(l)].map(h=>`"${h}"`);this.url.searchParams.set("columns",c.join(","))}}return new Es({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:e}={}){const n="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),e&&i.push(`count=${e}`),this.headers.Prefer=i.join(","),new Es({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const e="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Es({method:e,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Y_="1.15.2",G_={"X-Client-Info":`postgrest-js/${Y_}`};class Ho{constructor(t,{headers:e={},schema:n,fetch:i}={}){this.url=t,this.headers=Object.assign(Object.assign({},G_),e),this.schemaName=n,this.fetch=i}from(t){const e=new URL(`${this.url}/${t}`);return new q_(e,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Ho(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:n=!1,get:i=!1,count:r}={}){let o;const a=new URL(`${this.url}/rpc/${t}`);let l;n||i?(o=n?"HEAD":"GET",Object.entries(e).filter(([h,u])=>u!==void 0).map(([h,u])=>[h,Array.isArray(u)?`{${u.join(",")}}`:`${u}`]).forEach(([h,u])=>{a.searchParams.append(h,u)})):(o="POST",l=e);const c=Object.assign({},this.headers);return r&&(c.Prefer=`count=${r}`),new Es({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}}const Z_="2.9.5",J_={"X-Client-Info":`realtime-js/${Z_}`},K_="1.0.0",Hh=1e4,X_=1e3;var Ls;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Ls||(Ls={}));var Vt;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(Vt||(Vt={}));var ie;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(ie||(ie={}));var lo;(function(s){s.websocket="websocket"})(lo||(lo={}));var is;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(is||(is={}));class Uh{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Q_{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const e=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,e,n)}_decodeBroadcast(t,e,n){const i=e.getUint8(1),r=e.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(t.slice(o,o+i));o=o+i;const l=n.decode(t.slice(o,o+r));o=o+r;const c=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class kr{constructor(t,e,n={},i=Hh){this.channel=t,this.event=e,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var n;return this._hasReceived(t)&&e((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Pl;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Pl||(Pl={}));class xn{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(e==null?void 0:e.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:r,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=xn.syncState(this.state,i,r,o),this.pendingDiffs.forEach(l=>{this.state=xn.syncDiff(this.state,l,r,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{const{onJoin:r,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=xn.syncDiff(this.state,i,r,o),a())}),this.onJoin((i,r,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:r,newPresences:o})}),this.onLeave((i,r,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:r,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,n,i){const r=this.cloneDeep(t),o=this.transformState(e),a={},l={};return this.map(r,(c,h)=>{o[c]||(l[c]=h)}),this.map(o,(c,h)=>{const u=r[c];if(u){const d=h.map(p=>p.presence_ref),f=u.map(p=>p.presence_ref),g=h.filter(p=>f.indexOf(p.presence_ref)<0),m=u.filter(p=>d.indexOf(p.presence_ref)<0);g.length>0&&(a[c]=g),m.length>0&&(l[c]=m)}else a[c]=h}),this.syncDiff(r,{joins:a,leaves:l},n,i)}static syncDiff(t,e,n,i){const{joins:r,leaves:o}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(r,(a,l)=>{var c;const h=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),h.length>0){const u=t[a].map(f=>f.presence_ref),d=h.filter(f=>u.indexOf(f.presence_ref)<0);t[a].unshift(...d)}n(a,h,l)}),this.map(o,(a,l)=>{let c=t[a];if(!c)return;const h=l.map(u=>u.presence_ref);c=c.filter(u=>h.indexOf(u.presence_ref)<0),t[a]=c,i(a,c,l),c.length===0&&delete t[a]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(n=>e(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,n)=>{const i=t[n];return"metas"in i?e[n]=i.metas.map(r=>(r.presence_ref=r.phx_ref,delete r.phx_ref,delete r.phx_ref_prev,r)):e[n]=i,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var nt;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(nt||(nt={}));const Il=(s,t,e={})=>{var n;const i=(n=e.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((r,o)=>(r[o]=tb(o,s,t,i),r),{})},tb=(s,t,e,n)=>{const i=t.find(a=>a.name===s),r=i==null?void 0:i.type,o=e[s];return r&&!n.includes(r)?qh(r,o):co(o)},qh=(s,t)=>{if(s.charAt(0)==="_"){const e=s.slice(1,s.length);return ib(t,e)}switch(s){case nt.bool:return eb(t);case nt.float4:case nt.float8:case nt.int2:case nt.int4:case nt.int8:case nt.numeric:case nt.oid:return sb(t);case nt.json:case nt.jsonb:return nb(t);case nt.timestamp:return rb(t);case nt.abstime:case nt.date:case nt.daterange:case nt.int4range:case nt.int8range:case nt.money:case nt.reltime:case nt.text:case nt.time:case nt.timestamptz:case nt.timetz:case nt.tsrange:case nt.tstzrange:return co(t);default:return co(t)}},co=s=>s,eb=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},sb=s=>{if(typeof s=="string"){const t=parseFloat(s);if(!Number.isNaN(t))return t}return s},nb=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(t){return console.log(`JSON parse error: ${t}`),s}return s},ib=(s,t)=>{if(typeof s!="string")return s;const e=s.length-1,n=s[e];if(s[0]==="{"&&n==="}"){let r;const o=s.slice(1,e);try{r=JSON.parse("["+o+"]")}catch{r=o?o.split(","):[]}return r.map(a=>qh(t,a))}return s},rb=s=>typeof s=="string"?s.replace(" ","T"):s;var Ll;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Ll||(Ll={}));var Rl;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes"})(Rl||(Rl={}));var Nl;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(Nl||(Nl={}));class Uo{constructor(t,e={config:{}},n){this.topic=t,this.params=e,this.socket=n,this.bindings={},this.state=Vt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},e.config),this.timeout=this.socket.timeout,this.joinPush=new kr(this,ie.join,this.params,this.timeout),this.rejoinTimer=new Uh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Vt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Vt.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ie.reply,{},(i,r)=>{this._trigger(this._replyEventName(r),i)}),this.presence=new xn(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(t,e=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:r,presence:o}}=this.params;this._onError(c=>t&&t("CHANNEL_ERROR",c)),this._onClose(()=>t&&t("CLOSED"));const a={},l={broadcast:r,presence:o,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(c=>c.filter))!==null&&i!==void 0?i:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},a)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",({postgres_changes:c})=>{var h;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){t&&t("SUBSCRIBED");return}else{const u=this.bindings.postgres_changes,d=(h=u==null?void 0:u.length)!==null&&h!==void 0?h:0,f=[];for(let g=0;g<d;g++){const m=u[g],{filter:{event:p,schema:_,table:b,filter:y}}=m,w=c&&c[g];if(w&&w.event===p&&w.schema===_&&w.table===b&&w.filter===y)f.push(Object.assign(Object.assign({},m),{id:w.id}));else{this.unsubscribe(),t&&t("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,t&&t("SUBSCRIBED");return}}).receive("error",c=>{t&&t("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{t&&t("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(t,e={}){return await this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,e,n){return this._on(t,e,n)}async send(t,e={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){const{event:r,payload:o}=t,a={method:"POST",headers:{apikey:(n=this.socket.apiKey)!==null&&n!==void 0?n:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:o}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=e.timeout)!==null&&i!==void 0?i:this.timeout)).ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(r=>{var o,a,l;const c=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&r("ok"),c.receive("ok",()=>r("ok")),c.receive("error",()=>r("error")),c.receive("timeout",()=>r("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Vt.leaving;const e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ie.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const i=new kr(this,ie.leave,{},t);i.receive("ok",()=>{e(),n("ok")}).receive("timeout",()=>{e(),n("timed out")}).receive("error",()=>{n("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}_broadcastEndpointURL(){let t=this.socket.endPoint;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(t,e,n){const i=new AbortController,r=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:i.signal}));return clearTimeout(r),o}_push(t,e,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new kr(this,t,e,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(t,e,n){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,n){var i,r;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:h}=ie;if(n&&[a,l,c,h].indexOf(o)>=0&&n!==this._joinRef())return;let d=this._onMessage(o,e,n);if(e&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var g,m,p;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((p=(m=f.filter)===null||m===void 0?void 0:m.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===o}).map(f=>f.callback(d,n)):(r=this.bindings[o])===null||r===void 0||r.filter(f=>{var g,m,p,_,b,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const w=f.id,x=(g=f.filter)===null||g===void 0?void 0:g.event;return w&&((m=e.ids)===null||m===void 0?void 0:m.includes(w))&&(x==="*"||(x==null?void 0:x.toLocaleLowerCase())===((p=e.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const w=(b=(_=f==null?void 0:f.filter)===null||_===void 0?void 0:_.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return w==="*"||w===((y=e==null?void 0:e.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof d=="object"&&"ids"in d){const g=d.data,{schema:m,table:p,commit_timestamp:_,type:b,errors:y}=g;d=Object.assign(Object.assign({},{schema:m,table:p,commit_timestamp:_,eventType:b,new:{},old:{},errors:y}),this._getPayloadRecords(g))}f.callback(d,n)})}_isClosed(){return this.state===Vt.closed}_isJoined(){return this.state===Vt.joined}_isJoining(){return this.state===Vt.joining}_isLeaving(){return this.state===Vt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,n){const i=t.toLocaleLowerCase(),r={type:i,filter:e,callback:n};return this.bindings[i]?this.bindings[i].push(r):this.bindings[i]=[r],this}_off(t,e){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var r;return!(((r=i.type)===null||r===void 0?void 0:r.toLocaleLowerCase())===n&&Uo.isEqual(i.filter,e))}),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ie.close,{},t)}_onError(t){this._on(ie.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Vt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=Il(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=Il(t.columns,t.old_record)),e}}const ob=()=>{},ab=typeof WebSocket<"u";class lb{constructor(t,e){var n;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=J_,this.params={},this.timeout=Hh,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=ob,this.conn=null,this.sendBuffer=[],this.serializer=new Q_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=r=>{let o;return r?o=r:typeof fetch>"u"?o=(...a)=>Vs(()=>Promise.resolve().then(()=>Wn),void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${t}/${lo.websocket}`,e!=null&&e.transport?this.transport=e.transport:this.transport=null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.headers&&(this.headers=Object.assign(Object.assign({},this.headers),e.headers)),e!=null&&e.timeout&&(this.timeout=e.timeout),e!=null&&e.logger&&(this.logger=e.logger),e!=null&&e.heartbeatIntervalMs&&(this.heartbeatIntervalMs=e.heartbeatIntervalMs);const i=(n=e==null?void 0:e.params)===null||n===void 0?void 0:n.apikey;i&&(this.accessToken=i,this.apiKey=i),this.reconnectAfterMs=e!=null&&e.reconnectAfterMs?e.reconnectAfterMs:r=>[1e3,2e3,5e3,1e4][r-1]||1e4,this.encode=e!=null&&e.encode?e.encode:(r,o)=>o(JSON.stringify(r)),this.decode=e!=null&&e.decode?e.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Uh(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(e==null?void 0:e.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(ab){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new cb(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),Vs(()=>import("./browser-BImCA5dO.js").then(t=>t.b),[]).then(({default:t})=>{this.conn=new t(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(t,e){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,e??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const e=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),e}async removeAllChannels(){const t=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.disconnect(),t}log(t,e,n){this.logger(t,e,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ls.connecting:return is.Connecting;case Ls.open:return is.Open;case Ls.closing:return is.Closing;default:return is.Closed}}isConnected(){return this.connectionState()===is.Open}channel(t,e={config:{}}){const n=new Uo(`realtime:${t}`,e,this);return this.channels.push(n),n}push(t){const{topic:e,event:n,payload:i,ref:r}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${e} ${n} (${r})`,i),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(t){this.accessToken=t,this.channels.forEach(e=>{t&&e.updateJoinPayload({access_token:t}),e.joinedOnce&&e._isJoined()&&e._push(ie.access_token,{access_token:t})})}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:K_}))}_onConnMessage(t){this.decode(t.data,e=>{let{topic:n,event:i,payload:r,ref:o}=e;(o&&o===this.pendingHeartbeatRef||i===(r==null?void 0:r.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${r.status||""} ${n} ${i} ${o&&"("+o+")"||""}`,r),this.channels.filter(a=>a._isMember(n)).forEach(a=>a._trigger(i,r,o)),this.stateChangeCallbacks.message.forEach(a=>a(e))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(e=>e(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(e=>e(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(ie.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(e);return`${t}${n}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(X_,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class cb{constructor(t,e,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ls.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class qo extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Dt(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class hb extends qo{constructor(t,e){super(t),this.name="StorageApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class $l extends qo{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}}var ub=function(s,t,e,n){function i(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):i(h.value).then(a,l)}c((n=n.apply(s,t||[])).next())})};const Yh=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...e)=>Vs(()=>Promise.resolve().then(()=>Wn),void 0).then(({default:n})=>n(...e)):t=fetch,(...e)=>t(...e)},db=()=>ub(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Vs(()=>Promise.resolve().then(()=>Wn),void 0)).Response:Response});var Us=function(s,t,e,n){function i(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):i(h.value).then(a,l)}c((n=n.apply(s,t||[])).next())})};const Sr=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),fb=(s,t)=>Us(void 0,void 0,void 0,function*(){const e=yield db();s instanceof e?s.json().then(n=>{t(new hb(Sr(n),s.status||500))}).catch(n=>{t(new $l(Sr(n),n))}):t(new $l(Sr(s),s))}),gb=(s,t,e,n)=>{const i={method:s,headers:(t==null?void 0:t.headers)||{}};return s==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),e))};function er(s,t,e,n,i,r){return Us(this,void 0,void 0,function*(){return new Promise((o,a)=>{s(e,gb(t,n,i,r)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>fb(l,a))})})}function ho(s,t,e,n){return Us(this,void 0,void 0,function*(){return er(s,"GET",t,e,n)})}function Pe(s,t,e,n,i){return Us(this,void 0,void 0,function*(){return er(s,"POST",t,n,i,e)})}function mb(s,t,e,n,i){return Us(this,void 0,void 0,function*(){return er(s,"PUT",t,n,i,e)})}function Gh(s,t,e,n,i){return Us(this,void 0,void 0,function*(){return er(s,"DELETE",t,n,i,e)})}var Yt=function(s,t,e,n){function i(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):i(h.value).then(a,l)}c((n=n.apply(s,t||[])).next())})};const pb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Fl={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class _b{constructor(t,e={},n,i){this.url=t,this.headers=e,this.bucketId=n,this.fetch=Yh(i)}uploadOrUpdate(t,e,n,i){return Yt(this,void 0,void 0,function*(){try{let r;const o=Object.assign(Object.assign({},Fl),i),a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&n instanceof Blob?(r=new FormData,r.append("cacheControl",o.cacheControl),r.append("",n)):typeof FormData<"u"&&n instanceof FormData?(r=n,r.append("cacheControl",o.cacheControl)):(r=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType);const l=this._removeEmptyFolders(e),c=this._getFinalPath(l),h=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:t,body:r,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),u=yield h.json();return h.ok?{data:{path:l,id:u.Id,fullPath:u.Key},error:null}:{data:null,error:u}}catch(r){if(Dt(r))return{data:null,error:r};throw r}})}upload(t,e,n){return Yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,n)})}uploadToSignedUrl(t,e,n,i){return Yt(this,void 0,void 0,function*(){const r=this._removeEmptyFolders(t),o=this._getFinalPath(r),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let l;const c=Object.assign({upsert:Fl.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType);const u=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:h}),d=yield u.json();return u.ok?{data:{path:r,fullPath:d.Key},error:null}:{data:null,error:d}}catch(l){if(Dt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t){return Yt(this,void 0,void 0,function*(){try{let e=this._getFinalPath(t);const n=yield Pe(this.fetch,`${this.url}/object/upload/sign/${e}`,{},{headers:this.headers}),i=new URL(this.url+n.url),r=i.searchParams.get("token");if(!r)throw new qo("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:r},error:null}}catch(e){if(Dt(e))return{data:null,error:e};throw e}})}update(t,e,n){return Yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,n)})}move(t,e){return Yt(this,void 0,void 0,function*(){try{return{data:yield Pe(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e},{headers:this.headers}),error:null}}catch(n){if(Dt(n))return{data:null,error:n};throw n}})}copy(t,e){return Yt(this,void 0,void 0,function*(){try{return{data:{path:(yield Pe(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e},{headers:this.headers})).Key},error:null}}catch(n){if(Dt(n))return{data:null,error:n};throw n}})}createSignedUrl(t,e,n){return Yt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),r=yield Pe(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return r={signedUrl:encodeURI(`${this.url}${r.signedURL}${o}`)},{data:r,error:null}}catch(i){if(Dt(i))return{data:null,error:i};throw i}})}createSignedUrls(t,e,n){return Yt(this,void 0,void 0,function*(){try{const i=yield Pe(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),r=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${r}`):null})),error:null}}catch(i){if(Dt(i))return{data:null,error:i};throw i}})}download(t,e){return Yt(this,void 0,void 0,function*(){const i=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),o=r?`?${r}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield ho(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Dt(a))return{data:null,error:a};throw a}})}getPublicUrl(t,e){const n=this._getFinalPath(t),i=[],r=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";r!==""&&i.push(r);const a=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(t){return Yt(this,void 0,void 0,function*(){try{return{data:yield Gh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(Dt(e))return{data:null,error:e};throw e}})}list(t,e,n){return Yt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},pb),e),{prefix:t||""});return{data:yield Pe(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(Dt(i))return{data:null,error:i};throw i}})}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}}const bb="2.5.5",yb={"X-Client-Info":`storage-js/${bb}`};var ws=function(s,t,e,n){function i(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):i(h.value).then(a,l)}c((n=n.apply(s,t||[])).next())})};class vb{constructor(t,e={},n){this.url=t,this.headers=Object.assign(Object.assign({},yb),e),this.fetch=Yh(n)}listBuckets(){return ws(this,void 0,void 0,function*(){try{return{data:yield ho(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Dt(t))return{data:null,error:t};throw t}})}getBucket(t){return ws(this,void 0,void 0,function*(){try{return{data:yield ho(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(Dt(e))return{data:null,error:e};throw e}})}createBucket(t,e={public:!1}){return ws(this,void 0,void 0,function*(){try{return{data:yield Pe(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Dt(n))return{data:null,error:n};throw n}})}updateBucket(t,e){return ws(this,void 0,void 0,function*(){try{return{data:yield mb(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Dt(n))return{data:null,error:n};throw n}})}emptyBucket(t){return ws(this,void 0,void 0,function*(){try{return{data:yield Pe(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(Dt(e))return{data:null,error:e};throw e}})}deleteBucket(t){return ws(this,void 0,void 0,function*(){try{return{data:yield Gh(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(Dt(e))return{data:null,error:e};throw e}})}}class wb extends vb{constructor(t,e={},n){super(t,e,n)}from(t){return new _b(this.url,this.headers,t,this.fetch)}}const xb="2.43.2";let mn="";typeof Deno<"u"?mn="deno":typeof document<"u"?mn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?mn="react-native":mn="node";const kb={"X-Client-Info":`supabase-js-${mn}/${xb}`},Sb={headers:kb},Ob={schema:"public"},Tb={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Mb={};var Eb=function(s,t,e,n){function i(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):i(h.value).then(a,l)}c((n=n.apply(s,t||[])).next())})};const Cb=s=>{let t;return s?t=s:typeof fetch>"u"?t=Bo:t=fetch,(...e)=>t(...e)},Db=()=>typeof Headers>"u"?Bh:Headers,Ab=(s,t,e)=>{const n=Cb(e),i=Db();return(r,o)=>Eb(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:s;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",s),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(r,Object.assign(Object.assign({},o),{headers:c}))})};function Pb(s){return s.replace(/\/$/,"")}function Ib(s,t){const{db:e,auth:n,realtime:i,global:r}=s,{db:o,auth:a,realtime:l,global:c}=t;return{db:Object.assign(Object.assign({},o),e),auth:Object.assign(Object.assign({},a),n),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),r)}}const Zh="2.64.2",Lb="http://localhost:9999",Rb="supabase.auth.token",Nb={"X-Client-Info":`gotrue-js/${Zh}`},jl=10,uo="X-Supabase-Api-Version",Jh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function $b(s){return Math.round(Date.now()/1e3)+s}function Fb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const t=Math.random()*16|0;return(s=="x"?t:t&3|8).toString(16)})}const ne=()=>typeof document<"u",Ke={tested:!1,writable:!1},kn=()=>{if(!ne())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ke.tested)return Ke.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Ke.tested=!0,Ke.writable=!0}catch{Ke.tested=!0,Ke.writable=!1}return Ke.writable};function Or(s){const t={},e=new URL(s);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((i,r)=>{t[r]=i})}catch{}return e.searchParams.forEach((n,i)=>{t[i]=n}),t}const Kh=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...e)=>Vs(()=>Promise.resolve().then(()=>Wn),void 0).then(({default:n})=>n(...e)):t=fetch,(...e)=>t(...e)},jb=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Xh=async(s,t,e)=>{await s.setItem(t,JSON.stringify(e))},li=async(s,t)=>{const e=await s.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}},Tr=async(s,t)=>{await s.removeItem(t)};function zb(s){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let e="",n,i,r,o,a,l,c,h=0;for(s=s.replace("-","+").replace("_","/");h<s.length;)o=t.indexOf(s.charAt(h++)),a=t.indexOf(s.charAt(h++)),l=t.indexOf(s.charAt(h++)),c=t.indexOf(s.charAt(h++)),n=o<<2|a>>4,i=(a&15)<<4|l>>2,r=(l&3)<<6|c,e=e+String.fromCharCode(n),l!=64&&i!=0&&(e=e+String.fromCharCode(i)),c!=64&&r!=0&&(e=e+String.fromCharCode(r));return e}class sr{constructor(){this.promise=new sr.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}}sr.promiseConstructor=Promise;function zl(s){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,e=s.split(".");if(e.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(e[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=e[1];return JSON.parse(zb(n))}async function Vb(s){return await new Promise(t=>{setTimeout(()=>t(null),s)})}function Wb(s,t){return new Promise((n,i)=>{(async()=>{for(let r=0;r<1/0;r++)try{const o=await s(r);if(!t(r,null,o)){n(o);return}}catch(o){if(!t(r,o)){i(o);return}}})()})}function Bb(s){return("0"+s.toString(16)).substr(-2)}function Hb(){const t=new Uint32Array(56);if(typeof crypto>"u"){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=e.length;let i="";for(let r=0;r<56;r++)i+=e.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,Bb).join("")}async function Ub(s){const e=new TextEncoder().encode(s),n=await crypto.subtle.digest("SHA-256",e),i=new Uint8Array(n);return Array.from(i).map(r=>String.fromCharCode(r)).join("")}function qb(s){return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Yb(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const e=await Ub(s);return qb(e)}async function xs(s,t,e=!1){const n=Hb();let i=n;e&&(i+="/PASSWORD_RECOVERY"),await Xh(s,`${t}-code-verifier`,i);const r=await Yb(n);return[r,n===r?"plain":"s256"]}const Gb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Zb(s){const t=s.headers.get(uo);if(!t||!t.match(Gb))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}class Yo extends Error{constructor(t,e,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=n}}function B(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class Jb extends Yo{constructor(t,e,n){super(t,e,n),this.name="AuthApiError",this.status=e,this.code=n}}function Kb(s){return B(s)&&s.name==="AuthApiError"}class Qh extends Yo{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}}class ms extends Yo{constructor(t,e,n,i){super(t,n,i),this.name=e,this.status=n}}class Xe extends ms{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Mr extends ms{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ci extends ms{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class hi extends ms{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Vl extends ms{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class fo extends ms{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}}function Er(s){return B(s)&&s.name==="AuthRetryableFetchError"}class Wl extends ms{constructor(t,e,n){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=n}}var Xb=function(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(e[n[i]]=s[n[i]]);return e};const ns=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Qb=[502,503,504];async function Bl(s){var t;if(!jb(s))throw new fo(ns(s),0);if(Qb.includes(s.status))throw new fo(ns(s),s.status);let e;try{e=await s.json()}catch(r){throw new Qh(ns(r),r)}let n;const i=Zb(s);if(i&&i.getTime()>=Jh["2024-01-01"].timestamp&&typeof e=="object"&&e&&typeof e.code=="string"?n=e.code:typeof e=="object"&&e&&typeof e.error_code=="string"&&(n=e.error_code),n){if(n==="weak_password")throw new Wl(ns(e),s.status,((t=e.weak_password)===null||t===void 0?void 0:t.reasons)||[])}else if(typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0))throw new Wl(ns(e),s.status,e.weak_password.reasons);throw new Jb(ns(e),s.status||500,n)}const ty=(s,t,e,n)=>{const i={method:s,headers:(t==null?void 0:t.headers)||{}};return s==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),e))};async function Y(s,t,e,n){var i;const r=Object.assign({},n==null?void 0:n.headers);r[uo]||(r[uo]=Jh["2024-01-01"].name),n!=null&&n.jwt&&(r.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await ey(s,t,e+a,{headers:r,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function ey(s,t,e,n,i,r){const o=ty(t,n,i,r);let a;try{a=await s(e,Object.assign({},o))}catch(l){throw console.error(l),new fo(ns(l),0)}if(a.ok||await Bl(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await Bl(l)}}function Ae(s){var t;let e=null;ry(s)&&(e=Object.assign({},s),s.expires_at||(e.expires_at=$b(s.expires_in)));const n=(t=s.user)!==null&&t!==void 0?t:s;return{data:{session:e,user:n},error:null}}function Hl(s){const t=Ae(s);return!t.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((e,n)=>e&&typeof n=="string",!0)&&(t.data.weak_password=s.weak_password),t}function Le(s){var t;return{data:{user:(t=s.user)!==null&&t!==void 0?t:s},error:null}}function sy(s){return{data:s,error:null}}function ny(s){const{action_link:t,email_otp:e,hashed_token:n,redirect_to:i,verification_type:r}=s,o=Xb(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:e,hashed_token:n,redirect_to:i,verification_type:r},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function iy(s){return s}function ry(s){return s.access_token&&s.refresh_token&&s.expires_in}var oy=function(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(e[n[i]]=s[n[i]]);return e};class ay{constructor({url:t="",headers:e={},fetch:n}){this.url=t,this.headers=e,this.fetch=Kh(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,e="global"){try{return await Y(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(B(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,e={}){try{return await Y(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:Le})}catch(n){if(B(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:e}=t,n=oy(t,["options"]),i=Object.assign(Object.assign({},n),e);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await Y(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:ny,redirectTo:e==null?void 0:e.redirectTo})}catch(e){if(B(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(t){try{return await Y(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Le})}catch(e){if(B(e))return{data:{user:null},error:e};throw e}}async listUsers(t){var e,n,i,r,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},h=await Y(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(e=t==null?void 0:t.page)===null||e===void 0?void 0:e.toString())!==null&&n!==void 0?n:"",per_page:(r=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:""},xform:iy});if(h.error)throw h.error;const u=await h.json(),d=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(g=>{const m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(g.split(";")[1].split("=")[1]);c[`${p}Page`]=m}),c.total=parseInt(d)),{data:Object.assign(Object.assign({},u),c),error:null}}catch(c){if(B(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){try{return await Y(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Le})}catch(e){if(B(e))return{data:{user:null},error:e};throw e}}async updateUserById(t,e){try{return await Y(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:Le})}catch(n){if(B(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,e=!1){try{return await Y(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:Le})}catch(n){if(B(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){try{const{data:e,error:n}=await Y(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:e,error:n}}catch(e){if(B(e))return{data:null,error:e};throw e}}async _deleteFactor(t){try{return{data:await Y(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(B(e))return{data:null,error:e};throw e}}}const ly={getItem:s=>kn()?globalThis.localStorage.getItem(s):null,setItem:(s,t)=>{kn()&&globalThis.localStorage.setItem(s,t)},removeItem:s=>{kn()&&globalThis.localStorage.removeItem(s)}};function Ul(s={}){return{getItem:t=>s[t]||null,setItem:(t,e)=>{s[t]=e},removeItem:t=>{delete s[t]}}}function cy(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ks={debug:!!(globalThis&&kn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class tu extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class hy extends tu{}async function uy(s,t,e){ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),ks.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},t),await globalThis.navigator.locks.request(s,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,i.name);try{return await e()}finally{ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,i.name)}}else{if(t===0)throw ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new hy(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(ks.debug)try{const r=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(r,null,"  "))}catch(r){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",r)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await e()}})}cy();const dy={url:Lb,storageKey:Rb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Nb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},on=30*1e3,ql=3;async function Yl(s,t,e){return await e()}class Rn{constructor(t){var e,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Rn.nextInstanceID,Rn.nextInstanceID+=1,this.instanceID>0&&ne()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},dy),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new ay({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Kh(i.fetch),this.lock=i.lock||Yl,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:ne()&&(!((e=globalThis==null?void 0:globalThis.navigator)===null||e===void 0)&&e.locks)?this.lock=uy:this.lock=Yl,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:kn()?this.storage=ly:(this.memoryStorage={},this.storage=Ul(this.memoryStorage)):(this.memoryStorage={},this.storage=Ul(this.memoryStorage)),ne()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(r){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",r)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async r=>{this._debug("received broadcast notification from other tab or client",r),await this._notifyAllSubscribers(r.data.event,r.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Zh}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const t=ne()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",t),t||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:e,error:n}=await this._getSessionFromURL(t);if(n)return this._debug("#_initialize()","error detecting session from URL",n),(n==null?void 0:n.message)==="Identity is already linked"||(n==null?void 0:n.message)==="Identity is already linked to another user"?{error:n}:(await this._removeSession(),{error:n});const{session:i,redirectType:r}=e;return this._debug("#_initialize()","detected session in URL",i,"redirect type",r),await this._saveSession(i),setTimeout(async()=>{r==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return B(t)?{error:t}:{error:new Qh("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var e,n,i;try{await this._removeSession();const r=await Y(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(e=t==null?void 0:t.options)===null||e===void 0?void 0:e.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ae}),{data:o,error:a}=r;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(r){if(B(r))return{data:{user:null,session:null},error:r};throw r}}async signUp(t){var e,n,i;try{await this._removeSession();let r;if("email"in t){const{email:h,password:u,options:d}=t;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await xs(this.storage,this.storageKey)),r=await Y(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:h,password:u,data:(e=d==null?void 0:d.data)!==null&&e!==void 0?e:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:g},xform:Ae})}else if("phone"in t){const{phone:h,password:u,options:d}=t;r=await Y(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:u,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},channel:(i=d==null?void 0:d.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Ae})}else throw new ci("You must provide either an email or phone number and a password");const{data:o,error:a}=r;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(r){if(B(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithPassword(t){try{await this._removeSession();let e;if("email"in t){const{email:r,password:o,options:a}=t;e=await Y(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Hl})}else if("phone"in t){const{phone:r,password:o,options:a}=t;e=await Y(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Hl})}else throw new ci("You must provide either an email or phone number and a password");const{data:n,error:i}=e;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Mr}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(e){if(B(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOAuth(t){var e,n,i,r;return await this._removeSession(),await this._handleProviderSignIn(t.provider,{redirectTo:(e=t.options)===null||e===void 0?void 0:e.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(r=t.options)===null||r===void 0?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const e=await li(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(e??"").split("/"),{data:r,error:o}=await Y(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Ae});return await Tr(this.storage,`${this.storageKey}-code-verifier`),o?{data:{user:null,session:null,redirectType:null},error:o}:!r||!r.session||!r.user?{data:{user:null,session:null,redirectType:null},error:new Mr}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign(Object.assign({},r),{redirectType:i??null}),error:o})}async signInWithIdToken(t){await this._removeSession();try{const{options:e,provider:n,token:i,access_token:r,nonce:o}=t,a=await Y(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:r,nonce:o,gotrue_meta_security:{captcha_token:e==null?void 0:e.captchaToken}},xform:Ae}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Mr}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(e){if(B(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOtp(t){var e,n,i,r,o;try{if(await this._removeSession(),"email"in t){const{email:a,options:l}=t;let c=null,h=null;this.flowType==="pkce"&&([c,h]=await xs(this.storage,this.storageKey));const{error:u}=await Y(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(e=l==null?void 0:l.data)!==null&&e!==void 0?e:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:h},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:u}}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:h}=await Y(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h}}throw new ci("You must provide either an email or phone number.")}catch(a){if(B(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var e,n;try{t.type!=="email_change"&&t.type!=="phone_change"&&await this._removeSession();let i,r;"options"in t&&(i=(e=t.options)===null||e===void 0?void 0:e.redirectTo,r=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await Y(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:r}}),redirectTo:i,xform:Ae});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(B(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var e,n,i;try{await this._removeSession();let r=null,o=null;return this.flowType==="pkce"&&([r,o]=await xs(this.storage,this.storageKey)),await Y(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(e=t.options)===null||e===void 0?void 0:e.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:o}),headers:this.headers,xform:sy})}catch(r){if(B(r))return{data:null,error:r};throw r}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:e},error:n}=t;if(n)throw n;if(!e)throw new Xe;const{error:i}=await Y(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:e.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(B(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{t.type!="email_change"&&t.type!="phone_change"&&await this._removeSession();const e=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:r}=t,{error:o}=await Y(this.fetch,"POST",e,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},redirectTo:r==null?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:i,options:r}=t,{data:o,error:a}=await Y(this.fetch,"POST",e,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new ci("You must provide either an email or phone number and a type")}catch(e){if(B(e))return{data:{user:null,session:null},error:e};throw e}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(t,e){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await e()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=e();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const e=await this.__loadSession();return await t(e)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const e=await li(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",e),e!==null&&(this._isValidSession(e)?t=e:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){const o=this.suppressGetSessionWarning;t=new Proxy(t,{get(l,c,h){return!o&&c==="user"&&console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(l,c,h)}})}return{data:{session:t},error:null}}const{session:i,error:r}=await this._callRefreshToken(t.refresh_token);return r?{data:{session:null},error:r}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Y(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Le}):await this._useSession(async e=>{var n,i,r;const{data:o,error:a}=e;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Xe}:await Y(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(r=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0,xform:Le})})}catch(e){if(B(e))return{data:{user:null},error:e};throw e}}async updateUser(t,e={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,e))}async _updateUser(t,e={}){try{return await this._useSession(async n=>{const{data:i,error:r}=n;if(r)throw r;if(!i.session)throw new Xe;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await xs(this.storage,this.storageKey));const{data:c,error:h}=await Y(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:e==null?void 0:e.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Le});if(h)throw h;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(B(n))return{data:{user:null},error:n};throw n}}_decodeJWT(t){return zl(t)}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Xe;const e=Date.now()/1e3;let n=e,i=!0,r=null;const o=zl(t.access_token);if(o.exp&&(n=o.exp,i=n<=e),i){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};r=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;r={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-e,expires_at:n},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(e){if(B(e))return{data:{session:null,user:null},error:e};throw e}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async e=>{var n;if(!t){const{data:o,error:a}=e;if(a)throw a;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Xe;const{session:i,error:r}=await this._callRefreshToken(t.refresh_token);return r?{data:{user:null,session:null},error:r}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(e){if(B(e))return{data:{user:null,session:null},error:e};throw e}}async _getSessionFromURL(t){try{if(!ne())throw new hi("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new hi("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!t)throw new Vl("Not a valid PKCE flow url.");const e=Or(window.location.href);if(t){if(!e.code)throw new Vl("No code detected.");const{data:b,error:y}=await this._exchangeCodeForSession(e.code);if(y)throw y;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:b.session,redirectType:null},error:null}}if(e.error||e.error_description||e.error_code)throw new hi(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});const{provider_token:n,provider_refresh_token:i,access_token:r,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!r||!a||!o||!c)throw new hi("No session defined in URL");const h=Math.round(Date.now()/1e3),u=parseInt(a);let d=h+u;l&&(d=parseInt(l));const f=d-h;f*1e3<=on&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${u}s`);const g=d-u;h-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,d,h):h-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",g,d,h);const{data:m,error:p}=await this._getUser(r);if(p)throw p;const _={provider_token:n,provider_refresh_token:i,access_token:r,expires_in:u,expires_at:d,refresh_token:o,token_type:c,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:e.type},error:null}}catch(e){if(B(e))return{data:{session:null,redirectType:null},error:e};throw e}}_isImplicitGrantFlow(){const t=Or(window.location.href);return!!(ne()&&(t.access_token||t.error_description))}async _isPKCEFlow(){const t=Or(window.location.href),e=await li(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&e)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async e=>{var n;const{data:i,error:r}=e;if(r)return{error:r};const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(Kb(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Tr(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(t){const e=Fb(),n={id:e,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",e),this.stateChangeEmitters.delete(e)}};return this._debug("#onAuthStateChange()","registered callback with id",e),this.stateChangeEmitters.set(e,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(e)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async e=>{var n,i;try{const{data:{session:r},error:o}=e;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",t,"session",r)}catch(r){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",r),console.error(r)}})}async resetPasswordForEmail(t,e={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await xs(this.storage,this.storageKey,!0));try{return await Y(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:e.captchaToken}},headers:this.headers,redirectTo:e.redirectTo})}catch(r){if(B(r))return{data:null,error:r};throw r}}async getUserIdentities(){var t;try{const{data:e,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=e.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(e){if(B(e))return{data:null,error:e};throw e}}async linkIdentity(t){var e;try{const{data:n,error:i}=await this._useSession(async r=>{var o,a,l,c,h;const{data:u,error:d}=r;if(d)throw d;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Y(this.fetch,"GET",f,{headers:this.headers,jwt:(h=(c=u.session)===null||c===void 0?void 0:c.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return ne()&&!(!((e=t.options)===null||e===void 0)&&e.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(B(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async e=>{var n,i;const{data:r,error:o}=e;if(o)throw o;return await Y(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(e){if(B(e))return{data:null,error:e};throw e}}async _refreshAccessToken(t){const e=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(e,"begin");try{const n=Date.now();return await Wb(async i=>(i>0&&await Vb(200*Math.pow(2,i-1)),this._debug(e,"refreshing attempt",i),await Y(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ae})),(i,r)=>{const o=200*Math.pow(2,i);return r&&Er(r)&&Date.now()+o-n<on})}catch(n){if(this._debug(e,"error",n),B(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(e,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,e){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:e.redirectTo,scopes:e.scopes,queryParams:e.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",e,"url",n),ne()&&!e.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const e="#_recoverAndRefresh()";this._debug(e,"begin");try{const n=await li(this.storage,this.storageKey);if(this._debug(e,"session from storage",n),!this._isValidSession(n)){this._debug(e,"session is not valid"),n!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),r=((t=n.expires_at)!==null&&t!==void 0?t:1/0)<i+jl;if(this._debug(e,`session has${r?"":" not"} expired with margin of ${jl}s`),r){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),Er(o)||(this._debug(e,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(e,"error",n),console.error(n);return}finally{this._debug(e,"end")}}async _callRefreshToken(t){var e,n;if(!t)throw new Xe;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new sr;const{data:r,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!r.session)throw new Xe;await this._saveSession(r.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",r.session);const a={session:r.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(r){if(this._debug(i,"error",r),B(r)){const o={session:null,error:r};return Er(r)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(e=this.refreshingDeferred)===null||e===void 0||e.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(r),r}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,e,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",e,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:e});const r=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,e)}catch(l){r.push(l)}});if(await Promise.all(o),r.length>0){for(let a=0;a<r.length;a+=1)console.error(r[a]);throw r[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Xh(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Tr(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ne()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),on);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/on);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${on}ms, refresh threshold is ${ql} ticks`),i<=ql&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof tu)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ne()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const e=`#_onVisibilityChanged(${t})`;this._debug(e,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(e,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,e,n){const i=[`provider=${encodeURIComponent(e)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[r,o]=await xs(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(r)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(n!=null&&n.queryParams){const r=new URLSearchParams(n.queryParams);i.push(r.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async e=>{var n;const{data:i,error:r}=e;return r?{data:null,error:r}:await Y(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(e){if(B(e))return{data:null,error:e};throw e}}async _enroll(t){try{return await this._useSession(async e=>{var n,i;const{data:r,error:o}=e;if(o)return{data:null,error:o};const{data:a,error:l}=await Y(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:t.friendlyName,factor_type:t.factorType,issuer:t.issuer},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(!((i=a==null?void 0:a.totp)===null||i===void 0)&&i.qr_code&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(e){if(B(e))return{data:null,error:e};throw e}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async e=>{var n;const{data:i,error:r}=e;if(r)return{data:null,error:r};const{data:o,error:a}=await Y(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(e){if(B(e))return{data:null,error:e};throw e}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async e=>{var n;const{data:i,error:r}=e;return r?{data:null,error:r}:await Y(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(e){if(B(e))return{data:null,error:e};throw e}})}async _challengeAndVerify(t){const{data:e,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:e.id,code:t.code})}async _listFactors(){const{data:{user:t},error:e}=await this.getUser();if(e)return{data:null,error:e};const n=(t==null?void 0:t.factors)||[],i=n.filter(r=>r.factor_type==="totp"&&r.status==="verified");return{data:{all:n,totp:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var e,n;const{data:{session:i},error:r}=t;if(r)return{data:null,error:r};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(e=i.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const h=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:h},error:null}}))}}Rn.nextInstanceID=0;const fy=Rn;class gy extends fy{constructor(t){super(t)}}var my=function(s,t,e,n){function i(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):i(h.value).then(a,l)}c((n=n.apply(s,t||[])).next())})};class py{constructor(t,e,n){var i,r,o,a,l,c,h,u;if(this.supabaseUrl=t,this.supabaseKey=e,!t)throw new Error("supabaseUrl is required.");if(!e)throw new Error("supabaseKey is required.");const d=Pb(t);this.realtimeUrl=`${d}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${d}/auth/v1`,this.storageUrl=`${d}/storage/v1`,this.functionsUrl=`${d}/functions/v1`;const f=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,g={db:Ob,realtime:Mb,auth:Object.assign(Object.assign({},Tb),{storageKey:f}),global:Sb},m=Ib(n??{},g);this.storageKey=(r=(i=m.auth)===null||i===void 0?void 0:i.storageKey)!==null&&r!==void 0?r:"",this.headers=(a=(o=m.global)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((l=m.auth)!==null&&l!==void 0?l:{},this.headers,(c=m.global)===null||c===void 0?void 0:c.fetch),this.fetch=Ab(e,this._getAccessToken.bind(this),(h=m.global)===null||h===void 0?void 0:h.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},m.realtime)),this.rest=new Ho(`${d}/rest/v1`,{headers:this.headers,schema:(u=m.db)===null||u===void 0?void 0:u.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new F_(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new wb(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,e;return my(this,void 0,void 0,function*(){const{data:n}=yield this.auth.getSession();return(e=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:i,storageKey:r,flowType:o,debug:a},l,c){var h;const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new gy({url:this.authUrl,headers:Object.assign(Object.assign({},u),l),storageKey:r,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:i,flowType:o,debug:a,fetch:c,hasCustomAuthorizationHeader:(h="Authorization"in this.headers)!==null&&h!==void 0?h:!1})}_initRealtimeClient(t){return new lb(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,n)=>{this._handleTokenChanged(e,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.realtime.setAuth(n??null),this.changedAccessToken=n):t==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const _y=(s,t,e)=>new py(s,t,e);async function by(s){const{data:t,error:e}=await te.from("access").insert({on:Qt.id,on_email:Qt.email,to:s});if(e)throw e;return t}async function yy(s){const{data:t,error:e}=await te.from("access").delete().eq("on",Qt.id).eq("to",s);if(e)throw e}async function Cr(){const{data:s,error:t}=await te.from("access").select().filter("on_email","eq",Qt.email);if(t)throw t;return s}async function vy(){const{data:s,error:t}=await te.from("access").select("*").filter("to","eq",Qt.email);if(t)throw t;return s}function go(s,t){console.log(s,t),nr.set(s),Bs.set(t),localStorage.setItem("email",s),localStorage.setItem("uuid",t)}const wy="https://qipnvyttafkjlwfkolsq.supabase.co",xy="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFpcG52eXR0YWZramx3ZmtvbHNxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTIwNTc5NzksImV4cCI6MjAyNzYzMzk3OX0.8D2UoQHC89N9KQDej-5v1N13n6mCSjP0WiO_xs2Vh34",te=_y(wy,xy);let Qt,Bs=Vn(),nr=Vn();async function ky(){let{data:s,error:t}=await te.auth.getUser();if(t)return console.log("Not logged in!"),!1;if(!s.user||!s.user.email)return;console.log(s),Qt=s.user,Bs.set(s.user.id),nr.set(s.user.email);const e=localStorage.getItem("uuid"),n=localStorage.getItem("email");return e&&n&&(Bs.set(e),go(n,e)),!0}async function Sy(s){Qt=s.detail}class ps extends Error{}class Oy extends ps{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class Ty extends ps{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class My extends ps{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class Cs extends ps{}class eu extends ps{constructor(t){super(`Invalid unit ${t}`)}}class Ft extends ps{}class Ce extends ps{constructor(){super("Zone is an abstract class")}}const D="numeric",ce="short",Ut="long",Vi={year:D,month:D,day:D},su={year:D,month:ce,day:D},Ey={year:D,month:ce,day:D,weekday:ce},nu={year:D,month:Ut,day:D},iu={year:D,month:Ut,day:D,weekday:Ut},ru={hour:D,minute:D},ou={hour:D,minute:D,second:D},au={hour:D,minute:D,second:D,timeZoneName:ce},lu={hour:D,minute:D,second:D,timeZoneName:Ut},cu={hour:D,minute:D,hourCycle:"h23"},hu={hour:D,minute:D,second:D,hourCycle:"h23"},uu={hour:D,minute:D,second:D,hourCycle:"h23",timeZoneName:ce},du={hour:D,minute:D,second:D,hourCycle:"h23",timeZoneName:Ut},fu={year:D,month:D,day:D,hour:D,minute:D},gu={year:D,month:D,day:D,hour:D,minute:D,second:D},mu={year:D,month:ce,day:D,hour:D,minute:D},pu={year:D,month:ce,day:D,hour:D,minute:D,second:D},Cy={year:D,month:ce,day:D,weekday:ce,hour:D,minute:D},_u={year:D,month:Ut,day:D,hour:D,minute:D,timeZoneName:ce},bu={year:D,month:Ut,day:D,hour:D,minute:D,second:D,timeZoneName:ce},yu={year:D,month:Ut,day:D,weekday:Ut,hour:D,minute:D,timeZoneName:Ut},vu={year:D,month:Ut,day:D,weekday:Ut,hour:D,minute:D,second:D,timeZoneName:Ut};class Bn{get type(){throw new Ce}get name(){throw new Ce}get ianaName(){return this.name}get isUniversal(){throw new Ce}offsetName(t,e){throw new Ce}formatOffset(t,e){throw new Ce}offset(t){throw new Ce}equals(t){throw new Ce}get isValid(){throw new Ce}}let Dr=null;class ir extends Bn{static get instance(){return Dr===null&&(Dr=new ir),Dr}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:e,locale:n}){return Cu(t,e,n)}formatOffset(t,e){return Sn(this.offset(t),e)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let Ei={};function Dy(s){return Ei[s]||(Ei[s]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:s,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Ei[s]}const Ay={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Py(s,t){const e=s.format(t).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(e),[,i,r,o,a,l,c,h]=n;return[o,i,r,a,l,c,h]}function Iy(s,t){const e=s.formatToParts(t),n=[];for(let i=0;i<e.length;i++){const{type:r,value:o}=e[i],a=Ay[r];r==="era"?n[a]=o:V(a)||(n[a]=parseInt(o,10))}return n}let ui={};class Te extends Bn{static create(t){return ui[t]||(ui[t]=new Te(t)),ui[t]}static resetCache(){ui={},Ei={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Te.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:e,locale:n}){return Cu(t,e,n,this.name)}formatOffset(t,e){return Sn(this.offset(t),e)}offset(t){const e=new Date(t);if(isNaN(e))return NaN;const n=Dy(this.name);let[i,r,o,a,l,c,h]=n.formatToParts?Iy(n,e):Py(n,e);a==="BC"&&(i=-Math.abs(i)+1);const d=or({year:i,month:r,day:o,hour:l===24?0:l,minute:c,second:h,millisecond:0});let f=+e;const g=f%1e3;return f-=g>=0?g:1e3+g,(d-f)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let Gl={};function Ly(s,t={}){const e=JSON.stringify([s,t]);let n=Gl[e];return n||(n=new Intl.ListFormat(s,t),Gl[e]=n),n}let mo={};function po(s,t={}){const e=JSON.stringify([s,t]);let n=mo[e];return n||(n=new Intl.DateTimeFormat(s,t),mo[e]=n),n}let _o={};function Ry(s,t={}){const e=JSON.stringify([s,t]);let n=_o[e];return n||(n=new Intl.NumberFormat(s,t),_o[e]=n),n}let bo={};function Ny(s,t={}){const{base:e,...n}=t,i=JSON.stringify([s,n]);let r=bo[i];return r||(r=new Intl.RelativeTimeFormat(s,t),bo[i]=r),r}let pn=null;function $y(){return pn||(pn=new Intl.DateTimeFormat().resolvedOptions().locale,pn)}let Zl={};function Fy(s){let t=Zl[s];if(!t){const e=new Intl.Locale(s);t="getWeekInfo"in e?e.getWeekInfo():e.weekInfo,Zl[s]=t}return t}function jy(s){const t=s.indexOf("-x-");t!==-1&&(s=s.substring(0,t));const e=s.indexOf("-u-");if(e===-1)return[s];{let n,i;try{n=po(s).resolvedOptions(),i=s}catch{const l=s.substring(0,e);n=po(l).resolvedOptions(),i=l}const{numberingSystem:r,calendar:o}=n;return[i,r,o]}}function zy(s,t,e){return(e||t)&&(s.includes("-u-")||(s+="-u"),e&&(s+=`-ca-${e}`),t&&(s+=`-nu-${t}`)),s}function Vy(s){const t=[];for(let e=1;e<=12;e++){const n=F.utc(2009,e,1);t.push(s(n))}return t}function Wy(s){const t=[];for(let e=1;e<=7;e++){const n=F.utc(2016,11,13+e);t.push(s(n))}return t}function di(s,t,e,n){const i=s.listingMode();return i==="error"?null:i==="en"?e(t):n(t)}function By(s){return s.numberingSystem&&s.numberingSystem!=="latn"?!1:s.numberingSystem==="latn"||!s.locale||s.locale.startsWith("en")||new Intl.DateTimeFormat(s.intl).resolvedOptions().numberingSystem==="latn"}class Hy{constructor(t,e,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:i,floor:r,...o}=n;if(!e||Object.keys(o).length>0){const a={useGrouping:!1,...n};n.padTo>0&&(a.minimumIntegerDigits=n.padTo),this.inf=Ry(t,a)}}format(t){if(this.inf){const e=this.floor?Math.floor(t):t;return this.inf.format(e)}else{const e=this.floor?Math.floor(t):Ko(t,3);return wt(e,this.padTo)}}}class Uy{constructor(t,e,n){this.opts=n,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&Te.create(a).valid?(i=a,this.dt=t):(i="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,i=t.zone.name):(i="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const r={...this.opts};r.timeZone=r.timeZone||i,this.dtf=po(e,r)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(e=>{if(e.type==="timeZoneName"){const n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...e,value:n}}else return e}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class qy{constructor(t,e,n){this.opts={style:"long",...n},!e&&Mu()&&(this.rtf=Ny(t,n))}format(t,e){return this.rtf?this.rtf.format(t,e):d0(e,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,e){return this.rtf?this.rtf.formatToParts(t,e):[]}}const Yy={firstDay:1,minimalDays:4,weekend:[6,7]};class et{static fromOpts(t){return et.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,e,n,i,r=!1){const o=t||bt.defaultLocale,a=o||(r?"en-US":$y()),l=e||bt.defaultNumberingSystem,c=n||bt.defaultOutputCalendar,h=yo(i)||bt.defaultWeekSettings;return new et(a,l,c,h,o)}static resetCache(){pn=null,mo={},_o={},bo={}}static fromObject({locale:t,numberingSystem:e,outputCalendar:n,weekSettings:i}={}){return et.create(t,e,n,i)}constructor(t,e,n,i,r){const[o,a,l]=jy(t);this.locale=o,this.numberingSystem=e||a||null,this.outputCalendar=n||l||null,this.weekSettings=i,this.intl=zy(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=By(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),e=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&e?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:et.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,yo(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,e=!1){return di(this,t,Pu,()=>{const n=e?{month:t,day:"numeric"}:{month:t},i=e?"format":"standalone";return this.monthsCache[i][t]||(this.monthsCache[i][t]=Vy(r=>this.extract(r,n,"month"))),this.monthsCache[i][t]})}weekdays(t,e=!1){return di(this,t,Ru,()=>{const n=e?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},i=e?"format":"standalone";return this.weekdaysCache[i][t]||(this.weekdaysCache[i][t]=Wy(r=>this.extract(r,n,"weekday"))),this.weekdaysCache[i][t]})}meridiems(){return di(this,void 0,()=>Nu,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[F.utc(2016,11,13,9),F.utc(2016,11,13,19)].map(e=>this.extract(e,t,"dayperiod"))}return this.meridiemCache})}eras(t){return di(this,t,$u,()=>{const e={era:t};return this.eraCache[t]||(this.eraCache[t]=[F.utc(-40,1,1),F.utc(2017,1,1)].map(n=>this.extract(n,e,"era"))),this.eraCache[t]})}extract(t,e,n){const i=this.dtFormatter(t,e),r=i.formatToParts(),o=r.find(a=>a.type.toLowerCase()===n);return o?o.value:null}numberFormatter(t={}){return new Hy(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,e={}){return new Uy(t,this.intl,e)}relFormatter(t={}){return new qy(this.intl,this.isEnglish(),t)}listFormatter(t={}){return Ly(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Eu()?Fy(this.locale):Yy}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}let Ar=null;class Rt extends Bn{static get utcInstance(){return Ar===null&&(Ar=new Rt(0)),Ar}static instance(t){return t===0?Rt.utcInstance:new Rt(t)}static parseSpecifier(t){if(t){const e=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(e)return new Rt(ar(e[1],e[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Sn(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Sn(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,e){return Sn(this.fixed,e)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class Gy extends Bn{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Re(s,t){if(V(s)||s===null)return t;if(s instanceof Bn)return s;if(Ky(s)){const e=s.toLowerCase();return e==="default"?t:e==="local"||e==="system"?ir.instance:e==="utc"||e==="gmt"?Rt.utcInstance:Rt.parseSpecifier(e)||Te.create(s)}else return cs(s)?Rt.instance(s):typeof s=="object"&&"offset"in s&&typeof s.offset=="function"?s:new Gy(s)}let Jl=()=>Date.now(),Kl="system",Xl=null,Ql=null,tc=null,ec=60,sc,nc=null;class bt{static get now(){return Jl}static set now(t){Jl=t}static set defaultZone(t){Kl=t}static get defaultZone(){return Re(Kl,ir.instance)}static get defaultLocale(){return Xl}static set defaultLocale(t){Xl=t}static get defaultNumberingSystem(){return Ql}static set defaultNumberingSystem(t){Ql=t}static get defaultOutputCalendar(){return tc}static set defaultOutputCalendar(t){tc=t}static get defaultWeekSettings(){return nc}static set defaultWeekSettings(t){nc=yo(t)}static get twoDigitCutoffYear(){return ec}static set twoDigitCutoffYear(t){ec=t%100}static get throwOnInvalid(){return sc}static set throwOnInvalid(t){sc=t}static resetCaches(){et.resetCache(),Te.resetCache()}}class oe{constructor(t,e){this.reason=t,this.explanation=e}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const wu=[0,31,59,90,120,151,181,212,243,273,304,334],xu=[0,31,60,91,121,152,182,213,244,274,305,335];function Kt(s,t){return new oe("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${s}, which is invalid`)}function Go(s,t,e){const n=new Date(Date.UTC(s,t-1,e));s<100&&s>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);const i=n.getUTCDay();return i===0?7:i}function ku(s,t,e){return e+(Hn(s)?xu:wu)[t-1]}function Su(s,t){const e=Hn(s)?xu:wu,n=e.findIndex(r=>r<t),i=t-e[n];return{month:n+1,day:i}}function Zo(s,t){return(s-t+7)%7+1}function Wi(s,t=4,e=1){const{year:n,month:i,day:r}=s,o=ku(n,i,r),a=Zo(Go(n,i,r),e);let l=Math.floor((o-a+14-t)/7),c;return l<1?(c=n-1,l=Nn(c,t,e)):l>Nn(n,t,e)?(c=n+1,l=1):c=n,{weekYear:c,weekNumber:l,weekday:a,...lr(s)}}function ic(s,t=4,e=1){const{weekYear:n,weekNumber:i,weekday:r}=s,o=Zo(Go(n,1,t),e),a=Rs(n);let l=i*7+r-o-7+t,c;l<1?(c=n-1,l+=Rs(c)):l>a?(c=n+1,l-=Rs(n)):c=n;const{month:h,day:u}=Su(c,l);return{year:c,month:h,day:u,...lr(s)}}function Pr(s){const{year:t,month:e,day:n}=s,i=ku(t,e,n);return{year:t,ordinal:i,...lr(s)}}function rc(s){const{year:t,ordinal:e}=s,{month:n,day:i}=Su(t,e);return{year:t,month:n,day:i,...lr(s)}}function oc(s,t){if(!V(s.localWeekday)||!V(s.localWeekNumber)||!V(s.localWeekYear)){if(!V(s.weekday)||!V(s.weekNumber)||!V(s.weekYear))throw new Cs("Cannot mix locale-based week fields with ISO-based week fields");return V(s.localWeekday)||(s.weekday=s.localWeekday),V(s.localWeekNumber)||(s.weekNumber=s.localWeekNumber),V(s.localWeekYear)||(s.weekYear=s.localWeekYear),delete s.localWeekday,delete s.localWeekNumber,delete s.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Zy(s,t=4,e=1){const n=rr(s.weekYear),i=Xt(s.weekNumber,1,Nn(s.weekYear,t,e)),r=Xt(s.weekday,1,7);return n?i?r?!1:Kt("weekday",s.weekday):Kt("week",s.weekNumber):Kt("weekYear",s.weekYear)}function Jy(s){const t=rr(s.year),e=Xt(s.ordinal,1,Rs(s.year));return t?e?!1:Kt("ordinal",s.ordinal):Kt("year",s.year)}function Ou(s){const t=rr(s.year),e=Xt(s.month,1,12),n=Xt(s.day,1,Bi(s.year,s.month));return t?e?n?!1:Kt("day",s.day):Kt("month",s.month):Kt("year",s.year)}function Tu(s){const{hour:t,minute:e,second:n,millisecond:i}=s,r=Xt(t,0,23)||t===24&&e===0&&n===0&&i===0,o=Xt(e,0,59),a=Xt(n,0,59),l=Xt(i,0,999);return r?o?a?l?!1:Kt("millisecond",i):Kt("second",n):Kt("minute",e):Kt("hour",t)}function V(s){return typeof s>"u"}function cs(s){return typeof s=="number"}function rr(s){return typeof s=="number"&&s%1===0}function Ky(s){return typeof s=="string"}function Xy(s){return Object.prototype.toString.call(s)==="[object Date]"}function Mu(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Eu(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Qy(s){return Array.isArray(s)?s:[s]}function ac(s,t,e){if(s.length!==0)return s.reduce((n,i)=>{const r=[t(i),i];return n&&e(n[0],r[0])===n[0]?n:r},null)[1]}function t0(s,t){return t.reduce((e,n)=>(e[n]=s[n],e),{})}function Hs(s,t){return Object.prototype.hasOwnProperty.call(s,t)}function yo(s){if(s==null)return null;if(typeof s!="object")throw new Ft("Week settings must be an object");if(!Xt(s.firstDay,1,7)||!Xt(s.minimalDays,1,7)||!Array.isArray(s.weekend)||s.weekend.some(t=>!Xt(t,1,7)))throw new Ft("Invalid week settings");return{firstDay:s.firstDay,minimalDays:s.minimalDays,weekend:Array.from(s.weekend)}}function Xt(s,t,e){return rr(s)&&s>=t&&s<=e}function e0(s,t){return s-t*Math.floor(s/t)}function wt(s,t=2){const e=s<0;let n;return e?n="-"+(""+-s).padStart(t,"0"):n=(""+s).padStart(t,"0"),n}function Ie(s){if(!(V(s)||s===null||s===""))return parseInt(s,10)}function Qe(s){if(!(V(s)||s===null||s===""))return parseFloat(s)}function Jo(s){if(!(V(s)||s===null||s==="")){const t=parseFloat("0."+s)*1e3;return Math.floor(t)}}function Ko(s,t,e=!1){const n=10**t;return(e?Math.trunc:Math.round)(s*n)/n}function Hn(s){return s%4===0&&(s%100!==0||s%400===0)}function Rs(s){return Hn(s)?366:365}function Bi(s,t){const e=e0(t-1,12)+1,n=s+(t-e)/12;return e===2?Hn(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][e-1]}function or(s){let t=Date.UTC(s.year,s.month-1,s.day,s.hour,s.minute,s.second,s.millisecond);return s.year<100&&s.year>=0&&(t=new Date(t),t.setUTCFullYear(s.year,s.month-1,s.day)),+t}function lc(s,t,e){return-Zo(Go(s,1,t),e)+t-1}function Nn(s,t=4,e=1){const n=lc(s,t,e),i=lc(s+1,t,e);return(Rs(s)-n+i)/7}function vo(s){return s>99?s:s>bt.twoDigitCutoffYear?1900+s:2e3+s}function Cu(s,t,e,n=null){const i=new Date(s),r={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(r.timeZone=n);const o={timeZoneName:t,...r},a=new Intl.DateTimeFormat(e,o).formatToParts(i).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function ar(s,t){let e=parseInt(s,10);Number.isNaN(e)&&(e=0);const n=parseInt(t,10)||0,i=e<0||Object.is(e,-0)?-n:n;return e*60+i}function Du(s){const t=Number(s);if(typeof s=="boolean"||s===""||Number.isNaN(t))throw new Ft(`Invalid unit value ${s}`);return t}function Hi(s,t){const e={};for(const n in s)if(Hs(s,n)){const i=s[n];if(i==null)continue;e[t(n)]=Du(i)}return e}function Sn(s,t){const e=Math.trunc(Math.abs(s/60)),n=Math.trunc(Math.abs(s%60)),i=s>=0?"+":"-";switch(t){case"short":return`${i}${wt(e,2)}:${wt(n,2)}`;case"narrow":return`${i}${e}${n>0?`:${n}`:""}`;case"techie":return`${i}${wt(e,2)}${wt(n,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function lr(s){return t0(s,["hour","minute","second","millisecond"])}const s0=["January","February","March","April","May","June","July","August","September","October","November","December"],Au=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n0=["J","F","M","A","M","J","J","A","S","O","N","D"];function Pu(s){switch(s){case"narrow":return[...n0];case"short":return[...Au];case"long":return[...s0];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Iu=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Lu=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],i0=["M","T","W","T","F","S","S"];function Ru(s){switch(s){case"narrow":return[...i0];case"short":return[...Lu];case"long":return[...Iu];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Nu=["AM","PM"],r0=["Before Christ","Anno Domini"],o0=["BC","AD"],a0=["B","A"];function $u(s){switch(s){case"narrow":return[...a0];case"short":return[...o0];case"long":return[...r0];default:return null}}function l0(s){return Nu[s.hour<12?0:1]}function c0(s,t){return Ru(t)[s.weekday-1]}function h0(s,t){return Pu(t)[s.month-1]}function u0(s,t){return $u(t)[s.year<0?0:1]}function d0(s,t,e="always",n=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},r=["hours","minutes","seconds"].indexOf(s)===-1;if(e==="auto"&&r){const u=s==="days";switch(t){case 1:return u?"tomorrow":`next ${i[s][0]}`;case-1:return u?"yesterday":`last ${i[s][0]}`;case 0:return u?"today":`this ${i[s][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,c=i[s],h=n?l?c[1]:c[2]||c[1]:l?i[s][0]:s;return o?`${a} ${h} ago`:`in ${a} ${h}`}function cc(s,t){let e="";for(const n of s)n.literal?e+=n.val:e+=t(n.val);return e}const f0={D:Vi,DD:su,DDD:nu,DDDD:iu,t:ru,tt:ou,ttt:au,tttt:lu,T:cu,TT:hu,TTT:uu,TTTT:du,f:fu,ff:mu,fff:_u,ffff:yu,F:gu,FF:pu,FFF:bu,FFFF:vu};class At{static create(t,e={}){return new At(t,e)}static parseFormat(t){let e=null,n="",i=!1;const r=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(n.length>0&&r.push({literal:i||/^\s+$/.test(n),val:n}),e=null,n="",i=!i):i||a===e?n+=a:(n.length>0&&r.push({literal:/^\s+$/.test(n),val:n}),n=a,e=a)}return n.length>0&&r.push({literal:i||/^\s+$/.test(n),val:n}),r}static macroTokenToFormatOpts(t){return f0[t]}constructor(t,e){this.opts=e,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,e){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...e}).format()}dtFormatter(t,e={}){return this.loc.dtFormatter(t,{...this.opts,...e})}formatDateTime(t,e){return this.dtFormatter(t,e).format()}formatDateTimeParts(t,e){return this.dtFormatter(t,e).formatToParts()}formatInterval(t,e){return this.dtFormatter(t.start,e).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,e){return this.dtFormatter(t,e).resolvedOptions()}num(t,e=0){if(this.opts.forceSimple)return wt(t,e);const n={...this.opts};return e>0&&(n.padTo=e),this.loc.numberFormatter(n).format(t)}formatDateTimeFromString(t,e){const n=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",r=(f,g)=>this.loc.extract(t,f,g),o=f=>t.isOffsetFixed&&t.offset===0&&f.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,f.format):"",a=()=>n?l0(t):r({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(f,g)=>n?h0(t,f):r(g?{month:f}:{month:f,day:"numeric"},"month"),c=(f,g)=>n?c0(t,f):r(g?{weekday:f}:{weekday:f,month:"long",day:"numeric"},"weekday"),h=f=>{const g=At.macroTokenToFormatOpts(f);return g?this.formatWithSystemDefault(t,g):f},u=f=>n?u0(t,f):r({era:f},"era"),d=f=>{switch(f){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return i?r({day:"numeric"},"day"):this.num(t.day);case"dd":return i?r({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return i?r({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return i?r({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return i?r({month:"numeric"},"month"):this.num(t.month);case"MM":return i?r({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return i?r({year:"numeric"},"year"):this.num(t.year);case"yy":return i?r({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return i?r({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return i?r({year:"numeric"},"year"):this.num(t.year,6);case"G":return u("short");case"GG":return u("long");case"GGGGG":return u("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return h(f)}};return cc(At.parseFormat(e),d)}formatDurationFromString(t,e){const n=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=l=>c=>{const h=n(c);return h?this.num(l.get(h),c.length):c},r=At.parseFormat(e),o=r.reduce((l,{literal:c,val:h})=>c?l:l.concat(h),[]),a=t.shiftTo(...o.map(n).filter(l=>l));return cc(r,i(a))}}const Fu=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function qs(...s){const t=s.reduce((e,n)=>e+n.source,"");return RegExp(`^${t}$`)}function Ys(...s){return t=>s.reduce(([e,n,i],r)=>{const[o,a,l]=r(t,i);return[{...e,...o},a||n,l]},[{},null,1]).slice(0,2)}function Gs(s,...t){if(s==null)return[null,null];for(const[e,n]of t){const i=e.exec(s);if(i)return n(i)}return[null,null]}function ju(...s){return(t,e)=>{const n={};let i;for(i=0;i<s.length;i++)n[s[i]]=Ie(t[e+i]);return[n,null,e+i]}}const zu=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,g0=`(?:${zu.source}?(?:\\[(${Fu.source})\\])?)?`,Xo=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Vu=RegExp(`${Xo.source}${g0}`),Qo=RegExp(`(?:T${Vu.source})?`),m0=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,p0=/(\d{4})-?W(\d\d)(?:-?(\d))?/,_0=/(\d{4})-?(\d{3})/,b0=ju("weekYear","weekNumber","weekDay"),y0=ju("year","ordinal"),v0=/(\d{4})-(\d\d)-(\d\d)/,Wu=RegExp(`${Xo.source} ?(?:${zu.source}|(${Fu.source}))?`),w0=RegExp(`(?: ${Wu.source})?`);function Ns(s,t,e){const n=s[t];return V(n)?e:Ie(n)}function x0(s,t){return[{year:Ns(s,t),month:Ns(s,t+1,1),day:Ns(s,t+2,1)},null,t+3]}function Zs(s,t){return[{hours:Ns(s,t,0),minutes:Ns(s,t+1,0),seconds:Ns(s,t+2,0),milliseconds:Jo(s[t+3])},null,t+4]}function Un(s,t){const e=!s[t]&&!s[t+1],n=ar(s[t+1],s[t+2]),i=e?null:Rt.instance(n);return[{},i,t+3]}function qn(s,t){const e=s[t]?Te.create(s[t]):null;return[{},e,t+1]}const k0=RegExp(`^T?${Xo.source}$`),S0=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function O0(s){const[t,e,n,i,r,o,a,l,c]=s,h=t[0]==="-",u=l&&l[0]==="-",d=(f,g=!1)=>f!==void 0&&(g||f&&h)?-f:f;return[{years:d(Qe(e)),months:d(Qe(n)),weeks:d(Qe(i)),days:d(Qe(r)),hours:d(Qe(o)),minutes:d(Qe(a)),seconds:d(Qe(l),l==="-0"),milliseconds:d(Jo(c),u)}]}const T0={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function ta(s,t,e,n,i,r,o){const a={year:t.length===2?vo(Ie(t)):Ie(t),month:Au.indexOf(e)+1,day:Ie(n),hour:Ie(i),minute:Ie(r)};return o&&(a.second=Ie(o)),s&&(a.weekday=s.length>3?Iu.indexOf(s)+1:Lu.indexOf(s)+1),a}const M0=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function E0(s){const[,t,e,n,i,r,o,a,l,c,h,u]=s,d=ta(t,i,n,e,r,o,a);let f;return l?f=T0[l]:c?f=0:f=ar(h,u),[d,new Rt(f)]}function C0(s){return s.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const D0=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,A0=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,P0=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function hc(s){const[,t,e,n,i,r,o,a]=s;return[ta(t,i,n,e,r,o,a),Rt.utcInstance]}function I0(s){const[,t,e,n,i,r,o,a]=s;return[ta(t,a,e,n,i,r,o),Rt.utcInstance]}const L0=qs(m0,Qo),R0=qs(p0,Qo),N0=qs(_0,Qo),$0=qs(Vu),Bu=Ys(x0,Zs,Un,qn),F0=Ys(b0,Zs,Un,qn),j0=Ys(y0,Zs,Un,qn),z0=Ys(Zs,Un,qn);function V0(s){return Gs(s,[L0,Bu],[R0,F0],[N0,j0],[$0,z0])}function W0(s){return Gs(C0(s),[M0,E0])}function B0(s){return Gs(s,[D0,hc],[A0,hc],[P0,I0])}function H0(s){return Gs(s,[S0,O0])}const U0=Ys(Zs);function q0(s){return Gs(s,[k0,U0])}const Y0=qs(v0,w0),G0=qs(Wu),Z0=Ys(Zs,Un,qn);function J0(s){return Gs(s,[Y0,Bu],[G0,Z0])}const uc="Invalid Duration",Hu={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},K0={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Hu},Gt=146097/400,Ss=146097/4800,X0={years:{quarters:4,months:12,weeks:Gt/7,days:Gt,hours:Gt*24,minutes:Gt*24*60,seconds:Gt*24*60*60,milliseconds:Gt*24*60*60*1e3},quarters:{months:3,weeks:Gt/28,days:Gt/4,hours:Gt*24/4,minutes:Gt*24*60/4,seconds:Gt*24*60*60/4,milliseconds:Gt*24*60*60*1e3/4},months:{weeks:Ss/7,days:Ss,hours:Ss*24,minutes:Ss*24*60,seconds:Ss*24*60*60,milliseconds:Ss*24*60*60*1e3},...Hu},os=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Q0=os.slice(0).reverse();function De(s,t,e=!1){const n={values:e?t.values:{...s.values,...t.values||{}},loc:s.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||s.conversionAccuracy,matrix:t.matrix||s.matrix};return new U(n)}function Uu(s,t){let e=t.milliseconds??0;for(const n of Q0.slice(1))t[n]&&(e+=t[n]*s[n].milliseconds);return e}function dc(s,t){const e=Uu(s,t)<0?-1:1;os.reduceRight((n,i)=>{if(V(t[i]))return n;if(n){const r=t[n]*e,o=s[i][n],a=Math.floor(r/o);t[i]+=a*e,t[n]-=a*o*e}return i},null),os.reduce((n,i)=>{if(V(t[i]))return n;if(n){const r=t[n]%1;t[n]-=r,t[i]+=r*s[n][i]}return i},null)}function tv(s){const t={};for(const[e,n]of Object.entries(s))n!==0&&(t[e]=n);return t}class U{constructor(t){const e=t.conversionAccuracy==="longterm"||!1;let n=e?X0:K0;t.matrix&&(n=t.matrix),this.values=t.values,this.loc=t.loc||et.create(),this.conversionAccuracy=e?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(t,e){return U.fromObject({milliseconds:t},e)}static fromObject(t,e={}){if(t==null||typeof t!="object")throw new Ft(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new U({values:Hi(t,U.normalizeUnit),loc:et.fromObject(e),conversionAccuracy:e.conversionAccuracy,matrix:e.matrix})}static fromDurationLike(t){if(cs(t))return U.fromMillis(t);if(U.isDuration(t))return t;if(typeof t=="object")return U.fromObject(t);throw new Ft(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,e){const[n]=H0(t);return n?U.fromObject(n,e):U.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,e){const[n]=q0(t);return n?U.fromObject(n,e):U.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,e=null){if(!t)throw new Ft("need to specify a reason the Duration is invalid");const n=t instanceof oe?t:new oe(t,e);if(bt.throwOnInvalid)throw new My(n);return new U({invalid:n})}static normalizeUnit(t){const e={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!e)throw new eu(t);return e}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,e={}){const n={...e,floor:e.round!==!1&&e.floor!==!1};return this.isValid?At.create(this.loc,n).formatDurationFromString(this,t):uc}toHuman(t={}){if(!this.isValid)return uc;const e=os.map(n=>{const i=this.values[n];return V(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:n.slice(0,-1)}).format(i)}).filter(n=>n);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(e)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=Ko(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const e=this.toMillis();return e<0||e>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},F.fromMillis(e,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Uu(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const e=U.fromDurationLike(t),n={};for(const i of os)(Hs(e.values,i)||Hs(this.values,i))&&(n[i]=e.get(i)+this.get(i));return De(this,{values:n},!0)}minus(t){if(!this.isValid)return this;const e=U.fromDurationLike(t);return this.plus(e.negate())}mapUnits(t){if(!this.isValid)return this;const e={};for(const n of Object.keys(this.values))e[n]=Du(t(this.values[n],n));return De(this,{values:e},!0)}get(t){return this[U.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const e={...this.values,...Hi(t,U.normalizeUnit)};return De(this,{values:e})}reconfigure({locale:t,numberingSystem:e,conversionAccuracy:n,matrix:i}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:e}),matrix:i,conversionAccuracy:n};return De(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return dc(this.matrix,t),De(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=tv(this.normalize().shiftToAll().toObject());return De(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>U.normalizeUnit(o));const e={},n={},i=this.toObject();let r;for(const o of os)if(t.indexOf(o)>=0){r=o;let a=0;for(const c in n)a+=this.matrix[c][o]*n[c],n[c]=0;cs(i[o])&&(a+=i[o]);const l=Math.trunc(a);e[o]=l,n[o]=(a*1e3-l*1e3)/1e3}else cs(i[o])&&(n[o]=i[o]);for(const o in n)n[o]!==0&&(e[r]+=o===r?n[o]:n[o]/this.matrix[r][o]);return dc(this.matrix,e),De(this,{values:e},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const e of Object.keys(this.values))t[e]=this.values[e]===0?0:-this.values[e];return De(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function e(n,i){return n===void 0||n===0?i===void 0||i===0:n===i}for(const n of os)if(!e(this.values[n],t.values[n]))return!1;return!0}}const Os="Invalid Interval";function ev(s,t){return!s||!s.isValid?gt.invalid("missing or invalid start"):!t||!t.isValid?gt.invalid("missing or invalid end"):t<s?gt.invalid("end before start",`The end of an interval must be after its start, but you had start=${s.toISO()} and end=${t.toISO()}`):null}class gt{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,e=null){if(!t)throw new Ft("need to specify a reason the Interval is invalid");const n=t instanceof oe?t:new oe(t,e);if(bt.throwOnInvalid)throw new Ty(n);return new gt({invalid:n})}static fromDateTimes(t,e){const n=ln(t),i=ln(e),r=ev(n,i);return r??new gt({start:n,end:i})}static after(t,e){const n=U.fromDurationLike(e),i=ln(t);return gt.fromDateTimes(i,i.plus(n))}static before(t,e){const n=U.fromDurationLike(e),i=ln(t);return gt.fromDateTimes(i.minus(n),i)}static fromISO(t,e){const[n,i]=(t||"").split("/",2);if(n&&i){let r,o;try{r=F.fromISO(n,e),o=r.isValid}catch{o=!1}let a,l;try{a=F.fromISO(i,e),l=a.isValid}catch{l=!1}if(o&&l)return gt.fromDateTimes(r,a);if(o){const c=U.fromISO(i,e);if(c.isValid)return gt.after(r,c)}else if(l){const c=U.fromISO(n,e);if(c.isValid)return gt.before(a,c)}}return gt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",e){if(!this.isValid)return NaN;const n=this.start.startOf(t,e);let i;return e!=null&&e.useLocaleWeeks?i=this.end.reconfigure({locale:n.locale}):i=this.end,i=i.startOf(t,e),Math.floor(i.diff(n,t).get(t))+(i.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:e}={}){return this.isValid?gt.fromDateTimes(t||this.s,e||this.e):this}splitAt(...t){if(!this.isValid)return[];const e=t.map(ln).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),n=[];let{s:i}=this,r=0;for(;i<this.e;){const o=e[r]||this.e,a=+o>+this.e?this.e:o;n.push(gt.fromDateTimes(i,a)),i=a,r+=1}return n}splitBy(t){const e=U.fromDurationLike(t);if(!this.isValid||!e.isValid||e.as("milliseconds")===0)return[];let{s:n}=this,i=1,r;const o=[];for(;n<this.e;){const a=this.start.plus(e.mapUnits(l=>l*i));r=+a>+this.e?this.e:a,o.push(gt.fromDateTimes(n,r)),n=r,i+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const e=this.s>t.s?this.s:t.s,n=this.e<t.e?this.e:t.e;return e>=n?null:gt.fromDateTimes(e,n)}union(t){if(!this.isValid)return this;const e=this.s<t.s?this.s:t.s,n=this.e>t.e?this.e:t.e;return gt.fromDateTimes(e,n)}static merge(t){const[e,n]=t.sort((i,r)=>i.s-r.s).reduce(([i,r],o)=>r?r.overlaps(o)||r.abutsStart(o)?[i,r.union(o)]:[i.concat([r]),o]:[i,o],[[],null]);return n&&e.push(n),e}static xor(t){let e=null,n=0;const i=[],r=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...r),a=o.sort((l,c)=>l.time-c.time);for(const l of a)n+=l.type==="s"?1:-1,n===1?e=l.time:(e&&+e!=+l.time&&i.push(gt.fromDateTimes(e,l.time)),e=null);return gt.merge(i)}difference(...t){return gt.xor([this].concat(t)).map(e=>this.intersection(e)).filter(e=>e&&!e.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Os}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=Vi,e={}){return this.isValid?At.create(this.s.loc.clone(e),t).formatInterval(this):Os}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Os}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Os}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Os}toFormat(t,{separator:e=" – "}={}){return this.isValid?`${this.s.toFormat(t)}${e}${this.e.toFormat(t)}`:Os}toDuration(t,e){return this.isValid?this.e.diff(this.s,t,e):U.invalid(this.invalidReason)}mapEndpoints(t){return gt.fromDateTimes(t(this.s),t(this.e))}}class fi{static hasDST(t=bt.defaultZone){const e=F.now().setZone(t).set({month:12});return!t.isUniversal&&e.offset!==e.set({month:6}).offset}static isValidIANAZone(t){return Te.isValidZone(t)}static normalizeZone(t){return Re(t,bt.defaultZone)}static getStartOfWeek({locale:t=null,locObj:e=null}={}){return(e||et.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:e=null}={}){return(e||et.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:e=null}={}){return(e||et.create(t)).getWeekendDays().slice()}static months(t="long",{locale:e=null,numberingSystem:n=null,locObj:i=null,outputCalendar:r="gregory"}={}){return(i||et.create(e,n,r)).months(t)}static monthsFormat(t="long",{locale:e=null,numberingSystem:n=null,locObj:i=null,outputCalendar:r="gregory"}={}){return(i||et.create(e,n,r)).months(t,!0)}static weekdays(t="long",{locale:e=null,numberingSystem:n=null,locObj:i=null}={}){return(i||et.create(e,n,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:e=null,numberingSystem:n=null,locObj:i=null}={}){return(i||et.create(e,n,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return et.create(t).meridiems()}static eras(t="short",{locale:e=null}={}){return et.create(e,null,"gregory").eras(t)}static features(){return{relative:Mu(),localeWeek:Eu()}}}function fc(s,t){const e=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=e(t)-e(s);return Math.floor(U.fromMillis(n).as("days"))}function sv(s,t,e){const n=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const h=fc(l,c);return(h-h%7)/7}],["days",fc]],i={},r=s;let o,a;for(const[l,c]of n)e.indexOf(l)>=0&&(o=l,i[l]=c(s,t),a=r.plus(i),a>t?(i[l]--,s=r.plus(i),s>t&&(a=s,i[l]--,s=r.plus(i))):s=a);return[s,i,a,o]}function nv(s,t,e,n){let[i,r,o,a]=sv(s,t,e);const l=t-i,c=e.filter(u=>["hours","minutes","seconds","milliseconds"].indexOf(u)>=0);c.length===0&&(o<t&&(o=i.plus({[a]:1})),o!==i&&(r[a]=(r[a]||0)+l/(o-i)));const h=U.fromObject(r,n);return c.length>0?U.fromMillis(l,n).shiftTo(...c).plus(h):h}const ea={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},gc={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},iv=ea.hanidec.replace(/[\[|\]]/g,"").split("");function rv(s){let t=parseInt(s,10);if(isNaN(t)){t="";for(let e=0;e<s.length;e++){const n=s.charCodeAt(e);if(s[e].search(ea.hanidec)!==-1)t+=iv.indexOf(s[e]);else for(const i in gc){const[r,o]=gc[i];n>=r&&n<=o&&(t+=n-r)}}return parseInt(t,10)}else return t}function ee({numberingSystem:s},t=""){return new RegExp(`${ea[s||"latn"]}${t}`)}const ov="missing Intl.DateTimeFormat.formatToParts support";function X(s,t=e=>e){return{regex:s,deser:([e])=>t(rv(e))}}const av=" ",qu=`[ ${av}]`,Yu=new RegExp(qu,"g");function lv(s){return s.replace(/\./g,"\\.?").replace(Yu,qu)}function mc(s){return s.replace(/\./g,"").replace(Yu," ").toLowerCase()}function se(s,t){return s===null?null:{regex:RegExp(s.map(lv).join("|")),deser:([e])=>s.findIndex(n=>mc(e)===mc(n))+t}}function pc(s,t){return{regex:s,deser:([,e,n])=>ar(e,n),groups:t}}function gi(s){return{regex:s,deser:([t])=>t}}function cv(s){return s.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function hv(s,t){const e=ee(t),n=ee(t,"{2}"),i=ee(t,"{3}"),r=ee(t,"{4}"),o=ee(t,"{6}"),a=ee(t,"{1,2}"),l=ee(t,"{1,3}"),c=ee(t,"{1,6}"),h=ee(t,"{1,9}"),u=ee(t,"{2,4}"),d=ee(t,"{4,6}"),f=p=>({regex:RegExp(cv(p.val)),deser:([_])=>_,literal:!0}),m=(p=>{if(s.literal)return f(p);switch(p.val){case"G":return se(t.eras("short"),0);case"GG":return se(t.eras("long"),0);case"y":return X(c);case"yy":return X(u,vo);case"yyyy":return X(r);case"yyyyy":return X(d);case"yyyyyy":return X(o);case"M":return X(a);case"MM":return X(n);case"MMM":return se(t.months("short",!0),1);case"MMMM":return se(t.months("long",!0),1);case"L":return X(a);case"LL":return X(n);case"LLL":return se(t.months("short",!1),1);case"LLLL":return se(t.months("long",!1),1);case"d":return X(a);case"dd":return X(n);case"o":return X(l);case"ooo":return X(i);case"HH":return X(n);case"H":return X(a);case"hh":return X(n);case"h":return X(a);case"mm":return X(n);case"m":return X(a);case"q":return X(a);case"qq":return X(n);case"s":return X(a);case"ss":return X(n);case"S":return X(l);case"SSS":return X(i);case"u":return gi(h);case"uu":return gi(a);case"uuu":return X(e);case"a":return se(t.meridiems(),0);case"kkkk":return X(r);case"kk":return X(u,vo);case"W":return X(a);case"WW":return X(n);case"E":case"c":return X(e);case"EEE":return se(t.weekdays("short",!1),1);case"EEEE":return se(t.weekdays("long",!1),1);case"ccc":return se(t.weekdays("short",!0),1);case"cccc":return se(t.weekdays("long",!0),1);case"Z":case"ZZ":return pc(new RegExp(`([+-]${a.source})(?::(${n.source}))?`),2);case"ZZZ":return pc(new RegExp(`([+-]${a.source})(${n.source})?`),2);case"z":return gi(/[a-z_+-/]{1,256}?/i);case" ":return gi(/[^\S\n\r]/);default:return f(p)}})(s)||{invalidReason:ov};return m.token=s,m}const uv={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function dv(s,t,e){const{type:n,value:i}=s;if(n==="literal"){const l=/^\s+$/.test(i);return{literal:!l,val:l?" ":i}}const r=t[n];let o=n;n==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=e.hour12?"hour12":"hour24");let a=uv[o];if(typeof a=="object"&&(a=a[r]),a)return{literal:!1,val:a}}function fv(s){return[`^${s.map(e=>e.regex).reduce((e,n)=>`${e}(${n.source})`,"")}$`,s]}function gv(s,t,e){const n=s.match(t);if(n){const i={};let r=1;for(const o in e)if(Hs(e,o)){const a=e[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(n.slice(r,r+l))),r+=l}return[n,i]}else return[n,{}]}function mv(s){const t=r=>{switch(r){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let e=null,n;return V(s.z)||(e=Te.create(s.z)),V(s.Z)||(e||(e=new Rt(s.Z)),n=s.Z),V(s.q)||(s.M=(s.q-1)*3+1),V(s.h)||(s.h<12&&s.a===1?s.h+=12:s.h===12&&s.a===0&&(s.h=0)),s.G===0&&s.y&&(s.y=-s.y),V(s.u)||(s.S=Jo(s.u)),[Object.keys(s).reduce((r,o)=>{const a=t(o);return a&&(r[a]=s[o]),r},{}),e,n]}let Ir=null;function pv(){return Ir||(Ir=F.fromMillis(1555555555555)),Ir}function _v(s,t){if(s.literal)return s;const e=At.macroTokenToFormatOpts(s.val),n=Ju(e,t);return n==null||n.includes(void 0)?s:n}function Gu(s,t){return Array.prototype.concat(...s.map(e=>_v(e,t)))}function Zu(s,t,e){const n=Gu(At.parseFormat(e),s),i=n.map(o=>hv(o,s)),r=i.find(o=>o.invalidReason);if(r)return{input:t,tokens:n,invalidReason:r.invalidReason};{const[o,a]=fv(i),l=RegExp(o,"i"),[c,h]=gv(t,l,a),[u,d,f]=h?mv(h):[null,null,void 0];if(Hs(h,"a")&&Hs(h,"H"))throw new Cs("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:n,regex:l,rawMatches:c,matches:h,result:u,zone:d,specificOffset:f}}}function bv(s,t,e){const{result:n,zone:i,specificOffset:r,invalidReason:o}=Zu(s,t,e);return[n,i,r,o]}function Ju(s,t){if(!s)return null;const n=At.create(t,s).dtFormatter(pv()),i=n.formatToParts(),r=n.resolvedOptions();return i.map(o=>dv(o,s,r))}const Lr="Invalid DateTime",_c=864e13;function mi(s){return new oe("unsupported zone",`the zone "${s.name}" is not supported`)}function Rr(s){return s.weekData===null&&(s.weekData=Wi(s.c)),s.weekData}function Nr(s){return s.localWeekData===null&&(s.localWeekData=Wi(s.c,s.loc.getMinDaysInFirstWeek(),s.loc.getStartOfWeek())),s.localWeekData}function ts(s,t){const e={ts:s.ts,zone:s.zone,c:s.c,o:s.o,loc:s.loc,invalid:s.invalid};return new F({...e,...t,old:e})}function Ku(s,t,e){let n=s-t*60*1e3;const i=e.offset(n);if(t===i)return[n,t];n-=(i-t)*60*1e3;const r=e.offset(n);return i===r?[n,i]:[s-Math.min(i,r)*60*1e3,Math.max(i,r)]}function pi(s,t){s+=t*60*1e3;const e=new Date(s);return{year:e.getUTCFullYear(),month:e.getUTCMonth()+1,day:e.getUTCDate(),hour:e.getUTCHours(),minute:e.getUTCMinutes(),second:e.getUTCSeconds(),millisecond:e.getUTCMilliseconds()}}function Ci(s,t,e){return Ku(or(s),t,e)}function bc(s,t){const e=s.o,n=s.c.year+Math.trunc(t.years),i=s.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,r={...s.c,year:n,month:i,day:Math.min(s.c.day,Bi(n,i))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=U.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=or(r);let[l,c]=Ku(a,e,s.zone);return o!==0&&(l+=o,c=s.zone.offset(l)),{ts:l,o:c}}function an(s,t,e,n,i,r){const{setZone:o,zone:a}=e;if(s&&Object.keys(s).length!==0||t){const l=t||a,c=F.fromObject(s,{...e,zone:l,specificOffset:r});return o?c:c.setZone(a)}else return F.invalid(new oe("unparsable",`the input "${i}" can't be parsed as ${n}`))}function _i(s,t,e=!0){return s.isValid?At.create(et.create("en-US"),{allowZ:e,forceSimple:!0}).formatDateTimeFromString(s,t):null}function $r(s,t){const e=s.c.year>9999||s.c.year<0;let n="";return e&&s.c.year>=0&&(n+="+"),n+=wt(s.c.year,e?6:4),t?(n+="-",n+=wt(s.c.month),n+="-",n+=wt(s.c.day)):(n+=wt(s.c.month),n+=wt(s.c.day)),n}function yc(s,t,e,n,i,r){let o=wt(s.c.hour);return t?(o+=":",o+=wt(s.c.minute),(s.c.millisecond!==0||s.c.second!==0||!e)&&(o+=":")):o+=wt(s.c.minute),(s.c.millisecond!==0||s.c.second!==0||!e)&&(o+=wt(s.c.second),(s.c.millisecond!==0||!n)&&(o+=".",o+=wt(s.c.millisecond,3))),i&&(s.isOffsetFixed&&s.offset===0&&!r?o+="Z":s.o<0?(o+="-",o+=wt(Math.trunc(-s.o/60)),o+=":",o+=wt(Math.trunc(-s.o%60))):(o+="+",o+=wt(Math.trunc(s.o/60)),o+=":",o+=wt(Math.trunc(s.o%60)))),r&&(o+="["+s.zone.ianaName+"]"),o}const Xu={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},yv={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},vv={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Qu=["year","month","day","hour","minute","second","millisecond"],wv=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],xv=["year","ordinal","hour","minute","second","millisecond"];function kv(s){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[s.toLowerCase()];if(!t)throw new eu(s);return t}function vc(s){switch(s.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return kv(s)}}function wc(s,t){const e=Re(t.zone,bt.defaultZone),n=et.fromObject(t),i=bt.now();let r,o;if(V(s.year))r=i;else{for(const c of Qu)V(s[c])&&(s[c]=Xu[c]);const a=Ou(s)||Tu(s);if(a)return F.invalid(a);const l=e.offset(i);[r,o]=Ci(s,l,e)}return new F({ts:r,zone:e,loc:n,o})}function xc(s,t,e){const n=V(e.round)?!0:e.round,i=(o,a)=>(o=Ko(o,n||e.calendary?0:2,!0),t.loc.clone(e).relFormatter(e).format(o,a)),r=o=>e.calendary?t.hasSame(s,o)?0:t.startOf(o).diff(s.startOf(o),o).get(o):t.diff(s,o).get(o);if(e.unit)return i(r(e.unit),e.unit);for(const o of e.units){const a=r(o);if(Math.abs(a)>=1)return i(a,o)}return i(s>t?-0:0,e.units[e.units.length-1])}function kc(s){let t={},e;return s.length>0&&typeof s[s.length-1]=="object"?(t=s[s.length-1],e=Array.from(s).slice(0,s.length-1)):e=Array.from(s),[t,e]}class F{constructor(t){const e=t.zone||bt.defaultZone;let n=t.invalid||(Number.isNaN(t.ts)?new oe("invalid input"):null)||(e.isValid?null:mi(e));this.ts=V(t.ts)?bt.now():t.ts;let i=null,r=null;if(!n)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(e))[i,r]=[t.old.c,t.old.o];else{const a=e.offset(this.ts);i=pi(this.ts,a),n=Number.isNaN(i.year)?new oe("invalid input"):null,i=n?null:i,r=n?null:a}this._zone=e,this.loc=t.loc||et.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=i,this.o=r,this.isLuxonDateTime=!0}static now(){return new F({})}static local(){const[t,e]=kc(arguments),[n,i,r,o,a,l,c]=e;return wc({year:n,month:i,day:r,hour:o,minute:a,second:l,millisecond:c},t)}static utc(){const[t,e]=kc(arguments),[n,i,r,o,a,l,c]=e;return t.zone=Rt.utcInstance,wc({year:n,month:i,day:r,hour:o,minute:a,second:l,millisecond:c},t)}static fromJSDate(t,e={}){const n=Xy(t)?t.valueOf():NaN;if(Number.isNaN(n))return F.invalid("invalid input");const i=Re(e.zone,bt.defaultZone);return i.isValid?new F({ts:n,zone:i,loc:et.fromObject(e)}):F.invalid(mi(i))}static fromMillis(t,e={}){if(cs(t))return t<-_c||t>_c?F.invalid("Timestamp out of range"):new F({ts:t,zone:Re(e.zone,bt.defaultZone),loc:et.fromObject(e)});throw new Ft(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,e={}){if(cs(t))return new F({ts:t*1e3,zone:Re(e.zone,bt.defaultZone),loc:et.fromObject(e)});throw new Ft("fromSeconds requires a numerical input")}static fromObject(t,e={}){t=t||{};const n=Re(e.zone,bt.defaultZone);if(!n.isValid)return F.invalid(mi(n));const i=et.fromObject(e),r=Hi(t,vc),{minDaysInFirstWeek:o,startOfWeek:a}=oc(r,i),l=bt.now(),c=V(e.specificOffset)?n.offset(l):e.specificOffset,h=!V(r.ordinal),u=!V(r.year),d=!V(r.month)||!V(r.day),f=u||d,g=r.weekYear||r.weekNumber;if((f||h)&&g)throw new Cs("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&h)throw new Cs("Can't mix ordinal dates with month/day");const m=g||r.weekday&&!f;let p,_,b=pi(l,c);m?(p=wv,_=yv,b=Wi(b,o,a)):h?(p=xv,_=vv,b=Pr(b)):(p=Qu,_=Xu);let y=!1;for(const A of p){const P=r[A];V(P)?y?r[A]=_[A]:r[A]=b[A]:y=!0}const w=m?Zy(r,o,a):h?Jy(r):Ou(r),x=w||Tu(r);if(x)return F.invalid(x);const T=m?ic(r,o,a):h?rc(r):r,[O,M]=Ci(T,c,n),C=new F({ts:O,zone:n,o:M,loc:i});return r.weekday&&f&&t.weekday!==C.weekday?F.invalid("mismatched weekday",`you can't specify both a weekday of ${r.weekday} and a date of ${C.toISO()}`):C}static fromISO(t,e={}){const[n,i]=V0(t);return an(n,i,e,"ISO 8601",t)}static fromRFC2822(t,e={}){const[n,i]=W0(t);return an(n,i,e,"RFC 2822",t)}static fromHTTP(t,e={}){const[n,i]=B0(t);return an(n,i,e,"HTTP",e)}static fromFormat(t,e,n={}){if(V(t)||V(e))throw new Ft("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:r=null}=n,o=et.fromOpts({locale:i,numberingSystem:r,defaultToEN:!0}),[a,l,c,h]=bv(o,t,e);return h?F.invalid(h):an(a,l,n,`format ${e}`,t,c)}static fromString(t,e,n={}){return F.fromFormat(t,e,n)}static fromSQL(t,e={}){const[n,i]=J0(t);return an(n,i,e,"SQL",t)}static invalid(t,e=null){if(!t)throw new Ft("need to specify a reason the DateTime is invalid");const n=t instanceof oe?t:new oe(t,e);if(bt.throwOnInvalid)throw new Oy(n);return new F({invalid:n})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,e={}){const n=Ju(t,et.fromObject(e));return n?n.map(i=>i?i.val:null).join(""):null}static expandFormat(t,e={}){return Gu(At.parseFormat(t),et.fromObject(e)).map(i=>i.val).join("")}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Rr(this).weekYear:NaN}get weekNumber(){return this.isValid?Rr(this).weekNumber:NaN}get weekday(){return this.isValid?Rr(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Nr(this).weekday:NaN}get localWeekNumber(){return this.isValid?Nr(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Nr(this).weekYear:NaN}get ordinal(){return this.isValid?Pr(this.c).ordinal:NaN}get monthShort(){return this.isValid?fi.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?fi.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?fi.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?fi.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,e=6e4,n=or(this.c),i=this.zone.offset(n-t),r=this.zone.offset(n+t),o=this.zone.offset(n-i*e),a=this.zone.offset(n-r*e);if(o===a)return[this];const l=n-o*e,c=n-a*e,h=pi(l,o),u=pi(c,a);return h.hour===u.hour&&h.minute===u.minute&&h.second===u.second&&h.millisecond===u.millisecond?[ts(this,{ts:l}),ts(this,{ts:c})]:[this]}get isInLeapYear(){return Hn(this.year)}get daysInMonth(){return Bi(this.year,this.month)}get daysInYear(){return this.isValid?Rs(this.year):NaN}get weeksInWeekYear(){return this.isValid?Nn(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Nn(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:e,numberingSystem:n,calendar:i}=At.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:e,numberingSystem:n,outputCalendar:i}}toUTC(t=0,e={}){return this.setZone(Rt.instance(t),e)}toLocal(){return this.setZone(bt.defaultZone)}setZone(t,{keepLocalTime:e=!1,keepCalendarTime:n=!1}={}){if(t=Re(t,bt.defaultZone),t.equals(this.zone))return this;if(t.isValid){let i=this.ts;if(e||n){const r=t.offset(this.ts),o=this.toObject();[i]=Ci(o,r,t)}return ts(this,{ts:i,zone:t})}else return F.invalid(mi(t))}reconfigure({locale:t,numberingSystem:e,outputCalendar:n}={}){const i=this.loc.clone({locale:t,numberingSystem:e,outputCalendar:n});return ts(this,{loc:i})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const e=Hi(t,vc),{minDaysInFirstWeek:n,startOfWeek:i}=oc(e,this.loc),r=!V(e.weekYear)||!V(e.weekNumber)||!V(e.weekday),o=!V(e.ordinal),a=!V(e.year),l=!V(e.month)||!V(e.day),c=a||l,h=e.weekYear||e.weekNumber;if((c||o)&&h)throw new Cs("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new Cs("Can't mix ordinal dates with month/day");let u;r?u=ic({...Wi(this.c,n,i),...e},n,i):V(e.ordinal)?(u={...this.toObject(),...e},V(e.day)&&(u.day=Math.min(Bi(u.year,u.month),u.day))):u=rc({...Pr(this.c),...e});const[d,f]=Ci(u,this.o,this.zone);return ts(this,{ts:d,o:f})}plus(t){if(!this.isValid)return this;const e=U.fromDurationLike(t);return ts(this,bc(this,e))}minus(t){if(!this.isValid)return this;const e=U.fromDurationLike(t).negate();return ts(this,bc(this,e))}startOf(t,{useLocaleWeeks:e=!1}={}){if(!this.isValid)return this;const n={},i=U.normalizeUnit(t);switch(i){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(i==="weeks")if(e){const r=this.loc.getStartOfWeek(),{weekday:o}=this;o<r&&(n.weekNumber=this.weekNumber-1),n.weekday=r}else n.weekday=1;if(i==="quarters"){const r=Math.ceil(this.month/3);n.month=(r-1)*3+1}return this.set(n)}endOf(t,e){return this.isValid?this.plus({[t]:1}).startOf(t,e).minus(1):this}toFormat(t,e={}){return this.isValid?At.create(this.loc.redefaultToEN(e)).formatDateTimeFromString(this,t):Lr}toLocaleString(t=Vi,e={}){return this.isValid?At.create(this.loc.clone(e),t).formatDateTime(this):Lr}toLocaleParts(t={}){return this.isValid?At.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:e=!1,suppressMilliseconds:n=!1,includeOffset:i=!0,extendedZone:r=!1}={}){if(!this.isValid)return null;const o=t==="extended";let a=$r(this,o);return a+="T",a+=yc(this,o,e,n,i,r),a}toISODate({format:t="extended"}={}){return this.isValid?$r(this,t==="extended"):null}toISOWeekDate(){return _i(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:e=!1,includeOffset:n=!0,includePrefix:i=!1,extendedZone:r=!1,format:o="extended"}={}){return this.isValid?(i?"T":"")+yc(this,o==="extended",e,t,n,r):null}toRFC2822(){return _i(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return _i(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?$r(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:e=!1,includeOffsetSpace:n=!0}={}){let i="HH:mm:ss.SSS";return(e||t)&&(n&&(i+=" "),e?i+="z":t&&(i+="ZZ")),_i(this,i,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():Lr}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const e={...this.c};return t.includeConfig&&(e.outputCalendar=this.outputCalendar,e.numberingSystem=this.loc.numberingSystem,e.locale=this.loc.locale),e}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,e="milliseconds",n={}){if(!this.isValid||!t.isValid)return U.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...n},r=Qy(e).map(U.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,l=o?t:this,c=nv(a,l,r,i);return o?c.negate():c}diffNow(t="milliseconds",e={}){return this.diff(F.now(),t,e)}until(t){return this.isValid?gt.fromDateTimes(this,t):this}hasSame(t,e,n){if(!this.isValid)return!1;const i=t.valueOf(),r=this.setZone(t.zone,{keepLocalTime:!0});return r.startOf(e,n)<=i&&i<=r.endOf(e,n)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const e=t.base||F.fromObject({},{zone:this.zone}),n=t.padding?this<e?-t.padding:t.padding:0;let i=["years","months","days","hours","minutes","seconds"],r=t.unit;return Array.isArray(t.unit)&&(i=t.unit,r=void 0),xc(e,this.plus(n),{...t,numeric:"always",units:i,unit:r})}toRelativeCalendar(t={}){return this.isValid?xc(t.base||F.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(F.isDateTime))throw new Ft("min requires all arguments be DateTimes");return ac(t,e=>e.valueOf(),Math.min)}static max(...t){if(!t.every(F.isDateTime))throw new Ft("max requires all arguments be DateTimes");return ac(t,e=>e.valueOf(),Math.max)}static fromFormatExplain(t,e,n={}){const{locale:i=null,numberingSystem:r=null}=n,o=et.fromOpts({locale:i,numberingSystem:r,defaultToEN:!0});return Zu(o,t,e)}static fromStringExplain(t,e,n={}){return F.fromFormatExplain(t,e,n)}static get DATE_SHORT(){return Vi}static get DATE_MED(){return su}static get DATE_MED_WITH_WEEKDAY(){return Ey}static get DATE_FULL(){return nu}static get DATE_HUGE(){return iu}static get TIME_SIMPLE(){return ru}static get TIME_WITH_SECONDS(){return ou}static get TIME_WITH_SHORT_OFFSET(){return au}static get TIME_WITH_LONG_OFFSET(){return lu}static get TIME_24_SIMPLE(){return cu}static get TIME_24_WITH_SECONDS(){return hu}static get TIME_24_WITH_SHORT_OFFSET(){return uu}static get TIME_24_WITH_LONG_OFFSET(){return du}static get DATETIME_SHORT(){return fu}static get DATETIME_SHORT_WITH_SECONDS(){return gu}static get DATETIME_MED(){return mu}static get DATETIME_MED_WITH_SECONDS(){return pu}static get DATETIME_MED_WITH_WEEKDAY(){return Cy}static get DATETIME_FULL(){return _u}static get DATETIME_FULL_WITH_SECONDS(){return bu}static get DATETIME_HUGE(){return yu}static get DATETIME_HUGE_WITH_SECONDS(){return vu}}function ln(s){if(F.isDateTime(s))return s;if(s&&s.valueOf&&cs(s.valueOf()))return F.fromJSDate(s);if(s&&typeof s=="object")return F.fromObject(s);throw new Ft(`Unknown datetime argument: ${s}, of type ${typeof s}`)}function Sv(s){const t=F.now(),e=t.minus(s),n=["M","A","E","N"];let i=e,r=[],o=[],a=0;for(;!t.equals(i);){if(a++,a>300)throw"generateLabels did not resolve in reasonable amount of time";i=i.plus({days:1}),r.push(i)}for(const l of r)for(const c of n)o.push(`${l.toFormat("LLL dd")} ${c}`);return o}var On=(s=>(s[s.LAST_WEEK=0]="LAST_WEEK",s[s.LAST_MONTH=1]="LAST_MONTH",s[s.LAST_3MONTH=2]="LAST_3MONTH",s))(On||{}),jt=(s=>(s[s.MORNING=0]="MORNING",s[s.AFTERNOON=1]="AFTERNOON",s[s.EVENING=2]="EVENING",s[s.NIGHT=3]="NIGHT",s))(jt||{});async function Ov(s){let t;if(s==0)t=U.fromObject({days:7});else if(s==1)t=U.fromObject({months:1});else if(s==2)t=U.fromObject({months:3});else throw"Invalid TimeFrame";const e=F.now().minus(t);let n=Sv(t),i=[],r={morning:[],afternoon:[],night:[]},o={morning:[],afternoon:[],night:[]},a={morning:[],afternoon:[],night:[]},{error:l,data:c}=await te.from("record").select("*").filter("user_uid","eq",zc(Bs)).filter("date","gt",e.toSQLDate()).order("date",{ascending:!0});if(l||!c)throw l;c.map(u=>{i.push(`${F.fromSQL(u.date).toFormat("LLL dd")}`)});const h=[...new Set(i)];for(const u of h){const d=c.filter(p=>F.fromSQL(p.date).toFormat("LLL dd")==u),f=d.filter(p=>Number(p.time)==0)[0];f?(r.morning.push(f.heart_rate),o.morning.push(f.value_sys),a.morning.push(f.value_dia)):(r.morning.push(null),o.morning.push(null),a.morning.push(null));const g=d.filter(p=>Number(p.time)==1)[0];g?(r.afternoon.push(g.heart_rate),o.afternoon.push(g.value_sys),a.afternoon.push(g.value_dia)):(r.afternoon.push(null),o.afternoon.push(null),a.afternoon.push(null));const m=d.filter(p=>Number(p.time)==3)[0];m?(r.night.push(m.heart_rate),o.night.push(m.value_sys),a.night.push(m.value_dia)):(r.night.push(null),o.night.push(null),a.night.push(null)),console.log(u,d)}return{labels:h,hrValues:r,sysValues:o,diaValues:a,chart_labels:n}}function Fr(s){return s.labels}function jr(s){return s.sysValues}function zr(s){return s.diaValues}function Vr(s){return s.hrValues}function Sc(s){let t,e,n;return{c(){t=S("div"),e=S("h2"),n=ot(s[5]),k(e,"class","svelte-s9l50i"),k(t,"class","canvas nodata svelte-s9l50i")},m(i,r){st(i,t,r),v(t,e),v(e,n)},p(i,r){r&32&&Ht(n,i[5])},d(i){i&&Q(t)}}}function Oc(s){let t,e,n;return{c(){t=S("div"),e=S("h2"),n=ot(s[5]),k(e,"class","svelte-s9l50i"),k(t,"class","canvas nodata svelte-s9l50i")},m(i,r){st(i,t,r),v(t,e),v(e,n)},p(i,r){r&32&&Ht(n,i[5])},d(i){i&&Q(t)}}}function Tc(s){let t,e,n;return{c(){t=S("div"),e=S("h2"),n=ot(s[5]),k(e,"class","svelte-s9l50i"),k(t,"class","canvas nodata svelte-s9l50i")},m(i,r){st(i,t,r),v(t,e),v(e,n)},p(i,r){r&32&&Ht(n,i[5])},d(i){i&&Q(t)}}}function Tv(s){let t,e,n,i,r,o,a,l,c,h,u,d,f,g,m,p,_,b,y,w,x,T,O,M,C,A,P,L,H,z=!s[4]&&Sc(s),N=!s[4]&&Oc(s),I=!s[4]&&Tc(s);return{c(){t=S("main"),e=S("div"),n=S("div"),n.innerHTML='<h1 class="svelte-s9l50i">Home</h1>',i=R(),r=S("div"),o=S("select"),a=S("option"),a.textContent="Last Week",l=S("option"),l.textContent="Last Month",c=S("option"),c.textContent="Last 3 Months",h=R(),u=S("div"),d=S("h2"),d.textContent="Systolic Blood Pressure",f=R(),g=S("canvas"),m=R(),z&&z.c(),p=R(),_=S("div"),b=S("h2"),b.textContent="Diastolic Blood Pressure",y=R(),w=S("canvas"),x=R(),N&&N.c(),T=R(),O=S("div"),M=S("h2"),M.textContent="Heart Rate",C=R(),A=S("canvas"),P=R(),I&&I.c(),k(n,"class","titleContainer"),a.__value=On.LAST_WEEK,dt(a,a.__value),l.__value=On.LAST_MONTH,dt(l,l.__value),c.__value=On.LAST_3MONTH,dt(c,c.__value),k(o,"class","svelte-s9l50i"),s[0]===void 0&&us(()=>s[7].call(o)),k(r,"class","selectionContainer"),k(e,"class","padded svelte-s9l50i"),k(d,"class","svelte-s9l50i"),k(g,"style",s[6]),k(g,"class","canvas svelte-s9l50i"),k(g,"height",globalThis.vh*40),k(g,"width",globalThis.vw*100),k(u,"class","bpContainer"),k(b,"class","svelte-s9l50i"),k(w,"style",s[6]),k(w,"class","canvas svelte-s9l50i"),k(w,"height",globalThis.vh*40),k(w,"width",globalThis.vw*100),k(_,"class","bpContainer"),k(M,"class","svelte-s9l50i"),k(A,"style",s[6]),k(A,"class","canvas svelte-s9l50i"),k(A,"height",globalThis.vh*40),k(A,"width",globalThis.vw*100),k(O,"class","hrContainer"),k(t,"class","svelte-s9l50i")},m($,G){st($,t,G),v(t,e),v(e,n),v(e,i),v(e,r),v(r,o),v(o,a),v(o,l),v(o,c),na(o,s[0],!0),v(t,h),v(t,u),v(u,d),v(u,f),v(u,g),s[8](g),v(u,m),z&&z.m(u,null),v(t,p),v(t,_),v(_,b),v(_,y),v(_,w),s[9](w),v(_,x),N&&N.m(_,null),v(t,T),v(t,O),v(O,M),v(O,C),v(O,A),s[10](A),v(O,P),I&&I.m(O,null),L||(H=ht(o,"change",s[7]),L=!0)},p($,[G]){G&1&&na(o,$[0]),G&64&&k(g,"style",$[6]),$[4]?z&&(z.d(1),z=null):z?z.p($,G):(z=Sc($),z.c(),z.m(u,null)),G&64&&k(w,"style",$[6]),$[4]?N&&(N.d(1),N=null):N?N.p($,G):(N=Oc($),N.c(),N.m(_,null)),G&64&&k(A,"style",$[6]),$[4]?I&&(I.d(1),I=null):I?I.p($,G):(I=Tc($),I.c(),I.m(O,null))},i:j,o:j,d($){$&&Q(t),s[8](null),z&&z.d(),s[9](null),N&&N.d(),s[10](null),I&&I.d(),L=!1,H()}}}function Mv(s,t,e){Jt.register(...D_),Jt.defaults.color="#fff";let n,i,r,o,a,l,c=!1,h=On.LAST_WEEK,u=!1,d="Fetching data...";function f(y){if(console.log("==== CHANGED ====",y.labels.length,u?"flex":"none"),c&&(l.destroy(),o.destroy(),a.destroy()),console.log(y),y.labels.length===0){e(4,u=!1),e(5,d="No data!"),console.log("No data!");return}e(4,u=!0),e(6,g="display: block"),console.log("Reach"),c=!0;const w=n.getContext("2d"),x=i.getContext("2d"),T=r.getContext("2d"),O=!0;o=new Jt(w,{type:"line",data:{labels:Fr(y),datasets:[{label:"Morning",data:jr(y).morning,fill:!1,tension:.1,borderColor:"#DA012D",borderWidth:.5,spanGaps:O},{label:"Afternoon",data:jr(y).afternoon,fill:!1,tension:.1,borderColor:"#960018",borderWidth:.5,spanGaps:O},{label:"Night",data:jr(y).night,fill:!1,tension:.1,borderColor:"#722F37",borderWidth:.5,spanGaps:O}]},options:{plugins:{tooltip:{mode:"index"}}}}),a=new Jt(x,{type:"line",data:{labels:Fr(y),datasets:[{label:"Morning",data:zr(y).morning,fill:!1,tension:.1,borderColor:"#00FFEF",borderWidth:.5,spanGaps:O},{label:"Afternoon",data:zr(y).afternoon,fill:!1,tension:.1,borderColor:"#007FFF",borderWidth:.5,spanGaps:O},{label:"Night",data:zr(y).night,fill:!1,tension:.1,borderColor:"#191970",borderWidth:.5,spanGaps:O}]},options:{plugins:{tooltip:{mode:"index"}}}}),l=new Jt(T,{type:"line",data:{labels:Fr(y),datasets:[{label:"Morning",data:Vr(y).morning,fill:!1,tension:.1,borderColor:"#37FD12",borderWidth:.5,spanGaps:O},{label:"Afternoon",data:Vr(y).afternoon,fill:!1,tension:.1,borderColor:"#C7EA46",borderWidth:.5,spanGaps:O},{label:"Night",data:Vr(y).night,fill:!1,tension:.1,borderColor:"#2E8B57",borderWidth:.5,spanGaps:O}]},options:{plugins:{tooltip:{mode:"index"}}}})}let g="";function m(){h=ud(this),e(0,h)}function p(y){ze[y?"unshift":"push"](()=>{n=y,e(1,n)})}function _(y){ze[y?"unshift":"push"](()=>{i=y,e(2,i)})}function b(y){ze[y?"unshift":"push"](()=>{r=y,e(3,r)})}return s.$$.update=()=>{s.$$.dirty&1&&(e(6,g="display: none;"),e(4,u=!1),e(5,d="Fetching...."),Ov(h).then(f))},[h,n,i,r,u,d,g,m,p,_,b]}class Ev extends Ee{constructor(t){super(),Me(this,t,Mv,Tv,ue,{})}}async function Cv(s){for(let[h,u]of s)if(h!="comment"&&!u)return alert(`Field ${h} is not filled in`),!1;const{value_sys:t,value_dia:e,heart_rate:n,comment:i,time:r,date:o,user_uid:a}=Object.fromEntries(s.entries());console.log({value_sys:t,value_dia:e,heart_rate:n,comment:i,time:r,date:o,user_uid:a});const{error:l,data:c}=await te.from("record").insert([{value_sys:t,value_dia:e,heart_rate:n,comment:i,time:r,date:o,user_uid:a}]).select();if(l)throw l;return!0}async function Dv(s){for(let[u,d]of s)if(u!="comment"&&!d)return alert(`Field ${u} is not filled in`),!1;const{id:t,value_sys:e,value_dia:n,heart_rate:i,comment:r,time:o,date:a,user_uid:l}=Object.fromEntries(s.entries());console.log({value_sys:e,value_dia:n,heart_rate:i,comment:r,time:o,date:a,user_uid:l});const{data:c,error:h}=await te.from("record").update({value_sys:e,value_dia:n,heart_rate:i,comment:r,time:o,date:a,user_uid:l}).eq("id",t).select();if(h)throw h;return!0}function Mc(s){let t,e,n,i,r,o,a,l,c,h,u,d,f,g,m,p,_,b,y,w,x;return{c(){t=S("h1"),t.textContent="Add Record",e=R(),n=S("form"),i=S("input"),r=R(),o=S("div"),a=S("input"),l=R(),c=S("div"),h=S("select"),u=S("option"),u.textContent="Morning",d=S("option"),d.textContent="Afternoon",f=S("option"),f.textContent="Night",g=R(),m=S("div"),m.innerHTML='<input type="text" placeholder="Comment..." name="comment" class="svelte-nf8blj"/>',p=R(),_=S("div"),_.innerHTML='<input type="number" name="value_sys" placeholder="Sys" class="svelte-nf8blj"/> <input type="number" name="value_dia" placeholder="Dia" class="svelte-nf8blj"/> <input type="number" name="heart_rate" placeholder="HR" class="svelte-nf8blj"/>',b=R(),y=S("div"),y.innerHTML='<input type="submit" class="svelte-nf8blj"/>',k(t,"class","svelte-nf8blj"),k(i,"type","hidden"),k(i,"name","user_uid"),i.value=s[2],k(a,"type","date"),k(a,"name","date"),a.value=s[3](),k(a,"class","svelte-nf8blj"),k(o,"class","row svelte-nf8blj"),u.__value=jt.MORNING,dt(u,u.__value),d.__value=jt.AFTERNOON,dt(d,d.__value),f.__value=jt.NIGHT,dt(f,f.__value),k(h,"name","time"),k(h,"class","svelte-nf8blj"),k(c,"class","row svelte-nf8blj"),k(m,"class","row svelte-nf8blj"),k(_,"class","row split svelte-nf8blj"),k(y,"class","row svelte-nf8blj"),k(n,"action","")},m(T,O){st(T,t,O),st(T,e,O),st(T,n,O),v(n,i),v(n,r),v(n,o),v(o,a),v(n,l),v(n,c),v(c,h),v(h,u),v(h,d),v(h,f),v(n,g),v(n,m),v(n,p),v(n,_),v(n,b),v(n,y),s[5](n),w||(x=ht(n,"submit",s[4]),w=!0)},p(T,O){O&4&&(i.value=T[2])},d(T){T&&(Q(t),Q(e),Q(n)),s[5](null),w=!1,x()}}}function Av(s){let t,e=s[1],n=Mc(s);return{c(){t=S("main"),n.c(),k(t,"class","svelte-nf8blj")},m(i,r){st(i,t,r),n.m(t,null)},p(i,[r]){r&2&&ue(e,e=i[1])?(n.d(1),n=Mc(i),n.c(),n.m(t,null)):n.p(i,r)},i:j,o:j,d(i){i&&Q(t),n.d(i)}}}function Pv(s,t,e){let n;hs(s,Bs,c=>e(2,n=c));let i,r=!0;function o(){return F.now().toISODate()}async function a(c){c.preventDefault();const h=new FormData(i);await Cv(h)&&(alert("Success!"),e(1,r=!r))}function l(c){ze[c?"unshift":"push"](()=>{i=c,e(0,i)})}return[i,r,n,o,a,l]}class Iv extends Ee{constructor(t){super(),Me(this,t,Pv,Av,ue,{})}}var xt=(s=>(s[s.HOME_SCREEN=0]="HOME_SCREEN",s[s.ADD_RECORD=1]="ADD_RECORD",s[s.SYNC_DETAILS=2]="SYNC_DETAILS",s[s.RAW_DATA=3]="RAW_DATA",s[s.EDIT_RECORD=4]="EDIT_RECORD",s))(xt||{});const td=Vn(),Ue=Vn(0),$n=Vn(!1);function Ec(s,t,e){const n=s.slice();return n[11]=t[e],n}function Cc(s,t,e){const n=s.slice();return n[11]=t[e],n}function Lv(s){return{c:j,m:j,p:j,d:j}}function Rv(s){let t,e=$s(s[0]),n=[];for(let i=0;i<e.length;i+=1)n[i]=Dc(Cc(s,e,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();t=qi()},m(i,r){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(i,r);st(i,t,r)},p(i,r){if(r&65){e=$s(i[0]);let o;for(o=0;o<e.length;o+=1){const a=Cc(i,e,o);n[o]?n[o].p(a,r):(n[o]=Dc(a),n[o].c(),n[o].m(t.parentNode,t))}for(;o<n.length;o+=1)n[o].d(1);n.length=e.length}},d(i){i&&Q(t),xo(n,i)}}}function Dc(s){let t,e,n=s[11].to+"",i,r,o,a;return{c(){t=S("li"),e=S("button"),i=ot(n),r=R(),k(e,"class","list-item svelte-1biiz6x"),k(t,"class","svelte-1biiz6x")},m(l,c){st(l,t,c),v(t,e),v(e,i),v(t,r),o||(a=ht(e,"click",function(){Ui(s[6](s[11].to))&&s[6](s[11].to).apply(this,arguments)}),o=!0)},p(l,c){s=l,c&1&&n!==(n=s[11].to+"")&&Ht(i,n)},d(l){l&&Q(t),o=!1,a()}}}function Nv(s){let t;return{c(){t=ot("Loading....")},m(e,n){st(e,t,n)},p:j,d(e){e&&Q(t)}}}function $v(s){return{c:j,m:j,p:j,d:j}}function Fv(s){let t,e=$s(s[1]),n=[];for(let i=0;i<e.length;i+=1)n[i]=Ac(Ec(s,e,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();t=qi()},m(i,r){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(i,r);st(i,t,r)},p(i,r){if(r&2){e=$s(i[1]);let o;for(o=0;o<e.length;o+=1){const a=Ec(i,e,o);n[o]?n[o].p(a,r):(n[o]=Ac(a),n[o].c(),n[o].m(t.parentNode,t))}for(;o<n.length;o+=1)n[o].d(1);n.length=e.length}},d(i){i&&Q(t),xo(n,i)}}}function Ac(s){let t,e=s[11].on_email+"",n,i,r,o;function a(){return s[7](s[11])}return{c(){t=S("button"),n=ot(e),i=R(),k(t,"class","list-item svelte-1biiz6x")},m(l,c){st(l,t,c),v(t,n),v(t,i),r||(o=ht(t,"click",a),r=!0)},p(l,c){s=l,c&2&&e!==(e=s[11].on_email+"")&&Ht(n,e)},d(l){l&&Q(t),r=!1,o()}}}function jv(s){let t;return{c(){t=ot("Loading....")},m(e,n){st(e,t,n)},p:j,d(e){e&&Q(t)}}}function zv(s){let t,e,n,i,r,o,a,l,c,h,u,d,f,g,m,p,_,b,y,w,x,T,O,M,C,A,P,L,H,z,N,I,$,G,J,Mt,K,rt,Ot,ct,Nt,Lt,vt,Js,Yn,_t={ctx:s,current:null,token:null,hasCatch:!1,pending:Nv,then:Rv,catch:Lv};Br(s[4],_t);let ft={ctx:s,current:null,token:null,hasCatch:!1,pending:jv,then:Fv,catch:$v};return Br(s[5],ft),{c(){t=S("main"),e=S("h1"),e.textContent="Sync Settings",n=R(),i=S("div"),r=S("div"),r.textContent="Signed in as:",o=R(),a=S("div"),l=S("div"),l.textContent=`${Qt.email}`,c=R(),h=S("div"),u=S("div"),u.textContent="Syncing info to:",d=R(),f=S("div"),g=S("div"),m=ot(s[2]),p=R(),_=S("h2"),_.textContent="Account Sharing",b=R(),y=S("div"),w=S("div"),w.textContent="Users with access to your account:",x=R(),T=S("div"),_t.block.c(),O=R(),M=S("button"),M.textContent="Add user +",C=R(),A=S("div"),P=S("div"),P.textContent="Users accounts you have access to:",L=R(),H=S("div"),ft.block.c(),z=R(),N=S("button"),N.textContent="Your Account",I=R(),$=S("h2"),$.textContent="View Raw Data",G=R(),J=S("div"),Mt=S("div"),K=S("button"),K.textContent="View Raw Data",rt=R(),Ot=S("h2"),Ot.textContent="Sign out",ct=R(),Nt=S("div"),Lt=S("div"),vt=S("button"),vt.textContent="Sign Out",k(e,"class","svelte-1biiz6x"),k(r,"class","field svelte-1biiz6x"),k(l,"class","list-item"),k(a,"class","value svelte-1biiz6x"),k(i,"class","info svelte-1biiz6x"),k(u,"class","field svelte-1biiz6x"),k(g,"class","list-item"),k(f,"class","value svelte-1biiz6x"),k(h,"class","info svelte-1biiz6x"),k(w,"class","field svelte-1biiz6x"),k(M,"class","list-item svelte-1biiz6x"),k(T,"class","value svelte-1biiz6x"),k(y,"class","info svelte-1biiz6x"),k(P,"class","field svelte-1biiz6x"),k(N,"class","list-item svelte-1biiz6x"),k(H,"class","value svelte-1biiz6x"),k(A,"class","info svelte-1biiz6x"),k(K,"class","list-item svelte-1biiz6x"),k(Mt,"class","value svelte-1biiz6x"),k(J,"class","info svelte-1biiz6x"),k(vt,"class","list-item svelte-1biiz6x"),k(Lt,"class","value svelte-1biiz6x"),k(Nt,"class","info svelte-1biiz6x"),k(t,"class","svelte-1biiz6x")},m(Ks,Xs){st(Ks,t,Xs),v(t,e),v(t,n),v(t,i),v(i,r),v(i,o),v(i,a),v(a,l),v(t,c),v(t,h),v(h,u),v(h,d),v(h,f),v(f,g),v(g,m),v(t,p),v(t,_),v(t,b),v(t,y),v(y,w),v(y,x),v(y,T),_t.block.m(T,_t.anchor=null),_t.mount=()=>T,_t.anchor=O,v(T,O),v(T,M),v(t,C),v(t,A),v(A,P),v(A,L),v(A,H),ft.block.m(H,ft.anchor=null),ft.mount=()=>H,ft.anchor=z,v(H,z),v(H,N),v(t,I),v(t,$),v(t,G),v(t,J),v(J,Mt),v(Mt,K),v(t,rt),v(t,Ot),v(t,ct),v(t,Nt),v(Nt,Lt),v(Lt,vt),Js||(Yn=[ht(M,"click",s[3]),ht(N,"click",s[8]),ht(K,"click",s[9]),ht(vt,"click",s[10])],Js=!0)},p(Ks,[Xs]){s=Ks,Xs&4&&Ht(m,s[2]),Hr(_t,s,Xs),Hr(ft,s,Xs)},i:j,o:j,d(Ks){Ks&&Q(t),_t.block.d(),_t.token=null,_t=null,ft.block.d(),ft.token=null,ft=null,Js=!1,he(Yn)}}}function Vv(s,t,e){let n;hs(s,nr,g=>e(2,n=g));let i=[],r=[];async function o(){let g=prompt("Email address to give access to:");await by(g),e(0,i=await Cr())}let a=new Promise(async(g,m)=>{e(0,i=await Cr()),console.log(i),g()}),l=new Promise(async(g,m)=>{e(1,r=await vy()),console.log(r),g()});function c(g){return async()=>{confirm(`Revoke access from ${g}`)&&(await yy(g),e(0,i=await Cr()))}}return[i,r,n,o,a,l,c,g=>{go(g.on_email,g.on)},()=>{go(Qt.email,Qt.id)},()=>{Ue.set(xt.RAW_DATA)},async()=>{await te.auth.signOut(),location.reload()}]}class Wv extends Ee{constructor(t){super(),Me(this,t,Vv,zv,ue,{})}}const Pc=20;async function Bv(s){const{data:t,error:e}=await te.from("record").select().eq("user_uid",zc(Bs)).order("date",{ascending:!1}).order("time",{ascending:!1}).range((s-1)*Pc,s*Pc-1);if(e)throw e;return console.log(`Fetched page ${s}`,t),t}async function Hv(s){const{data:t,error:e}=await te.from("record").delete().eq("id",s);if(console.log("Deleting",s,t),e)throw e}function Ic(s,t,e){const n=s.slice();return n[11]=t[e],n[13]=e,n}function Lc(s){let t,e,n=s[11].comment+"",i;return{c(){t=S("div"),e=S("div"),i=ot(n),k(e,"class","left svelte-1ixxhu6"),k(t,"class","row svelte-1ixxhu6")},m(r,o){st(r,t,o),v(t,e),v(e,i)},p(r,o){o&1&&n!==(n=r[11].comment+"")&&Ht(i,n)},d(r){r&&Q(t)}}}function Rc(s){let t,e,n,i=F.fromSQL(s[11].date).toLocaleString(F.DATE_FULL)+"",r,o,a,l=s[4](s[11].time)+"",c,h,u,d,f,g=s[11].value_sys+"",m,p,_,b,y,w=s[11].value_dia+"",x,T,O,M,C,A,P=s[11].heart_rate+"",L,H,z,N,I,$,G,J,Mt,K,rt,Ot,ct,Nt,Lt,vt=s[11].comment&&Lc(s);function Js(){return s[8](s[13])}function Yn(){return s[9](s[13])}return{c(){t=S("div"),e=S("div"),n=S("div"),r=ot(i),o=R(),a=S("div"),c=ot(l),h=R(),u=S("div"),d=S("div"),f=S("span"),m=ot(g),p=ot("s"),b=ot(`
                        /
                        `),y=S("span"),x=ot(w),O=ot(`
                        (S/D)`),M=R(),C=S("div"),A=S("span"),L=ot(P),z=ot(`
                        (HR)`),N=R(),vt&&vt.c(),I=R(),$=S("div"),G=S("div"),J=S("button"),J.textContent="Edit",Mt=R(),K=S("div"),rt=S("button"),rt.textContent="Delete",k(n,"class","left svelte-1ixxhu6"),k(a,"class","right svelte-1ixxhu6"),k(e,"class","row svelte-1ixxhu6"),k(f,"class",_=Zt(Ts(s[2].BP_SYS,s[11].value_sys))+" svelte-1ixxhu6"),k(y,"class",T=Zt(Ts(s[2].BP_DIA,s[11].value_dia))+" svelte-1ixxhu6"),k(d,"class","left svelte-1ixxhu6"),k(A,"class",H=Zt(Ts(s[2].HR,s[11].heart_rate))+" svelte-1ixxhu6"),k(C,"class","right svelte-1ixxhu6"),k(u,"class","row svelte-1ixxhu6"),k(J,"class","abtn edit svelte-1ixxhu6"),k(G,"class","left svelte-1ixxhu6"),k(rt,"class","abtn delete svelte-1ixxhu6"),k(K,"class","right svelte-1ixxhu6"),k($,"class","row svelte-1ixxhu6"),k(t,"class","record svelte-1ixxhu6")},m(_t,ft){st(_t,t,ft),v(t,e),v(e,n),v(n,r),v(e,o),v(e,a),v(a,c),v(t,h),v(t,u),v(u,d),v(d,f),v(f,m),v(f,p),v(d,b),v(d,y),v(y,x),v(d,O),v(u,M),v(u,C),v(C,A),v(A,L),v(C,z),v(t,N),vt&&vt.m(t,null),v(t,I),v(t,$),v($,G),v(G,J),v($,Mt),v($,K),v(K,rt),ct=!0,Nt||(Lt=[ht(J,"click",Js),ht(rt,"click",Yn)],Nt=!0)},p(_t,ft){s=_t,(!ct||ft&1)&&i!==(i=F.fromSQL(s[11].date).toLocaleString(F.DATE_FULL)+"")&&Ht(r,i),(!ct||ft&1)&&l!==(l=s[4](s[11].time)+"")&&Ht(c,l),(!ct||ft&1)&&g!==(g=s[11].value_sys+"")&&Ht(m,g),(!ct||ft&1&&_!==(_=Zt(Ts(s[2].BP_SYS,s[11].value_sys))+" svelte-1ixxhu6"))&&k(f,"class",_),(!ct||ft&1)&&w!==(w=s[11].value_dia+"")&&Ht(x,w),(!ct||ft&1&&T!==(T=Zt(Ts(s[2].BP_DIA,s[11].value_dia))+" svelte-1ixxhu6"))&&k(y,"class",T),(!ct||ft&1)&&P!==(P=s[11].heart_rate+"")&&Ht(L,P),(!ct||ft&1&&H!==(H=Zt(Ts(s[2].HR,s[11].heart_rate))+" svelte-1ixxhu6"))&&k(A,"class",H),s[11].comment?vt?vt.p(s,ft):(vt=Lc(s),vt.c(),vt.m(t,I)):vt&&(vt.d(1),vt=null)},i(_t){ct||(_t&&us(()=>{ct&&(Ot||(Ot=Pi(t,aa,{},!0)),Ot.run(1))}),ct=!0)},o(_t){_t&&(Ot||(Ot=Pi(t,aa,{},!1)),Ot.run(0)),ct=!1},d(_t){_t&&Q(t),vt&&vt.d(),_t&&Ot&&Ot.end(),Nt=!1,he(Lt)}}}function Uv(s){let t,e,n,i,r,o,a,l,c,h,u,d,f,g,m=$s(s[0]),p=[];for(let b=0;b<m.length;b+=1)p[b]=Rc(Ic(s,m,b));const _=b=>Et(p[b],1,1,()=>{p[b]=null});return{c(){t=S("main"),e=S("div"),n=S("h1"),n.textContent="Raw Data",i=R(),r=S("button"),r.textContent="✕",o=R(),a=S("div");for(let b=0;b<p.length;b+=1)p[b].c();l=R(),c=S("div"),h=S("button"),u=ot("Load More"),k(r,"class","close svelte-1ixxhu6"),k(e,"class","topContainer svelte-1ixxhu6"),k(h,"class","loadmore abtn edit svelte-1ixxhu6"),h.disabled=s[1],k(c,"class","loadmore svelte-1ixxhu6"),k(a,"class","scrollable svelte-1ixxhu6"),k(t,"class","svelte-1ixxhu6")},m(b,y){st(b,t,y),v(t,e),v(e,n),v(e,i),v(e,r),v(t,o),v(t,a);for(let w=0;w<p.length;w+=1)p[w]&&p[w].m(a,null);v(a,l),v(a,c),v(c,h),v(h,u),d=!0,f||(g=[ht(r,"click",s[7]),ht(h,"click",s[3])],f=!0)},p(b,[y]){if(y&117){m=$s(b[0]);let w;for(w=0;w<m.length;w+=1){const x=Ic(b,m,w);p[w]?(p[w].p(x,y),kt(p[w],1)):(p[w]=Rc(x),p[w].c(),kt(p[w],1),p[w].m(a,l))}for(Gi(),w=m.length;w<p.length;w+=1)_(w);Zi()}(!d||y&2)&&(h.disabled=b[1])},i(b){if(!d){for(let y=0;y<m.length;y+=1)kt(p[y]);d=!0}},o(b){p=p.filter(Boolean);for(let y=0;y<p.length;y+=1)Et(p[y]);d=!1},d(b){b&&Q(t),xo(p,b),f=!1,he(g)}}}const qv=140,Yv=110,Gv=85,Zv=50,Jv=90,Kv=60;function Ts(s,t){if(s==0){if(t>qv)return"high";if(t<Yv)return"low"}else if(s==1){if(t>Gv)return"high";if(t<Zv)return"low"}else if(s==2){if(t>Jv)return"high";if(t<Kv)return"low"}return""}function Xv(s,t,e){ko(()=>{$n.set(!0),console.log("Hiding")}),Uc(()=>{$n.set(!1)});let n=[],i=0,r=!1;var o=(g=>(g[g.BP_SYS=0]="BP_SYS",g[g.BP_DIA=1]="BP_DIA",g[g.HR=2]="HR",g))(o||{});async function a(){e(1,r=!0),i++;let g=await Bv(i);e(0,n=[...n,...g]),g.length===0?alert("No more records"):e(1,r=!1)}function l(g){switch(+g){case jt.MORNING:return"Morning";case jt.AFTERNOON:return"Afternoon";case jt.EVENING:return"Evenng";case jt.NIGHT:return"Night";default:return g}}async function c(g){if(!confirm("Are you sure you want to delete this record?"))return;let m=n[g].id;await Hv(m),n.splice(g,1),e(0,n)}a();function h(g){td.set(n[g]),Ue.set(xt.EDIT_RECORD)}return[n,r,o,a,l,c,h,()=>{Ue.set(xt.SYNC_DETAILS)},g=>{h(g)},g=>{c(g)}]}class Qv extends Ee{constructor(t){super(),Me(this,t,Xv,Uv,ue,{})}}function tw(s){let t,e,n,i,r,o,a,l,c,h,u,d,f,g,m,p,_,b,y,w,x,T,O,M,C,A,P,L,H,z,N,I,$,G,J,Mt;return{c(){t=S("main"),e=S("div"),n=S("h1"),n.textContent="Edit Record",i=R(),r=S("button"),r.textContent="✕",o=R(),a=S("form"),l=S("input"),c=R(),h=S("input"),u=R(),d=S("div"),f=S("input"),g=R(),m=S("div"),p=S("select"),_=S("option"),b=ot("Morning"),y=S("option"),w=ot("Afternoon"),x=S("option"),T=ot("Night"),O=R(),M=S("div"),C=S("input"),A=R(),P=S("div"),L=S("input"),H=R(),z=S("input"),N=R(),I=S("input"),$=R(),G=S("div"),G.innerHTML='<input type="submit" class="svelte-xe29ey"/>',k(n,"class","svelte-xe29ey"),k(r,"class","close svelte-xe29ey"),k(e,"class","titleContainer svelte-xe29ey"),k(l,"type","hidden"),k(l,"name","id"),k(h,"type","hidden"),k(h,"name","user_uid"),k(f,"type","date"),k(f,"name","date"),k(f,"class","svelte-xe29ey"),k(d,"class","row svelte-xe29ey"),_.__value=jt.MORNING,dt(_,_.__value),_.selected=jt.MORNING==s[8],y.__value=jt.AFTERNOON,dt(y,y.__value),y.selected=jt.AFTERNOON==s[8],x.__value=jt.NIGHT,dt(x,x.__value),x.selected=jt.NIGHT==s[8],k(p,"name","time"),k(p,"class","svelte-xe29ey"),k(m,"class","row svelte-xe29ey"),k(C,"type","text"),k(C,"placeholder","Comment..."),k(C,"name","comment"),k(C,"class","svelte-xe29ey"),k(M,"class","row svelte-xe29ey"),k(L,"type","number"),k(L,"name","value_sys"),k(L,"placeholder","Sys"),k(L,"class","svelte-xe29ey"),k(z,"type","number"),k(z,"name","value_dia"),k(z,"placeholder","Dia"),k(z,"class","svelte-xe29ey"),k(I,"type","number"),k(I,"name","heart_rate"),k(I,"placeholder","HR"),k(I,"class","svelte-xe29ey"),k(P,"class","row split svelte-xe29ey"),k(G,"class","row svelte-xe29ey"),k(a,"action",""),k(t,"class","svelte-xe29ey")},m(K,rt){st(K,t,rt),v(t,e),v(e,n),v(e,i),v(e,r),v(t,o),v(t,a),v(a,l),dt(l,s[1]),v(a,c),v(a,h),dt(h,s[7]),v(a,u),v(a,d),v(d,f),dt(f,s[2]),v(a,g),v(a,m),v(m,p),v(p,_),v(_,b),v(p,y),v(y,w),v(p,x),v(x,T),v(a,O),v(a,M),v(M,C),dt(C,s[6]),v(a,A),v(a,P),v(P,L),dt(L,s[3]),v(P,H),v(P,z),dt(z,s[4]),v(P,N),v(P,I),dt(I,s[5]),v(a,$),v(a,G),s[19](a),J||(Mt=[ht(r,"click",s[11]),ht(l,"input",s[12]),ht(h,"input",s[13]),ht(f,"input",s[14]),ht(C,"input",s[15]),ht(L,"input",s[16]),ht(z,"input",s[17]),ht(I,"input",s[18]),ht(a,"submit",s[9])],J=!0)},p(K,[rt]){rt&2&&dt(l,K[1]),rt&128&&dt(h,K[7]),rt&4&&dt(f,K[2]),rt&64&&C.value!==K[6]&&dt(C,K[6]),rt&8&&As(L.value)!==K[3]&&dt(L,K[3]),rt&16&&As(z.value)!==K[4]&&dt(z,K[4]),rt&32&&As(I.value)!==K[5]&&dt(I,K[5])},i:j,o:j,d(K){K&&Q(t),s[19](null),J=!1,he(Mt)}}}function ew(s,t,e){let n;$n.set(!0);let{record:i}=t,{id:r,date:o,time:a,value_sys:l,value_dia:c,heart_rate:h,comment:u,user_uid:d}=i;async function f(O){O.preventDefault();const M=new FormData(n);await Dv(M)&&(alert("Edit Success"),Ue.set(xt.RAW_DATA))}Uc(()=>{$n.set(!1)});const g=()=>{Ue.set(xt.RAW_DATA)};function m(){r=this.value,e(1,r)}function p(){d=this.value,e(7,d)}function _(){o=this.value,e(2,o)}function b(){u=this.value,e(6,u)}function y(){l=As(this.value),e(3,l)}function w(){c=As(this.value),e(4,c)}function x(){h=As(this.value),e(5,h)}function T(O){ze[O?"unshift":"push"](()=>{n=O,e(0,n)})}return s.$$set=O=>{"record"in O&&e(10,i=O.record)},[n,r,o,l,c,h,u,d,a,f,i,g,m,p,_,b,y,w,x,T]}class sw extends Ee{constructor(t){super(),Me(this,t,ew,tw,ue,{record:10})}}function nw(s){let t,e;return t=new sw({props:{record:s[1]}}),{c(){We(t.$$.fragment)},m(n,i){Se(t,n,i),e=!0},p(n,i){const r={};i&2&&(r.record=n[1]),t.$set(r)},i(n){e||(kt(t.$$.fragment,n),e=!0)},o(n){Et(t.$$.fragment,n),e=!1},d(n){Oe(t,n)}}}function iw(s){let t,e;return t=new Qv({}),{c(){We(t.$$.fragment)},m(n,i){Se(t,n,i),e=!0},p:j,i(n){e||(kt(t.$$.fragment,n),e=!0)},o(n){Et(t.$$.fragment,n),e=!1},d(n){Oe(t,n)}}}function rw(s){let t,e;return t=new Wv({}),{c(){We(t.$$.fragment)},m(n,i){Se(t,n,i),e=!0},p:j,i(n){e||(kt(t.$$.fragment,n),e=!0)},o(n){Et(t.$$.fragment,n),e=!1},d(n){Oe(t,n)}}}function ow(s){let t,e;return t=new Iv({}),{c(){We(t.$$.fragment)},m(n,i){Se(t,n,i),e=!0},p:j,i(n){e||(kt(t.$$.fragment,n),e=!0)},o(n){Et(t.$$.fragment,n),e=!1},d(n){Oe(t,n)}}}function aw(s){let t,e;return t=new Ev({}),{c(){We(t.$$.fragment)},m(n,i){Se(t,n,i),e=!0},p:j,i(n){e||(kt(t.$$.fragment,n),e=!0)},o(n){Et(t.$$.fragment,n),e=!1},d(n){Oe(t,n)}}}function lw(s){let t,e,n,i;const r=[aw,ow,rw,iw,nw],o=[];function a(l,c){return l[0]==xt.HOME_SCREEN?0:l[0]==xt.ADD_RECORD?1:l[0]==xt.SYNC_DETAILS?2:l[0]==xt.RAW_DATA?3:l[0]==xt.EDIT_RECORD?4:-1}return~(e=a(s))&&(n=o[e]=r[e](s)),{c(){t=S("main"),n&&n.c(),k(t,"class","svelte-1t3yj0k")},m(l,c){st(l,t,c),~e&&o[e].m(t,null),i=!0},p(l,[c]){let h=e;e=a(l),e===h?~e&&o[e].p(l,c):(n&&(Gi(),Et(o[h],1,1,()=>{o[h]=null}),Zi()),~e?(n=o[e],n?n.p(l,c):(n=o[e]=r[e](l),n.c()),kt(n,1),n.m(t,null)):n=null)},i(l){i||(kt(n),i=!0)},o(l){Et(n),i=!1},d(l){l&&Q(t),~e&&o[e].d()}}}function cw(s,t,e){let n,i;return hs(s,Ue,r=>e(0,n=r)),hs(s,td,r=>e(1,i=r)),[n,i]}class hw extends Ee{constructor(t){super(),Me(this,t,cw,lw,ue,{})}}function Nc(s){let t,e,n,i,r,o,a,l,c,h,u,d,f,g;return{c(){t=S("main"),e=S("button"),n=S("span"),n.textContent="Home",r=R(),o=S("button"),a=S("span"),a.textContent="Add",c=R(),h=S("button"),u=S("span"),u.textContent="Sync",k(e,"class",i=Zt(s[1]==xt.HOME_SCREEN?"selected":"")+" svelte-148ktx5"),k(o,"class",l=Zt(s[1]==xt.ADD_RECORD?"selected":"")+" svelte-148ktx5"),k(h,"class",d=Zt(s[1]==xt.SYNC_DETAILS?"selected":"")+" svelte-148ktx5"),k(t,"class","svelte-148ktx5")},m(m,p){st(m,t,p),v(t,e),v(e,n),v(t,r),v(t,o),v(o,a),v(t,c),v(t,h),v(h,u),f||(g=[ht(e,"click",s[2](xt.HOME_SCREEN)),ht(o,"click",s[2](xt.ADD_RECORD)),ht(h,"click",s[2](xt.SYNC_DETAILS))],f=!0)},p(m,p){p&2&&i!==(i=Zt(m[1]==xt.HOME_SCREEN?"selected":"")+" svelte-148ktx5")&&k(e,"class",i),p&2&&l!==(l=Zt(m[1]==xt.ADD_RECORD?"selected":"")+" svelte-148ktx5")&&k(o,"class",l),p&2&&d!==(d=Zt(m[1]==xt.SYNC_DETAILS?"selected":"")+" svelte-148ktx5")&&k(h,"class",d)},d(m){m&&Q(t),f=!1,he(g)}}}function uw(s){let t,e=!s[0]&&Nc(s);return{c(){e&&e.c(),t=qi()},m(n,i){e&&e.m(n,i),st(n,t,i)},p(n,[i]){n[0]?e&&(e.d(1),e=null):e?e.p(n,i):(e=Nc(n),e.c(),e.m(t.parentNode,t))},i:j,o:j,d(n){n&&Q(t),e&&e.d(n)}}}function dw(s,t,e){let n,i;hs(s,$n,o=>e(0,n=o)),hs(s,Ue,o=>e(1,i=o));function r(o){return()=>{Ue.set(o)}}return[n,i,r]}class fw extends Ee{constructor(t){super(),Me(this,t,dw,uw,ue,{})}}function gw(s){let t,e;return{c(){t=S("main"),e=S("div"),k(e,"class","loginbtn svelte-85nb0j"),k(t,"class","svelte-85nb0j")},m(n,i){st(n,t,i),v(t,e),s[1](e)},p:j,i:j,o:j,d(n){n&&Q(t),s[1](null)}}}function mw(s,t,e){let n=globalThis.google,i;pd();async function r(a){const{data:l,error:c}=await te.auth.signInWithIdToken({provider:"google",token:a.credential});if(c)throw c;location.reload()}window.onload=function(){},ko(()=>{n.accounts.id.initialize({use_fedcm_for_prompt:!0,client_id:"221575063928-600fstdnkbu22ehiljl2a7ohck8e4i2r.apps.googleusercontent.com",callback:r}),n.accounts.id.renderButton(i,{theme:"outline",size:"medium"}),n.accounts.id.prompt()});function o(a){ze[a?"unshift":"push"](()=>{i=a,e(0,i)})}return[i,o]}class pw extends Ee{constructor(t){super(),Me(this,t,mw,gw,ue,{})}}function _w(s){return{c:j,m:j,p:j,i:j,o:j,d:j}}function bw(s){let t,e,n,i;const r=[vw,yw],o=[];function a(l,c){return l[1]?0:1}return t=a(s),e=o[t]=r[t](s),{c(){e.c(),n=qi()},m(l,c){o[t].m(l,c),st(l,n,c),i=!0},p(l,c){e.p(l,c)},i(l){i||(kt(e),i=!0)},o(l){Et(e),i=!1},d(l){l&&Q(n),o[t].d(l)}}}function yw(s){let t,e;return t=new pw({}),t.$on("loginDone",Sy),{c(){We(t.$$.fragment)},m(n,i){Se(t,n,i),e=!0},p:j,i(n){e||(kt(t.$$.fragment,n),e=!0)},o(n){Et(t.$$.fragment,n),e=!1},d(n){Oe(t,n)}}}function vw(s){let t,e,n,i,r,o=Qt.email!=s[0]&&$c(s);return e=new hw({}),i=new fw({}),{c(){o&&o.c(),t=R(),We(e.$$.fragment),n=R(),We(i.$$.fragment)},m(a,l){o&&o.m(a,l),st(a,t,l),Se(e,a,l),st(a,n,l),Se(i,a,l),r=!0},p(a,l){Qt.email!=a[0]?o?(o.p(a,l),l&1&&kt(o,1)):(o=$c(a),o.c(),kt(o,1),o.m(t.parentNode,t)):o&&(Gi(),Et(o,1,1,()=>{o=null}),Zi())},i(a){r||(kt(o),kt(e.$$.fragment,a),kt(i.$$.fragment,a),r=!0)},o(a){Et(o),Et(e.$$.fragment,a),Et(i.$$.fragment,a),r=!1},d(a){a&&(Q(t),Q(n)),o&&o.d(a),Oe(e,a),Oe(i,a)}}}function $c(s){let t,e,n,i;return{c(){t=S("div"),e=ot(s[0]),k(t,"class","currentAccount svelte-89f8od")},m(r,o){st(r,t,o),v(t,e),i=!0},p(r,o){(!i||o&1)&&Ht(e,r[0])},i(r){i||(r&&us(()=>{i&&(n||(n=Pi(t,oa,{},!0)),n.run(1))}),i=!0)},o(r){r&&(n||(n=Pi(t,oa,{},!1)),n.run(0)),i=!1},d(r){r&&Q(t),r&&n&&n.end()}}}function ww(s){return{c:j,m:j,p:j,i:j,o:j,d:j}}function xw(s){let t,e,n={ctx:s,current:null,token:null,hasCatch:!1,pending:ww,then:bw,catch:_w,value:1,blocks:[,,,]};return Br(ky(),n),{c(){t=S("main"),n.block.c(),k(t,"class","svelte-89f8od")},m(i,r){st(i,t,r),n.block.m(t,n.anchor=null),n.mount=()=>t,n.anchor=null,e=!0},p(i,[r]){s=i,Hr(n,s,r)},i(i){e||(kt(n.block),e=!0)},o(i){for(let r=0;r<3;r+=1){const o=n.blocks[r];Et(o)}e=!1},d(i){i&&Q(t),n.block.d(),n.token=null,n=null}}}function kw(s,t,e){let n;return hs(s,nr,i=>e(0,n=i)),ko(()=>{window.innerWidth>600&&(console.log("Moving to desktop"),location.href="/desktop.html")}),[n]}class Sw extends Ee{constructor(t){super(),Me(this,t,kw,xw,ue,{})}}new Sw({target:document.body,props:{}});
